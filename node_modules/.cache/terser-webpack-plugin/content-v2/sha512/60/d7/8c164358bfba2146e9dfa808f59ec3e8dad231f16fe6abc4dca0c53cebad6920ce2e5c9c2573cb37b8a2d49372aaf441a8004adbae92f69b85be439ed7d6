{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{\"+7AZ\":function(t,e,n){\"use strict\";n.r(e),n.d(e,\"__extends\",function(){return i}),n.d(e,\"__assign\",function(){return o}),n.d(e,\"__rest\",function(){return a}),n.d(e,\"__decorate\",function(){return s}),n.d(e,\"__param\",function(){return u}),n.d(e,\"__metadata\",function(){return c}),n.d(e,\"__awaiter\",function(){return l}),n.d(e,\"__generator\",function(){return h}),n.d(e,\"__exportStar\",function(){return f}),n.d(e,\"__values\",function(){return d}),n.d(e,\"__read\",function(){return p}),n.d(e,\"__spread\",function(){return y}),n.d(e,\"__await\",function(){return v}),n.d(e,\"__asyncGenerator\",function(){return m}),n.d(e,\"__asyncDelegator\",function(){return g}),n.d(e,\"__asyncValues\",function(){return b}),n.d(e,\"__makeTemplateObject\",function(){return w}),n.d(e,\"__importStar\",function(){return _}),n.d(e,\"__importDefault\",function(){return E});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&\"function\"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function u(t,e){return function(n,r){e(n,r,t)}}function c(t,e){if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})}function h(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function f(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function d(t){var e=\"function\"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function p(t,e){var n=\"function\"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}function v(t){return this instanceof v?(this.v=t,this):new v(t)}function m(t,e,n){if(!Symbol.asyncIterator)throw new TypeError(\"Symbol.asyncIterator is not defined.\");var r,i=n.apply(t,e||[]),o=[];return r={},a(\"next\"),a(\"throw\"),a(\"return\"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||s(t,e)})})}function s(t,e){try{(n=i[t](e)).value instanceof v?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function u(t){s(\"next\",t)}function c(t){s(\"throw\",t)}function l(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}}function g(t){var e,n;return e={},r(\"next\"),r(\"throw\",function(t){throw t}),r(\"return\"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:v(t[r](e)),done:\"return\"===r}:i?i(e):e}:i}}function b(t){if(!Symbol.asyncIterator)throw new TypeError(\"Symbol.asyncIterator is not defined.\");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=d(t),e={},r(\"next\"),r(\"throw\"),r(\"return\"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise(function(r,i){!function(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)}(r,i,(e=t[n](e)).done,e.value)})}}}function w(t,e){return Object.defineProperty?Object.defineProperty(t,\"raw\",{value:e}):t.raw=e,t}function _(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function E(t){return t&&t.__esModule?t:{default:t}}},\"+tJ4\":function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return r});var r=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}}},\"+umK\":function(t,e,n){\"use strict\";function r(){}n.d(e,\"a\",function(){return r})},\"/WYv\":function(t,e,n){\"use strict\";function r(t){return!!t&&\"function\"!=typeof t.subscribe&&\"function\"==typeof t.then}n.d(e,\"a\",function(){return r})},0:function(t,e,n){t.exports=n(\"zUnb\")},\"0/uQ\":function(t,e,n){\"use strict\";var r=n(\"6blF\"),i=n(\"Fxb1\"),o=n(\"pugT\"),a=n(\"xTla\"),s=n(\"JF+6\"),u=n(\"En8+\"),c=n(\"/WYv\"),l=n(\"2ePl\");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&\"function\"==typeof t[a.a]}(t))return function(t,e){return new r.a(function(n){var r=new o.a;return r.add(e.schedule(function(){var i=t[a.a]();r.add(i.subscribe({next:function(t){r.add(e.schedule(function(){return n.next(t)}))},error:function(t){r.add(e.schedule(function(){return n.error(t)}))},complete:function(){r.add(e.schedule(function(){return n.complete()}))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(function(n){var r=new o.a;return r.add(e.schedule(function(){return t.then(function(t){r.add(e.schedule(function(){n.next(t),r.add(e.schedule(function(){return n.complete()}))}))},function(t){r.add(e.schedule(function(){return n.error(t)}))})})),r})}(t,e);if(Object(l.a)(t))return Object(s.a)(t,e);if(function(t){return t&&\"function\"==typeof t[u.a]}(t)||\"string\"==typeof t)return function(t,e){if(!t)throw new Error(\"Iterable cannot be null\");return new r.a(function(n){var r,i=new o.a;return i.add(function(){r&&\"function\"==typeof r.return&&r.return()}),i.add(e.schedule(function(){r=t[u.a](),i.add(e.schedule(function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(o){return void n.error(o)}e?n.complete():(n.next(t),this.schedule())}}))})),i})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+\" is not observable\")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}n.d(e,\"a\",function(){return h})},\"15JJ\":function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return c});var r=n(\"mrSG\"),i=n(\"MGBS\"),o=n(\"rPjj\"),a=n(\"zotm\"),s=n(\"67Y/\"),u=n(\"0/uQ\");function c(t,e){return\"function\"==typeof e?function(n){return n.pipe(c(function(n,r){return Object(u.a)(t(n,r)).pipe(Object(s.a)(function(t,i){return e(n,t,r,i)}))}))}:function(e){return e.lift(new l(t))}}var l=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.project))},t}(),h=function(t){function e(e,n){var r=t.call(this,e)||this;return r.project=n,r.index=0,r}return r.d(e,t),e.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=this.innerSubscription;r&&r.unsubscribe();var i=new o.a(this,void 0,void 0);this.destination.add(i),this.innerSubscription=Object(a.a)(this,t,e,n,i)},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e}(i.a)},\"26FU\":function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return a});var r=n(\"mrSG\"),i=n(\"K9Ia\"),o=n(\"8g8A\"),a=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return r.d(e,t),Object.defineProperty(e.prototype,\"value\",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new o.a;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(i.a)},\"2Bdj\":function(t,e,n){\"use strict\";function r(t){return\"function\"==typeof t}n.d(e,\"a\",function(){return r})},\"2ePl\":function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return r});var r=function(t){return t&&\"number\"==typeof t.length&&\"function\"!=typeof t}},\"30Go\":function(t,e,n){\"use strict\";n.r(e),n.d(e,\"__extends\",function(){return i}),n.d(e,\"__assign\",function(){return o}),n.d(e,\"__rest\",function(){return a}),n.d(e,\"__decorate\",function(){return s}),n.d(e,\"__param\",function(){return u}),n.d(e,\"__metadata\",function(){return c}),n.d(e,\"__awaiter\",function(){return l}),n.d(e,\"__generator\",function(){return h}),n.d(e,\"__exportStar\",function(){return f}),n.d(e,\"__values\",function(){return d}),n.d(e,\"__read\",function(){return p}),n.d(e,\"__spread\",function(){return y}),n.d(e,\"__await\",function(){return v}),n.d(e,\"__asyncGenerator\",function(){return m}),n.d(e,\"__asyncDelegator\",function(){return g}),n.d(e,\"__asyncValues\",function(){return b}),n.d(e,\"__makeTemplateObject\",function(){return w}),n.d(e,\"__importStar\",function(){return _}),n.d(e,\"__importDefault\",function(){return E});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&\"function\"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function u(t,e){return function(n,r){e(n,r,t)}}function c(t,e){if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})}function h(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function f(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function d(t){var e=\"function\"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function p(t,e){var n=\"function\"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}function v(t){return this instanceof v?(this.v=t,this):new v(t)}function m(t,e,n){if(!Symbol.asyncIterator)throw new TypeError(\"Symbol.asyncIterator is not defined.\");var r,i=n.apply(t,e||[]),o=[];return r={},a(\"next\"),a(\"throw\"),a(\"return\"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||s(t,e)})})}function s(t,e){try{(n=i[t](e)).value instanceof v?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function u(t){s(\"next\",t)}function c(t){s(\"throw\",t)}function l(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}}function g(t){var e,n;return e={},r(\"next\"),r(\"throw\",function(t){throw t}),r(\"return\"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:v(t[r](e)),done:\"return\"===r}:i?i(e):e}:i}}function b(t){if(!Symbol.asyncIterator)throw new TypeError(\"Symbol.asyncIterator is not defined.\");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=d(t),e={},r(\"next\"),r(\"throw\"),r(\"return\"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise(function(r,i){!function(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)}(r,i,(e=t[n](e)).done,e.value)})}}}function w(t,e){return Object.defineProperty?Object.defineProperty(t,\"raw\",{value:e}):t.raw=e,t}function _(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function E(t){return t&&t.__esModule?t:{default:t}}},\"4pTB\":function(t,e){},\"67Y/\":function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return o});var r=n(\"mrSG\"),i=n(\"FFOo\");function o(t,e){return function(n){if(\"function\"!=typeof t)throw new TypeError(\"argument is not a function. Are you looking for `mapTo()`?\");return n.lift(new a(t,e))}}var a=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.project,this.thisArg))},t}(),s=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return r.d(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)},e}(i.a)},\"6Joi\":function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r,i=(r=n(\"wj3C\"))&&\"object\"==typeof r&&\"default\"in r?r.default:r,o=n(\"q/0M\"),a=n(\"os0x\"),s=n(\"zVF4\"),u=n(\"x7I3\"),c=i.SDK_VERSION,l=new o.Logger(\"@firebase/firestore\"),h=function(t){return t[t.DEBUG=0]=\"DEBUG\",t[t.ERROR=1]=\"ERROR\",t[t.SILENT=2]=\"SILENT\",t}({});function f(){return l.logLevel===o.LogLevel.DEBUG?h.DEBUG:l.logLevel===o.LogLevel.SILENT?h.SILENT:h.ERROR}function d(t){switch(t){case h.DEBUG:l.logLevel=o.LogLevel.DEBUG;break;case h.ERROR:l.logLevel=o.LogLevel.ERROR;break;case h.SILENT:l.logLevel=o.LogLevel.SILENT;break;default:l.error(\"Firestore (\"+c+\"): Invalid value passed to `setLogLevel`\")}}function p(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(l.logLevel<=o.LogLevel.DEBUG){var i=n.map(v);l.debug.apply(l,[\"Firestore (\"+c+\") [\"+t+\"]: \"+e].concat(i))}}function y(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(l.logLevel<=o.LogLevel.ERROR){var r=e.map(v);l.error.apply(l,[\"Firestore (\"+c+\"): \"+t].concat(r))}}function v(t){if(\"string\"==typeof t)return t;var e=b.getPlatform();try{return e.formatJSON(t)}catch(n){return t}}function m(t){var e=\"FIRESTORE (\"+c+\") INTERNAL ASSERTION FAILED: \"+t;throw y(e),new Error(e)}function g(t,e){t||m(e)}var b=function(){function t(){}return t.setPlatform=function(e){t.platform&&m(\"Platform already defined\"),t.platform=e},t.getPlatform=function(){return t.platform||m(\"Platform not set\"),t.platform},t}();function w(){return b.getPlatform().emptyByteString}var _={OK:\"ok\",CANCELLED:\"cancelled\",UNKNOWN:\"unknown\",INVALID_ARGUMENT:\"invalid-argument\",DEADLINE_EXCEEDED:\"deadline-exceeded\",NOT_FOUND:\"not-found\",ALREADY_EXISTS:\"already-exists\",PERMISSION_DENIED:\"permission-denied\",UNAUTHENTICATED:\"unauthenticated\",RESOURCE_EXHAUSTED:\"resource-exhausted\",FAILED_PRECONDITION:\"failed-precondition\",ABORTED:\"aborted\",OUT_OF_RANGE:\"out-of-range\",UNIMPLEMENTED:\"unimplemented\",INTERNAL:\"internal\",UNAVAILABLE:\"unavailable\",DATA_LOSS:\"data-loss\"},E=function(t){function e(e,n){var r=t.call(this,n)||this;return r.code=e,r.message=n,r.name=\"FirebaseError\",r.toString=function(){return r.name+\": [code=\"+r.code+\"]: \"+r.message},r}return a.__extends(e,t),e}(Error);function S(t,e){function n(){var t=\"This constructor is private.\";throw e&&(t+=\" \",t+=e),new E(_.INVALID_ARGUMENT,t)}for(var r in n.prototype=t.prototype,t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}function C(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function T(t,e){return void 0!==t?t:e}function I(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Number(n);isNaN(r)||e(r,t[n])}}function k(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function O(t){for(var e in g(null!=t&&\"object\"==typeof t,\"isEmpty() expects object parameter.\"),t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function N(t,e){if(0!==e.length)throw new E(_.INVALID_ARGUMENT,\"Function \"+t+\"() does not support arguments, but was called with \"+H(e.length,\"argument\")+\".\")}function A(t,e,n){if(e.length!==n)throw new E(_.INVALID_ARGUMENT,\"Function \"+t+\"() requires \"+H(n,\"argument\")+\", but was called with \"+H(e.length,\"argument\")+\".\")}function D(t,e,n){if(e.length<n)throw new E(_.INVALID_ARGUMENT,\"Function \"+t+\"() requires at least \"+H(n,\"argument\")+\", but was called with \"+H(e.length,\"argument\")+\".\")}function x(t,e,n,r){if(e.length<n||e.length>r)throw new E(_.INVALID_ARGUMENT,\"Function \"+t+\"() requires between \"+n+\" and \"+r+\" arguments, but was called with \"+H(e.length,\"argument\")+\".\")}function R(t,e,n,r){F(t,e,z(n)+\" argument\",r)}function P(t,e,n,r){void 0!==r&&R(t,e,n,r)}function M(t,e,n,r){F(t,e,n+\" option\",r)}function j(t,e,n,r){void 0!==r&&M(t,e,n,r)}function L(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(U(u))}var c=U(r);throw new E(_.INVALID_ARGUMENT,\"Invalid value \"+c+\" provided to function \"+t+'() for option \"'+n+'\". Acceptable values: '+o.join(\", \"))}(t,0,n,r,i)}function F(t,e,n,r){if(!(\"object\"===e?q(r):\"non-empty string\"===e?\"string\"==typeof r&&\"\"!==r:typeof r===e)){var i=U(r);throw new E(_.INVALID_ARGUMENT,\"Function \"+t+\"() requires its \"+n+\" to be of type \"+e+\", but it was: \"+i)}}function q(t){return\"object\"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function U(t){if(void 0===t)return\"undefined\";if(null===t)return\"null\";if(\"string\"==typeof t)return t.length>20&&(t=t.substring(0,20)+\"...\"),JSON.stringify(t);if(\"number\"==typeof t||\"boolean\"==typeof t)return\"\"+t;if(\"object\"==typeof t){if(t instanceof Array)return\"an array\";var e=function(t){if(t.constructor){var e=/function\\s+([^\\s(]+)\\s*\\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?\"a custom \"+e+\" object\":\"an object\"}return\"function\"==typeof t?\"a function\":m(\"Unknown wrong type: \"+typeof t)}function V(t,e,n){if(void 0===n)throw new E(_.INVALID_ARGUMENT,\"Function \"+t+\"() requires a valid \"+z(e)+\" argument, but it was undefined.\")}function B(t,e,n){k(e,function(e,r){if(n.indexOf(e)<0)throw new E(_.INVALID_ARGUMENT,\"Unknown option '\"+e+\"' passed to function \"+t+\"(). Available options: \"+n.join(\", \"))})}function W(t,e,n,r){var i=U(r);return new E(_.INVALID_ARGUMENT,\"Function \"+t+\"() requires its \"+z(n)+\" argument to be a \"+e+\", but it was: \"+i)}function z(t){switch(t){case 1:return\"first\";case 2:return\"second\";case 3:return\"third\";default:return t+\"th\"}}function H(t,e){return t+\" \"+e+(1===t?\"\":\"s\")}var Q=function(){function t(){}return t.newId=function(){for(var t=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\",e=\"\",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return g(20===e.length,\"Invalid auto ID: \"+e),e},t}();function K(t,e){return t<e?-1:t>e?1:0}function G(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].isEqual(e[n]))return!1;return!0}function Y(t){return t+\"\\0\"}function X(){if(\"undefined\"==typeof Uint8Array)throw new E(_.UNIMPLEMENTED,\"Uint8Arrays are not available in this environment.\")}function J(){if(!b.getPlatform().base64Available)throw new E(_.UNIMPLEMENTED,\"Blobs are unavailable in Firestore in this environment.\")}var Z,$=function(){function t(t){J(),this._binaryString=t}return t.fromBase64String=function(e){A(\"Blob.fromBase64String\",arguments,1),R(\"Blob.fromBase64String\",\"string\",1,e),J();try{return new t(b.getPlatform().atob(e))}catch(n){throw new E(_.INVALID_ARGUMENT,\"Failed to construct Blob from Base64 string: \"+n)}},t.fromUint8Array=function(e){if(A(\"Blob.fromUint8Array\",arguments,1),X(),!(e instanceof Uint8Array))throw W(\"Blob.fromUint8Array\",\"Uint8Array\",1,e);return new t(Array.prototype.map.call(e,function(t){return String.fromCharCode(t)}).join(\"\"))},t.prototype.toBase64=function(){return A(\"Blob.toBase64\",arguments,0),J(),b.getPlatform().btoa(this._binaryString)},t.prototype.toUint8Array=function(){A(\"Blob.toUint8Array\",arguments,0),X();for(var t=new Uint8Array(this._binaryString.length),e=0;e<this._binaryString.length;e++)t[e]=this._binaryString.charCodeAt(e);return t},t.prototype.toString=function(){return\"Blob(base64: \"+this.toBase64()+\")\"},t.prototype.isEqual=function(t){return this._binaryString===t._binaryString},t.prototype._compareTo=function(t){return K(this._binaryString,t._binaryString)},t}(),tt=S($,\"Use Blob.fromUint8Array() or Blob.fromBase64String() instead.\"),et=function(){return function(t,e,n,r,i){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i}}(),nt=\"(default)\",rt=function(){function t(t,e){this.projectId=t,this.database=e||nt}return Object.defineProperty(t.prototype,\"isDefaultDatabase\",{get:function(){return this.database===nt},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.compareTo=function(t){return K(this.projectId,t.projectId)||K(this.database,t.database)},t}(),it=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.setPreviousValue(t)},this.writeNewSequenceNumber=function(t){return e.writeSequenceNumber(t)})}return t.prototype.setPreviousValue=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(t),t},t.INVALID=-1,t}(),ot=function(){function t(t,e,n){this.init(t,e,n)}return t.prototype.init=function(t,e,n){void 0===e?e=0:e>t.length&&m(\"offset \"+e+\" out of range \"+t.length),void 0===n?n=t.length-e:n>t.length-e&&m(\"length \"+n+\" out of range \"+(t.length-e)),this.segments=t,this.offset=e,this.len=n},t.prototype.construct=function(t,e,n){var r=Object.create(Object.getPrototypeOf(this));return r.init(t,e,n),r},Object.defineProperty(t.prototype,\"length\",{get:function(){return this.len},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):\"string\"==typeof e?n.push(e):m(\"Unknown parameter type for Path.child(): \"+e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return g(this.length>=(t=void 0===t?1:t),\"Can't call popFirst() with less segments\"),this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return g(!this.isEmpty(),\"Can't call popLast() on empty path\"),this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return g(!this.isEmpty(),\"Can't call firstSegment() on empty path\"),this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return g(t<this.length,\"Index out of range\"),this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),at=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.canonicalString=function(){return this.toArray().join(\"/\")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(t){if(t.indexOf(\"//\")>=0)throw new E(_.INVALID_ARGUMENT,\"Invalid path (\"+t+\"). Paths must not contain // in them.\");return new e(t.split(\"/\").filter(function(t){return t.length>0}))},e.EMPTY_PATH=new e([]),e}(ot),st=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ut=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.isValidIdentifier=function(t){return st.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(\"\\\\\",\"\\\\\\\\\").replace(\"`\",\"\\\\`\"),e.isValidIdentifier(t)||(t=\"`\"+t+\"`\"),t}).join(\".\")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&\"__name__\"===this.get(0)},e.keyField=function(){return new e([\"__name__\"])},e.fromServerFormat=function(t){for(var n=[],r=\"\",i=0,o=function(){if(0===r.length)throw new E(_.INVALID_ARGUMENT,\"Invalid field path (\"+t+\"). Paths must not be empty, begin with '.', end with '.', or contain '..'\");n.push(r),r=\"\"},a=!1;i<t.length;){var s=t[i];if(\"\\\\\"===s){if(i+1===t.length)throw new E(_.INVALID_ARGUMENT,\"Path has trailing escape character: \"+t);var u=t[i+1];if(\"\\\\\"!==u&&\".\"!==u&&\"`\"!==u)throw new E(_.INVALID_ARGUMENT,\"Path has invalid escape sequence: \"+t);r+=u,i+=2}else\"`\"===s?(a=!a,i++):\".\"!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new E(_.INVALID_ARGUMENT,\"Unterminated ` in path: \"+t);return new e(n)},e.EMPTY_PATH=new e([]),e}(ot),ct=function(){function t(e){this.path=e,g(t.isDocumentKey(e),\"Invalid DocumentKey with an odd number of segments: \"+e.toArray().join(\"/\"))}return t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===at.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return at.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new at(e.slice()))},t.fromPathString=function(e){return new t(at.fromString(e))},t.EMPTY=new t(new at([])),t}(),lt=function(){return function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}}();!function(t){t.All=\"all\",t.ListenStreamIdle=\"listen_stream_idle\",t.ListenStreamConnectionBackoff=\"listen_stream_connection_backoff\",t.WriteStreamIdle=\"write_stream_idle\",t.WriteStreamConnectionBackoff=\"write_stream_connection_backoff\",t.OnlineStateTimeout=\"online_state_timeout\",t.ClientMetadataRefresh=\"client_metadata_refresh\",t.LruGarbageCollection=\"lru_garbage_collection\"}(Z||(Z={}));var ht=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new lt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new E(_.CANCELLED,\"Operation cancelled\"+(t?\": \"+t:\"\"))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}(),ft=function(){function t(){this.tail=Promise.resolve(),this.delayedOperations=[],this.operationInProgress=!1}return t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueue=function(t){var e=this;this.verifyNotFailed();var n=this.tail.then(function(){return e.operationInProgress=!0,t().catch(function(t){e.failure=t,e.operationInProgress=!1;var n=t.stack||t.message||\"\";throw y(\"INTERNAL UNHANDLED ERROR: \",n),n.indexOf(\"Firestore Test Simulated Error\")<0&&setTimeout(function(){throw t},0),t}).then(function(t){return e.operationInProgress=!1,t})});return this.tail=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.verifyNotFailed(),g(e>=0,\"Attempted to schedule an operation with a negative delay of \"+e),g(!this.containsDelayedOperation(t),\"Attempted to schedule multiple operations with timer id \"+t+\".\");var i=ht.createAndSchedule(this,t,e,n,function(t){return r.removeDelayedOperation(t)});return this.delayedOperations.push(i),i},t.prototype.verifyNotFailed=function(){this.failure&&m(\"AsyncQueue is already failed: \"+(this.failure.stack||this.failure.message))},t.prototype.verifyOperationInProgress=function(){g(this.operationInProgress,\"verifyOpInProgress() called when no op in progress on this queue.\")},t.prototype.drain=function(){return this.enqueue(function(){return Promise.resolve()})},t.prototype.containsDelayedOperation=function(t){for(var e=0,n=this.delayedOperations;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.runDelayedOperationsEarly=function(t){var e=this;return this.drain().then(function(){g(t===Z.All||e.containsDelayedOperation(t),\"Attempted to drain to missing operation \"+t),e.delayedOperations.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),t!==Z.All&&i.timerId===t)break}return e.drain()})},t.prototype.removeDelayedOperation=function(t){var e=this.delayedOperations.indexOf(t);g(e>=0,\"Delayed operation not found.\"),this.delayedOperations.splice(e,1)},t}(),dt=\"\\x01\",pt=\"\\x01\",yt=\"\\x10\",vt=\"\\x11\";function mt(t){for(var e=\"\",n=0;n<t.length;n++)e.length>0&&(e=bt(e)),e=gt(t.get(n),e);return bt(e)}function gt(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case\"\\0\":n+=dt+yt;break;case dt:n+=dt+vt;break;default:n+=o}}return n}function bt(t){return t+dt+pt}function wt(t){var e=t.length;if(g(e>=2,\"Invalid path \"+t),2===e)return g(t.charAt(0)===dt&&t.charAt(1)===pt,\"Non-empty path \"+t+\" had length 2\"),at.EMPTY_PATH;for(var n=e-2,r=[],i=\"\",o=0;o<e;){var a=t.indexOf(dt,o);switch((a<0||a>n)&&m('Invalid encoded resource path: \"'+t+'\"'),t.charAt(a+1)){case pt:var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=\"\"),r.push(u);break;case yt:i+=t.substring(o,a),i+=\"\\0\";break;case vt:i+=t.substring(o,a+1);break;default:m('Invalid encoded resource path: \"'+t+'\"')}o=a+2}return new at(r)}var _t=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new E(_.INVALID_ARGUMENT,\"Timestamp nanoseconds out of range: \"+e);if(e>=1e9)throw new E(_.INVALID_ARGUMENT,\"Timestamp nanoseconds out of range: \"+e);if(t<-62135596800)throw new E(_.INVALID_ARGUMENT,\"Timestamp seconds out of range: \"+t);if(t>=253402300800)throw new E(_.INVALID_ARGUMENT,\"Timestamp seconds out of range: \"+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?K(this.nanoseconds,t.nanoseconds):K(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return\"Timestamp(seconds=\"+this.seconds+\", nanoseconds=\"+this.nanoseconds+\")\"},t}(),Et=function(){function t(t){this.timestamp=t}return t.fromMicroseconds=function(e){var n=Math.floor(e/1e6);return new t(new _t(n,e%1e6*1e3))},t.fromTimestamp=function(e){return new t(e)},t.forDeletedDoc=function(){return t.MIN},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return\"SnapshotVersion(\"+this.timestamp.toString()+\")\"},t.prototype.toTimestamp=function(){return this.timestamp},t.MIN=new t(new _t(0,0)),t}(),St=function(){function t(t,e){this.comparator=t,this.root=e||Tt.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Tt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tt.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,\"size\",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+\":\"+n),!1}),\"{\"+t.join(\", \")+\"}\"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Ct(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Ct(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Ct(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Ct(this.root,t,this.comparator,!0)},t}(),Ct=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){g(this.nodeStack.length>0,\"getNext() called on iterator when hasNext() is false.\");var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Tt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw m(\"Red node has red child(\"+this.key+\",\"+this.value+\")\");if(this.right.isRed())throw m(\"Right child of (\"+this.key+\",\"+this.value+\") is red\");var t=this.left.check();if(t!==this.right.check())throw m(\"Black depths differ\");return t+(this.isRed()?0:1)},t.EMPTY=null,t.RED=!0,t.BLACK=!1,t}(),It=function(){function t(){this.size=0}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Tt(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}();Tt.EMPTY=new It;var kt=function(){function t(t){this.comparator=t,this.data=new St(this.comparator)}return t.fromMapKeys=function(e){var n=new t(e.comparator);return e.forEach(function(t){n=n.add(t)}),n},t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,\"size\",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Ot(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Ot(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),\"SortedSet(\"+t.toString()+\")\"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Ot=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Nt=new St(ct.comparator);function At(){return Nt}function Dt(){return At()}var xt=new St(ct.comparator);function Rt(){return xt}var Pt=new St(ct.comparator);function Mt(){return Pt}var jt=new kt(ct.comparator);function Lt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=jt,r=0,i=t;r<i.length;r++)n=n.add(i[r]);return n}var Ft=new kt(K);function qt(){return Ft}var Ut=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r,g(r.length>0,\"Cannot create an empty mutation batch\")}return t.prototype.applyToRemoteDocument=function(t,e,n){e&&g(e.key.isEqual(t),\"applyToRemoteDocument: key \"+t+\" should match maybeDoc key\\n        \"+e.key);var r=n.mutationResults;g(r.length===this.mutations.length,\"Mismatch between mutations length\\n      (\"+this.mutations.length+\") and mutation results length\\n      (\"+r.length+\").\");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=o.applyToRemoteDocument(e,r[i]))}return e},t.prototype.applyToLocalView=function(t,e){e&&g(e.key.isEqual(t),\"applyToLocalDocument: key \"+t+\" should match maybeDoc key\\n        \"+e.key);for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=s.applyToLocalView(e,e,this.localWriteTime));for(var i=e,o=0,a=this.mutations;o<a.length;o++){var s;(s=a[o]).key.isEqual(t)&&(e=s.applyToLocalView(e,i,this.localWriteTime))}return e},t.prototype.applyToLocalDocumentSet=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.applyToLocalView(r.key,t.get(r.key));i&&(n=n.insert(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Lt())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&G(this.mutations,t.mutations)&&G(this.baseMutations,t.baseMutations)},t}(),Vt=function(){function t(t,e,n,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return t.from=function(e,n,r,i){g(e.mutations.length===r.length,\"Mutations sent \"+e.mutations.length+\" must equal results received \"+r.length);for(var o=Mt(),a=e.mutations,s=0;s<a.length;s++)o=o.insert(a[s].key,r[s].version);return new t(e,n,r,i,o)},t}(),Bt=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&m(\"Called next() or catch() twice for PersistencePromise\"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(r){return t.reject(r)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Wt=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}return t.forUser=function(e,n,r,i){return g(\"\"!==e.uid,\"UserID must not be an empty string.\"),new t(e.isAuthenticated()?e.uid:\"\",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Kt(t).iterate({index:Re.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.acknowledgeBatch=function(t,e,n){return this.getMutationQueueMetadata(t).next(function(e){return e.lastStreamToken=Qt(n),Yt(t).put(e)})},t.prototype.getLastStreamToken=function(t){return this.getMutationQueueMetadata(t).next(function(t){return t.lastStreamToken})},t.prototype.setLastStreamToken=function(t,e){return this.getMutationQueueMetadata(t).next(function(n){return n.lastStreamToken=Qt(e),Yt(t).put(n)})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Gt(t),a=Kt(t);return a.add({}).next(function(s){g(\"number\"==typeof s,\"Auto-generated key is not a number\");var u=new Ut(s,e,n,r),c=i.serializer.toDbMutationBatch(i.userId,u);i.documentKeysByBatchId[s]=u.keys();for(var l=[],h=0,f=r;h<f.length;h++){var d=f[h],p=Pe.key(i.userId,d.key.path,s);l.push(a.put(c)),l.push(o.put(p,Pe.PLACEHOLDER)),l.push(i.indexManager.addToCollectionParentIndex(t,d.key.path.popLast()))}return Bt.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Kt(t).get(e).next(function(t){return t?(g(t.userId===n.userId,\"Unexpected user '\"+t.userId+\"' for mutation batch \"+e),n.serializer.fromDbMutationBatch(t)):null})},t.prototype.lookupMutationKeys=function(t,e){var n=this;return this.documentKeysByBatchId[e]?Bt.resolve(this.documentKeysByBatchId[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.documentKeysByBatchId[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Kt(t).iterate({index:Re.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(g(e.batchId>=r,\"Should have found mutation after \"+r),o=n.serializer.fromDbMutationBatch(e)),i.done()}).next(function(){return o})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Kt(t).loadAll(Re.userMutationsIndex,n).next(function(t){return t.map(function(t){return e.serializer.fromDbMutationBatch(t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Pe.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Gt(t).iterate({range:i},function(r,i,a){var s=r[0],u=r[2],c=wt(r[1]);if(s===n.userId&&e.path.isEqual(c))return Kt(t).get(u).next(function(t){if(!t)throw m(\"Dangling document-mutation reference found: \"+r+\" which points to \"+u);g(t.userId===n.userId,\"Unexpected user '\"+t.userId+\"' for mutation batch \"+u),o.push(n.serializer.fromDbMutationBatch(t))});a.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new kt(K),i=[];return e.forEach(function(e){var o=Pe.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=Gt(t).iterate({range:a},function(t,i,o){var a=t[0],s=t[2],u=wt(t[1]);a===n.userId&&e.path.isEqual(u)?r=r.add(s):o.done()});i.push(s)}),Bt.waitFor(i).next(function(){return n.lookupMutationBatches(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this;g(!e.isDocumentQuery(),\"Document queries shouldn't go down this path\"),g(!e.isCollectionGroupQuery(),\"CollectionGroup queries should be handled in LocalDocumentsView\");var r=e.path,i=r.length+1,o=Pe.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new kt(K);return Gt(t).iterate({range:a},function(t,e,o){var a=t[0],u=t[2],c=wt(t[1]);a===n.userId&&r.isPrefixOf(c)?c.length===i&&(s=s.add(u)):o.done()}).next(function(){return n.lookupMutationBatches(t,s)})},t.prototype.lookupMutationBatches=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(Kt(t).get(e).next(function(t){if(null===t)throw m(\"Dangling document-mutation reference found, which points to \"+e);g(t.userId===n.userId,\"Unexpected user '\"+t.userId+\"' for mutation batch \"+e),r.push(n.serializer.fromDbMutationBatch(t))}))}),Bt.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return Ht(t.simpleDbTransaction,this.userId,e).next(function(r){return n.removeCachedMutationKeys(e.batchId),Bt.forEach(r,function(e){return n.referenceDelegate.removeMutationReference(t,e)})})},t.prototype.removeCachedMutationKeys=function(t){delete this.documentKeysByBatchId[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Bt.resolve();var r=IDBKeyRange.lowerBound(Pe.prefixForUser(e.userId)),i=[];return Gt(t).iterate({range:r},function(t,n,r){if(t[0]===e.userId){var o=wt(t[1]);i.push(o)}else r.done()}).next(function(){g(0===i.length,\"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: \"+i.map(function(t){return t.canonicalString()}))})})},t.prototype.containsKey=function(t,e){return zt(t,this.userId,e)},t.prototype.getMutationQueueMetadata=function(t){var e=this;return Yt(t).get(this.userId).next(function(t){return t||new xe(e.userId,-1,\"\")})},t}();function zt(t,e,n){var r=Pe.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Gt(t).iterate({range:o,keysOnly:!0},function(t,n,r){t[0]===e&&t[1]===i&&(a=!0),r.done()}).next(function(){return a})}function Ht(t,e,n){var r=t.store(Re.store),i=t.store(Pe.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.iterate({range:a},function(t,e,n){return s++,n.delete()});o.push(u.next(function(){g(1===s,\"Dangling document-mutation reference found: Missing batch \"+n.batchId)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=Pe.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return Bt.waitFor(o).next(function(){return c})}function Qt(t){return t instanceof Uint8Array?(g(\"YES\"===process.env.USE_MOCK_PERSISTENCE,\"Persisting non-string stream tokens is only supported with mock persistence.\"),t.toString()):t}function Kt(t){return ln.getStore(t,Re.store)}function Gt(t){return ln.getStore(t,Pe.store)}function Yt(t){return ln.getStore(t,xe.store)}var Xt=1,Jt=function(t){return t[t.QueryCache=0]=\"QueryCache\",t[t.SyncEngine=1]=\"SyncEngine\",t}({}),Zt=function(){function t(t,e){this.generatorId=t,g((t&Xt)===t,\"Generator ID \"+t+\" contains more than \"+Xt+\" reserved bits\"),this.seek(void 0!==e?e:this.generatorId)}return t.prototype.next=function(){var t=this.nextId;return this.nextId+=1<<Xt,t},t.prototype.after=function(t){return this.seek(t+(1<<Xt)),this.next()},t.prototype.seek=function(t){g((t&Xt)===this.generatorId,\"Cannot supply target ID from different generator ID\"),this.nextId=t},t.forQueryCache=function(){return new t(Jt.QueryCache,2)},t.forSyncEngine=function(){return new t(Jt.SyncEngine)},t}(),$t=\"SimpleDb\",te=function(){function t(e){this.db=e,12.2===t.getIOSVersion(s.getUA())&&y(\"Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.\")}return t.openOrCreate=function(e,n,r){return g(t.isAvailable(),\"IndexedDB not supported in current environment.\"),p($t,\"Opening database:\",e),new Bt(function(i,o){var a=window.indexedDB.open(e,n);a.onsuccess=function(e){i(new t(e.target.result))},a.onblocked=function(){o(new E(_.FAILED_PRECONDITION,\"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed.\"))},a.onerror=function(t){var e=t.target.error;o(\"VersionError\"===e.name?new E(_.FAILED_PRECONDITION,\"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.\"):e)},a.onupgradeneeded=function(t){p($t,'Database \"'+e+'\" requires upgrade from version:',t.oldVersion);var n=t.target.result,i=new ne(a.transaction);r.createOrUpgrade(n,i,t.oldVersion,Oe).next(function(){p($t,\"Database upgrade to version \"+Oe+\" complete\")})}}).toPromise()},t.delete=function(t){return p($t,\"Removing database:\",t),ie(window.indexedDB.deleteDatabase(t)).toPromise()},t.isAvailable=function(){if(\"undefined\"==typeof window||null==window.indexedDB)return!1;if(void 0===window.navigator)return\"YES\"===process.env.USE_MOCK_PERSISTENCE;var e=s.getUA(),n=t.getIOSVersion(e),r=0<n&&n<10,i=t.getAndroidVersion(e),o=0<i&&i<4.5;return!(e.indexOf(\"MSIE \")>0||e.indexOf(\"Trident/\")>0||e.indexOf(\"Edge/\")>0||r||o)},t.getStore=function(t,e){return t.store(e)},t.getIOSVersion=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\\d_]+)/i),n=e?e[1].split(\"_\").slice(0,2).join(\".\"):\"-1\";return Number(n)},t.getAndroidVersion=function(t){var e=t.match(/Android ([\\d.]+)/i),n=e?e[1].split(\".\").slice(0,2).join(\".\"):\"-1\";return Number(n)},t.prototype.setVersionChangeListener=function(t){this.db.onversionchange=function(e){return t(e)}},t.prototype.runTransaction=function(t,e,n){var r=ne.open(this.db,t,e),i=n(r).catch(function(t){return r.abort(t),Bt.reject(t)}).toPromise();return i.catch(function(){}),r.completionPromise.then(function(){return i})},t.prototype.close=function(){this.db.close()},t}(),ee=function(){function t(t){this.dbCursor=t,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(t.prototype,\"isDone\",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"skipToKey\",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"cursor\",{set:function(t){this.dbCursor=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.shouldStop=!0},t.prototype.skip=function(t){this.nextKey=t},t.prototype.delete=function(){return ie(this.dbCursor.delete())},t}(),ne=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.completionDeferred=new lt,this.transaction.oncomplete=function(){e.completionDeferred.resolve()},this.transaction.onabort=function(){t.error?e.completionDeferred.reject(t.error):e.completionDeferred.resolve()},this.transaction.onerror=function(t){var n=t.target.error;ae(n),e.completionDeferred.reject(n)}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,\"completionPromise\",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){t&&this.completionDeferred.reject(t),this.aborted||(p($t,\"Aborting transaction:\",t?t.message:\"Client-initiated abort\"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return g(!!e,\"Object store not part of transaction: \"+t),new re(e)},t}(),re=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(p($t,\"PUT\",this.store.name,t,e),n=this.store.put(e,t)):(p($t,\"PUT\",this.store.name,\"<auto-key>\",t),n=this.store.put(t)),ie(n)},t.prototype.add=function(t){return p($t,\"ADD\",this.store.name,t,t),ie(this.store.add(t))},t.prototype.get=function(t){var e=this;return ie(this.store.get(t)).next(function(n){return void 0===n&&(n=null),p($t,\"GET\",e.store.name,t,n),n})},t.prototype.delete=function(t){return p($t,\"DELETE\",this.store.name,t),ie(this.store.delete(t))},t.prototype.count=function(){return p($t,\"COUNT\",this.store.name),ie(this.store.count())},t.prototype.loadAll=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.iterateCursor(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.deleteAll=function(t,e){p($t,\"DELETE ALL\",this.store.name);var n=this.options(t,e);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,function(t,e,n){return n.delete()})},t.prototype.iterate=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.iterateCursor(r,e)},t.prototype.iterateSerial=function(t){var e=this.cursor({});return new Bt(function(n,r){e.onerror=function(t){var e=t.target.error;ae(e),r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.iterateCursor=function(t,e){var n=[];return new Bt(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new ee(i),a=e(i.primaryKey,i.value,o);if(a instanceof Bt){var s=a.catch(function(t){return o.done(),Bt.reject(t)});n.push(s)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}}).next(function(){return Bt.waitFor(n)})},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&(\"string\"==typeof t?n=t:(g(void 0===e,\"3rd argument must not be defined if 2nd is a range.\"),e=t)),{index:n,range:e}},t.prototype.cursor=function(t){var e=\"next\";if(t.reverse&&(e=\"prev\"),t.index){var n=this.store.index(t.index);return t.keysOnly?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function ie(t){return new Bt(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=t.target.error;ae(e),n(e)}})}var oe=!1;function ae(t){if(!oe){var e=te.getIOSVersion(s.getUA());if(e>=12.2&&e<13){var n=\"An internal error was encountered in the Indexed Database server\";t.message.indexOf(n)>=0&&(oe=!0,setTimeout(function(){throw new E(\"internal\",\"IOS_INDEXEDDB_BUG1: IndexedDb has thrown '\"+n+\"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.\")},0))}}}var se=function(){function t(t,e){this.referenceDelegate=t,this.serializer=e,this.targetIdGenerator=Zt.forQueryCache()}return t.prototype.allocateTargetId=function(t){var e=this;return this.retrieveMetadata(t).next(function(n){return n.highestTargetId=e.targetIdGenerator.after(n.highestTargetId),e.saveMetadata(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.retrieveMetadata(t).next(function(t){return Et.fromTimestamp(new _t(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return le(t.simpleDbTransaction)},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.retrieveMetadata(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.saveMetadata(t,i)})},t.prototype.addQueryData=function(t,e){var n=this;return this.saveQueryData(t,e).next(function(){return n.retrieveMetadata(t).next(function(r){return r.targetCount+=1,n.updateMetadataFromQueryData(e,r),n.saveMetadata(t,r)})})},t.prototype.updateQueryData=function(t,e){return this.saveQueryData(t,e)},t.prototype.removeQueryData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return ue(t).delete(e.targetId)}).next(function(){return n.retrieveMetadata(t)}).next(function(e){return g(e.targetCount>0,\"Removing from an empty query cache\"),e.targetCount-=1,n.saveMetadata(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return ue(t).iterate(function(a,s){var u=r.serializer.fromDbTarget(s);u.sequenceNumber<=e&&void 0===n[u.targetId]&&(i++,o.push(r.removeQueryData(t,u)))}).next(function(){return Bt.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){var n=this;return ue(t).iterate(function(t,r){var i=n.serializer.fromDbTarget(r);e(i)})},t.prototype.retrieveMetadata=function(t){return ce(t.simpleDbTransaction)},t.prototype.saveMetadata=function(t,e){return(n=t,ln.getStore(n,Ve.store)).put(Ve.key,e);var n},t.prototype.saveQueryData=function(t,e){return ue(t).put(this.serializer.toDbTarget(e))},t.prototype.updateMetadataFromQueryData=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getQueryCount=function(t){return this.retrieveMetadata(t).next(function(t){return t.targetCount})},t.prototype.getQueryData=function(t,e){var n=this,r=e.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return ue(t).iterate({range:i,index:qe.queryTargetsIndexName},function(t,r,i){var a=n.serializer.fromDbTarget(r);e.isEqual(a.query)&&(o=a,i.done())}).next(function(){return o})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=he(t);return e.forEach(function(e){var a=mt(e.path);i.push(o.put(new Ue(n,a))),i.push(r.referenceDelegate.addReference(t,e))}),Bt.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=he(t);return Bt.forEach(e,function(e){var o=mt(e.path);return Bt.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=he(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=he(t),i=Lt();return r.iterate({range:n,keysOnly:!0},function(t,e,n){var r=wt(t[1]),o=new ct(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=mt(e.path),r=IDBKeyRange.bound([n],[Y(n)],!1,!0),i=0;return he(t).iterate({index:Ue.documentTargetsIndex,keysOnly:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.getQueryDataForTarget=function(t,e){var n=this;return ue(t).get(e).next(function(t){return t?n.serializer.fromDbTarget(t):null})},t}();function ue(t){return ln.getStore(t,qe.store)}function ce(t){return te.getStore(t,Ve.store).get(Ve.key).next(function(t){return g(null!==t,\"Missing metadata row.\"),t})}function le(t){return ce(t).next(function(t){return t.highestListenSequenceNumber})}function he(t){return ln.getStore(t,Ue.store)}var fe=function(){function t(t,e){this.key=t,this.version=e}return t.compareByKey=function(t,e){return ct.comparator(t.key,e.key)},t}(),de=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n)||this;return a.data=r,a.proto=o,a.hasLocalMutations=!!i.hasLocalMutations,a.hasCommittedMutations=!!i.hasCommittedMutations,a}return a.__extends(e,t),e.prototype.field=function(t){return this.data.field(t)},e.prototype.fieldValue=function(t){var e=this.field(t);return e?e.value():void 0},e.prototype.value=function(){return this.data.value()},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.data.isEqual(t.data)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations},e.prototype.toString=function(){return\"Document(\"+this.key+\", \"+this.version+\", \"+this.data.toString()+\", {hasLocalMutations: \"+this.hasLocalMutations+\"}), {hasCommittedMutations: \"+this.hasCommittedMutations+\"})\"},Object.defineProperty(e.prototype,\"hasPendingWrites\",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.compareByField=function(t,e,n){var r=e.field(t),i=n.field(t);return void 0!==r&&void 0!==i?r.compareTo(i):m(\"Trying to compare documents on fields that don't exist\")},e}(fe),pe=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return a.__extends(e,t),e.prototype.toString=function(){return\"NoDocument(\"+this.key+\", \"+this.version+\")\"},Object.defineProperty(e.prototype,\"hasPendingWrites\",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(fe),ye=function(t){function e(e,n){return t.call(this,e,n)||this}return a.__extends(e,t),e.prototype.toString=function(){return\"UnknownDocument(\"+this.key+\", \"+this.version+\")\"},Object.defineProperty(e.prototype,\"hasPendingWrites\",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(fe),ve=function(){function t(t){this.mapKeyFn=t,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[1];if(o[0].isEqual(t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){k(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return O(this.inner)},t}(),me=function(){function t(){this.changes=At(),this.documentSizes=new ve(function(t){return t.toString()})}return t.prototype.addEntry=function(t){var e=this.assertChanges();this.changes=e.insert(t.key,t)},t.prototype.getEntry=function(t,e){var n=this,r=this.assertChanges().get(e);return r?Bt.resolve(r):this.getFromCache(t,e).next(function(t){return null===t?(n.documentSizes.set(e,0),null):(n.documentSizes.set(e,t.size),t.maybeDocument)})},t.prototype.getEntries=function(t,e){var n=this;return this.getAllFromCache(t,e).next(function(t){var e=t.maybeDocuments;return t.sizeMap.forEach(function(t,e){n.documentSizes.set(t,e)}),e})},t.prototype.apply=function(t){var e=this.applyChanges(t);return this.changes=null,e},t.prototype.assertChanges=function(){return g(null!==this.changes,\"Changes have already been applied.\"),this.changes},t}(),ge=\"The remote document changelog no longer contains all changes for all local query views. It may be necessary to rebuild these views.\",be=function(){function t(t,e,n){this.serializer=t,this.indexManager=e,this.keepDocumentChangeLog=n,this._lastProcessedDocumentChangeId=0}return Object.defineProperty(t.prototype,\"lastProcessedDocumentChangeId\",{get:function(){return this._lastProcessedDocumentChangeId},enumerable:!0,configurable:!0}),t.prototype.start=function(t){var e=te.getStore(t,ze.store);return this.synchronizeLastDocumentChangeId(e)},t.prototype.addEntries=function(t,e,n){var r=[];if(e.length>0){for(var i=Ee(t),o=Lt(),a=0,s=e;a<s.length;a++){var u=s[a],c=u.key,l=u.doc;r.push(i.put(Ce(c),l)),o=o.add(c),r.push(this.indexManager.addToCollectionParentIndex(t,c.path.popLast()))}this.keepDocumentChangeLog&&r.push(Se(t).put({changes:this.serializer.toDbResourcePaths(o)})),r.push(this.updateSize(t,n))}return Bt.waitFor(r)},t.prototype.removeEntry=function(t,e){var n=Ee(t),r=Ce(e);return n.get(r).next(function(t){return t?n.delete(r).next(function(){return Te(t)}):Bt.resolve(0)})},t.prototype.getEntry=function(t,e){var n=this;return Ee(t).get(Ce(e)).next(function(t){return t?n.serializer.fromDbRemoteDocument(t):null})},t.prototype.getSizedEntry=function(t,e){var n=this;return Ee(t).get(Ce(e)).next(function(t){return t?{maybeDocument:n.serializer.fromDbRemoteDocument(t),size:Te(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=Dt();return this.forEachDbEntry(t,e,function(t,e){r=r.insert(t,e?n.serializer.fromDbRemoteDocument(e):null)}).next(function(){return r})},t.prototype.getSizedEntries=function(t,e){var n=this,r=Dt(),i=new St(ct.comparator);return this.forEachDbEntry(t,e,function(t,e){e?(r=r.insert(t,n.serializer.fromDbRemoteDocument(e)),i=i.insert(t,Te(e))):(r=r.insert(t,null),i=i.insert(t,0))}).next(function(){return{maybeDocuments:r,sizeMap:i}})},t.prototype.forEachDbEntry=function(t,e,n){if(e.isEmpty())return Bt.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Ee(t).iterate({range:r},function(t,e,r){for(var a=ct.fromSegments(t);o&&ct.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e){var n=this;g(!e.isCollectionGroupQuery(),\"CollectionGroup queries should be handled in LocalDocumentsView\");var r=Rt(),i=e.path.length+1,o=e.path.toArray(),a=IDBKeyRange.lowerBound(o);return Ee(t).iterate({range:a},function(t,o,a){if(t.length===i){var s=n.serializer.fromDbRemoteDocument(o);e.path.isPrefixOf(s.key.path)?s instanceof de&&e.matches(s)&&(r=r.insert(s.key,s)):a.done()}}).next(function(){return r})},t.prototype.getNewDocumentChanges=function(t){var e=this;g(this.keepDocumentChangeLog,\"Can only call getNewDocumentChanges() when document change log is enabled\");var n=Lt(),r=At(),i=IDBKeyRange.lowerBound(this._lastProcessedDocumentChangeId+1),o=!0,a=Se(t);return a.iterate({range:i},function(t,r){if(o&&(o=!1,e._lastProcessedDocumentChangeId+1!==r.id))return e.synchronizeLastDocumentChangeId(a).next(function(){return Bt.reject(new E(_.DATA_LOSS,ge))});n=n.unionWith(e.serializer.fromDbResourcePaths(r.changes)),e._lastProcessedDocumentChangeId=r.id}).next(function(){var i=[];return n.forEach(function(n){i.push(e.getEntry(t,n).next(function(t){var e=t||new pe(n,Et.forDeletedDoc());r=r.insert(n,e)}))}),Bt.waitFor(i)}).next(function(){return r})},t.prototype.removeDocumentChangesThroughChangeId=function(t,e){var n=IDBKeyRange.upperBound(e);return Se(t).delete(n)},t.prototype.synchronizeLastDocumentChangeId=function(t){var e=this;return this._lastProcessedDocumentChangeId=0,t.iterate({keysOnly:!0,reverse:!0},function(t,n,r){e._lastProcessedDocumentChangeId=t,r.done()})},t.prototype.newChangeBuffer=function(){return new _e(this)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return we(t).get(Fe.key).next(function(t){return g(!!t,\"Missing document cache metadata\"),t})},t.prototype.setMetadata=function(t,e){return we(t).put(Fe.key,e)},t.prototype.updateSize=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.setMetadata(t,r)})},t}();function we(t){return ln.getStore(t,Fe.store)}var _e=function(t){function e(e){var n=t.call(this)||this;return n.documentCache=e,n}return a.__extends(e,t),e.prototype.applyChanges=function(t){var e=this,n=this.assertChanges(),r=0,i=[];return n.forEach(function(t,n){var o=e.documentCache.serializer.toDbRemoteDocument(n),a=e.documentSizes.get(t);g(void 0!==a,\"Attempting to change document \"+t.toString()+\" without having read it first\");var s=Te(o);r+=s-a,i.push({key:t,doc:o})}),this.documentCache.addEntries(t,i,r)},e.prototype.getFromCache=function(t,e){return this.documentCache.getSizedEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.documentCache.getSizedEntries(t,e)},e}(me);function Ee(t){return ln.getStore(t,Le.store)}function Se(t){return ln.getStore(t,ze.store)}function Ce(t){return t.path.toArray()}function Te(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw m(\"Unknown remote document type\");e=t.noDocument}return JSON.stringify(e).length}var Ie=function(){function t(){this.collectionParentIndex=new ke}return t.prototype.addToCollectionParentIndex=function(t,e){return this.collectionParentIndex.add(e),Bt.resolve()},t.prototype.getCollectionParents=function(t,e){return Bt.resolve(this.collectionParentIndex.getEntries(e))},t}(),ke=function(){function t(){this.index={}}return t.prototype.add=function(t){g(t.length%2==1,\"Expected a collection path.\");var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new kt(at.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.getEntries=function(t){return(this.index[t]||new kt(at.comparator)).toArray()},t}(),Oe=8,Ne=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;g(n<r&&n>=0&&r<=Oe,\"Unexpected schema upgrade from v\"+n+\" to v{toVersion}.\"),n<1&&r>=1&&(function(t){t.createObjectStore(De.store)}(t),function(t){t.createObjectStore(xe.store,{keyPath:xe.keyPath}),t.createObjectStore(Re.store,{keyPath:Re.keyPath,autoIncrement:!0}).createIndex(Re.userMutationsIndex,Re.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Pe.store)}(t),We(t),function(t){t.createObjectStore(Le.store)}(t));var o=Bt.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Ue.store),t.deleteObjectStore(qe.store),t.deleteObjectStore(Ve.store)}(t),We(t)),o=o.next(function(){return function(t){var e=t.store(Ve.store),n=new Ve(0,0,Et.MIN.toTimestamp(),0);return e.put(Ve.key,n)}(e)})),n<4&&r>=4&&(0!==n&&(o=o.next(function(){return function(t,e){return e.store(Re.store).loadAll().next(function(n){t.deleteObjectStore(Re.store),t.createObjectStore(Re.store,{keyPath:Re.keyPath,autoIncrement:!0}).createIndex(Re.userMutationsIndex,Re.userMutationsKeyPath,{unique:!0});var r=e.store(Re.store),i=n.map(function(t){return r.put(t)});return Bt.waitFor(i)})}(t,e)})),o=o.next(function(){!function(t){t.createObjectStore(He.store,{keyPath:He.keyPath})}(t),function(t){t.createObjectStore(ze.store,{keyPath:\"id\",autoIncrement:!0})}(t)})),n<5&&r>=5&&(o=o.next(function(){return i.removeAcknowledgedMutations(e)})),n<6&&r>=6&&(o=o.next(function(){return function(t){t.createObjectStore(Fe.store)}(t),i.addDocumentGlobal(e)})),n<7&&r>=7&&(o=o.next(function(){return i.ensureSequenceNumbers(e)})),n<8&&r>=8&&(o=o.next(function(){return i.createCollectionParentIndex(t,e)})),o},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(Le.store).iterate(function(t,n){e+=Te(n)}).next(function(){var n=new Fe(e);return t.store(Fe.store).put(Fe.key,n)})},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(xe.store),r=t.store(Re.store);return n.loadAll().next(function(n){return Bt.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(Re.userMutationsIndex,i).next(function(r){return Bt.forEach(r,function(r){g(r.userId===n.userId,\"Cannot process batch \"+r.batchId+\" from unexpected user\");var i=e.serializer.fromDbMutationBatch(r);return Ht(t,n.userId,i).next(function(){})})})})})},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(Ue.store),n=t.store(Le.store);return le(t).next(function(t){var r=[];return n.iterate(function(n,i){var o=new at(n),a=function(t){return[0,mt(t)]}(o);r.push(e.get(a).next(function(n){return n?Bt.resolve():function(n){return e.put(new Ue(0,mt(n),t))}(o)}))}).next(function(){return Bt.waitFor(r)})})},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(Be.store,{keyPath:Be.keyPath});var n=e.store(Be.store),r=new ke,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:mt(i)})}};return e.store(Le.store).iterate({keysOnly:!0},function(t,e){var n=new at(t);return i(n.popLast())}).next(function(){return e.store(Pe.store).iterate({keysOnly:!0},function(t,e){var n=wt(t[1]);return i(n.popLast())})})},t}(),Ae=function(){return function(t,e){this.seconds=t,this.nanoseconds=e}}(),De=function(){function t(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}return t.store=\"owner\",t.key=\"owner\",t}(),xe=function(){function t(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}return t.store=\"mutationQueues\",t.keyPath=\"userId\",t}(),Re=function(){function t(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}return t.store=\"mutations\",t.keyPath=\"batchId\",t.userMutationsIndex=\"userMutationsIndex\",t.userMutationsKeyPath=[\"userId\",\"batchId\"],t}(),Pe=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,mt(e)]},t.key=function(t,e,n){return[t,mt(e),n]},t.store=\"documentMutations\",t.PLACEHOLDER=new t,t}(),Me=function(){return function(t,e){this.path=t,this.readTime=e}}(),je=function(){return function(t,e){this.path=t,this.version=e}}(),Le=function(){function t(t,e,n,r){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r}return t.store=\"remoteDocuments\",t}(),Fe=function(){function t(t){this.byteSize=t}return t.store=\"remoteDocumentGlobal\",t.key=\"remoteDocumentGlobalKey\",t}(),qe=function(){function t(t,e,n,r,i,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.query=o}return t.store=\"targets\",t.keyPath=\"targetId\",t.queryTargetsIndexName=\"queryTargetsIndex\",t.queryTargetsKeyPath=[\"canonicalId\",\"targetId\"],t}(),Ue=function(){function t(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n,g(0===t==(void 0!==n),\"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number\")}return t.store=\"targetDocuments\",t.keyPath=[\"targetId\",\"path\"],t.documentTargetsIndex=\"documentTargetsIndex\",t.documentTargetsKeyPath=[\"path\",\"targetId\"],t}(),Ve=function(){function t(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return t.key=\"targetGlobalKey\",t.store=\"targetGlobal\",t}(),Be=function(){function t(t,e){this.collectionId=t,this.parent=e}return t.store=\"collectionParents\",t.keyPath=[\"collectionId\",\"parent\"],t}();function We(t){t.createObjectStore(Ue.store,{keyPath:Ue.keyPath}).createIndex(Ue.documentTargetsIndex,Ue.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(qe.store,{keyPath:qe.keyPath}).createIndex(qe.queryTargetsIndexName,qe.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Ve.store)}var ze=function(){function t(t){this.changes=t}return t.store=\"remoteDocumentChanges\",t.keyPath=\"id\",t}(),He=function(){function t(t,e,n,r,i){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r,this.lastProcessedDocumentChangeId=i}return t.store=\"clientMetadata\",t.keyPath=\"clientId\",t}(),Qe=[xe.store,Re.store,Pe.store,Le.store,qe.store,De.store,Ve.store,Ue.store].concat([He.store,ze.store]).concat([Fe.store]).concat([Be.store]),Ke=function(){function t(){this.collectionParentsCache=new ke}return t.prototype.addToCollectionParentIndex=function(t,e){if(g(e.length%2==1,\"Expected a collection path.\"),this.collectionParentsCache.add(e)){g(e.length>=1,\"Invalid collection path.\");var n=e.lastSegment(),r=e.popLast();return Ge(t).put({collectionId:n,parent:mt(r)})}return Bt.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,\"\"],[Y(e),\"\"],!1,!0);return Ge(t).loadAll(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(wt(o.parent))}return n})},t}();function Ge(t){return ln.getStore(t,Be.store)}var Ye=function(t){return t[t.Listen=0]=\"Listen\",t[t.ExistenceFilterMismatch=1]=\"ExistenceFilterMismatch\",t[t.LimboResolution=2]=\"LimboResolution\",t}({}),Xe=function(){function t(t,e,n,r,i,o){void 0===i&&(i=Et.MIN),void 0===o&&(o=w()),this.query=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.resumeToken=o}return t.prototype.copy=function(e){return new t(this.query,this.targetId,this.purpose,void 0===e.sequenceNumber?this.sequenceNumber:e.sequenceNumber,void 0===e.snapshotVersion?this.snapshotVersion:e.snapshotVersion,void 0===e.resumeToken?this.resumeToken:e.resumeToken)},t.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.purpose===t.purpose&&this.sequenceNumber===t.sequenceNumber&&this.snapshotVersion.isEqual(t.snapshotVersion)&&this.resumeToken===t.resumeToken&&this.query.isEqual(t.query)},t}(),Je=function(){function t(t){this.remoteSerializer=t}return t.prototype.fromDbRemoteDocument=function(t){if(t.document)return this.remoteSerializer.fromDocument(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=ct.fromSegments(t.noDocument.path),n=this.fromDbTimestamp(t.noDocument.readTime);return new pe(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}return t.unknownDocument?(e=ct.fromSegments(t.unknownDocument.path),n=this.fromDbTimestamp(t.unknownDocument.version),new ye(e,n)):m(\"Unexpected DbRemoteDocument\")},t.prototype.toDbRemoteDocument=function(t){if(t instanceof de){var e=t.proto?t.proto:this.remoteSerializer.toDocument(t);return new Le(null,null,e,i=t.hasCommittedMutations)}if(t instanceof pe){var n=t.key.path.toArray(),r=this.toDbTimestamp(t.version),i=t.hasCommittedMutations;return new Le(null,new Me(n,r),null,i)}return t instanceof ye?(n=t.key.path.toArray(),r=this.toDbTimestamp(t.version),new Le(new je(n,r),null,null,!0)):m(\"Unexpected MaybeDocumment\")},t.prototype.toDbTimestamp=function(t){var e=t.toTimestamp();return new Ae(e.seconds,e.nanoseconds)},t.prototype.fromDbTimestamp=function(t){var e=new _t(t.seconds,t.nanoseconds);return Et.fromTimestamp(e)},t.prototype.toDbMutationBatch=function(t,e){var n=this,r=e.baseMutations.map(function(t){return n.remoteSerializer.toMutation(t)}),i=e.mutations.map(function(t){return n.remoteSerializer.toMutation(t)});return new Re(t,e.batchId,e.localWriteTime.toMillis(),r,i)},t.prototype.fromDbMutationBatch=function(t){var e=this,n=(t.baseMutations||[]).map(function(t){return e.remoteSerializer.fromMutation(t)}),r=t.mutations.map(function(t){return e.remoteSerializer.fromMutation(t)}),i=_t.fromMillis(t.localWriteTimeMs);return new Ut(t.batchId,i,n,r)},t.prototype.toDbResourcePaths=function(t){var e=[];return t.forEach(function(t){e.push(mt(t.path))}),e},t.prototype.fromDbResourcePaths=function(t){for(var e=Lt(),n=0,r=t;n<r.length;n++)e=e.add(new ct(wt(r[n])));return e},t.prototype.fromDbTarget=function(t){var e,n=this.fromDbTimestamp(t.readTime);return e=void 0!==t.query.documents?this.remoteSerializer.fromDocumentsTarget(t.query):this.remoteSerializer.fromQueryTarget(t.query),new Xe(e,t.targetId,Ye.Listen,t.lastListenSequenceNumber,n,t.resumeToken)},t.prototype.toDbTarget=function(t){g(Ye.Listen===t.purpose,\"Only queries with purpose \"+Ye.Listen+\" may be stored, got \"+t.purpose);var e,n,r=this.toDbTimestamp(t.snapshotVersion);return e=t.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(t.query):this.remoteSerializer.toQueryTarget(t.query),t.resumeToken instanceof Uint8Array?(g(\"YES\"===process.env.USE_MOCK_PERSISTENCE,\"Persisting non-string stream tokens is only supported with mock persistence .\"),n=t.resumeToken.toString()):n=t.resumeToken,new qe(t.targetId,t.query.canonicalId(),r,n,t.sequenceNumber,e)},t}();function Ze(t,e){var n=t[1],r=e[1],i=K(t[0],e[0]);return 0===i?K(n,r):i}var $e=function(){function t(t){this.maxElements=t,this.buffer=new kt(Ze),this.previousIndex=0}return t.prototype.nextIndex=function(){return++this.previousIndex},t.prototype.addElement=function(t){var e=[t,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Ze(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,\"maxValue\",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),t}(),tn={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},en=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t.COLLECTION_DISABLED=-1,t.MINIMUM_CACHE_SIZE_BYTES=1048576,t.DEFAULT=new t(t.DEFAULT_CACHE_SIZE_BYTES=41943040,t.DEFAULT_COLLECTION_PERCENTILE=10,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3),t.DISABLED=new t(t.COLLECTION_DISABLED,0,0),t}(),nn=function(){function t(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.gcTask=null}return t.prototype.start=function(){g(null===this.gcTask,\"Cannot start an already started LruScheduler\"),this.garbageCollector.params.cacheSizeCollectionThreshold!==en.COLLECTION_DISABLED&&this.scheduleGC()},t.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(t.prototype,\"started\",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),t.prototype.scheduleGC=function(){var t=this;g(null===this.gcTask,\"Cannot schedule GC while a task is pending\");var e=this.hasRun?3e5:6e4;p(\"LruGarbageCollector\",\"Garbage collection scheduled in \"+e+\"ms\"),this.gcTask=this.asyncQueue.enqueueAfterDelay(Z.LruGarbageCollection,e,function(){return t.gcTask=null,t.hasRun=!0,t.localStore.collectGarbage(t.garbageCollector).then(function(){return t.scheduleGC()}).catch(hn)})},t}(),rn=function(){function t(t,e){this.delegate=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.delegate.getSequenceNumberCount(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Bt.resolve(it.INVALID);var r=new $e(e);return this.delegate.forEachTarget(t,function(t){return r.addElement(t.sequenceNumber)}).next(function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(t,function(t){return r.addElement(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.delegate.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.delegate.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return this.params.cacheSizeCollectionThreshold===en.COLLECTION_DISABLED?(p(\"LruGarbageCollector\",\"Garbage collection skipped; disabled\"),Bt.resolve(tn)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(p(\"LruGarbageCollector\",\"Garbage collection skipped; Cache size \"+r+\" is lower than threshold \"+n.params.cacheSizeCollectionThreshold),tn):n.runGarbageCollection(t,e)})},t.prototype.getCacheSize=function(t){return this.delegate.getCacheSize(t)},t.prototype.runGarbageCollection=function(t,e){var n,r,i,o,a,s,u,c,l=this;return o=Date.now(),this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>l.params.maximumSequenceNumbersToCollect?(p(\"LruGarbageCollector\",\"Capping sequence numbers to collect down to the maximum of \"+l.params.maximumSequenceNumbersToCollect+\" from \"+e),r=l.params.maximumSequenceNumbersToCollect):r=e,a=Date.now(),l.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),l.removeTargets(t,n,e)}).next(function(e){return i=e,u=Date.now(),l.removeOrphanedDocuments(t,n)}).next(function(t){return c=Date.now(),f()<=h.DEBUG&&p(\"LruGarbageCollector\",\"LRU Garbage Collection\\n\\tCounted targets in \"+(a-o)+\"ms\\n\\tDetermined least recently used \"+r+\" in \"+(s-a)+\"ms\\n\\tRemoved \"+i+\" targets in \"+(u-s)+\"ms\\n\\tRemoved \"+t+\" documents in \"+(c-u)+\"ms\\nTotal Duration: \"+(c-o)+\"ms\"),Bt.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),on=\"IndexedDbPersistence\",an=\"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.\",sn=\"Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.\",un=\"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.\",cn=function(t){function e(e,n){var r=t.call(this)||this;return r.simpleDbTransaction=e,r.currentSequenceNumber=n,r}return a.__extends(e,t),e}(function(){return function(){}}()),ln=function(){function t(e,n,r,i,o,a,s){if(this.persistenceKey=e,this.clientId=n,this.queue=i,this.multiClientParams=s,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.inForeground=!1,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(t){return Promise.resolve()},!t.isAvailable())throw new E(_.UNIMPLEMENTED,un);if(this.referenceDelegate=new pn(this,a),this.dbName=e+t.MAIN_DATABASE,this.serializer=new Je(o),this.document=r.document,this.allowTabSynchronization=void 0!==s,this.queryCache=new se(this.referenceDelegate,this.serializer),this.indexManager=new Ke,this.remoteDocumentCache=new be(this.serializer,this.indexManager,this.allowTabSynchronization),!r.window||!r.window.localStorage)throw new E(_.UNIMPLEMENTED,\"IndexedDB persistence is only available on platforms that support LocalStorage.\");this.window=r.window,this.webStorage=this.window.localStorage}return t.getStore=function(t,e){if(t instanceof cn)return te.getStore(t.simpleDbTransaction,e);throw m(\"IndexedDbPersistence must use instances of IndexedDbTransaction\")},t.createIndexedDbPersistence=function(e,n,r,i,o,s){return a.__awaiter(this,void 0,void 0,function(){var u;return a.__generator(this,function(a){switch(a.label){case 0:return[4,(u=new t(e,n,r,i,o,s)).start()];case 1:return a.sent(),[2,u]}})})},t.createMultiClientIndexedDbPersistence=function(e,n,r,i,o,s,u){return a.__awaiter(this,void 0,void 0,function(){var c;return a.__generator(this,function(a){switch(a.label){case 0:return[4,(c=new t(e,n,r,i,o,s,u)).start()];case 1:return a.sent(),[2,c]}})})},t.prototype.start=function(){var t=this;return g(!this.started,\"IndexedDbPersistence double-started!\"),g(null!==this.window,\"Expected 'window' to be defined\"),te.openOrCreate(this.dbName,Oe,new Ne(this.serializer)).then(function(e){return t.simpleDb=e,t.updateClientMetadataAndTryBecomePrimary()}).then(function(){return t.attachVisibilityHandler(),t.attachWindowUnloadHook(),t.scheduleClientMetadataAndPrimaryLeaseRefreshes(),t.startRemoteDocumentCache()}).then(function(){return t.simpleDb.runTransaction(\"readonly\",[Ve.store],function(e){return le(e).next(function(e){t.listenSequence=new it(e,t.multiClientParams?t.multiClientParams.sequenceNumberSyncer:void 0)})})}).then(function(){t._started=!0}).catch(function(e){return t.simpleDb&&t.simpleDb.close(),Promise.reject(e)})},t.prototype.startRemoteDocumentCache=function(){var t=this;return this.simpleDb.runTransaction(\"readonly\",Qe,function(e){return t.remoteDocumentCache.start(e)})},t.prototype.setPrimaryStateListener=function(t){var e=this;return this.primaryStateListener=function(n){return a.__awaiter(e,void 0,void 0,function(){return a.__generator(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.simpleDb.setVersionChangeListener(function(n){return a.__awaiter(e,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return null!==n.newVersion?[3,2]:[4,t()];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.queue.enqueueAndForget(function(){return a.__awaiter(e,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.updateClientMetadataAndTryBecomePrimary=function(){var t=this;return this.simpleDb.runTransaction(\"readwrite\",Qe,function(e){return dn(e).put(new He(t.clientId,Date.now(),t.networkEnabled,t.inForeground,t.remoteDocumentCache.lastProcessedDocumentChangeId)).next(function(){if(t.isPrimary)return t.verifyPrimaryLease(e).next(function(e){e||(t.isPrimary=!1,t.queue.enqueueAndForget(function(){return t.primaryStateListener(!1)}))})}).next(function(){return t.canActAsPrimary(e)}).next(function(n){var r=t.isPrimary;return t.isPrimary=n,r!==t.isPrimary&&t.queue.enqueueAndForget(function(){return t.primaryStateListener(t.isPrimary)}),r&&!t.isPrimary?t.releasePrimaryLeaseIfHeld(e):t.isPrimary?t.acquireOrExtendPrimaryLease(e):void 0})})},t.prototype.verifyPrimaryLease=function(t){var e=this;return fn(t).get(De.key).next(function(t){return Bt.resolve(e.isLocalClient(t))})},t.prototype.removeClientMetadata=function(t){return dn(t).delete(this.clientId)},t.prototype.maybeGarbageCollectMultiClientState=function(){return a.__awaiter(this,void 0,void 0,function(){var e,n,r=this;return a.__generator(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),n=[],[4,this.runTransaction(\"maybeGarbageCollectMultiClientState\",\"readwrite-primary\",function(i){var o=t.getStore(i,He.store);return o.loadAll().next(function(t){e=r.filterActiveClients(t,18e5),n=t.filter(function(t){return-1===e.indexOf(t)})}).next(function(){return Bt.forEach(n,function(t){return o.delete(t.clientId)})}).next(function(){if((e=e.filter(function(t){return t.clientId!==r.clientId})).length>0){var t=e.map(function(t){return t.lastProcessedDocumentChangeId||0}),n=Math.min.apply(Math,t);return r.remoteDocumentCache.removeDocumentChangesThroughChangeId(i,n)}})})]);case 1:i.sent(),n.forEach(function(t){r.window.localStorage.removeItem(r.zombiedClientLocalStorageKey(t.clientId))}),i.label=2;case 2:return[2]}})})},t.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var t=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(Z.ClientMetadataRefresh,4e3,function(){return t.updateClientMetadataAndTryBecomePrimary().then(function(){return t.maybeGarbageCollectMultiClientState()}).then(function(){return t.scheduleClientMetadataAndPrimaryLeaseRefreshes()})})},t.prototype.isLocalClient=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.canActAsPrimary=function(t){var e=this;return fn(t).get(De.key).next(function(n){if(null!==n&&e.isWithinAge(n.leaseTimestampMs,5e3)&&!e.isClientZombied(n.ownerId)){if(e.isLocalClient(n)&&e.networkEnabled)return!0;if(!e.isLocalClient(n)){if(!n.allowTabSynchronization)throw new E(_.FAILED_PRECONDITION,sn);return!1}}return!(!e.networkEnabled||!e.inForeground)||dn(t).loadAll().next(function(t){return void 0===e.filterActiveClients(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&p(on,\"Client \"+(t?\"is\":\"is not\")+\" eligible for a primary lease.\"),t})},t.prototype.shutdown=function(){return a.__awaiter(this,void 0,void 0,function(){var t=this;return a.__generator(this,function(e){switch(e.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&this.clientMetadataRefresher.cancel(),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction(\"readwrite\",[De.store,He.store],function(e){return t.releasePrimaryLeaseIfHeld(e).next(function(){return t.removeClientMetadata(e)})})];case 1:return e.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}})})},t.prototype.filterActiveClients=function(t,e){var n=this;return t.filter(function(t){return n.isWithinAge(t.updateTimeMs,e)&&!n.isClientZombied(t.clientId)})},t.prototype.getActiveClients=function(){var t=this;return this.simpleDb.runTransaction(\"readonly\",[He.store],function(e){return dn(e).loadAll().next(function(e){return t.filterActiveClients(e,18e5).map(function(t){return t.clientId})})})},t.clearPersistence=function(e){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(n){switch(n.label){case 0:return t.isAvailable()?[4,te.delete(e+t.MAIN_DATABASE)]:[2,Promise.resolve()];case 1:return n.sent(),[2]}})})},Object.defineProperty(t.prototype,\"started\",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getMutationQueue=function(t){return g(this.started,\"Cannot initialize MutationQueue before persistence is started.\"),Wt.forUser(t,this.serializer,this.indexManager,this.referenceDelegate)},t.prototype.getQueryCache=function(){return g(this.started,\"Cannot initialize QueryCache before persistence is started.\"),this.queryCache},t.prototype.getRemoteDocumentCache=function(){return g(this.started,\"Cannot initialize RemoteDocumentCache before persistence is started.\"),this.remoteDocumentCache},t.prototype.getIndexManager=function(){return g(this.started,\"Cannot initialize IndexManager before persistence is started.\"),this.indexManager},t.prototype.runTransaction=function(t,e,n){var r=this;return p(on,\"Starting transaction:\",t),this.simpleDb.runTransaction(\"readonly\"===e?\"readonly\":\"readwrite\",Qe,function(i){return\"readwrite-primary\"===e?r.verifyPrimaryLease(i).next(function(e){if(!e)throw y(\"Failed to obtain primary lease for action '\"+t+\"'.\"),r.isPrimary=!1,r.queue.enqueueAndForget(function(){return r.primaryStateListener(!1)}),new E(_.FAILED_PRECONDITION,an);return n(new cn(i,r.listenSequence.next()))}).next(function(t){return r.acquireOrExtendPrimaryLease(i).next(function(){return t})}):r.verifyAllowTabSynchronization(i).next(function(){return n(new cn(i,r.listenSequence.next()))})})},t.prototype.verifyAllowTabSynchronization=function(t){var e=this;return fn(t).get(De.key).next(function(t){if(null!==t&&e.isWithinAge(t.leaseTimestampMs,5e3)&&!e.isClientZombied(t.ownerId)&&!e.isLocalClient(t)&&!t.allowTabSynchronization)throw new E(_.FAILED_PRECONDITION,sn)})},t.prototype.acquireOrExtendPrimaryLease=function(t){var e=new De(this.clientId,this.allowTabSynchronization,Date.now());return fn(t).put(De.key,e)},t.isAvailable=function(){return te.isAvailable()},t.buildStoragePrefix=function(t){var e=t.databaseId.projectId;return t.databaseId.isDefaultDatabase||(e+=\".\"+t.databaseId.database),\"firestore/\"+t.persistenceKey+\"/\"+e+\"/\"},t.prototype.releasePrimaryLeaseIfHeld=function(t){var e=this,n=fn(t);return n.get(De.key).next(function(t){return e.isLocalClient(t)?(p(on,\"Releasing primary lease.\"),n.delete(De.key)):Bt.resolve()})},t.prototype.isWithinAge=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(y(\"Detected an update time that is in the future: \"+t+\" > \"+n),1))},t.prototype.attachVisibilityHandler=function(){var t=this;null!==this.document&&\"function\"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){t.queue.enqueueAndForget(function(){return t.inForeground=\"visible\"===t.document.visibilityState,t.updateClientMetadataAndTryBecomePrimary()})},this.document.addEventListener(\"visibilitychange\",this.documentVisibilityHandler),this.inForeground=\"visible\"===this.document.visibilityState)},t.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(g(null!==this.document&&\"function\"==typeof this.document.addEventListener,\"Expected 'document.addEventListener' to be a function\"),this.document.removeEventListener(\"visibilitychange\",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},t.prototype.attachWindowUnloadHook=function(){var t=this;\"function\"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){t.markClientZombied(),t.queue.enqueueAndForget(function(){return t.shutdown()})},this.window.addEventListener(\"unload\",this.windowUnloadHandler))},t.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(g(\"function\"==typeof this.window.removeEventListener,\"Expected 'window.removeEventListener' to be a function\"),this.window.removeEventListener(\"unload\",this.windowUnloadHandler),this.windowUnloadHandler=null)},t.prototype.isClientZombied=function(t){try{var e=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(t));return p(on,\"Client '\"+t+\"' \"+(e?\"is\":\"is not\")+\" zombied in LocalStorage\"),e}catch(n){return y(on,\"Failed to get zombied client id.\",n),!1}},t.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(t){y(\"Failed to set zombie client id.\",t)}},t.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(t){}},t.prototype.zombiedClientLocalStorageKey=function(t){return\"firestore_zombie_\"+this.persistenceKey+\"_\"+t},t.MAIN_DATABASE=\"main\",t}();function hn(t){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){if(!function(t){return t.code===_.FAILED_PRECONDITION&&t.message===an}(t))throw t;return p(on,\"Unexpectedly lost primary lease\"),[2]})})}function fn(t){return t.store(De.store)}function dn(t){return t.store(He.store)}var pn=function(){function t(t,e){this.db=t,this.garbageCollector=new rn(this,e)}return t.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocmentCount(t);return this.db.getQueryCache().getQueryCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.orphanedDocmentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getQueryCache().forEachTarget(t,e)},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){return this.forEachOrphanedDocument(t,function(t,n){return e(n)})},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return yn(t,e)},t.prototype.removeReference=function(t,e){return yn(t,e)},t.prototype.removeTargets=function(t,e,n){return this.db.getQueryCache().removeTargets(t,e,n)},t.prototype.removeMutationReference=function(t,e){return yn(t,e)},t.prototype.isPinned=function(t,e){return this.inMemoryPins.containsKey(e)?Bt.resolve(!0):function(t,e){var n=!1;return Yt(t).iterateSerial(function(r){return zt(t,r,e).next(function(t){return t&&(n=!0),Bt.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=0,i=0,o=[];return this.forEachOrphanedDocument(t,function(a,s){if(s<=e){var u=n.isPinned(t,a).next(function(e){if(!e)return r++,n.removeOrphanedDocument(t,a).next(function(t){i+=t})});o.push(u)}}).next(function(){return Bt.waitFor(o)}).next(function(){return n.db.getRemoteDocumentCache().updateSize(t,-i)}).next(function(){return r})},t.prototype.removeOrphanedDocument=function(t,e){var n,r=0,i=this.db.getRemoteDocumentCache();return Bt.waitFor([he(t).delete((n=e,[0,mt(n.path)])),i.removeEntry(t,e).next(function(t){r+=t})]).next(function(){return r})},t.prototype.removeTarget=function(t,e){var n=e.copy({sequenceNumber:t.currentSequenceNumber});return this.db.getQueryCache().updateQueryData(t,n)},t.prototype.updateLimboDocument=function(t,e){return yn(t,e)},t.prototype.forEachOrphanedDocument=function(t,e){var n,r=he(t),i=it.INVALID;return r.iterate({index:Ue.documentTargetsIndex},function(t,r){var o=r.path,a=r.sequenceNumber;0===t[0]?(i!==it.INVALID&&e(new ct(wt(n)),i),i=a,n=o):i=it.INVALID}).next(function(){i!==it.INVALID&&e(new ct(wt(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function yn(t,e){return he(t).put(function(t,e){return new Ue(0,mt(t.path),e)}(e,t.currentSequenceNumber))}var vn=function(t){return t[t.NullValue=0]=\"NullValue\",t[t.BooleanValue=1]=\"BooleanValue\",t[t.NumberValue=2]=\"NumberValue\",t[t.TimestampValue=3]=\"TimestampValue\",t[t.StringValue=4]=\"StringValue\",t[t.BlobValue=5]=\"BlobValue\",t[t.RefValue=6]=\"RefValue\",t[t.GeoPointValue=7]=\"GeoPointValue\",t[t.ArrayValue=8]=\"ArrayValue\",t[t.ObjectValue=9]=\"ObjectValue\",t}({}),mn=function(t){return t[t.Default=0]=\"Default\",t[t.Estimate=1]=\"Estimate\",t[t.Previous=2]=\"Previous\",t}({}),gn=function(){function t(t,e){this.serverTimestampBehavior=t,this.timestampsInSnapshots=e}return t.fromSnapshotOptions=function(e,n){switch(e.serverTimestamps){case\"estimate\":return new t(mn.Estimate,n);case\"previous\":return new t(mn.Previous,n);case\"none\":case void 0:return new t(mn.Default,n);default:return m(\"fromSnapshotOptions() called with invalid options.\")}},t}(),bn=function(){function t(){}return t.prototype.toString=function(){var t=this.value();return null===t?\"null\":t.toString()},t.prototype.defaultCompareTo=function(t){return g(this.typeOrder!==t.typeOrder,\"Default compareTo should not be used for values of same type.\"),K(this.typeOrder,t.typeOrder)},t}(),wn=function(t){function e(){var e=t.call(this)||this;return e.typeOrder=vn.NullValue,e.internalValue=null,e}return a.__extends(e,t),e.prototype.value=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e},e.prototype.compareTo=function(t){return t instanceof e?0:this.defaultCompareTo(t)},e.INSTANCE=new e,e}(bn),_n=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=vn.BooleanValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?K(this,t):this.defaultCompareTo(t)},e.of=function(t){return t?e.TRUE:e.FALSE},e.TRUE=new e(!0),e.FALSE=new e(!1),e}(bn),En=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=vn.NumberValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.compareTo=function(t){return t instanceof e?(n=this.internalValue)<(r=t.internalValue)?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1:this.defaultCompareTo(t);var n,r},e}(bn);function Sn(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}var Cn=function(t){function e(e){return t.call(this,e)||this}return a.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&Sn(this.internalValue,t.internalValue)},e}(En),Tn=function(t){function e(e){var n=t.call(this,e)||this;return n.internalValue=e,n}return a.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&Sn(this.internalValue,t.internalValue)},e.NAN=new e(NaN),e.POSITIVE_INFINITY=new e(1/0),e.NEGATIVE_INFINITY=new e(-1/0),e}(En),In=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=vn.StringValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?K(this.internalValue,t.internalValue):this.defaultCompareTo(t)},e}(bn),kn=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=vn.TimestampValue,n}return a.__extends(e,t),e.prototype.value=function(t){return!t||t.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):t instanceof On?-1:this.defaultCompareTo(t)},e}(bn),On=function(t){function e(e,n){var r=t.call(this)||this;return r.localWriteTime=e,r.previousValue=n,r.typeOrder=vn.TimestampValue,r}return a.__extends(e,t),e.prototype.value=function(t){return t&&t.serverTimestampBehavior===mn.Estimate?new kn(this.localWriteTime).value(t):t&&t.serverTimestampBehavior===mn.Previous&&this.previousValue?this.previousValue.value(t):null},e.prototype.isEqual=function(t){return t instanceof e&&this.localWriteTime.isEqual(t.localWriteTime)},e.prototype.compareTo=function(t){return t instanceof e?this.localWriteTime._compareTo(t.localWriteTime):t instanceof kn?1:this.defaultCompareTo(t)},e.prototype.toString=function(){return\"<ServerTimestamp localTime=\"+this.localWriteTime.toString()+\">\"},e}(bn),Nn=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=vn.BlobValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(bn),An=function(t){function e(e,n){var r=t.call(this)||this;return r.databaseId=e,r.key=n,r.typeOrder=vn.RefValue,r}return a.__extends(e,t),e.prototype.value=function(t){return this.key},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.databaseId.isEqual(t.databaseId)},e.prototype.compareTo=function(t){if(t instanceof e){var n=this.databaseId.compareTo(t.databaseId);return 0!==n?n:ct.comparator(this.key,t.key)}return this.defaultCompareTo(t)},e}(bn),Dn=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=vn.GeoPointValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(bn),xn=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=vn.ObjectValue,n}return a.__extends(e,t),e.prototype.value=function(t){var e={};return this.internalValue.inorderTraversal(function(n,r){e[n]=r.value(t)}),e},e.prototype.forEach=function(t){this.internalValue.inorderTraversal(t)},e.prototype.isEqual=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext(),a=K(i.key,o.key)||i.value.compareTo(o.value);if(a)return a}return K(n.hasNext(),r.hasNext())}return this.defaultCompareTo(t)},e.prototype.set=function(t,n){if(g(!t.isEmpty(),\"Cannot set field for empty path on ObjectValue\"),1===t.length)return this.setChild(t.firstSegment(),n);var r=this.child(t.firstSegment());r instanceof e||(r=e.EMPTY);var i=r.set(t.popFirst(),n);return this.setChild(t.firstSegment(),i)},e.prototype.delete=function(t){if(g(!t.isEmpty(),\"Cannot delete field for empty path on ObjectValue\"),1===t.length)return new e(this.internalValue.remove(t.firstSegment()));var n=this.child(t.firstSegment());if(n instanceof e){var r=n.delete(t.popFirst());return new e(this.internalValue.insert(t.firstSegment(),r))}return this},e.prototype.contains=function(t){return void 0!==this.field(t)},e.prototype.field=function(t){g(!t.isEmpty(),\"Can't get field of empty path\");var n=this;return t.forEach(function(t){n=n instanceof e&&n.internalValue.get(t)||void 0}),n},e.prototype.toString=function(){return this.internalValue.toString()},e.prototype.child=function(t){return this.internalValue.get(t)||void 0},e.prototype.setChild=function(t,n){return new e(this.internalValue.insert(t,n))},e.EMPTY=new e(new St(K)),e}(bn),Rn=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=vn.ArrayValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.internalValue.map(function(e){return e.value(t)})},e.prototype.forEach=function(t){this.internalValue.forEach(t)},e.prototype.isEqual=function(t){if(t instanceof e){if(this.internalValue.length!==t.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(t.internalValue[n]))return!1;return!0}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=Math.min(this.internalValue.length,t.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(t.internalValue[r]);if(i)return i}return K(this.internalValue.length,t.internalValue.length)}return this.defaultCompareTo(t)},e.prototype.toString=function(){return\"[\"+this.internalValue.map(function(t){return t.toString()}).join(\",\")+\"]\"},e}(bn),Pn=function(){function t(t){this.fields=t}return t.fromSet=function(e){return new t(e)},t.fromArray=function(e){var n=new kt(ut.comparator);return e.forEach(function(t){return n=n.add(t)}),new t(n)},t.prototype.covers=function(t){var e=!1;return this.fields.forEach(function(n){n.isPrefixOf(t)&&(e=!0)}),e},t.prototype.applyTo=function(t){var e=xn.EMPTY;return this.fields.forEach(function(n){if(n.isEmpty())return t;var r=t.field(n);void 0!==r&&(e=e.set(n,r))}),e},t.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)},t}(),Mn=function(){function t(t,e){this.field=t,this.transform=e}return Object.defineProperty(t.prototype,\"isIdempotent\",{get:function(){return this.transform.isIdempotent},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),jn=function(){return function(t,e){this.version=t,this.transformResults=e}}(),Ln=function(t){return t[t.Set=0]=\"Set\",t[t.Patch=1]=\"Patch\",t[t.Transform=2]=\"Transform\",t[t.Delete=3]=\"Delete\",t}({}),Fn=function(){function t(t,e){this.updateTime=t,this.exists=e,g(void 0===t||void 0===e,'Precondition can specify \"exists\" or \"updateTime\" but not both')}return t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,\"isNone\",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.isValidFor=function(t){return void 0!==this.updateTime?t instanceof de&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===t instanceof de:(g(this.isNone,\"Precondition should be empty\"),!0)},t.prototype.isEqual=function(t){return n=t.updateTime,(null!=(e=this.updateTime)?!(!n||!e.isEqual(n)):e===n)&&this.exists===t.exists;var e,n},t.NONE=new t,t}(),qn=function(){function t(){}return t.prototype.verifyKeyMatches=function(t){null!=t&&g(t.key.isEqual(this.key),\"Can only apply a mutation to a document with the same key\")},t.getPostMutationVersion=function(t){return t instanceof de?t.version:Et.MIN},t}(),Un=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.value=n,i.precondition=r,i.type=Ln.Set,i}return a.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),g(null==e.transformResults,\"Transform results received by SetMutation.\"),new de(this.key,e.version,this.value,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=qn.getPostMutationVersion(t);return new de(this.key,r,this.value,{hasLocalMutations:!0})},Object.defineProperty(e.prototype,\"isIdempotent\",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"fieldMask\",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.precondition.isEqual(t.precondition)},e}(qn),Vn=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.key=e,o.data=n,o.fieldMask=r,o.precondition=i,o.type=Ln.Patch,o}return a.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),g(null==e.transformResults,\"Transform results received by PatchMutation.\"),!this.precondition.isValidFor(t))return new ye(this.key,e.version);var n=this.patchDocument(t);return new de(this.key,e.version,n,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=qn.getPostMutationVersion(t),i=this.patchDocument(t);return new de(this.key,r,i,{hasLocalMutations:!0})},Object.defineProperty(e.prototype,\"isIdempotent\",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.fieldMask.isEqual(t.fieldMask)&&this.precondition.isEqual(t.precondition)},e.prototype.patchDocument=function(t){return this.patchObject(t instanceof de?t.data:xn.EMPTY)},e.prototype.patchObject=function(t){var e=this;return this.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=e.data.field(n);t=void 0!==r?t.set(n,r):t.delete(n)}}),t},e}(qn),Bn=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.fieldTransforms=n,r.type=Ln.Transform,r.precondition=Fn.exists(!0),r}return a.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),g(null!=e.transformResults,\"Transform results missing for TransformMutation.\"),!this.precondition.isValidFor(t))return new ye(this.key,e.version);var n=this.requireDocument(t),r=this.serverTransformResults(t,e.transformResults),i=e.version,o=this.transformObject(n.data,r);return new de(this.key,i,o,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=this.requireDocument(t),i=this.localTransformResults(n,e),o=this.transformObject(r.data,i);return new de(this.key,r.version,o,{hasLocalMutations:!0})},Object.defineProperty(e.prototype,\"isIdempotent\",{get:function(){for(var t=0,e=this.fieldTransforms;t<e.length;t++)if(!e[t].isIdempotent)return!1;return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"fieldMask\",{get:function(){var t=new kt(ut.comparator);return this.fieldTransforms.forEach(function(e){return t=t.add(e.field)}),new Pn(t)},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&G(this.fieldTransforms,t.fieldTransforms)&&this.precondition.isEqual(t.precondition)},e.prototype.requireDocument=function(t){g(t instanceof de,\"Unknown MaybeDocument type \"+t);var e=t;return g(e.key.isEqual(this.key),\"Can only transform a document with the same key\"),e},e.prototype.serverTransformResults=function(t,e){var n=[];g(this.fieldTransforms.length===e.length,\"server transform result count (\"+e.length+\") should match field transform count (\"+this.fieldTransforms.length+\")\");for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;t instanceof de&&(a=t.field(i.field)||null),n.push(o.applyToRemoteDocument(a,e[r]))}return n},e.prototype.localTransformResults=function(t,e){for(var n=[],r=0,i=this.fieldTransforms;r<i.length;r++){var o=i[r],a=o.transform,s=null;e instanceof de&&(s=e.field(o.field)||null),n.push(a.applyToLocalView(s,t))}return n},e.prototype.transformObject=function(t,e){g(e.length===this.fieldTransforms.length,\"TransformResults length mismatch.\");for(var n=0;n<this.fieldTransforms.length;n++)t=t.set(this.fieldTransforms[n].field,e[n]);return t},e}(qn),Wn=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.precondition=n,r.type=Ln.Delete,r}return a.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),g(null==e.transformResults,\"Transform results received by DeleteMutation.\"),new pe(this.key,e.version,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){return this.verifyKeyMatches(t),this.precondition.isValidFor(t)?(t&&g(t.key.isEqual(this.key),\"Can only apply mutation to document with same key\"),new pe(this.key,Et.forDeletedDoc())):t},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.precondition.isEqual(t.precondition)},Object.defineProperty(e.prototype,\"isIdempotent\",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"fieldMask\",{get:function(){return null},enumerable:!0,configurable:!0}),e}(qn),zn=function(){function t(t,e,n){this.remoteDocumentCache=t,this.mutationQueue=e,this.indexManager=n}return t.prototype.getDocument=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.getDocumentInternal(t,e,r)})},t.prototype.getDocumentInternal=function(t,e,n){return this.remoteDocumentCache.getEntry(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].applyToLocalView(e,t);return t})},t.prototype.applyLocalMutationsToDocuments=function(t,e,n){var r=Dt();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].applyToLocalView(t,e);r=r.insert(t,e)}),r},t.prototype.getDocuments=function(t,e){var n=this;return this.remoteDocumentCache.getEntries(t,e).next(function(e){return n.getLocalViewOfDocuments(t,e)})},t.prototype.getLocalViewOfDocuments=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(r){var i=n.applyLocalMutationsToDocuments(t,e,r),o=At();return i.forEach(function(t,e){e||(e=new pe(t,Et.forDeletedDoc())),o=o.insert(t,e)}),o})},t.prototype.getDocumentsMatchingQuery=function(t,e){return e.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(t,e.path):e.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(t,e):this.getDocumentsMatchingCollectionQuery(t,e)},t.prototype.getDocumentsMatchingDocumentQuery=function(t,e){return this.getDocument(t,new ct(e)).next(function(t){var e=Rt();return t instanceof de&&(e=e.insert(t.key,t)),e})},t.prototype.getDocumentsMatchingCollectionGroupQuery=function(t,e){var n=this;g(e.path.isEmpty(),\"Currently we only support collection group queries at the root.\");var r=e.collectionGroup,i=Rt();return this.indexManager.getCollectionParents(t,r).next(function(o){return Bt.forEach(o,function(o){var a=e.asCollectionQueryAtPath(o.child(r));return n.getDocumentsMatchingCollectionQuery(t,a).next(function(t){t.forEach(function(t,e){i=i.insert(t,e)})})}).next(function(){return i})})},t.prototype.getDocumentsMatchingCollectionQuery=function(t,e){var n,r=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(t,e).next(function(i){return n=i,r.mutationQueue.getAllMutationBatchesAffectingQuery(t,e)}).next(function(t){for(var r=0,i=t;r<i.length;r++)for(var o=i[r],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key;if(e.path.isImmediateParentOf(c.path)){var l=n.get(c),h=u.applyToLocalView(l,l,o.localWriteTime);n=h instanceof de?n.insert(c,h):n.remove(c)}}}).next(function(){return n.forEach(function(t,r){e.matches(r)||(n=n.remove(t))}),n})},t}(),Hn=function(){function t(){this.refsByKey=new kt(Qn.compareByKey),this.refsByTarget=new kt(Qn.compareByTargetId)}return t.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},t.prototype.addReference=function(t,e){var n=new Qn(t,e);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},t.prototype.addReferences=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.removeRef(new Qn(t,e))},t.prototype.removeReferences=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.removeReferencesForId=function(t){var e=this,n=ct.EMPTY,r=new Qn(n,t),i=new Qn(n,t+1),o=[];return this.refsByTarget.forEachInRange([r,i],function(t){e.removeRef(t),o.push(t.key)}),o},t.prototype.removeAllReferences=function(){var t=this;this.refsByKey.forEach(function(e){return t.removeRef(e)})},t.prototype.removeRef=function(t){this.refsByKey=this.refsByKey.delete(t),this.refsByTarget=this.refsByTarget.delete(t)},t.prototype.referencesForId=function(t){var e=ct.EMPTY,n=new Qn(e,t),r=new Qn(e,t+1),i=Lt();return this.refsByTarget.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new Qn(t,0),n=this.refsByKey.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Qn=function(){function t(t,e){this.key=t,this.targetOrBatchId=e}return t.compareByKey=function(t,e){return ct.comparator(t.key,e.key)||K(t.targetOrBatchId,e.targetOrBatchId)},t.compareByTargetId=function(t,e){return K(t.targetOrBatchId,e.targetOrBatchId)||ct.comparator(t.key,e.key)},t}(),Kn=function(){function t(t,e){this.persistence=t,this.localViewReferences=new Hn,this.queryDataByTarget={},g(t.started,\"LocalStore was passed an unstarted persistence implementation\"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=t.getMutationQueue(e),this.remoteDocuments=t.getRemoteDocumentCache(),this.queryCache=t.getQueryCache(),this.localDocuments=new zn(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager())}return t.prototype.handleUserChange=function(t){var e=this;return this.persistence.runTransaction(\"Handle user change\",\"readonly\",function(n){var r;return e.mutationQueue.getAllMutationBatches(n).next(function(i){return r=i,e.mutationQueue=e.persistence.getMutationQueue(t),e.localDocuments=new zn(e.remoteDocuments,e.mutationQueue,e.persistence.getIndexManager()),e.mutationQueue.getAllMutationBatches(n)}).next(function(t){for(var i=[],o=[],a=Lt(),s=0,u=r;s<u.length;s++){i.push((d=u[s]).batchId);for(var c=0,l=d.mutations;c<l.length;c++)a=a.add(l[c].key)}for(var h=0,f=t;h<f.length;h++){var d;o.push((d=f[h]).batchId);for(var p=0,y=d.mutations;p<y.length;p++)a=a.add(y[p].key)}return e.localDocuments.getDocuments(n,a).next(function(t){return{affectedDocuments:t,removedBatchIds:i,addedBatchIds:o}})})})},t.prototype.localWrite=function(t){var e=this,n=_t.now(),r=t.reduce(function(t,e){return t.add(e.key)},Lt());return this.persistence.runTransaction(\"Locally write mutations\",\"readwrite\",function(i){return e.localDocuments.getDocuments(i,r).next(function(r){for(var o=[],a=0,s=t;a<s.length;a++){var u=s[a],c=r.get(u.key);if(!u.isIdempotent){var l=u.fieldMask;if(l){var h=c instanceof de?l.applyTo(c.data):xn.EMPTY;o.push(new Vn(u.key,h,l,Fn.exists(!0)))}}}return e.mutationQueue.addMutationBatch(i,n,o,t).next(function(t){var e=t.applyToLocalDocumentSet(r);return{batchId:t.batchId,changes:e}})})})},t.prototype.lookupMutationDocuments=function(t){var e=this;return this.persistence.runTransaction(\"Lookup mutation documents\",\"readonly\",function(n){return e.mutationQueue.lookupMutationKeys(n,t).next(function(t){return t?e.localDocuments.getDocuments(n,t):Bt.resolve(null)})})},t.prototype.acknowledgeBatch=function(t){var e=this;return this.persistence.runTransaction(\"Acknowledge batch\",\"readwrite-primary\",function(n){var r=t.batch.keys(),i=e.remoteDocuments.newChangeBuffer();return e.mutationQueue.acknowledgeBatch(n,t.batch,t.streamToken).next(function(){return e.applyWriteToRemoteDocuments(n,t,i)}).next(function(){return i.apply(n)}).next(function(){return e.mutationQueue.performConsistencyCheck(n)}).next(function(){return e.localDocuments.getDocuments(n,r)})})},t.prototype.rejectBatch=function(t){var e=this;return this.persistence.runTransaction(\"Reject batch\",\"readwrite-primary\",function(n){var r;return e.mutationQueue.lookupMutationBatch(n,t).next(function(t){return g(null!==t,\"Attempt to reject nonexistent batch!\"),r=t.keys(),e.mutationQueue.removeMutationBatch(n,t)}).next(function(){return e.mutationQueue.performConsistencyCheck(n)}).next(function(){return e.localDocuments.getDocuments(n,r)})})},t.prototype.getLastStreamToken=function(){var t=this;return this.persistence.runTransaction(\"Get last stream token\",\"readonly\",function(e){return t.mutationQueue.getLastStreamToken(e)})},t.prototype.setLastStreamToken=function(t){var e=this;return this.persistence.runTransaction(\"Set last stream token\",\"readwrite-primary\",function(n){return e.mutationQueue.setLastStreamToken(n,t)})},t.prototype.getLastRemoteSnapshotVersion=function(){var t=this;return this.persistence.runTransaction(\"Get last remote snapshot version\",\"readonly\",function(e){return t.queryCache.getLastRemoteSnapshotVersion(e)})},t.prototype.applyRemoteEvent=function(e){var n=this,r=this.remoteDocuments.newChangeBuffer();return this.persistence.runTransaction(\"Apply remote event\",\"readwrite-primary\",function(i){var o=[],a=Lt();I(e.targetChanges,function(r,s){var u=n.queryDataByTarget[r];if(u){s.addedDocuments.forEach(function(t){a=a.add(t)}),s.modifiedDocuments.forEach(function(t){a=a.add(t)}),o.push(n.queryCache.removeMatchingKeys(i,s.removedDocuments,r).next(function(){return n.queryCache.addMatchingKeys(i,s.addedDocuments,r)}));var c=s.resumeToken;if(c.length>0){var l=u;u=u.copy({resumeToken:c,snapshotVersion:e.snapshotVersion}),n.queryDataByTarget[r]=u,t.shouldPersistQueryData(l,u,s)&&o.push(n.queryCache.updateQueryData(i,u))}}});var s=At(),u=Lt();e.documentUpdates.forEach(function(t,e){u=u.add(t)}),o.push(r.getEntries(i,u).next(function(t){e.documentUpdates.forEach(function(u,c){var l=t.get(u);null==l||c.version.isEqual(Et.MIN)||a.has(c.key)&&!l.hasPendingWrites||c.version.compareTo(l.version)>=0?(r.addEntry(c),s=s.insert(u,c)):p(\"LocalStore\",\"Ignoring outdated watch update for \",u,\". Current version:\",l.version,\" Watch version:\",c.version),e.resolvedLimboDocuments.has(u)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))})}));var c=e.snapshotVersion;if(!c.isEqual(Et.MIN)){var l=n.queryCache.getLastRemoteSnapshotVersion(i).next(function(t){return g(c.compareTo(t)>=0,\"Watch stream reverted to previous snapshot?? \"+c+\" < \"+t),n.queryCache.setTargetsMetadata(i,i.currentSequenceNumber,c)});o.push(l)}return Bt.waitFor(o).next(function(){return r.apply(i)}).next(function(){return n.localDocuments.getLocalViewOfDocuments(i,s)})})},t.shouldPersistQueryData=function(t,e,n){return 0!==e.resumeToken.length&&(0===t.resumeToken.length||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)},t.prototype.notifyLocalViewChanges=function(t){var e=this;return this.persistence.runTransaction(\"notifyLocalViewChanges\",\"readwrite\",function(n){return Bt.forEach(t,function(t){return e.localViewReferences.addReferences(t.addedKeys,t.targetId),e.localViewReferences.removeReferences(t.removedKeys,t.targetId),Bt.forEach(t.removedKeys,function(t){return e.persistence.referenceDelegate.removeReference(n,t)})})})},t.prototype.nextMutationBatch=function(t){var e=this;return this.persistence.runTransaction(\"Get next mutation batch\",\"readonly\",function(n){return void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)})},t.prototype.readDocument=function(t){var e=this;return this.persistence.runTransaction(\"read document\",\"readonly\",function(n){return e.localDocuments.getDocument(n,t)})},t.prototype.allocateQuery=function(t){var e=this;return this.persistence.runTransaction(\"Allocate query\",\"readwrite\",function(n){var r;return e.queryCache.getQueryData(n,t).next(function(i){return i?(r=i,Bt.resolve()):e.queryCache.allocateTargetId(n).next(function(i){return r=new Xe(t,i,Ye.Listen,n.currentSequenceNumber),e.queryCache.addQueryData(n,r)})}).next(function(){return g(!e.queryDataByTarget[r.targetId],\"Tried to allocate an already allocated query: \"+t),e.queryDataByTarget[r.targetId]=r,r})})},t.prototype.releaseQuery=function(t,e){var n=this;return this.persistence.runTransaction(\"Release query\",e?\"readwrite\":\"readwrite-primary\",function(r){return n.queryCache.getQueryData(r,t).next(function(i){g(null!=i,\"Tried to release nonexistent query: \"+t);var o=i.targetId,a=n.queryDataByTarget[o],s=n.localViewReferences.removeReferencesForId(o);return delete n.queryDataByTarget[o],e?Bt.resolve():Bt.forEach(s,function(t){return n.persistence.referenceDelegate.removeReference(r,t)}).next(function(){return n.persistence.referenceDelegate.removeTarget(r,a)})})})},t.prototype.executeQuery=function(t){var e=this;return this.persistence.runTransaction(\"Execute query\",\"readonly\",function(n){return e.localDocuments.getDocumentsMatchingQuery(n,t)})},t.prototype.remoteDocumentKeys=function(t){var e=this;return this.persistence.runTransaction(\"Remote document keys\",\"readonly\",function(n){return e.queryCache.getMatchingKeysForTargetId(n,t)})},t.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},t.prototype.removeCachedMutationBatchMetadata=function(t){this.mutationQueue.removeCachedMutationKeys(t)},t.prototype.setNetworkEnabled=function(t){this.persistence.setNetworkEnabled(t)},t.prototype.applyWriteToRemoteDocuments=function(t,e,n){var r=this,i=e.batch,o=i.keys(),a=Bt.resolve();return o.forEach(function(r){a=a.next(function(){return n.getEntry(t,r)}).next(function(t){var o=t,a=e.docVersions.get(r);g(null!==a,\"ackVersions should contain every doc in the write.\"),(!o||o.version.compareTo(a)<0)&&((o=i.applyToRemoteDocument(r,o,e))?n.addEntry(o):g(!t,\"Mutation batch \"+i+\" applied to document \"+t+\" resulted in null\"))})}),a.next(function(){return r.mutationQueue.removeMutationBatch(t,i)})},t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction(\"Collect garbage\",\"readwrite-primary\",function(n){return t.collect(n,e.queryDataByTarget)})},t.prototype.getQueryForTarget=function(t){var e=this;return this.queryDataByTarget[t]?Promise.resolve(this.queryDataByTarget[t].query):this.persistence.runTransaction(\"Get query data\",\"readonly\",function(n){return e.queryCache.getQueryDataForTarget(n,t).next(function(t){return t?t.query:null})})},t.prototype.getNewDocumentChanges=function(){var t=this;return this.persistence.runTransaction(\"Get new document changes\",\"readonly\",function(e){return t.remoteDocuments.getNewDocumentChanges(e)})},t.RESUME_TOKEN_MAX_AGE_MICROS=3e8,t}(),Gn=function(){function t(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=w(),this.batchesByDocumentKey=new kt(Qn.compareByKey)}return t.prototype.checkEmpty=function(t){return Bt.resolve(0===this.mutationQueue.length)},t.prototype.acknowledgeBatch=function(t,e,n){var r=e.batchId,i=this.indexOfExistingBatchId(r,\"acknowledged\");g(0===i,\"Can only acknowledge the first batch in the mutation queue\");var o=this.mutationQueue[i];return g(r===o.batchId,\"Queue ordering failure: expected batch \"+r+\", got batch \"+o.batchId),this.lastStreamToken=n,Bt.resolve()},t.prototype.getLastStreamToken=function(t){return Bt.resolve(this.lastStreamToken)},t.prototype.setLastStreamToken=function(t,e){return this.lastStreamToken=e,Bt.resolve()},t.prototype.addMutationBatch=function(t,e,n,r){g(0!==r.length,\"Mutation batches should not be empty\");var i=this.nextBatchId;this.nextBatchId++,this.mutationQueue.length>0&&g(this.mutationQueue[this.mutationQueue.length-1].batchId<i,\"Mutation batchIDs must be monotonically increasing order\");var o=new Ut(i,e,n,r);this.mutationQueue.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new Qn(u.key,i)),this.indexManager.addToCollectionParentIndex(t,u.key.path.popLast())}return Bt.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Bt.resolve(this.findMutationBatch(e))},t.prototype.lookupMutationKeys=function(t,e){var n=this.findMutationBatch(e);return g(null!=n,\"Failed to find local mutation batch.\"),Bt.resolve(n.keys())},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.indexOfBatchId(e+1),r=n<0?0:n;return Bt.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)},t.prototype.getAllMutationBatches=function(t){return Bt.resolve(this.mutationQueue.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Qn(e,0),i=new Qn(e,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],function(t){g(e.isEqual(t.key),\"Should only iterate over a single key's batches\");var r=n.findMutationBatch(t.targetOrBatchId);g(null!==r,\"Batches in the index must exist in the main table\"),o.push(r)}),Bt.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new kt(K);return e.forEach(function(t){var e=new Qn(t,0),i=new Qn(t,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([e,i],function(e){g(t.isEqual(e.key),\"For each key, should only iterate over a single key's batches\"),r=r.add(e.targetOrBatchId)})}),Bt.resolve(this.findMutationBatches(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){g(!e.isCollectionGroupQuery(),\"CollectionGroup queries should be handled in LocalDocumentsView\");var n=e.path,r=n.length+1,i=n;ct.isDocumentKey(i)||(i=i.child(\"\"));var o=new Qn(new ct(i),0),a=new kt(K);return this.batchesByDocumentKey.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.targetOrBatchId)),!0)},o),Bt.resolve(this.findMutationBatches(a))},t.prototype.findMutationBatches=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.findMutationBatch(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;g(0===this.indexOfExistingBatchId(e.batchId,\"removed\"),\"Can only remove the first entry of the mutation queue\"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return Bt.forEach(e.mutations,function(i){var o=new Qn(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(t,i.key)}).next(function(){n.batchesByDocumentKey=r})},t.prototype.removeCachedMutationKeys=function(t){},t.prototype.containsKey=function(t,e){var n=new Qn(e,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return Bt.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return 0===this.mutationQueue.length&&g(this.batchesByDocumentKey.isEmpty(),\"Document leak -- detected dangling mutation references when queue is empty.\"),Bt.resolve()},t.prototype.indexOfExistingBatchId=function(t,e){var n=this.indexOfBatchId(t);return g(n>=0&&n<this.mutationQueue.length,\"Batches must exist to be \"+e),n},t.prototype.indexOfBatchId=function(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId},t.prototype.findMutationBatch=function(t){var e=this.indexOfBatchId(t);if(e<0||e>=this.mutationQueue.length)return null;var n=this.mutationQueue[e];return g(n.batchId===t,\"If found batch must match\"),n},t}(),Yn=function(){function t(t){this.persistence=t,this.queries=new ve(function(t){return t.canonicalId()}),this.lastRemoteSnapshotVersion=Et.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new Hn,this.targetCount=0,this.targetIdGenerator=Zt.forQueryCache()}return t.prototype.getTargetCount=function(t){return Bt.resolve(this.targetCount)},t.prototype.forEachTarget=function(t,e){return this.queries.forEach(function(t,n){return e(n)}),Bt.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Bt.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Bt.resolve(this.highestSequenceNumber)},t.prototype.allocateTargetId=function(t){var e=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=e,Bt.resolve(e)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.highestSequenceNumber&&(this.highestSequenceNumber=e),Bt.resolve()},t.prototype.saveQueryData=function(t){this.queries.set(t.query,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e),t.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=t.sequenceNumber)},t.prototype.addQueryData=function(t,e){return g(!this.queries.has(e.query),\"Adding a query that already exists\"),this.saveQueryData(e),this.targetCount+=1,Bt.resolve()},t.prototype.updateQueryData=function(t,e){return g(this.queries.has(e.query),\"Updating a non-existent query\"),this.saveQueryData(e),Bt.resolve()},t.prototype.removeQueryData=function(t,e){return g(this.targetCount>0,\"Removing a target from an empty cache\"),g(this.queries.has(e.query),\"Removing a non-existent target from the cache\"),this.queries.delete(e.query),this.references.removeReferencesForId(e.targetId),this.targetCount-=1,Bt.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.queries.forEach(function(a,s){s.sequenceNumber<=e&&!n[s.targetId]&&(r.queries.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)}),Bt.waitFor(o).next(function(){return i})},t.prototype.getQueryCount=function(t){return Bt.resolve(this.targetCount)},t.prototype.getQueryData=function(t,e){var n=this.queries.get(e)||null;return Bt.resolve(n)},t.prototype.getQueryDataForTarget=function(t,e){return m(\"Not yet implemented.\")},t.prototype.addMatchingKeys=function(t,e,n){this.references.addReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.addReference(t,e))}),Bt.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){this.references.removeReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.removeReference(t,e))}),Bt.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.references.removeReferencesForId(e),Bt.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.references.referencesForId(e);return Bt.resolve(n)},t.prototype.containsKey=function(t,e){return Bt.resolve(this.references.containsKey(e))},t}(),Xn=function(){function t(t,e){this.indexManager=t,this.sizer=e,this.docs=new St(ct.comparator),this.newDocumentChanges=Lt(),this.size=0}return t.prototype.addEntries=function(t,e,n){for(var r=[],i=0,o=e;i<o.length;i++){var a=o[i],s=a.maybeDocument.key;this.docs=this.docs.insert(s,a),this.newDocumentChanges=this.newDocumentChanges.add(s),r.push(this.indexManager.addToCollectionParentIndex(t,s.path.popLast()))}return this.size+=n,Bt.waitFor(r)},t.prototype.removeEntry=function(t,e){var n=this.docs.get(e);return n?(this.docs=this.docs.remove(e),this.size-=n.size,Bt.resolve(n.size)):Bt.resolve(0)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Bt.resolve(n?n.maybeDocument:null)},t.prototype.getSizedEntry=function(t,e){return Bt.resolve(this.docs.get(e))},t.prototype.getEntries=function(t,e){var n=this,r=Dt();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null)}),Bt.resolve(r)},t.prototype.getSizedEntries=function(t,e){var n=this,r=Dt(),i=new St(ct.comparator);return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null),i=i.insert(t,e?e.size:0)}),Bt.resolve({maybeDocuments:r,sizeMap:i})},t.prototype.getDocumentsMatchingQuery=function(t,e){g(!e.isCollectionGroupQuery(),\"CollectionGroup queries should be handled in LocalDocumentsView\");for(var n=Rt(),r=new ct(e.path.child(\"\")),i=this.docs.getIteratorFrom(r);i.hasNext();){var o=i.getNext(),a=o.value.maybeDocument;if(!e.path.isPrefixOf(o.key.path))break;a instanceof de&&e.matches(a)&&(n=n.insert(a.key,a))}return Bt.resolve(n)},t.prototype.forEachDocumentKey=function(t,e){return Bt.forEach(this.docs,function(t){return e(t)})},t.prototype.getNewDocumentChanges=function(t){var e=this,n=At();return this.newDocumentChanges.forEach(function(t){var r=e.docs.get(t),i=r?r.maybeDocument:new pe(t,Et.forDeletedDoc());n=n.insert(t,i)}),this.newDocumentChanges=Lt(),Bt.resolve(n)},t.prototype.newChangeBuffer=function(){return new Jn(this.sizer,this)},t.prototype.getSize=function(t){return Bt.resolve(this.size)},t}(),Jn=function(t){function e(e,n){var r=t.call(this)||this;return r.sizer=e,r.documentCache=n,r}return a.__extends(e,t),e.prototype.applyChanges=function(t){var e=this,n=this.assertChanges(),r=0,i=[];return n.forEach(function(t,n){var o=e.documentSizes.get(t);g(void 0!==o,\"Attempting to change document \"+t.toString()+\" without having read it first\");var a=e.sizer(n);r+=a-o,i.push({maybeDocument:n,size:a})}),this.documentCache.addEntries(t,i,r)},e.prototype.getFromCache=function(t,e){return this.documentCache.getSizedEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.documentCache.getSizedEntries(t,e)},e}(me),Zn=function(){function t(t,e){var n=this;this.clientId=t,this.mutationQueues={},this.listenSequence=new it(0),this._started=!1,this._started=!0,this.referenceDelegate=e(this),this.queryCache=new Yn(this),this.indexManager=new Ie,this.remoteDocumentCache=new Xn(this.indexManager,function(t){return n.referenceDelegate.documentSize(t)})}return t.createLruPersistence=function(e,n,r){return new t(e,function(t){return new er(t,new Je(n),r)})},t.createEagerPersistence=function(e){return new t(e,function(t){return new tr(t)})},t.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(t.prototype,\"started\",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getActiveClients=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){return[2,[this.clientId]]})})},t.prototype.setPrimaryStateListener=function(t){return t(!0)},t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(t){},t.prototype.getIndexManager=function(){return this.indexManager},t.prototype.getMutationQueue=function(t){var e=this.mutationQueues[t.toKey()];return e||(e=new Gn(this.indexManager,this.referenceDelegate),this.mutationQueues[t.toKey()]=e),e},t.prototype.getQueryCache=function(){return this.queryCache},t.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},t.prototype.runTransaction=function(t,e,n){var r=this;p(\"MemoryPersistence\",\"Starting transaction:\",t);var i=new $n(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next(function(t){return r.referenceDelegate.onTransactionCommitted(i).next(function(){return t})}).toPromise()},t.prototype.mutationQueuesContainKey=function(t,e){return Bt.or((n=this.mutationQueues,r=[],k(n,function(t,e){return r.push(e)}),r).map(function(n){return function(){return n.containsKey(t,e)}}));var n,r},t}(),$n=function(){return function(t){this.currentSequenceNumber=t}}(),tr=function(){function t(t){this.persistence=t}return t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return this.orphanedDocuments.delete(e),Bt.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedDocuments.add(e),Bt.resolve()},t.prototype.removeMutationReference=function(t,e){return this.orphanedDocuments.add(e),Bt.resolve()},t.prototype.removeTarget=function(t,e){var n=this,r=this.persistence.getQueryCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.orphanedDocuments.add(t)})}).next(function(){return r.removeQueryData(t,e)})},t.prototype.onTransactionStarted=function(){this.orphanedDocuments=new Set},t.prototype.onTransactionCommitted=function(t){var e=this,n=this.persistence.getRemoteDocumentCache();return Bt.forEach(this.orphanedDocuments,function(r){return e.isReferenced(t,r).next(function(e){return e?Bt.resolve():n.removeEntry(t,r).next(function(){})})})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.isReferenced(t,e).next(function(t){t?n.orphanedDocuments.delete(e):n.orphanedDocuments.add(e)})},t.prototype.documentSize=function(t){return 0},t.prototype.isReferenced=function(t,e){var n=this;return Bt.or([function(){return n.persistence.getQueryCache().containsKey(t,e)},function(){return n.persistence.mutationQueuesContainKey(t,e)},function(){return Bt.resolve(n.inMemoryPins.containsKey(e))}])},t}(),er=function(){function t(t,e,n){this.persistence=t,this.serializer=e,this.orphanedSequenceNumbers=new ve(function(t){return mt(t.path)}),this.garbageCollector=new rn(this,n)}return t.prototype.onTransactionStarted=function(){},t.prototype.onTransactionCommitted=function(t){return Bt.resolve()},t.prototype.forEachTarget=function(t,e){return this.persistence.getQueryCache().forEachTarget(t,e)},t.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocumentCount(t);return this.persistence.getQueryCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.orphanedDocumentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,function(t){e++}).next(function(){return e})},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){var n=this;return Bt.forEach(this.orphanedSequenceNumbers,function(r,i){return n.isPinned(t,r,i).next(function(t){return t?Bt.resolve():e(i)})})},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.removeTargets=function(t,e,n){return this.persistence.getQueryCache().removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=0,i=this.persistence.getRemoteDocumentCache();return i.forEachDocumentKey(t,function(o){return n.isPinned(t,o,e).next(function(e){return e?Bt.resolve():(r++,i.removeEntry(t,o).next())})}).next(function(){return r})},t.prototype.removeMutationReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Bt.resolve()},t.prototype.removeTarget=function(t,e){var n=e.copy({sequenceNumber:t.currentSequenceNumber});return this.persistence.getQueryCache().updateQueryData(t,n)},t.prototype.addReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Bt.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Bt.resolve()},t.prototype.updateLimboDocument=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Bt.resolve()},t.prototype.documentSize=function(t){var e,n=this.serializer.toDbRemoteDocument(t);if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw m(\"Unknown remote document type\");e=n.noDocument}return JSON.stringify(e).length},t.prototype.isPinned=function(t,e,n){var r=this;return Bt.or([function(){return r.persistence.mutationQueuesContainKey(t,e)},function(){return Bt.resolve(r.inMemoryPins.containsKey(e))},function(){return r.persistence.getQueryCache().containsKey(t,e)},function(){var t=r.orphanedSequenceNumbers.get(e);return Bt.resolve(void 0!==t&&t>n)}])},t.prototype.getCacheSize=function(t){return this.persistence.getRemoteDocumentCache().getSize(t)},t}(),nr=Number,rr=nr.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),ir=nr.MAX_SAFE_INTEGER||Math.pow(2,53)-1,or=nr.isInteger||function(t){return\"number\"==typeof t&&isFinite(t)&&Math.floor(t)===t};function ar(t){return null==t}function sr(t){return or(t)&&t<=ir&&t>=rr}var ur=function(){function t(t,e,n,r,i){this.queue=t,this.timerId=e,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return t.prototype.reset=function(){this.currentBaseMs=0},t.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},t.prototype.backoffAndRun=function(t){var e=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);this.currentBaseMs>0&&p(\"ExponentialBackoff\",\"Backing off for \"+i+\" ms (base delay: \"+this.currentBaseMs+\" ms, delay with jitter: \"+n+\" ms, last attempt: \"+r+\" ms ago)\"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,function(){return e.lastAttemptTime=Date.now(),t()}),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},t.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},t.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},t}(),cr=function(t){return t[t.Initial=0]=\"Initial\",t[t.Starting=1]=\"Starting\",t[t.Open=2]=\"Open\",t[t.Error=3]=\"Error\",t[t.Backoff=4]=\"Backoff\",t}({}),lr=1e3,hr=6e4,fr=1.5,dr=function(){function t(t,e,n,r,i,o){this.queue=t,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=cr.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new ur(t,e,lr,fr,hr)}return t.prototype.isStarted=function(){return this.state===cr.Starting||this.state===cr.Open||this.state===cr.Backoff},t.prototype.isOpen=function(){return this.state===cr.Open},t.prototype.start=function(){this.state!==cr.Error?(g(this.state===cr.Initial,\"Already started\"),this.auth()):this.performBackoff()},t.prototype.stop=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return this.isStarted()?[4,this.close(cr.Initial)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.inhibitBackoff=function(){g(!this.isStarted(),\"Can only inhibit backoff in a stopped state\"),this.state=cr.Initial,this.backoff.reset()},t.prototype.markIdle=function(){var t=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,function(){return t.handleIdleCloseTimer()}))},t.prototype.sendRequest=function(t){this.cancelIdleCheck(),this.stream.send(t)},t.prototype.handleIdleCloseTimer=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){return this.isOpen()?[2,this.close(cr.Initial)]:[2]})})},t.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},t.prototype.close=function(t,e){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(n){switch(n.label){case 0:return g(this.isStarted(),\"Only started streams should be closed.\"),g(t===cr.Error||ar(e),\"Can't provide an error when not in an error state.\"),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,t!==cr.Error?this.backoff.reset():e&&e.code===_.RESOURCE_EXHAUSTED?(y(e.toString()),y(\"Using maximum backoff delay to prevent overloading the backend.\"),this.backoff.resetToMax()):e&&e.code===_.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.onClose(e)];case 1:return n.sent(),[2]}})})},t.prototype.tearDown=function(){},t.prototype.auth=function(){var t=this;g(this.state===cr.Initial,\"Must be in initial state to auth\"),this.state=cr.Starting;var e=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then(function(e){t.closeCount===n&&t.startStream(e)},function(n){e(function(){var e=new E(_.UNKNOWN,\"Fetching auth token failed: \"+n.message);return t.handleStreamClose(e)})})},t.prototype.startStream=function(t){var e=this;g(this.state===cr.Starting,\"Trying to start stream in a non-starting state\");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(t),this.stream.onOpen(function(){n(function(){return g(e.state===cr.Starting,\"Expected stream to be in state Starting, but was \"+e.state),e.state=cr.Open,e.listener.onOpen()})}),this.stream.onClose(function(t){n(function(){return e.handleStreamClose(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.performBackoff=function(){var t=this;g(this.state===cr.Error,\"Should only perform backoff when in Error state\"),this.state=cr.Backoff,this.backoff.backoffAndRun(function(){return a.__awaiter(t,void 0,void 0,function(){return a.__generator(this,function(t){return g(this.state===cr.Backoff,\"Backoff elapsed but state is now: \"+this.state),this.state=cr.Initial,this.start(),g(this.isStarted(),\"PersistentStream should have started\"),[2]})})})},t.prototype.handleStreamClose=function(t){return g(this.isStarted(),\"Can't handle server close on non-started stream\"),p(\"PersistentStream\",\"close with error: \"+t),this.stream=null,this.close(cr.Error,t)},t.prototype.getCloseGuardedDispatcher=function(t){var e=this;return function(n){e.queue.enqueueAndForget(function(){return e.closeCount===t?n():(p(\"PersistentStream\",\"stream callback skipped by getCloseGuardedDispatcher.\"),Promise.resolve())})}},t}(),pr=function(t){function e(e,n,r,i,o){var a=t.call(this,e,Z.ListenStreamConnectionBackoff,Z.ListenStreamIdle,n,r,o)||this;return a.serializer=i,a}return a.__extends(e,t),e.prototype.startRpc=function(t){return this.connection.openStream(\"Listen\",t)},e.prototype.onMessage=function(t){this.backoff.reset();var e=this.serializer.fromWatchChange(t),n=this.serializer.versionFromListenResponse(t);return this.listener.onWatchChange(e,n)},e.prototype.watch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.addTarget=this.serializer.toTarget(t);var n=this.serializer.toListenRequestLabels(t);n&&(e.labels=n),this.sendRequest(e)},e.prototype.unwatch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.removeTarget=t,this.sendRequest(e)},e}(dr),yr=function(t){function e(e,n,r,i,o){var a=t.call(this,e,Z.WriteStreamConnectionBackoff,Z.WriteStreamIdle,n,r,o)||this;return a.serializer=i,a.handshakeComplete_=!1,a}return a.__extends(e,t),Object.defineProperty(e.prototype,\"handshakeComplete\",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.handshakeComplete_=!1,t.prototype.start.call(this)},e.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},e.prototype.startRpc=function(t){return this.connection.openStream(\"Write\",t)},e.prototype.onMessage=function(t){if(g(!!t.streamToken,\"Got a write response without a stream token\"),this.lastStreamToken=t.streamToken,this.handshakeComplete_){this.backoff.reset();var e=this.serializer.fromWriteResults(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.onMutationResult(n,e)}return g(!t.writeResults||0===t.writeResults.length,\"Got mutation results for handshake\"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},e.prototype.writeHandshake=function(){g(this.isOpen(),\"Writing handshake requires an opened stream\"),g(!this.handshakeComplete_,\"Handshake already completed\");var t={};t.database=this.serializer.encodedDatabaseId,this.sendRequest(t)},e.prototype.writeMutations=function(t){var e=this;g(this.isOpen(),\"Writing mutations requires an opened stream\"),g(this.handshakeComplete_,\"Handshake must be complete before writing mutations\"),g(this.lastStreamToken.length>0,\"Trying to write mutation without a token\");var n={streamToken:this.lastStreamToken,writes:t.map(function(t){return e.serializer.toMutation(t)})};this.sendRequest(n)},e}(dr),vr=function(){function t(t,e,n,r){this.queue=t,this.connection=e,this.credentials=n,this.serializer=r}return t.prototype.newPersistentWriteStream=function(t){return new yr(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.newPersistentWatchStream=function(t){return new pr(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.commit=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,writes:t.map(function(t){return e.serializer.toMutation(t)})};return this.invokeRPC(\"Commit\",n).then(function(t){return e.serializer.fromWriteResults(t.writeResults,t.commitTime)})},t.prototype.lookup=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,documents:t.map(function(t){return e.serializer.toName(t)})};return this.invokeStreamingRPC(\"BatchGetDocuments\",n).then(function(n){var r=At();n.forEach(function(t){var n=e.serializer.fromMaybeDocument(t);r=r.insert(n.key,n)});var i=[];return t.forEach(function(t){var e=r.get(t);g(!!e,\"Missing entity in write response for \"+t),i.push(e)}),i})},t.prototype.invokeRPC=function(t,e){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeRPC(t,e,r)}).catch(function(t){throw t.code===_.UNAUTHENTICATED&&n.credentials.invalidateToken(),t})},t.prototype.invokeStreamingRPC=function(t,e){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeStreamingRPC(t,e,r)}).catch(function(t){throw t.code===_.UNAUTHENTICATED&&n.credentials.invalidateToken(),t})},t}(),mr=function(){function t(t){this.datastore=t,this.readVersions=Mt(),this.mutations=[],this.committed=!1}return t.prototype.recordVersion=function(t){var e;if(t instanceof de)e=t.version;else{if(!(t instanceof pe))throw m(\"Document in a transaction was a \"+t.constructor.name);e=Et.forDeletedDoc()}var n=this.readVersions.get(t.key);if(null!==n){if(!e.isEqual(n))throw new E(_.ABORTED,\"Document version changed between two reads.\")}else this.readVersions=this.readVersions.insert(t.key,e)},t.prototype.lookup=function(t){var e=this;return this.committed?Promise.reject(\"Transaction has already completed.\"):this.mutations.length>0?Promise.reject(\"Transactions lookups are invalid after writes.\"):this.datastore.lookup(t).then(function(t){return t.forEach(function(t){t instanceof pe||t instanceof de?e.recordVersion(t):m(\"Document in a transaction was a \"+t.constructor.name)}),t})},t.prototype.write=function(t){if(this.committed)throw new E(_.FAILED_PRECONDITION,\"Transaction has already completed.\");this.mutations=this.mutations.concat(t)},t.prototype.precondition=function(t){var e=this.readVersions.get(t);return e?Fn.updateTime(e):Fn.NONE},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t);if(e&&e.isEqual(Et.forDeletedDoc()))throw new E(_.FAILED_PRECONDITION,\"Can't update a document that doesn't exist.\");return e?Fn.updateTime(e):Fn.exists(!0)},t.prototype.set=function(t,e){this.write(e.toMutations(t,this.precondition(t)))},t.prototype.update=function(t,e){this.write(e.toMutations(t,this.preconditionForUpdate(t)))},t.prototype.delete=function(t){this.write([new Wn(t,this.precondition(t))]),this.readVersions=this.readVersions.insert(t,Et.forDeletedDoc())},t.prototype.commit=function(){var t=this,e=this.readVersions;return this.mutations.forEach(function(t){e=e.remove(t.key)}),e.isEmpty()?this.datastore.commit(this.mutations).then(function(){t.committed=!0}):Promise.reject(Error(\"Every document read in a transaction must also be written.\"))},t}(),gr=function(t){return t[t.Unknown=0]=\"Unknown\",t[t.Online=1]=\"Online\",t[t.Offline=2]=\"Offline\",t}({}),br=function(t){return t[t.RemoteStore=0]=\"RemoteStore\",t[t.SharedClientState=1]=\"SharedClientState\",t}({}),wr=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state=gr.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return t.prototype.handleWatchStreamStart=function(){var t=this;0===this.watchStreamFailures&&(this.setAndBroadcast(gr.Unknown),g(null===this.onlineStateTimer,\"onlineStateTimer shouldn't be started yet\"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(Z.OnlineStateTimeout,1e4,function(){return t.onlineStateTimer=null,g(t.state===gr.Unknown,\"Timer should be canceled if we transitioned to a different state.\"),t.logClientOfflineWarningIfNecessary(\"Backend didn't respond within 10 seconds.\"),t.setAndBroadcast(gr.Offline),Promise.resolve()}))},t.prototype.handleWatchStreamFailure=function(t){this.state===gr.Online?(this.setAndBroadcast(gr.Unknown),g(0===this.watchStreamFailures,\"watchStreamFailures must be 0\"),g(null===this.onlineStateTimer,\"onlineStateTimer must be null\")):(this.watchStreamFailures++,this.watchStreamFailures>=1&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary(\"Connection failed 1 times. Most recent error: \"+t.toString()),this.setAndBroadcast(gr.Offline)))},t.prototype.set=function(t){this.clearOnlineStateTimer(),this.watchStreamFailures=0,t===gr.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(t)},t.prototype.setAndBroadcast=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.logClientOfflineWarningIfNecessary=function(t){var e=\"Could not reach Cloud Firestore backend. \"+t+\"\\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.\";this.shouldWarnClientIsOffline?(y(e),this.shouldWarnClientIsOffline=!1):p(\"OnlineStateTracker\",e)},t.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},t}(),_r=function(t){return t[t.OK=0]=\"OK\",t[t.CANCELLED=1]=\"CANCELLED\",t[t.UNKNOWN=2]=\"UNKNOWN\",t[t.INVALID_ARGUMENT=3]=\"INVALID_ARGUMENT\",t[t.DEADLINE_EXCEEDED=4]=\"DEADLINE_EXCEEDED\",t[t.NOT_FOUND=5]=\"NOT_FOUND\",t[t.ALREADY_EXISTS=6]=\"ALREADY_EXISTS\",t[t.PERMISSION_DENIED=7]=\"PERMISSION_DENIED\",t[t.UNAUTHENTICATED=16]=\"UNAUTHENTICATED\",t[t.RESOURCE_EXHAUSTED=8]=\"RESOURCE_EXHAUSTED\",t[t.FAILED_PRECONDITION=9]=\"FAILED_PRECONDITION\",t[t.ABORTED=10]=\"ABORTED\",t[t.OUT_OF_RANGE=11]=\"OUT_OF_RANGE\",t[t.UNIMPLEMENTED=12]=\"UNIMPLEMENTED\",t[t.INTERNAL=13]=\"INTERNAL\",t[t.UNAVAILABLE=14]=\"UNAVAILABLE\",t[t.DATA_LOSS=15]=\"DATA_LOSS\",t}({});function Er(t){switch(t){case _.OK:return m(\"Treated status OK as error\");case _.CANCELLED:case _.UNKNOWN:case _.DEADLINE_EXCEEDED:case _.RESOURCE_EXHAUSTED:case _.INTERNAL:case _.UNAVAILABLE:case _.UNAUTHENTICATED:return!1;case _.INVALID_ARGUMENT:case _.NOT_FOUND:case _.ALREADY_EXISTS:case _.PERMISSION_DENIED:case _.FAILED_PRECONDITION:case _.ABORTED:case _.OUT_OF_RANGE:case _.UNIMPLEMENTED:case _.DATA_LOSS:return!0;default:return m(\"Unknown status code: \"+t)}}function Sr(t){if(void 0===t)return y(\"GRPC error has no .code\"),_.UNKNOWN;switch(t){case _r.OK:return _.OK;case _r.CANCELLED:return _.CANCELLED;case _r.UNKNOWN:return _.UNKNOWN;case _r.DEADLINE_EXCEEDED:return _.DEADLINE_EXCEEDED;case _r.RESOURCE_EXHAUSTED:return _.RESOURCE_EXHAUSTED;case _r.INTERNAL:return _.INTERNAL;case _r.UNAVAILABLE:return _.UNAVAILABLE;case _r.UNAUTHENTICATED:return _.UNAUTHENTICATED;case _r.INVALID_ARGUMENT:return _.INVALID_ARGUMENT;case _r.NOT_FOUND:return _.NOT_FOUND;case _r.ALREADY_EXISTS:return _.ALREADY_EXISTS;case _r.PERMISSION_DENIED:return _.PERMISSION_DENIED;case _r.FAILED_PRECONDITION:return _.FAILED_PRECONDITION;case _r.ABORTED:return _.ABORTED;case _r.OUT_OF_RANGE:return _.OUT_OF_RANGE;case _r.UNIMPLEMENTED:return _.UNIMPLEMENTED;case _r.DATA_LOSS:return _.DATA_LOSS;default:return m(\"Unknown status code: \"+t)}}function Cr(t){if(void 0===t)return _r.OK;switch(t){case _.OK:return _r.OK;case _.CANCELLED:return _r.CANCELLED;case _.UNKNOWN:return _r.UNKNOWN;case _.DEADLINE_EXCEEDED:return _r.DEADLINE_EXCEEDED;case _.RESOURCE_EXHAUSTED:return _r.RESOURCE_EXHAUSTED;case _.INTERNAL:return _r.INTERNAL;case _.UNAVAILABLE:return _r.UNAVAILABLE;case _.UNAUTHENTICATED:return _r.UNAUTHENTICATED;case _.INVALID_ARGUMENT:return _r.INVALID_ARGUMENT;case _.NOT_FOUND:return _r.NOT_FOUND;case _.ALREADY_EXISTS:return _r.ALREADY_EXISTS;case _.PERMISSION_DENIED:return _r.PERMISSION_DENIED;case _.FAILED_PRECONDITION:return _r.FAILED_PRECONDITION;case _.ABORTED:return _r.ABORTED;case _.OUT_OF_RANGE:return _r.OUT_OF_RANGE;case _.UNIMPLEMENTED:return _r.UNIMPLEMENTED;case _.DATA_LOSS:return _r.DATA_LOSS;default:return m(\"Unknown status code: \"+t)}}var Tr=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||ct.comparator(e.key,n.key)}:function(t,e){return ct.comparator(t.key,e.key)},this.keyedMap=Rt(),this.sortedSet=new St(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,\"size\",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?\"DocumentSet ()\":\"DocumentSet (\\n  \"+t.join(\"  \\n\")+\"\\n)\"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Ir=function(t){return t[t.Added=0]=\"Added\",t[t.Removed=1]=\"Removed\",t[t.Modified=2]=\"Modified\",t[t.Metadata=3]=\"Metadata\",t}({}),kr=function(t){return t[t.Local=0]=\"Local\",t[t.Synced=1]=\"Synced\",t}({}),Or=function(){function t(){this.changeMap=new St(ct.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.changeMap.get(e);n?t.type!==Ir.Added&&n.type===Ir.Metadata?this.changeMap=this.changeMap.insert(e,t):t.type===Ir.Metadata&&n.type!==Ir.Removed?this.changeMap=this.changeMap.insert(e,{type:n.type,doc:t.doc}):t.type===Ir.Modified&&n.type===Ir.Modified?this.changeMap=this.changeMap.insert(e,{type:Ir.Modified,doc:t.doc}):t.type===Ir.Modified&&n.type===Ir.Added?this.changeMap=this.changeMap.insert(e,{type:Ir.Added,doc:t.doc}):t.type===Ir.Removed&&n.type===Ir.Added?this.changeMap=this.changeMap.remove(e):t.type===Ir.Removed&&n.type===Ir.Modified?this.changeMap=this.changeMap.insert(e,{type:Ir.Removed,doc:n.doc}):t.type===Ir.Added&&n.type===Ir.Removed?this.changeMap=this.changeMap.insert(e,{type:Ir.Modified,doc:t.doc}):m(\"unsupported combination of changes: \"+JSON.stringify(t)+\" after \"+JSON.stringify(n)):this.changeMap=this.changeMap.insert(e,t)},t.prototype.getChanges=function(){var t=[];return this.changeMap.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Nr=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:Ir.Added,doc:t})}),new t(e,n,Tr.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,\"hasPendingWrites\",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Ar=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r,i=((r={})[e]=Dr.createSynthesizedTargetChangeForCurrentChange(e,n),r);return new t(Et.MIN,i,qt(),At(),Lt())},t}(),Dr=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(w(),n,Lt(),Lt(),Lt())},t}(),xr=function(){return function(t,e,n,r){this.updatedTargetIds=t,this.removedTargetIds=e,this.key=n,this.newDoc=r}}(),Rr=function(){return function(t,e){this.targetId=t,this.existenceFilter=e}}(),Pr=function(t){return t[t.NoChange=0]=\"NoChange\",t[t.Added=1]=\"Added\",t[t.Removed=2]=\"Removed\",t[t.Current=3]=\"Current\",t[t.Reset=4]=\"Reset\",t}({}),Mr=function(){return function(t,e,n,r){void 0===n&&(n=w()),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}(),jr=function(){function t(){this.pendingResponses=0,this.documentChanges=qr(),this._resumeToken=w(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(t.prototype,\"current\",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"resumeToken\",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"isPending\",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"hasPendingChanges\",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),t.prototype.updateResumeToken=function(t){t.length>0&&(this._hasPendingChanges=!0,this._resumeToken=t)},t.prototype.toTargetChange=function(){var t=Lt(),e=Lt(),n=Lt();return this.documentChanges.forEach(function(r,i){switch(i){case Ir.Added:t=t.add(r);break;case Ir.Modified:e=e.add(r);break;case Ir.Removed:n=n.add(r);break;default:m(\"Encountered invalid change type: \"+i)}}),new Dr(this._resumeToken,this._current,t,e,n)},t.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=qr()},t.prototype.addDocumentChange=function(t,e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(t,e)},t.prototype.removeDocumentChange=function(t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(t)},t.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},t.prototype.recordTargetResponse=function(){this.pendingResponses-=1},t.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},t}(),Lr=function(){function t(t){this.metadataProvider=t,this.targetStates={},this.pendingDocumentUpdates=At(),this.pendingDocumentTargetMapping=Fr(),this.pendingTargetResets=new kt(K)}return t.prototype.handleDocumentChange=function(t){for(var e=0,n=t.updatedTargetIds;e<n.length;e++){var r=n[e];t.newDoc instanceof de?this.addDocumentToTarget(r,t.newDoc):t.newDoc instanceof pe&&this.removeDocumentFromTarget(r,t.key,t.newDoc)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.removeDocumentFromTarget(r=o[i],t.key,t.newDoc)},t.prototype.handleTargetChange=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.ensureTargetState(n);switch(t.state){case Pr.NoChange:e.isActiveTarget(n)&&r.updateResumeToken(t.resumeToken);break;case Pr.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(t.resumeToken);break;case Pr.Removed:r.recordTargetResponse(),r.isPending||e.removeTarget(n),g(!t.cause,\"WatchChangeAggregator does not handle errored targets\");break;case Pr.Current:e.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(t.resumeToken));break;case Pr.Reset:e.isActiveTarget(n)&&(e.resetTarget(n),r.updateResumeToken(t.resumeToken));break;default:m(\"Unknown target watch change state: \"+t.state)}})},t.prototype.forEachTarget=function(t,e){t.targetIds.length>0?t.targetIds.forEach(e):I(this.targetStates,e)},t.prototype.handleExistenceFilter=function(t){var e=t.targetId,n=t.existenceFilter.count,r=this.queryDataForActiveTarget(e);if(r){var i=r.query;if(i.isDocumentQuery())if(0===n){var o=new ct(i.path);this.removeDocumentFromTarget(e,o,new pe(o,Et.forDeletedDoc()))}else g(1===n,\"Single document existence filter with count: \"+n);else this.getCurrentDocumentCountForTarget(e)!==n&&(this.resetTarget(e),this.pendingTargetResets=this.pendingTargetResets.add(e))}},t.prototype.createRemoteEvent=function(t){var e=this,n={};I(this.targetStates,function(r,i){var o=e.queryDataForActiveTarget(r);if(o){if(i.current&&o.query.isDocumentQuery()){var a=new ct(o.query.path);null!==e.pendingDocumentUpdates.get(a)||e.targetContainsDocument(r,a)||e.removeDocumentFromTarget(r,a,new pe(a,t))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}});var r=Lt();this.pendingDocumentTargetMapping.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.queryDataForActiveTarget(t);return!n||n.purpose===Ye.LimboResolution||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Ar(t,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=At(),this.pendingDocumentTargetMapping=Fr(),this.pendingTargetResets=new kt(K),i},t.prototype.addDocumentToTarget=function(t,e){if(this.isActiveTarget(t)){var n=this.targetContainsDocument(t,e.key)?Ir.Modified:Ir.Added;this.ensureTargetState(t).addDocumentChange(e.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e.key,e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e.key,this.ensureDocumentTargetMapping(e.key).add(t))}},t.prototype.removeDocumentFromTarget=function(t,e,n){if(this.isActiveTarget(t)){var r=this.ensureTargetState(t);this.targetContainsDocument(t,e)?r.addDocumentChange(e,Ir.Removed):r.removeDocumentChange(e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,this.ensureDocumentTargetMapping(e).delete(t)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e,n))}},t.prototype.removeTarget=function(t){delete this.targetStates[t]},t.prototype.getCurrentDocumentCountForTarget=function(t){var e=this.ensureTargetState(t).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.recordPendingTargetRequest=function(t){this.ensureTargetState(t).recordPendingTargetRequest()},t.prototype.ensureTargetState=function(t){return this.targetStates[t]||(this.targetStates[t]=new jr),this.targetStates[t]},t.prototype.ensureDocumentTargetMapping=function(t){var e=this.pendingDocumentTargetMapping.get(t);return e||(e=new kt(K),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,e)),e},t.prototype.isActiveTarget=function(t){return null!==this.queryDataForActiveTarget(t)},t.prototype.queryDataForActiveTarget=function(t){var e=this.targetStates[t];return e&&e.isPending?null:this.metadataProvider.getQueryDataForTarget(t)},t.prototype.resetTarget=function(t){var e=this;g(!this.targetStates[t].isPending,\"Should only reset active targets\"),this.targetStates[t]=new jr,this.metadataProvider.getRemoteKeysForTarget(t).forEach(function(n){e.removeDocumentFromTarget(t,n,null)})},t.prototype.targetContainsDocument=function(t,e){return this.metadataProvider.getRemoteKeysForTarget(t).has(e)},t}();function Fr(){return new St(ct.comparator)}function qr(){return new St(ct.comparator)}var Ur=\"RemoteStore\",Vr=function(){function t(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=i,this.connectivityMonitor.addCallback(function(t){n.enqueueAndForget(function(){return a.__awaiter(o,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return this.canUseNetwork()?(p(Ur,\"Restarting streams for network reachability change.\"),[4,this.restartNetwork()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.onlineStateTracker=new wr(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return a.__awaiter(this,void 0,void 0,function(){var t;return a.__generator(this,function(e){switch(e.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(t=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return t.lastStreamToken=e.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(gr.Unknown),[4,this.fillWritePipeline()];case 2:e.sent(),e.label=3;case 3:return[2]}})})},t.prototype.disableNetwork=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(gr.Offline),[2]}})})},t.prototype.disableNetworkInternal=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return[4,this.writeStream.stop()];case 1:return t.sent(),[4,this.watchStream.stop()];case 2:return t.sent(),this.writePipeline.length>0&&(p(Ur,\"Stopping write stream with \"+this.writePipeline.length+\" pending writes\"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}})})},t.prototype.shutdown=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return p(Ur,\"RemoteStore shutting down.\"),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(gr.Unknown),[2]}})})},t.prototype.listen=function(t){g(!C(this.listenTargets,t.targetId),\"listen called with duplicate targetId!\"),this.listenTargets[t.targetId]=t,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(t)},t.prototype.unlisten=function(t){g(C(this.listenTargets,t),\"unlisten called without assigned target ID!\"),delete this.listenTargets[t],this.watchStream.isOpen()&&this.sendUnwatchRequest(t),O(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(gr.Unknown))},t.prototype.getQueryDataForTarget=function(t){return this.listenTargets[t]||null},t.prototype.getRemoteKeysForTarget=function(t){return this.syncEngine.getRemoteKeysForTarget(t)},t.prototype.sendWatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t.targetId),this.watchStream.watch(t)},t.prototype.sendUnwatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t),this.watchStream.unwatch(t)},t.prototype.startWatchStream=function(){g(this.shouldStartWatchStream(),\"startWatchStream() called when shouldStartWatchStream() is false.\"),this.watchChangeAggregator=new Lr(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},t.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!O(this.listenTargets)},t.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},t.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},t.prototype.onWatchStreamOpen=function(){return a.__awaiter(this,void 0,void 0,function(){var t=this;return a.__generator(this,function(e){return I(this.listenTargets,function(e,n){t.sendWatchRequest(n)}),[2]})})},t.prototype.onWatchStreamClose=function(t){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){return void 0===t&&g(!this.shouldStartWatchStream(),\"Watch stream was stopped gracefully while still needed.\"),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(t),this.startWatchStream()):this.onlineStateTracker.set(gr.Unknown),[2]})})},t.prototype.onWatchStreamChange=function(t,e){return a.__awaiter(this,void 0,void 0,function(){var n;return a.__generator(this,function(r){switch(r.label){case 0:return this.onlineStateTracker.set(gr.Online),t instanceof Mr&&t.state===Pr.Removed&&t.cause?[2,this.handleTargetError(t)]:(t instanceof xr?this.watchChangeAggregator.handleDocumentChange(t):t instanceof Rr?this.watchChangeAggregator.handleExistenceFilter(t):(g(t instanceof Mr,\"Expected watchChange to be an instance of WatchTargetChange\"),this.watchChangeAggregator.handleTargetChange(t)),e.isEqual(Et.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),e.compareTo(n)>=0?[4,this.raiseWatchSnapshot(e)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}})})},t.prototype.raiseWatchSnapshot=function(t){var e=this;g(!t.isEqual(Et.MIN),\"Can't raise event for unknown SnapshotVersion\");var n=this.watchChangeAggregator.createRemoteEvent(t);return I(n.targetChanges,function(n,r){if(r.resumeToken.length>0){var i=e.listenTargets[n];i&&(e.listenTargets[n]=i.copy({resumeToken:r.resumeToken,snapshotVersion:t}))}}),n.targetMismatches.forEach(function(t){var n=e.listenTargets[t];if(n){e.listenTargets[t]=n.copy({resumeToken:w()}),e.sendUnwatchRequest(t);var r=new Xe(n.query,t,Ye.ExistenceFilterMismatch,n.sequenceNumber);e.sendWatchRequest(r)}}),this.syncEngine.applyRemoteEvent(n)},t.prototype.handleTargetError=function(t){var e=this;g(!!t.cause,\"Handling target error without a cause\");var n=t.cause,r=Promise.resolve();return t.targetIds.forEach(function(t){r=r.then(function(){return a.__awaiter(e,void 0,void 0,function(){return a.__generator(this,function(e){return C(this.listenTargets,t)?(delete this.listenTargets[t],this.watchChangeAggregator.removeTarget(t),[2,this.syncEngine.rejectListen(t,n)]):[2]})})})}),r},t.prototype.fillWritePipeline=function(){return a.__awaiter(this,void 0,void 0,function(){var t;return a.__generator(this,function(e){switch(e.label){case 0:return this.canAddToWritePipeline()?[4,this.localStore.nextMutationBatch(this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:-1)]:[3,4];case 1:return null!==(t=e.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(t),[4,this.fillWritePipeline()];case 3:e.sent(),e.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}})})},t.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},t.prototype.outstandingWrites=function(){return this.writePipeline.length},t.prototype.addToWritePipeline=function(t){g(this.canAddToWritePipeline(),\"addToWritePipeline called when pipeline is full\"),this.writePipeline.push(t),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(t.mutations)},t.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},t.prototype.startWriteStream=function(){g(this.shouldStartWriteStream(),\"startWriteStream() called when shouldStartWriteStream() is false.\"),this.writeStream.start()},t.prototype.onWriteStreamOpen=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){return this.writeStream.writeHandshake(),[2]})})},t.prototype.onWriteHandshakeComplete=function(){var t=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var e=0,n=t.writePipeline;e<n.length;e++)t.writeStream.writeMutations(n[e].mutations)}).catch(hn)},t.prototype.onMutationResult=function(t,e){var n=this;g(this.writePipeline.length>0,\"Got result for empty write pipeline\");var r=this.writePipeline.shift(),i=Vt.from(r,t,e,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then(function(){return n.fillWritePipeline()})},t.prototype.onWriteStreamClose=function(t){return a.__awaiter(this,void 0,void 0,function(){var e=this;return a.__generator(this,function(n){return void 0===t&&g(!this.shouldStartWriteStream(),\"Write stream was stopped gracefully while still needed.\"),t&&this.writePipeline.length>0?[2,(this.writeStream.handshakeComplete?this.handleWriteError(t):this.handleHandshakeError(t)).then(function(){e.shouldStartWriteStream()&&e.startWriteStream()})]:[2]})})},t.prototype.handleHandshakeError=function(t){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){return Er(t.code)?(p(Ur,\"RemoteStore error before completed handshake; resetting stream token: \",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=w(),[2,this.localStore.setLastStreamToken(w()).catch(hn)]):[2]})})},t.prototype.handleWriteError=function(t){return a.__awaiter(this,void 0,void 0,function(){var e,n=this;return a.__generator(this,function(r){return Er(i=t.code)&&i!==_.ABORTED?(e=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(e.batchId,t).then(function(){return n.fillWritePipeline()})]):[2];var i})})},t.prototype.createTransaction=function(){return new mr(this.datastore)},t.prototype.restartNetwork=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(gr.Unknown),[4,this.enableNetwork()];case 2:return t.sent(),[2]}})})},t.prototype.handleCredentialChange=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return this.canUseNetwork()?(p(Ur,\"RemoteStore restarting streams for new credential\"),[4,this.restartNetwork()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.applyPrimaryState=function(t){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return this.isPrimary=t,t&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,4];case 2:return t?[3,4]:[4,this.disableNetworkInternal()];case 3:e.sent(),this.onlineStateTracker.set(gr.Unknown),e.label=4;case 4:return[2]}})})},t}(),Br=function(){function t(t,e){if(A(\"GeoPoint\",arguments,2),R(\"GeoPoint\",\"number\",1,t),R(\"GeoPoint\",\"number\",2,e),!isFinite(t)||t<-90||t>90)throw new E(_.INVALID_ARGUMENT,\"Latitude must be a number between -90 and 90, but was: \"+t);if(!isFinite(e)||e<-180||e>180)throw new E(_.INVALID_ARGUMENT,\"Longitude must be a number between -180 and 180, but was: \"+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,\"latitude\",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"longitude\",{get:function(){return this._long},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype._compareTo=function(t){return K(this._lat,t._lat)||K(this._long,t._long)},t}(),Wr=function(){function t(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return t.atPath=function(e){return new t(e)},Object.defineProperty(t.prototype,\"orderBy\",{get:function(){if(null===this.memoizedOrderBy){var t=this.getInequalityFilterField(),e=this.getFirstOrderByField();if(null!==t&&null===e)this.memoizedOrderBy=t.isKeyField()?[Zr]:[new Jr(t),Zr];else{g(null===t||null!==e&&t.isEqual(e),\"First orderBy should match inequality field.\"),this.memoizedOrderBy=[];for(var n=!1,r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}n||this.memoizedOrderBy.push((this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:Yr.ASCENDING)===Yr.ASCENDING?Zr:$r)}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),t.prototype.addFilter=function(e){g(null==this.getInequalityFilterField()||!(e instanceof Qr)||!e.isInequality()||e.field.isEqual(this.getInequalityFilterField()),\"Query must only have one inequality field.\"),g(!this.isDocumentQuery(),\"No filtering allowed for document query\");var n=this.filters.concat([e]);return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),n,this.limit,this.startAt,this.endAt)},t.prototype.addOrderBy=function(e){g(!this.startAt&&!this.endAt,\"Bounds must be set after orderBy\");var n=this.explicitOrderBy.concat([e]);return new t(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.startAt,this.endAt)},t.prototype.withLimit=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),e,this.startAt,this.endAt)},t.prototype.withStartAt=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,e,this.endAt)},t.prototype.withEndAt=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,e)},t.prototype.asCollectionQueryAtPath=function(e){return new t(e,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,this.endAt)},t.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var t=this.path.canonicalString();this.isCollectionGroupQuery()&&(t+=\"|cg:\"+this.collectionGroup),t+=\"|f:\";for(var e=0,n=this.filters;e<n.length;e++)t+=n[e].canonicalId(),t+=\",\";t+=\"|ob:\";for(var r=0,i=this.orderBy;r<i.length;r++)t+=i[r].canonicalId(),t+=\",\";ar(this.limit)||(t+=\"|l:\",t+=this.limit),this.startAt&&(t+=\"|lb:\",t+=this.startAt.canonicalId()),this.endAt&&(t+=\"|ub:\",t+=this.endAt.canonicalId()),this.memoizedCanonicalId=t}return this.memoizedCanonicalId},t.prototype.toString=function(){var t=\"Query(\"+this.path.canonicalString();return this.isCollectionGroupQuery()&&(t+=\" collectionGroup=\"+this.collectionGroup),this.filters.length>0&&(t+=\", filters: [\"+this.filters.join(\", \")+\"]\"),ar(this.limit)||(t+=\", limit: \"+this.limit),this.explicitOrderBy.length>0&&(t+=\", orderBy: [\"+this.explicitOrderBy.join(\", \")+\"]\"),this.startAt&&(t+=\", startAt: \"+this.startAt.canonicalId()),this.endAt&&(t+=\", endAt: \"+this.endAt.canonicalId()),t+\")\"},t.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return this.collectionGroup===t.collectionGroup&&!!this.path.isEqual(t.path)&&!(null!==this.startAt?!this.startAt.isEqual(t.startAt):null!==t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)},t.prototype.docComparator=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(t,e);if(0!==a)return a;n=n||o.field.isKeyField()}return g(n,\"orderBy used that doesn't compare on key field\"),0},t.prototype.matches=function(t){return this.matchesPathAndCollectionGroup(t)&&this.matchesOrderBy(t)&&this.matchesFilters(t)&&this.matchesBounds(t)},t.prototype.hasLimit=function(){return!ar(this.limit)},t.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},t.prototype.getInequalityFilterField=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof Qr&&n.isInequality())return n.field}return null},t.prototype.findRelationOpFilter=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof Qr&&t.indexOf(r.op)>=0)return r.op}return null},t.prototype.isDocumentQuery=function(){return ct.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},t.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},t.prototype.matchesPathAndCollectionGroup=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(e):ct.isDocumentKey(this.path)?this.path.isEqual(e):this.path.isImmediateParentOf(e)},t.prototype.matchesOrderBy=function(t){for(var e=0,n=this.explicitOrderBy;e<n.length;e++){var r=n[e];if(!r.field.isKeyField()&&void 0===t.field(r.field))return!1}return!0},t.prototype.matchesFilters=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},t.prototype.matchesBounds=function(t){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,t)||this.endAt&&this.endAt.sortsBeforeDocument(this.orderBy,t))},t.prototype.assertValidBound=function(t){g(t.position.length<=this.orderBy.length,\"Bound is longer than orderBy\")},t}(),zr=function(){function t(){}return t.create=function(t,e,n){if(n.isEqual(wn.INSTANCE)){if(e!==Hr.EQUAL)throw new E(_.INVALID_ARGUMENT,\"Invalid query. You can only perform equals comparisons on null.\");return new Kr(t)}if(n.isEqual(Tn.NAN)){if(e!==Hr.EQUAL)throw new E(_.INVALID_ARGUMENT,\"Invalid query. You can only perform equals comparisons on NaN.\");return new Gr(t)}return new Qr(t,e,n)},t}(),Hr=function(){function t(t){this.name=t}return t.fromString=function(e){switch(e){case\"<\":return t.LESS_THAN;case\"<=\":return t.LESS_THAN_OR_EQUAL;case\"==\":return t.EQUAL;case\">=\":return t.GREATER_THAN_OR_EQUAL;case\">\":return t.GREATER_THAN;case\"array-contains\":return t.ARRAY_CONTAINS;case\"in\":return t.IN;case\"array-contains-any\":return t.ARRAY_CONTAINS_ANY;default:return m(\"Unknown relation: \"+e)}},t.prototype.toString=function(){return this.name},t.prototype.isEqual=function(t){return this.name===t.name},t.LESS_THAN=new t(\"<\"),t.LESS_THAN_OR_EQUAL=new t(\"<=\"),t.EQUAL=new t(\"==\"),t.GREATER_THAN=new t(\">\"),t.GREATER_THAN_OR_EQUAL=new t(\">=\"),t.ARRAY_CONTAINS=new t(\"array-contains\"),t.IN=new t(\"in\"),t.ARRAY_CONTAINS_ANY=new t(\"array-contains-any\"),t}(),Qr=function(t){function e(e,n,r){var i=t.call(this)||this;return i.field=e,i.op=n,i.value=r,i}return a.__extends(e,t),e.prototype.matches=function(t){if(this.field.isKeyField()){g(this.value instanceof An,\"Comparing on key, but filter value not a RefValue\"),g(this.op!==Hr.ARRAY_CONTAINS&&this.op!==Hr.ARRAY_CONTAINS_ANY&&this.op!==Hr.IN,\"'\"+this.op.toString()+\"' queries don't make sense on document keys.\");var e=ct.comparator(t.key,this.value.key);return this.matchesComparison(e)}var n=t.field(this.field);return void 0!==n&&this.matchesValue(n)},e.prototype.matchesValue=function(t){var e=this;return this.op===Hr.ARRAY_CONTAINS?t instanceof Rn&&void 0!==t.internalValue.find(function(t){return t.isEqual(e.value)}):this.op===Hr.IN?this.value instanceof Rn?void 0!==this.value.internalValue.find(function(e){return e.isEqual(t)}):m(\"IN filter has invalid value: \"+this.value.toString()):this.op===Hr.ARRAY_CONTAINS_ANY?t instanceof Rn&&t.internalValue.some(function(t){return e.value instanceof Rn&&void 0!==e.value.internalValue.find(function(e){return e.isEqual(t)})}):this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},e.prototype.matchesComparison=function(t){switch(this.op){case Hr.LESS_THAN:return t<0;case Hr.LESS_THAN_OR_EQUAL:return t<=0;case Hr.EQUAL:return 0===t;case Hr.GREATER_THAN:return t>0;case Hr.GREATER_THAN_OR_EQUAL:return t>=0;default:return m(\"Unknown relation op\"+this.op)}},e.prototype.isInequality=function(){return[Hr.LESS_THAN,Hr.LESS_THAN_OR_EQUAL,Hr.GREATER_THAN,Hr.GREATER_THAN_OR_EQUAL].indexOf(this.op)>=0},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},e.prototype.isEqual=function(t){return t instanceof e&&this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&this.value.isEqual(t.value)},e.prototype.toString=function(){return this.field.canonicalString()+\" \"+this.op+\" \"+this.value.value()},e}(zr),Kr=function(t){function e(e){var n=t.call(this)||this;return n.field=e,n}return a.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return void 0!==e&&null===e.value()},e.prototype.canonicalId=function(){return this.field.canonicalString()+\" IS null\"},e.prototype.toString=function(){return this.field.canonicalString()+\" IS null\"},e.prototype.isEqual=function(t){return t instanceof e&&this.field.isEqual(t.field)},e}(zr),Gr=function(t){function e(e){var n=t.call(this)||this;return n.field=e,n}return a.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field),n=e&&e.value();return\"number\"==typeof n&&isNaN(n)},e.prototype.canonicalId=function(){return this.field.canonicalString()+\" IS NaN\"},e.prototype.toString=function(){return this.field.canonicalString()+\" IS NaN\"},e.prototype.isEqual=function(t){return t instanceof e&&this.field.isEqual(t.field)},e}(zr),Yr=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t.ASCENDING=new t(\"asc\"),t.DESCENDING=new t(\"desc\"),t}(),Xr=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){for(var t=this.before?\"b:\":\"a:\",e=0,n=this.position;e<n.length;e++)t+=n[e].toString();return t},t.prototype.sortsBeforeDocument=function(t,e){g(this.position.length<=t.length,\"Bound has more components than query's orderBy\");for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(i.field.isKeyField())g(o instanceof An,\"Bound has a non-key value where the key path is being used.\"),n=ct.comparator(o.key,e.key);else{var a=e.field(i.field);g(void 0!==a,\"Field should exist since document matched the orderBy already.\"),n=o.compareTo(a)}if(i.dir===Yr.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},t.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++)return this.position[e].isEqual(t.position[e]);return!0},t}(),Jr=function(){function t(t,e){this.field=t,void 0===e&&(e=Yr.ASCENDING),this.dir=e,this.isKeyOrderBy=t.isKeyField()}return t.prototype.compare=function(t,e){var n=this.isKeyOrderBy?de.compareByKey(t,e):de.compareByField(this.field,t,e);switch(this.dir){case Yr.ASCENDING:return n;case Yr.DESCENDING:return-1*n;default:return m(\"Unknown direction: \"+this.dir)}},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},t.prototype.toString=function(){return this.field.canonicalString()+\" (\"+this.dir+\")\"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),Zr=new Jr(ut.keyField(),Yr.ASCENDING),$r=new Jr(ut.keyField(),Yr.DESCENDING),ti=function(){function t(){this.isIdempotent=!0}return t.prototype.applyToLocalView=function(t,e){return new On(e,t)},t.prototype.applyToRemoteDocument=function(t,e){return e},t.prototype.isEqual=function(e){return e instanceof t},t.instance=new t,t}(),ei=function(){function t(t){this.elements=t,this.isIdempotent=!0}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=ii(t),n=function(t){e.find(function(e){return e.isEqual(t)})||e.push(t)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Rn(e)},t.prototype.isEqual=function(e){return e instanceof t&&G(e.elements,this.elements)},t}(),ni=function(){function t(t){this.elements=t,this.isIdempotent=!0}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=ii(t),n=function(t){e=e.filter(function(e){return!e.isEqual(t)})},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Rn(e)},t.prototype.isEqual=function(e){return e instanceof t&&G(e.elements,this.elements)},t}(),ri=function(){function t(t){this.operand=t,this.isIdempotent=!1}return t.prototype.applyToLocalView=function(t,e){return t instanceof Cn&&this.operand instanceof Cn?new Cn(t.internalValue+this.operand.internalValue):t instanceof En?new Tn(t.internalValue+this.operand.internalValue):this.operand},t.prototype.applyToRemoteDocument=function(t,e){return g(null!==e,\"Didn't receive transformResult for NUMERIC_ADD transform\"),e},t.prototype.isEqual=function(e){return e instanceof t&&this.operand.isEqual(e.operand)},t}();function ii(t){return t instanceof Rn?t.internalValue.slice():[]}var oi,ai,si=function(){function t(t){this.count=t}return t.prototype.isEqual=function(t){return t&&t.count===this.count},t}(),ui=((oi={})[Yr.ASCENDING.name]=\"ASCENDING\",oi[Yr.DESCENDING.name]=\"DESCENDING\",oi),ci=((ai={})[Hr.LESS_THAN.name]=\"LESS_THAN\",ai[Hr.LESS_THAN_OR_EQUAL.name]=\"LESS_THAN_OR_EQUAL\",ai[Hr.GREATER_THAN.name]=\"GREATER_THAN\",ai[Hr.GREATER_THAN_OR_EQUAL.name]=\"GREATER_THAN_OR_EQUAL\",ai[Hr.EQUAL.name]=\"EQUAL\",ai[Hr.ARRAY_CONTAINS.name]=\"ARRAY_CONTAINS\",ai[Hr.IN.name]=\"IN\",ai[Hr.ARRAY_CONTAINS_ANY.name]=\"ARRAY_CONTAINS_ANY\",ai),li=new RegExp(/^\\d{4}-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d(?:\\.(\\d+))?Z$/);function hi(t,e){g(!ar(t),e+\" is missing\")}function fi(t){return\"number\"==typeof t?t:\"string\"==typeof t?Number(t):m(\"can't parse \"+t)}var di=function(){function t(t,e){this.databaseId=t,this.options=e}return t.prototype.emptyByteString=function(){return this.options.useProto3Json?\"\":new Uint8Array(0)},t.prototype.unsafeCastProtoByteString=function(t){return t},t.prototype.fromRpcStatus=function(t){var e=void 0===t.code?_.UNKNOWN:Sr(t.code);return new E(e,t.message||\"\")},t.prototype.toInt32Value=function(t){return ar(t)?void 0:{value:t}},t.prototype.fromInt32Value=function(t){var e;return ar(e=\"object\"==typeof t?t.value:t)?null:e},t.prototype.toTimestamp=function(t){return{seconds:\"\"+t.seconds,nanos:t.nanoseconds}},t.prototype.fromTimestamp=function(t){if(\"string\"==typeof t)return this.fromIso8601String(t);g(!!t,\"Cannot deserialize null or undefined timestamp.\");var e=fi(t.seconds||\"0\");return new _t(e,t.nanos||0)},t.prototype.fromIso8601String=function(t){var e=0,n=li.exec(t);if(g(!!n,\"invalid timestamp: \"+t),n[1]){var r=n[1];r=(r+\"000000000\").substr(0,9),e=Number(r)}var i=new Date(t),o=Math.floor(i.getTime()/1e3);return new _t(o,e)},t.prototype.toBytes=function(t){return this.options.useProto3Json?t.toBase64():this.unsafeCastProtoByteString(t.toUint8Array())},t.prototype.fromBlob=function(t){return\"string\"==typeof t?(g(this.options.useProto3Json,\"Expected bytes to be passed in as Uint8Array, but got a string instead.\"),$.fromBase64String(t)):(g(!this.options.useProto3Json,\"Expected bytes to be passed in as Uint8Array, but got a string instead.\"),$.fromUint8Array(t))},t.prototype.toVersion=function(t){return this.toTimestamp(t.toTimestamp())},t.prototype.fromVersion=function(t){return g(!!t,\"Trying to deserialize version that isn't set\"),Et.fromTimestamp(this.fromTimestamp(t))},t.prototype.toResourceName=function(t,e){return this.fullyQualifiedPrefixPath(t).child(\"documents\").child(e).canonicalString()},t.prototype.fromResourceName=function(t){var e=at.fromString(t);return g(this.isValidResourceName(e),\"Tried to deserialize invalid key \"+e.toString()),e},t.prototype.toName=function(t){return this.toResourceName(this.databaseId,t.path)},t.prototype.fromName=function(t){var e=this.fromResourceName(t);return g(e.get(1)===this.databaseId.projectId,\"Tried to deserialize key from different project: \"+e.get(1)+\" vs \"+this.databaseId.projectId),g(!e.get(3)&&!this.databaseId.database||e.get(3)===this.databaseId.database,\"Tried to deserialize key from different database: \"+e.get(3)+\" vs \"+this.databaseId.database),new ct(this.extractLocalPathFromResourceName(e))},t.prototype.toQueryPath=function(t){return this.toResourceName(this.databaseId,t)},t.prototype.fromQueryPath=function(t){var e=this.fromResourceName(t);return 4===e.length?at.EMPTY_PATH:this.extractLocalPathFromResourceName(e)},Object.defineProperty(t.prototype,\"encodedDatabaseId\",{get:function(){return new at([\"projects\",this.databaseId.projectId,\"databases\",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),t.prototype.fullyQualifiedPrefixPath=function(t){return new at([\"projects\",t.projectId,\"databases\",t.database])},t.prototype.extractLocalPathFromResourceName=function(t){return g(t.length>4&&\"documents\"===t.get(4),\"tried to deserialize invalid key \"+t.toString()),t.popFirst(5)},t.prototype.isValidResourceName=function(t){return t.length>=4&&\"projects\"===t.get(0)&&\"databases\"===t.get(2)},t.prototype.toValue=function(t){if(t instanceof wn)return{nullValue:\"NULL_VALUE\"};if(t instanceof _n)return{booleanValue:t.value()};if(t instanceof Cn)return{integerValue:\"\"+t.value()};if(t instanceof Tn){var e=t.value();if(this.options.useProto3Json){if(isNaN(e))return{doubleValue:\"NaN\"};if(e===1/0)return{doubleValue:\"Infinity\"};if(e===-1/0)return{doubleValue:\"-Infinity\"}}return{doubleValue:t.value()}}return t instanceof In?{stringValue:t.value()}:t instanceof xn?{mapValue:this.toMapValue(t)}:t instanceof Rn?{arrayValue:this.toArrayValue(t)}:t instanceof kn?{timestampValue:this.toTimestamp(t.internalValue)}:t instanceof Dn?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof Nn?{bytesValue:this.toBytes(t.value())}:t instanceof An?{referenceValue:this.toResourceName(t.databaseId,t.key.path)}:m(\"Unknown FieldValue \"+JSON.stringify(t))},t.prototype.fromValue=function(t){var e=this;if(\"nullValue\"in t)return wn.INSTANCE;if(\"booleanValue\"in t)return _n.of(t.booleanValue);if(\"integerValue\"in t)return new Cn(fi(t.integerValue));if(\"doubleValue\"in t){if(this.options.useProto3Json){if(\"NaN\"===t.doubleValue)return Tn.NAN;if(\"Infinity\"===t.doubleValue)return Tn.POSITIVE_INFINITY;if(\"-Infinity\"===t.doubleValue)return Tn.NEGATIVE_INFINITY}return new Tn(t.doubleValue)}if(\"stringValue\"in t)return new In(t.stringValue);if(\"mapValue\"in t)return this.fromFields(t.mapValue.fields||{});if(\"arrayValue\"in t)return hi(t.arrayValue,\"arrayValue\"),new Rn((t.arrayValue.values||[]).map(function(t){return e.fromValue(t)}));if(\"timestampValue\"in t)return hi(t.timestampValue,\"timestampValue\"),new kn(this.fromTimestamp(t.timestampValue));if(\"geoPointValue\"in t)return hi(t.geoPointValue,\"geoPointValue\"),new Dn(new Br(t.geoPointValue.latitude||0,t.geoPointValue.longitude||0));if(\"bytesValue\"in t){hi(t.bytesValue,\"bytesValue\");var n=this.fromBlob(t.bytesValue);return new Nn(n)}if(\"referenceValue\"in t){hi(t.referenceValue,\"referenceValue\");var r=this.fromResourceName(t.referenceValue),i=new rt(r.get(1),r.get(3)),o=new ct(this.extractLocalPathFromResourceName(r));return new An(i,o)}return m(\"Unknown Value proto \"+JSON.stringify(t))},t.prototype.toMutationDocument=function(t,e){return{name:this.toName(t),fields:this.toFields(e)}},t.prototype.toDocument=function(t){return g(!t.hasLocalMutations,\"Can't serialize documents with mutations.\"),{name:this.toName(t.key),fields:this.toFields(t.data),updateTime:this.toTimestamp(t.version.toTimestamp())}},t.prototype.fromDocument=function(t,e){return new de(this.fromName(t.name),this.fromVersion(t.updateTime),this.fromFields(t.fields||{}),{hasCommittedMutations:!!e})},t.prototype.toFields=function(t){var e=this,n={};return t.forEach(function(t,r){n[t]=e.toValue(r)}),n},t.prototype.fromFields=function(t){var e=this,n=xn.EMPTY;return k(t,function(t,r){n=n.set(new ut([t]),e.fromValue(r))}),n},t.prototype.toMapValue=function(t){return{fields:this.toFields(t)}},t.prototype.toArrayValue=function(t){var e=this,n=[];return t.forEach(function(t){n.push(e.toValue(t))}),{values:n}},t.prototype.fromFound=function(t){g(!!t.found,\"Tried to deserialize a found document from a missing document.\"),hi(t.found.name,\"doc.found.name\"),hi(t.found.updateTime,\"doc.found.updateTime\");var e=this.fromName(t.found.name),n=this.fromVersion(t.found.updateTime),r=this.fromFields(t.found.fields||{});return new de(e,n,r,{},t.found)},t.prototype.fromMissing=function(t){g(!!t.missing,\"Tried to deserialize a missing document from a found document.\"),g(!!t.readTime,\"Tried to deserialize a missing document without a read time.\");var e=this.fromName(t.missing),n=this.fromVersion(t.readTime);return new pe(e,n)},t.prototype.fromMaybeDocument=function(t){return\"found\"in t?this.fromFound(t):\"missing\"in t?this.fromMissing(t):m(\"invalid batch get response: \"+JSON.stringify(t))},t.prototype.toWatchTargetChangeState=function(t){switch(t){case Pr.Added:return\"ADD\";case Pr.Current:return\"CURRENT\";case Pr.NoChange:return\"NO_CHANGE\";case Pr.Removed:return\"REMOVE\";case Pr.Reset:return\"RESET\";default:return m(\"Unknown WatchTargetChangeState: \"+t)}},t.prototype.toTestWatchChange=function(t){if(t instanceof Rr)return{filter:{count:t.existenceFilter.count,targetId:t.targetId}};if(t instanceof xr){var e;if(t.newDoc instanceof de)return{documentChange:{document:{name:this.toName((e=t.newDoc).key),fields:this.toFields(e.data),updateTime:this.toVersion(e.version)},targetIds:t.updatedTargetIds,removedTargetIds:t.removedTargetIds}};if(t.newDoc instanceof pe)return{documentDelete:{document:this.toName((e=t.newDoc).key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}};if(null===t.newDoc)return{documentRemove:{document:this.toName(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof Mr){var n=void 0;return t.cause&&(n={code:Cr(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(t.state),targetIds:t.targetIds,resumeToken:this.unsafeCastProtoByteString(t.resumeToken),cause:n}}}return m(\"Unrecognized watch change: \"+JSON.stringify(t))},t.prototype.fromWatchChange=function(t){var e;if(\"targetChange\"in t){hi(t.targetChange,\"targetChange\");var n=this.fromWatchTargetChangeState(t.targetChange.targetChangeType||\"NO_CHANGE\"),r=t.targetChange.targetIds||[],i=t.targetChange.resumeToken||this.emptyByteString(),o=t.targetChange.cause,a=o&&this.fromRpcStatus(o);e=new Mr(n,r,i,a||null)}else if(\"documentChange\"in t){hi(t.documentChange,\"documentChange\"),hi(t.documentChange.document,\"documentChange.name\"),hi(t.documentChange.document.name,\"documentChange.document.name\"),hi(t.documentChange.document.updateTime,\"documentChange.document.updateTime\");var s=t.documentChange,u=this.fromName(s.document.name),c=this.fromVersion(s.document.updateTime),l=this.fromFields(s.document.fields||{}),h=new de(u,c,l,{},s.document);e=new xr(s.targetIds||[],s.removedTargetIds||[],h.key,h)}else if(\"documentDelete\"in t){hi(t.documentDelete,\"documentDelete\"),hi(t.documentDelete.document,\"documentDelete.document\");var f=t.documentDelete;u=this.fromName(f.document),c=f.readTime?this.fromVersion(f.readTime):Et.forDeletedDoc(),h=new pe(u,c),e=new xr([],f.removedTargetIds||[],h.key,h)}else if(\"documentRemove\"in t){hi(t.documentRemove,\"documentRemove\"),hi(t.documentRemove.document,\"documentRemove\");var d=t.documentRemove;u=this.fromName(d.document),e=new xr([],d.removedTargetIds||[],u,null)}else{if(!(\"filter\"in t))return m(\"Unknown change type \"+JSON.stringify(t));hi(t.filter,\"filter\"),hi(t.filter.targetId,\"filter.targetId\");var p=t.filter,y=new si(p.count||0);e=new Rr(p.targetId,y)}return e},t.prototype.fromWatchTargetChangeState=function(t){return\"NO_CHANGE\"===t?Pr.NoChange:\"ADD\"===t?Pr.Added:\"REMOVE\"===t?Pr.Removed:\"CURRENT\"===t?Pr.Current:\"RESET\"===t?Pr.Reset:m(\"Got unexpected TargetChange.state: \"+t)},t.prototype.versionFromListenResponse=function(t){if(!(\"targetChange\"in t))return Et.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?Et.MIN:e.readTime?this.fromVersion(e.readTime):Et.MIN},t.prototype.toMutation=function(t){var e,n=this;if(t instanceof Un)e={update:this.toMutationDocument(t.key,t.value)};else if(t instanceof Wn)e={delete:this.toName(t.key)};else if(t instanceof Vn)e={update:this.toMutationDocument(t.key,t.data),updateMask:this.toDocumentMask(t.fieldMask)};else{if(!(t instanceof Bn))return m(\"Unknown mutation type \"+t.type);e={transform:{document:this.toName(t.key),fieldTransforms:t.fieldTransforms.map(function(t){return n.toFieldTransform(t)})}}}return t.precondition.isNone||(e.currentDocument=this.toPrecondition(t.precondition)),e},t.prototype.fromMutation=function(t){var e=this,n=t.currentDocument?this.fromPrecondition(t.currentDocument):Fn.NONE;if(t.update){hi(t.update.name,\"name\");var r=this.fromName(t.update.name),i=this.fromFields(t.update.fields||{});if(t.updateMask){var o=this.fromDocumentMask(t.updateMask);return new Vn(r,i,o,n)}return new Un(r,i,n)}if(t.delete)return r=this.fromName(t.delete),new Wn(r,n);if(t.transform){r=this.fromName(t.transform.document);var a=t.transform.fieldTransforms.map(function(t){return e.fromFieldTransform(t)});return g(!0===n.exists,'Transforms only support precondition \"exists == true\"'),new Bn(r,a)}return m(\"unknown mutation proto: \"+JSON.stringify(t))},t.prototype.toPrecondition=function(t){return g(!t.isNone,\"Can't serialize an empty precondition\"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:m(\"Unknown precondition\")},t.prototype.fromPrecondition=function(t){return void 0!==t.updateTime?Fn.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?Fn.exists(t.exists):Fn.NONE},t.prototype.fromWriteResult=function(t,e){var n=this,r=this.fromVersion(t.updateTime?t.updateTime:e),i=null;return t.transformResults&&t.transformResults.length>0&&(i=t.transformResults.map(function(t){return n.fromValue(t)})),new jn(r,i)},t.prototype.fromWriteResults=function(t,e){var n=this;return t&&t.length>0?(g(void 0!==e,\"Received a write result without a commit time\"),t.map(function(t){return n.fromWriteResult(t,e)})):[]},t.prototype.toFieldTransform=function(t){var e=this,n=t.transform;if(n instanceof ti)return{fieldPath:t.field.canonicalString(),setToServerValue:\"REQUEST_TIME\"};if(n instanceof ei)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements.map(function(t){return e.toValue(t)})}};if(n instanceof ni)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements.map(function(t){return e.toValue(t)})}};if(n instanceof ri)return{fieldPath:t.field.canonicalString(),increment:this.toValue(n.operand)};throw m(\"Unknown transform: \"+t.transform)},t.prototype.fromFieldTransform=function(t){var e=this,n=null;if(\"setToServerValue\"in t)g(\"REQUEST_TIME\"===t.setToServerValue,\"Unknown server value transform proto: \"+JSON.stringify(t)),n=ti.instance;else if(\"appendMissingElements\"in t)n=new ei((t.appendMissingElements.values||[]).map(function(t){return e.fromValue(t)}));else if(\"removeAllFromArray\"in t)n=new ni((t.removeAllFromArray.values||[]).map(function(t){return e.fromValue(t)}));else if(\"increment\"in t){var r=this.fromValue(t.increment);g(r instanceof En,\"NUMERIC_ADD transform requires a NumberValue\"),n=new ri(r)}else m(\"Unknown transform proto: \"+JSON.stringify(t));var i=ut.fromServerFormat(t.fieldPath);return new Mn(i,n)},t.prototype.toDocumentsTarget=function(t){return{documents:[this.toQueryPath(t.path)]}},t.prototype.fromDocumentsTarget=function(t){var e=t.documents.length;return g(1===e,\"DocumentsTarget contained other than 1 document: \"+e),Wr.atPath(this.fromQueryPath(t.documents[0]))},t.prototype.toQueryTarget=function(t){var e={structuredQuery:{}},n=t.path;null!==t.collectionGroup?(g(n.length%2==0,\"Collection Group queries should be within a document path or root.\"),e.parent=this.toQueryPath(n),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(g(n.length%2!=0,\"Document queries with filters are not supported.\"),e.parent=this.toQueryPath(n.popLast()),e.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(t.filters);r&&(e.structuredQuery.where=r);var i=this.toOrder(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.toInt32Value(t.limit);return void 0!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.toCursor(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.toCursor(t.endAt)),e},t.prototype.fromQueryTarget=function(t){var e=this.fromQueryPath(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){g(1===r,\"StructuredQuery.from with more than one collection is not supported.\");var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var u=null;n.limit&&(u=this.fromInt32Value(n.limit));var c=null;n.startAt&&(c=this.fromCursor(n.startAt));var l=null;return n.endAt&&(l=this.fromCursor(n.endAt)),new Wr(e,i,s,a,u,c,l)},t.prototype.toListenRequestLabels=function(t){var e=this.toLabel(t.purpose);return null==e?null:{\"goog-listen-tags\":e}},t.prototype.toLabel=function(t){switch(t){case Ye.Listen:return null;case Ye.ExistenceFilterMismatch:return\"existence-filter-mismatch\";case Ye.LimboResolution:return\"limbo-document\";default:return m(\"Unrecognized query purpose: \"+t)}},t.prototype.toTarget=function(t){var e,n=t.query;return(e=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=t.targetId,t.resumeToken.length>0&&(e.resumeToken=this.unsafeCastProtoByteString(t.resumeToken)),e},t.prototype.toFilter=function(t){var e=this;if(0!==t.length){var n=t.map(function(t){return t instanceof Qr?e.toRelationFilter(t):e.toUnaryFilter(t)});return 1===n.length?n[0]:{compositeFilter:{op:\"AND\",filters:n}}}},t.prototype.fromFilter=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.fromUnaryFilter(t)]:void 0!==t.fieldFilter?[this.fromRelationFilter(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e.fromFilter(t)}).reduce(function(t,e){return t.concat(e)}):m(\"Unknown filter: \"+JSON.stringify(t)):[]},t.prototype.toOrder=function(t){var e=this;if(0!==t.length)return t.map(function(t){return e.toPropertyOrder(t)})},t.prototype.fromOrder=function(t){var e=this;return t.map(function(t){return e.fromPropertyOrder(t)})},t.prototype.toCursor=function(t){var e=this;return{before:t.before,values:t.position.map(function(t){return e.toValue(t)})}},t.prototype.fromCursor=function(t){var e=this,n=!!t.before,r=t.values.map(function(t){return e.fromValue(t)});return new Xr(r,n)},t.prototype.toDirection=function(t){return ui[t.name]},t.prototype.fromDirection=function(t){switch(t){case\"ASCENDING\":return Yr.ASCENDING;case\"DESCENDING\":return Yr.DESCENDING;default:return}},t.prototype.toOperatorName=function(t){return ci[t.name]},t.prototype.fromOperatorName=function(t){switch(t){case\"EQUAL\":return Hr.EQUAL;case\"GREATER_THAN\":return Hr.GREATER_THAN;case\"GREATER_THAN_OR_EQUAL\":return Hr.GREATER_THAN_OR_EQUAL;case\"LESS_THAN\":return Hr.LESS_THAN;case\"LESS_THAN_OR_EQUAL\":return Hr.LESS_THAN_OR_EQUAL;case\"ARRAY_CONTAINS\":return Hr.ARRAY_CONTAINS;case\"IN\":return Hr.IN;case\"ARRAY_CONTAINS_ANY\":return Hr.ARRAY_CONTAINS_ANY;case\"OPERATOR_UNSPECIFIED\":return m(\"Unspecified relation\");default:return m(\"Unknown relation\")}},t.prototype.toFieldPathReference=function(t){return{fieldPath:t.canonicalString()}},t.prototype.fromFieldPathReference=function(t){return ut.fromServerFormat(t.fieldPath)},t.prototype.toPropertyOrder=function(t){return{field:this.toFieldPathReference(t.field),direction:this.toDirection(t.dir)}},t.prototype.fromPropertyOrder=function(t){return new Jr(this.fromFieldPathReference(t.field),this.fromDirection(t.direction))},t.prototype.toRelationFilter=function(t){return t instanceof Qr?{fieldFilter:{field:this.toFieldPathReference(t.field),op:this.toOperatorName(t.op),value:this.toValue(t.value)}}:m(\"Unrecognized filter: \"+JSON.stringify(t))},t.prototype.fromRelationFilter=function(t){return new Qr(this.fromFieldPathReference(t.fieldFilter.field),this.fromOperatorName(t.fieldFilter.op),this.fromValue(t.fieldFilter.value))},t.prototype.toUnaryFilter=function(t){return t instanceof Gr?{unaryFilter:{field:this.toFieldPathReference(t.field),op:\"IS_NAN\"}}:t instanceof Kr?{unaryFilter:{field:this.toFieldPathReference(t.field),op:\"IS_NULL\"}}:m(\"Unrecognized filter: \"+JSON.stringify(t))},t.prototype.fromUnaryFilter=function(t){switch(t.unaryFilter.op){case\"IS_NAN\":var e=this.fromFieldPathReference(t.unaryFilter.field);return new Gr(e);case\"IS_NULL\":var n=this.fromFieldPathReference(t.unaryFilter.field);return new Kr(n);case\"OPERATOR_UNSPECIFIED\":return m(\"Unspecified filter\");default:return m(\"Unknown filter\")}},t.prototype.toDocumentMask=function(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}},t.prototype.fromDocumentMask=function(t){var e=(t.fieldPaths||[]).map(function(t){return ut.fromServerFormat(t)});return Pn.fromArray(e)},t}(),pi=function(){return function(){this.listeners=[]}}(),yi=function(){function t(t){this.syncEngine=t,this.queries=new ve(function(t){return t.canonicalId()}),this.onlineState=gr.Unknown,this.syncEngine.subscribe(this)}return t.prototype.listen=function(t){var e=t.query,n=!1,r=this.queries.get(e);return r||(n=!0,r=new pi,this.queries.set(e,r)),r.listeners.push(t),t.applyOnlineStateChange(this.onlineState),r.viewSnap&&t.onViewSnapshot(r.viewSnap),n?this.syncEngine.listen(e).then(function(t){return r.targetId=t,t}):Promise.resolve(r.targetId)},t.prototype.unlisten=function(t){return a.__awaiter(this,void 0,void 0,function(){var e,n,r,i;return a.__generator(this,function(o){return n=!1,(r=this.queries.get(e=t.query))&&(i=r.listeners.indexOf(t))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(e),[2,this.syncEngine.unlisten(e)]):[2]})})},t.prototype.onWatchChange=function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e],i=this.queries.get(r.query);if(i){for(var o=0,a=i.listeners;o<a.length;o++)a[o].onViewSnapshot(r);i.viewSnap=r}}},t.prototype.onWatchError=function(t,e){var n=this.queries.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.queries.delete(t)},t.prototype.onOnlineStateChange=function(t){this.onlineState=t,this.queries.forEach(function(e,n){for(var r=0,i=n.listeners;r<i.length;r++)i[r].applyOnlineStateChange(t)})},t}(),vi=function(){function t(t,e,n){this.query=t,this.queryObserver=e,this.raisedInitialEvent=!1,this.onlineState=gr.Unknown,this.options=n||{}}return t.prototype.onViewSnapshot=function(t){if(g(t.docChanges.length>0||t.syncStateChanged,\"We got a new snapshot with no changes?\"),!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];i.type!==Ir.Metadata&&e.push(i)}t=new Nr(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}this.raisedInitialEvent?this.shouldRaiseEvent(t)&&this.queryObserver.next(t):this.shouldRaiseInitialEvent(t,this.onlineState)&&this.raiseInitialEvent(t),this.snap=t},t.prototype.onError=function(t){this.queryObserver.error(t)},t.prototype.applyOnlineStateChange=function(t){this.onlineState=t,this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,t)&&this.raiseInitialEvent(this.snap)},t.prototype.shouldRaiseInitialEvent=function(t,e){return g(!this.raisedInitialEvent,\"Determining whether to raise first event but already had first event\"),!t.fromCache||(this.options.waitForSyncWhenOnline&&e!==gr.Offline?(g(t.fromCache,\"Waiting for sync, but snapshot is not from cache\"),!1):!t.docs.isEmpty()||e===gr.Offline)},t.prototype.shouldRaiseEvent=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.snap&&this.snap.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.raiseInitialEvent=function(t){g(!this.raisedInitialEvent,\"Trying to raise initial events for second time\"),t=Nr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(t)},t}(),mi=function(){function t(t,e,n){this.targetId=t,this.addedKeys=e,this.removedKeys=n}return t.fromSnapshot=function(e,n){for(var r=Lt(),i=Lt(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case Ir.Added:r=r.add(s.doc.key);break;case Ir.Removed:i=i.add(s.doc.key)}}return new t(e,r,i)},t}(),gi=function(){return function(t){this.key=t}}(),bi=function(){return function(t){this.key=t}}(),wi=function(){function t(t,e){this.query=t,this._syncedDocuments=e,this.syncState=null,this.current=!1,this.limboDocuments=Lt(),this.mutatedKeys=Lt(),this.documentSet=new Tr(t.docComparator.bind(t))}return Object.defineProperty(t.prototype,\"syncedDocuments\",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),t.prototype.computeDocChanges=function(t,e){var n=this,r=e?e.changeSet:new Or,i=e?e.documentSet:this.documentSet,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=this.query.hasLimit()&&i.size===this.query.limit?i.last():null;if(t.inorderTraversal(function(t,e){var c=i.get(t),l=e instanceof de?e:null;l&&(g(t.isEqual(l.key),\"Mismatching keys found in document changes: \"+t+\" != \"+l.key),l=n.query.matches(l)?l:null);var h=!!c&&n.mutatedKeys.has(c.key),f=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),d=!1;c&&l?c.data.isEqual(l.data)?h!==f&&(r.track({type:Ir.Metadata,doc:l}),d=!0):n.shouldWaitForSyncedDocument(c,l)||(r.track({type:Ir.Modified,doc:l}),d=!0,u&&n.query.docComparator(l,u)>0&&(s=!0)):!c&&l?(r.track({type:Ir.Added,doc:l}),d=!0):c&&!l&&(r.track({type:Ir.Removed,doc:c}),d=!0,u&&(s=!0)),d&&(l?(a=a.add(l),o=f?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))}),this.query.hasLimit())for(;a.size>this.query.limit;){var c=a.last();a=a.delete(c.key),o=o.delete(c.key),r.track({type:Ir.Removed,doc:c})}return g(!s||!e,\"View was refilled using docs that themselves needed refilling.\"),{documentSet:a,changeSet:r,needsRefill:s,mutatedKeys:o}},t.prototype.shouldWaitForSyncedDocument=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this;g(!t.needsRefill,\"Cannot apply changes that need a refill\");var i=this.documentSet;this.documentSet=t.documentSet,this.mutatedKeys=t.mutatedKeys;var o=t.changeSet.getChanges();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case Ir.Added:return 1;case Ir.Modified:case Ir.Metadata:return 2;case Ir.Removed:return 0;default:return m(\"Unknown ChangeType: \"+t)}};return n(t)-n(e)}(t.type,e.type)||r.query.docComparator(t.doc,e.doc)}),this.applyTargetChange(n);var a=e?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current?kr.Synced:kr.Local,u=s!==this.syncState;return this.syncState=s,0!==o.length||u?{snapshot:new Nr(this.query,t.documentSet,i,o,t.mutatedKeys,s===kr.Local,u,!1),limboChanges:a}:{limboChanges:a}},t.prototype.applyOnlineStateChange=function(t){return this.current&&t===gr.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Or,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},t.prototype.shouldBeInLimbo=function(t){return!this._syncedDocuments.has(t)&&!!this.documentSet.has(t)&&!this.documentSet.get(t).hasLocalMutations},t.prototype.applyTargetChange=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.add(t)}),t.modifiedDocuments.forEach(function(t){return g(e._syncedDocuments.has(t),\"Modified document \"+t+\" not found in view.\")}),t.removedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.delete(t)}),this.current=t.current)},t.prototype.updateLimboDocuments=function(){var t=this;if(!this.current)return[];var e=this.limboDocuments;this.limboDocuments=Lt(),this.documentSet.forEach(function(e){t.shouldBeInLimbo(e.key)&&(t.limboDocuments=t.limboDocuments.add(e.key))});var n=[];return e.forEach(function(e){t.limboDocuments.has(e)||n.push(new bi(e))}),this.limboDocuments.forEach(function(t){e.has(t)||n.push(new gi(t))}),n},t.prototype.synchronizeWithPersistedState=function(t,e){this._syncedDocuments=e,this.limboDocuments=Lt();var n=this.computeDocChanges(t);return this.applyChanges(n,!0)},t.prototype.computeInitialSnapshot=function(){return Nr.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===kr.Local)},t}(),_i=function(){return function(t,e,n){this.query=t,this.targetId=e,this.view=n}}(),Ei=function(){return function(t){this.key=t}}(),Si=function(){function t(t,e,n,r){this.localStore=t,this.remoteStore=e,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new ve(function(t){return t.canonicalId()}),this.queryViewsByTarget={},this.limboTargetsByKey=new St(ct.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new Hn,this.mutationUserCallbacks={},this.limboTargetIdGenerator=Zt.forSyncEngine(),this.isPrimary=void 0,this.onlineState=gr.Unknown}return Object.defineProperty(t.prototype,\"isPrimaryClient\",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){g(null!==t,\"SyncEngine listener cannot be null\"),g(null===this.syncEngineListener,\"SyncEngine already has a subscriber.\"),this.syncEngineListener=t},t.prototype.listen=function(t){return a.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o;return a.__generator(this,function(a){switch(a.label){case 0:return this.assertSubscribed(\"listen()\"),(r=this.queryViewsByQuery.get(t))?(this.sharedClientState.addLocalQueryTarget(e=r.targetId),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateQuery(t)];case 2:return i=a.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),e=i.targetId,[4,this.initializeViewAndComputeSnapshot(i,\"current\"===o)];case 3:n=a.sent(),this.isPrimary&&this.remoteStore.listen(i),a.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,e]}})})},t.prototype.initializeViewAndComputeSnapshot=function(t,e){var n=this,r=t.query;return this.localStore.executeQuery(r).then(function(i){return n.localStore.remoteDocumentKeys(t.targetId).then(function(o){var a=new wi(r,o),s=a.computeDocChanges(i),u=Dr.createSynthesizedTargetChangeForCurrentChange(t.targetId,e&&n.onlineState!==gr.Offline),c=a.applyChanges(s,!0===n.isPrimary,u);g(0===c.limboChanges.length,\"View returned limbo docs before target ack from the server.\"),g(!!c.snapshot,\"applyChanges for new view should always return a snapshot\");var l=new _i(r,t.targetId,a);return n.queryViewsByQuery.set(r,l),n.queryViewsByTarget[t.targetId]=l,c.snapshot})})},t.prototype.synchronizeViewAndComputeSnapshot=function(t){var e=this;return this.localStore.executeQuery(t.query).then(function(n){return e.localStore.remoteDocumentKeys(t.targetId).then(function(r){return a.__awaiter(e,void 0,void 0,function(){var e;return a.__generator(this,function(i){return e=t.view.synchronizeWithPersistedState(n,r),this.isPrimary&&this.updateTrackedLimbos(t.targetId,e.limboChanges),[2,e]})})})})},t.prototype.unlisten=function(t){return a.__awaiter(this,void 0,void 0,function(){var e,n=this;return a.__generator(this,function(r){switch(r.label){case 0:return this.assertSubscribed(\"unlisten()\"),g(!!(e=this.queryViewsByQuery.get(t)),\"Trying to unlisten on query not found:\"+t),this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.sharedClientState.isActiveQueryTarget(e.targetId)?[3,2]:[4,this.localStore.releaseQuery(t,!1).then(function(){n.sharedClientState.clearQueryState(e.targetId),n.remoteStore.unlisten(e.targetId),n.removeAndCleanupQuery(e)}).catch(hn)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupQuery(e),[4,this.localStore.releaseQuery(t,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}})})},t.prototype.write=function(t,e){var n=this;return this.assertSubscribed(\"write()\"),this.localStore.localWrite(t).then(function(t){return n.sharedClientState.addPendingMutation(t.batchId),n.addMutationCallback(t.batchId,e),n.emitNewSnapsAndNotifyLocalStore(t.changes)}).then(function(){return n.remoteStore.fillWritePipeline()})},t.prototype.wrapUpdateFunctionError=function(t){return t},t.prototype.runTransaction=function(t,e){var n=this;void 0===e&&(e=5),g(e>=0,\"Got negative number of retries for transaction.\");var r=this.remoteStore.createTransaction();return function(){try{var e=t(r);return!ar(e)&&e.catch&&e.then?e.catch(function(t){return Promise.reject(n.wrapUpdateFunctionError(t))}):Promise.reject(Error(\"Transaction callback must return a Promise\"))}catch(i){return Promise.reject(n.wrapUpdateFunctionError(i))}}().then(function(i){return r.commit().then(function(){return i}).catch(function(r){return 0===e?Promise.reject(r):n.runTransaction(t,e-1)})})},t.prototype.applyRemoteEvent=function(t){var e=this;return this.assertSubscribed(\"applyRemoteEvent()\"),this.localStore.applyRemoteEvent(t).then(function(n){return k(t.targetChanges,function(t,n){var r=e.limboResolutionsByTarget[Number(t)];r&&(g(n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size<=1,\"Limbo resolution for single document contains multiple changes.\"),n.addedDocuments.size>0?r.receivedDocument=!0:n.modifiedDocuments.size>0?g(r.receivedDocument,\"Received change for limbo target document without add.\"):n.removedDocuments.size>0&&(g(r.receivedDocument,\"Received remove for limbo target document without add.\"),r.receivedDocument=!1))}),e.emitNewSnapsAndNotifyLocalStore(n,t)}).catch(hn)},t.prototype.applyOnlineStateChange=function(t,e){if(this.isPrimary&&e===br.RemoteStore||!this.isPrimary&&e===br.SharedClientState){var n=[];this.queryViewsByQuery.forEach(function(e,r){var i=r.view.applyOnlineStateChange(t);g(0===i.limboChanges.length,\"OnlineState should not affect limbo documents.\"),i.snapshot&&n.push(i.snapshot)}),this.syncEngineListener.onOnlineStateChange(t),this.syncEngineListener.onWatchChange(n),this.onlineState=t,this.isPrimary&&this.sharedClientState.setOnlineState(t)}},t.prototype.rejectListen=function(t,e){return a.__awaiter(this,void 0,void 0,function(){var n,r,i,o,s,u,c=this;return a.__generator(this,function(a){switch(a.label){case 0:return this.assertSubscribed(\"rejectListens()\"),this.sharedClientState.updateQueryState(t,\"rejected\",e),(r=(n=this.limboResolutionsByTarget[t])&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[t],i=(i=new St(ct.comparator)).insert(r,new pe(r,Et.forDeletedDoc())),o=Lt().add(r),s=new Ar(Et.MIN,{},new kt(K),i,o),[2,this.applyRemoteEvent(s)]):[3,1];case 1:return g(!!(u=this.queryViewsByTarget[t]),\"Unknown targetId: \"+t),[4,this.localStore.releaseQuery(u.query,!1).then(function(){return c.removeAndCleanupQuery(u)}).catch(hn)];case 2:a.sent(),this.syncEngineListener.onWatchError(u.query,e),a.label=3;case 3:return[2]}})})},t.prototype.applyBatchState=function(t,e,n){return a.__awaiter(this,void 0,void 0,function(){var r;return a.__generator(this,function(i){switch(i.label){case 0:return this.assertSubscribed(\"applyBatchState()\"),[4,this.localStore.lookupMutationDocuments(t)];case 1:return null===(r=i.sent())?(p(\"SyncEngine\",\"Cannot apply mutation batch with id: \"+t),[2]):\"pending\"!==e?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:\"acknowledged\"===e||\"rejected\"===e?(this.processUserCallback(t,n||null),this.localStore.removeCachedMutationBatchMetadata(t)):m(\"Unknown batchState: \"+e),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}})})},t.prototype.applySuccessfulWrite=function(t){var e=this;this.assertSubscribed(\"applySuccessfulWrite()\");var n=t.batch.batchId;return this.processUserCallback(n,null),this.localStore.acknowledgeBatch(t).then(function(t){return e.sharedClientState.updateMutationState(n,\"acknowledged\"),e.emitNewSnapsAndNotifyLocalStore(t)}).catch(hn)},t.prototype.rejectFailedWrite=function(t,e){var n=this;return this.assertSubscribed(\"rejectFailedWrite()\"),this.processUserCallback(t,e),this.localStore.rejectBatch(t).then(function(r){return n.sharedClientState.updateMutationState(t,\"rejected\",e),n.emitNewSnapsAndNotifyLocalStore(r)}).catch(hn)},t.prototype.addMutationCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new St(K)),n=n.insert(t,e),this.mutationUserCallbacks[this.currentUser.toKey()]=n},t.prototype.processUserCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(t);r&&(g(t===n.minKey(),\"Mutation callbacks processed out-of-order?\"),e?r.reject(e):r.resolve(),n=n.remove(t)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},t.prototype.removeAndCleanupQuery=function(t){var e=this;if(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.queryViewsByQuery.delete(t.query),delete this.queryViewsByTarget[t.targetId],this.isPrimary){var n=this.limboDocumentRefs.referencesForId(t.targetId);this.limboDocumentRefs.removeReferencesForId(t.targetId),n.forEach(function(t){e.limboDocumentRefs.containsKey(t)||e.removeLimboTarget(t)})}},t.prototype.removeLimboTarget=function(t){var e=this.limboTargetsByKey.get(t);null!==e&&(this.remoteStore.unlisten(e),this.limboTargetsByKey=this.limboTargetsByKey.remove(t),delete this.limboResolutionsByTarget[e])},t.prototype.updateTrackedLimbos=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof gi?(this.limboDocumentRefs.addReference(i.key,t),this.trackLimboChange(i)):i instanceof bi?(p(\"SyncEngine\",\"Document no longer in limbo: \"+i.key),this.limboDocumentRefs.removeReference(i.key,t),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)):m(\"Unknown limbo change: \"+JSON.stringify(i))}},t.prototype.trackLimboChange=function(t){var e=t.key;if(!this.limboTargetsByKey.get(e)){p(\"SyncEngine\",\"New document in limbo: \"+e);var n=this.limboTargetIdGenerator.next(),r=Wr.atPath(e.path);this.limboResolutionsByTarget[n]=new Ei(e),this.remoteStore.listen(new Xe(r,n,Ye.LimboResolution,it.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(e,n)}},t.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},t.prototype.emitNewSnapsAndNotifyLocalStore=function(t,e){return a.__awaiter(this,void 0,void 0,function(){var n,r,i,o=this;return a.__generator(this,function(a){switch(a.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach(function(a,s){i.push(Promise.resolve().then(function(){var e=s.view.computeDocChanges(t);return e.needsRefill?o.localStore.executeQuery(s.query).then(function(t){return s.view.computeDocChanges(t,e)}):e}).then(function(t){var i=s.view.applyChanges(t,!0===o.isPrimary,e&&e.targetChanges[s.targetId]);if(o.updateTrackedLimbos(s.targetId,i.limboChanges),i.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(s.targetId,i.snapshot.fromCache?\"not-current\":\"current\"),n.push(i.snapshot);var a=mi.fromSnapshot(s.targetId,i.snapshot);r.push(a)}}))}),[4,Promise.all(i)];case 1:return a.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return a.sent(),[2]}})})},t.prototype.assertSubscribed=function(t){g(null!==this.syncEngineListener,\"Trying to call \"+t+\" before calling subscribe().\")},t.prototype.handleCredentialChange=function(t){return a.__awaiter(this,void 0,void 0,function(){var e,n;return a.__generator(this,function(r){switch(r.label){case 0:return e=!this.currentUser.isEqual(t),this.currentUser=t,e?[4,this.localStore.handleUserChange(t)]:[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}})})},t.prototype.applyPrimaryState=function(t){return a.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o,s,u=this;return a.__generator(this,function(a){switch(a.label){case 0:return!0!==t||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return a.sent(),e=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(e.toArray())];case 2:for(n=a.sent(),r=0,i=n;r<i.length;r++)this.remoteStore.listen(i[r]);return[3,7];case 3:return!1!==t||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,o=[],s=Promise.resolve(),I(this.queryViewsByTarget,function(t,e){u.sharedClientState.isLocalQueryTarget(t)?o.push(t):s=s.then(function(){return u.unlisten(e.query)}),u.remoteStore.unlisten(e.targetId)}),[4,s]);case 4:return a.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(o)];case 5:return a.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:a.sent(),a.label=7;case 7:return[2]}})})},t.prototype.resetLimboDocuments=function(){var t=this;I(this.limboResolutionsByTarget,function(e){t.remoteStore.unlisten(e)}),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new St(ct.comparator)},t.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(t){for(var e=this,n=Promise.resolve(),r=[],i=[],o=function(t){n=n.then(function(){return a.__awaiter(e,void 0,void 0,function(){var e,n,o,s;return a.__generator(this,function(a){switch(a.label){case 0:return(n=this.queryViewsByTarget[t])?[4,this.localStore.releaseQuery(n.query,!0)]:[3,4];case 1:return a.sent(),[4,this.localStore.allocateQuery(n.query)];case 2:return e=a.sent(),[4,this.synchronizeViewAndComputeSnapshot(n)];case 3:return(o=a.sent()).snapshot&&i.push(o.snapshot),[3,8];case 4:return g(!0===this.isPrimary,\"A secondary tab should never have an active query without an active view.\"),[4,this.localStore.getQueryForTarget(t)];case 5:return g(!!(s=a.sent()),\"Query data for target \"+t+\" not found\"),[4,this.localStore.allocateQuery(s)];case 6:return e=a.sent(),[4,this.initializeViewAndComputeSnapshot(e,!1)];case 7:a.sent(),a.label=8;case 8:return r.push(e),[2]}})})})},s=0,u=t;s<u.length;s++)o(u[s]);return n.then(function(){return e.syncEngineListener.onWatchChange(i),r})},t.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},t.prototype.applyTargetState=function(t,e,n){return a.__awaiter(this,void 0,void 0,function(){var r,i=this;return a.__generator(this,function(o){switch(o.label){case 0:if(this.isPrimary)return p(\"SyncEngine\",\"Ignoring unexpected query state notification.\"),[2];if(!this.queryViewsByTarget[t])return[3,5];switch(e){case\"current\":case\"not-current\":return[3,1];case\"rejected\":return[3,2]}return[3,4];case 1:return[2,this.localStore.getNewDocumentChanges().then(function(n){return a.__awaiter(i,void 0,void 0,function(){var r;return a.__generator(this,function(i){switch(i.label){case 0:return r=Ar.createSynthesizedRemoteEventForCurrentChange(t,\"current\"===e),[4,this.emitNewSnapsAndNotifyLocalStore(n,r)];case 1:return i.sent(),[2]}})})},function(t){return a.__awaiter(i,void 0,void 0,function(){var e;return a.__generator(this,function(n){switch(n.label){case 0:return function(t){return t.code===_.DATA_LOSS&&t.message===ge}(t)?(e=[],I(this.queryViewsByTarget,function(t){return e.push(t)}),[4,this.synchronizeQueryViewsAndRaiseSnapshots(e)]):[3,2];case 1:return n.sent(),[3,3];case 2:throw t;case 3:return[2]}})})})];case 2:return this.removeAndCleanupQuery(r=this.queryViewsByTarget[t]),[4,this.localStore.releaseQuery(r.query,!0)];case 3:return o.sent(),this.syncEngineListener.onWatchError(r.query,n),[3,5];case 4:m(\"Unexpected target state: \"+e),o.label=5;case 5:return[2]}})})},t.prototype.applyActiveTargetsChange=function(t,e){return a.__awaiter(this,void 0,void 0,function(){var n,r,i,o,s,u,c,l,h,f=this;return a.__generator(this,function(d){switch(d.label){case 0:if(!this.isPrimary)return[2];n=0,r=t,d.label=1;case 1:return n<r.length?(g(!this.queryViewsByTarget[h=r[n]],\"Trying to add an already active target\"),[4,this.localStore.getQueryForTarget(h)]):[3,6];case 2:return g(!!(i=d.sent()),\"Query data for active target \"+h+\" not found\"),[4,this.localStore.allocateQuery(i)];case 3:return o=d.sent(),[4,this.initializeViewAndComputeSnapshot(o,!1)];case 4:d.sent(),this.remoteStore.listen(o),d.label=5;case 5:return n++,[3,1];case 6:s=function(t){var e;return a.__generator(this,function(n){switch(n.label){case 0:return(e=u.queryViewsByTarget[t])?[4,u.localStore.releaseQuery(e.query,!1).then(function(){f.remoteStore.unlisten(t),f.removeAndCleanupQuery(e)}).catch(hn)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})},u=this,c=0,l=e,d.label=7;case 7:return c<l.length?[5,s(h=l[c])]:[3,10];case 8:d.sent(),d.label=9;case 9:return c++,[3,7];case 10:return[2]}})})},t.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},t.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},t.prototype.getRemoteKeysForTarget=function(t){var e=this.limboResolutionsByTarget[t];return e&&e.receivedDocument?Lt().add(e.key):this.queryViewsByTarget[t]?this.queryViewsByTarget[t].view.syncedDocuments:Lt()},t}(),Ci=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?\"uid:\"+this.uid:\"anonymous-user\"},t.prototype.isEqual=function(t){return t.uid===this.uid},t.UNAUTHENTICATED=new t(null),t.GOOGLE_CREDENTIALS=new t(\"google-credentials-uid\"),t.FIRST_PARTY=new t(\"first-party-uid\"),t}(),Ti=\"SharedClientState\",Ii=\"firestore_clients\",ki=\"firestore_mutations\",Oi=\"firestore_targets\",Ni=\"firestore_online_state\",Ai=\"firestore_sequence_number\",Di=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r,g(void 0!==r==(\"rejected\"===n),\"MutationMetadata must contain an error iff state is 'rejected'\")}return t.fromWebStorageEntry=function(e,n,r){var i=JSON.parse(r),o=\"object\"==typeof i&&-1!==[\"pending\",\"acknowledged\",\"rejected\"].indexOf(i.state)&&(void 0===i.error||\"object\"==typeof i.error),a=void 0;return o&&i.error&&(o=\"string\"==typeof i.error.message&&\"string\"==typeof i.error.code)&&(a=new E(i.error.code,i.error.message)),o?new t(e,n,i.state,a):(y(Ti,\"Failed to parse mutation state for ID '\"+n+\"': \"+r),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),xi=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n,g(void 0!==n==(\"rejected\"===e),\"QueryTargetMetadata must contain an error iff state is 'rejected'\")}return t.fromWebStorageEntry=function(e,n){var r=JSON.parse(n),i=\"object\"==typeof r&&-1!==[\"not-current\",\"current\",\"rejected\"].indexOf(r.state)&&(void 0===r.error||\"object\"==typeof r.error),o=void 0;return i&&r.error&&(i=\"string\"==typeof r.error.message&&\"string\"==typeof r.error.code)&&(o=new E(r.error.code,r.error.message)),i?new t(e,r.state,o):(y(Ti,\"Failed to parse target state for ID '\"+e+\"': \"+n),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Ri=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.fromWebStorageEntry=function(e,n){for(var r=JSON.parse(n),i=\"object\"==typeof r&&r.activeTargetIds instanceof Array,o=qt(),a=0;i&&a<r.activeTargetIds.length;++a)i=sr(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(y(Ti,\"Failed to parse client data for instance '\"+e+\"': \"+n),null)},t}(),Pi=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.fromWebStorageEntry=function(e){var n=JSON.parse(e);return\"object\"==typeof n&&n.onlineState in gr&&\"string\"==typeof n.clientId?new t(n.clientId,gr[n.onlineState]):(y(Ti,\"Failed to parse online state: \"+e),null)},t}(),Mi=function(){function t(){this.activeTargetIds=qt()}return t.prototype.addQueryTarget=function(t){g(!this.activeTargetIds.has(t),\"Target with ID '\"+t+\"' already active.\"),this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.removeQueryTarget=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.toWebStorageJSON=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),ji=function(){function t(e,n,r,i,o){if(this.queue=e,this.platform=n,this.persistenceKey=r,this.localClientId=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!t.isAvailable(this.platform))throw new E(_.UNIMPLEMENTED,\"LocalStorage is not available on this platform.\");var a=r.replace(/[.*+?^${}()|[\\]\\\\]/g,\"\\\\$&\");this.storage=this.platform.window.localStorage,this.currentUser=o,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey=Ai+\"_\"+r,this.activeClients[this.localClientId]=new Mi,this.clientStateKeyRe=new RegExp(\"^\"+Ii+\"_\"+a+\"_([^_]*)$\"),this.mutationBatchKeyRe=new RegExp(\"^\"+ki+\"_\"+a+\"_(\\\\d+)(?:_(.*))?$\"),this.queryTargetKeyRe=new RegExp(\"^\"+Oi+\"_\"+a+\"_(\\\\d+)$\"),this.onlineStateKey=Ni+\"_\"+r,this.platform.window.addEventListener(\"storage\",this.storageListener)}return t.isAvailable=function(t){return!(!t.window||null==t.window.localStorage)},t.prototype.start=function(){return a.__awaiter(this,void 0,void 0,function(){var t,e,n,r,i,o,s,u,c,l,h=this;return a.__generator(this,function(a){switch(a.label){case 0:return g(!this.started,\"WebStorageSharedClientState already started\"),g(null!==this.syncEngine,\"syncEngine property must be set before calling start()\"),g(null!==this.onlineStateHandler,\"onlineStateHandler property must be set before calling start()\"),[4,this.syncEngine.getActiveClients()];case 1:for(t=a.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.localClientId&&(i=this.getItem(this.toWebStorageClientStateKey(r)))&&(o=Ri.fromWebStorageEntry(r,i))&&(this.activeClients[o.clientId]=o);for(this.persistClientState(),(s=this.storage.getItem(this.onlineStateKey))&&(u=this.fromWebStorageOnlineState(s))&&this.handleOnlineStateEvent(u),c=0,l=this.earlyEvents;c<l.length;c++)this.handleWebStorageEvent(l[c]);return this.earlyEvents=[],this.platform.window.addEventListener(\"unload\",function(){return h.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.sequenceNumberKey,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){var t=qt();return k(this.activeClients,function(e,n){t=t.unionWith(n.activeTargetIds)}),t},t.prototype.isActiveQueryTarget=function(t){for(var e in this.activeClients)if(this.activeClients.hasOwnProperty(e)&&this.activeClients[e].activeTargetIds.has(t))return!0;return!1},t.prototype.addPendingMutation=function(t){this.persistMutationState(t,\"pending\")},t.prototype.updateMutationState=function(t,e,n){this.persistMutationState(t,e,n),this.removeMutationState(t)},t.prototype.addLocalQueryTarget=function(t){var e=\"not-current\";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(t));if(n){var r=xi.fromWebStorageEntry(t,n);r&&(e=r.state)}}return this.localClientState.addQueryTarget(t),this.persistClientState(),e},t.prototype.removeLocalQueryTarget=function(t){this.localClientState.removeQueryTarget(t),this.persistClientState()},t.prototype.isLocalQueryTarget=function(t){return this.localClientState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(this.toWebStorageQueryTargetMetadataKey(t))},t.prototype.updateQueryState=function(t,e,n){this.persistQueryTargetState(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.removeMutationState(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.persistOnlineState(t)},t.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener(\"storage\",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return p(Ti,\"READ\",t,e),e},t.prototype.setItem=function(t,e){p(Ti,\"SET\",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){p(Ti,\"REMOVE\",t),this.storage.removeItem(t)},t.prototype.handleWebStorageEvent=function(t){var e=this;if(t.storageArea===this.storage){if(p(Ti,\"EVENT\",t.key,t.newValue),t.key===this.localClientStorageKey)return void y(\"Received WebStorage notification for local change. Another client might have garbage-collected our state\");this.queue.enqueueAndForget(function(){return a.__awaiter(e,void 0,void 0,function(){var e,n,r,i,o,s;return a.__generator(this,function(a){if(!this.started)return this.earlyEvents.push(t),[2];if(null===t.key)return[2];if(this.clientStateKeyRe.test(t.key)){if(null==t.newValue)return n=this.fromWebStorageClientStateKey(t.key),[2,this.handleClientStateEvent(n,null)];if(e=this.fromWebStorageClientState(t.key,t.newValue))return[2,this.handleClientStateEvent(e.clientId,e)]}else if(this.mutationBatchKeyRe.test(t.key)){if(null!==t.newValue&&(r=this.fromWebStorageMutationMetadata(t.key,t.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(t.key)){if(null!==t.newValue&&(i=this.fromWebStorageQueryTargetMetadata(t.key,t.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(t.key===this.onlineStateKey){if(null!==t.newValue&&(o=this.fromWebStorageOnlineState(t.newValue)))return[2,this.handleOnlineStateEvent(o)]}else t.key===this.sequenceNumberKey&&(g(!!this.sequenceNumberHandler,\"Missing sequenceNumberHandler\"),(s=function(t){var e=it.INVALID;if(null!=t)try{var n=JSON.parse(t);g(\"number\"==typeof n,\"Found non-numeric sequence number\"),e=n}catch(r){y(Ti,\"Failed to read sequence number from WebStorage\",r)}return e}(t.newValue))!==it.INVALID&&this.sequenceNumberHandler(s));return[2]})})})}},Object.defineProperty(t.prototype,\"localClientState\",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),t.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},t.prototype.persistMutationState=function(t,e,n){var r=new Di(this.currentUser,t,e,n),i=this.toWebStorageMutationBatchKey(t);this.setItem(i,r.toWebStorageJSON())},t.prototype.removeMutationState=function(t){var e=this.toWebStorageMutationBatchKey(t);this.removeItem(e)},t.prototype.persistOnlineState=function(t){this.storage.setItem(this.onlineStateKey,JSON.stringify({clientId:this.localClientId,onlineState:gr[t]}))},t.prototype.persistQueryTargetState=function(t,e,n){var r=this.toWebStorageQueryTargetMetadataKey(t),i=new xi(t,e,n);this.setItem(r,i.toWebStorageJSON())},t.prototype.toWebStorageClientStateKey=function(t){return g(-1===t.indexOf(\"_\"),\"Client key cannot contain '_', but was '\"+t+\"'\"),Ii+\"_\"+this.persistenceKey+\"_\"+t},t.prototype.toWebStorageQueryTargetMetadataKey=function(t){return Oi+\"_\"+this.persistenceKey+\"_\"+t},t.prototype.toWebStorageMutationBatchKey=function(t){var e=ki+\"_\"+this.persistenceKey+\"_\"+t;return this.currentUser.isAuthenticated()&&(e+=\"_\"+this.currentUser.uid),e},t.prototype.fromWebStorageClientStateKey=function(t){var e=this.clientStateKeyRe.exec(t);return e?e[1]:null},t.prototype.fromWebStorageClientState=function(t,e){var n=this.fromWebStorageClientStateKey(t);return g(null!==n,\"Cannot parse client state key '\"+t+\"'\"),Ri.fromWebStorageEntry(n,e)},t.prototype.fromWebStorageMutationMetadata=function(t,e){var n=this.mutationBatchKeyRe.exec(t);g(null!==n,\"Cannot parse mutation batch key '\"+t+\"'\");var r=Number(n[1]);return Di.fromWebStorageEntry(new Ci(void 0!==n[2]?n[2]:null),r,e)},t.prototype.fromWebStorageQueryTargetMetadata=function(t,e){var n=this.queryTargetKeyRe.exec(t);g(null!==n,\"Cannot parse query target key '\"+t+\"'\");var r=Number(n[1]);return xi.fromWebStorageEntry(r,e)},t.prototype.fromWebStorageOnlineState=function(t){return Pi.fromWebStorageEntry(t)},t.prototype.handleMutationBatchEvent=function(t){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){return t.user.uid!==this.currentUser.uid?(p(Ti,\"Ignoring mutation for non-active user \"+t.user.uid),[2]):[2,this.syncEngine.applyBatchState(t.batchId,t.state,t.error)]})})},t.prototype.handleQueryTargetEvent=function(t){return this.syncEngine.applyTargetState(t.targetId,t.state,t.error)},t.prototype.handleClientStateEvent=function(t,e){var n=this,r=this.getAllActiveQueryTargets();e?this.activeClients[t]=e:delete this.activeClients[t];var i=this.getAllActiveQueryTargets(),o=[],s=[];return i.forEach(function(t){return a.__awaiter(n,void 0,void 0,function(){return a.__generator(this,function(e){return r.has(t)||o.push(t),[2]})})}),r.forEach(function(t){return a.__awaiter(n,void 0,void 0,function(){return a.__generator(this,function(e){return i.has(t)||s.push(t),[2]})})}),this.syncEngine.applyActiveTargetsChange(o,s)},t.prototype.handleOnlineStateEvent=function(t){this.activeClients[t.clientId]&&this.onlineStateHandler(t.onlineState)},t}(),Li=function(){function t(){this.localState=new Mi,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.localState.addQueryTarget(t),this.queryState[t]||\"not-current\"},t.prototype.updateQueryState=function(t,e,n){this.queryState[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.localState.removeQueryTarget(t)},t.prototype.isLocalQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.queryState[t]},t.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.start=function(){return this.localState=new Mi,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t}(),Fi=function(){function t(t,e){this.cacheSizeBytes=t,this.synchronizeTabs=e}return t.prototype.lruParams=function(){return en.withCacheSize(this.cacheSizeBytes)},t}(),qi=function(){return function(){}}(),Ui=function(){function t(t,e,n,r){this.platform=t,this.databaseInfo=e,this.credentials=n,this.asyncQueue=r,this.clientId=Q.newId(),this._clientShutdown=!1}return t.prototype.start=function(t){var e=this;this.verifyNotShutdown();var n=new lt,r=new lt,i=!1;return this.credentials.setChangeListener(function(o){i?e.asyncQueue.enqueueAndForget(function(){return e.handleCredentialChange(o)}):(i=!0,e.initializePersistence(t,r,o).then(function(t){return e.initializeRest(o,t)}).then(n.resolve,n.reject))}),this.asyncQueue.enqueueAndForget(function(){return n.promise}),r.promise},t.prototype.enableNetwork=function(){var t=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return t.syncEngine.enableNetwork()})},t.prototype.initializePersistence=function(t,e,n){var r=this;return t instanceof Fi?this.startIndexedDbPersistence(n,t).then(function(t){return e.resolve(),t}).catch(function(t){if(e.reject(t),!r.canFallback(t))throw t;return console.warn(\"Error enabling offline persistence. Falling back to persistence disabled: \"+t),r.startMemoryPersistence()}):(e.resolve(),this.startMemoryPersistence())},t.prototype.canFallback=function(t){return t instanceof E?t.code===_.FAILED_PRECONDITION||t.code===_.UNIMPLEMENTED:!(\"undefined\"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},t.prototype.verifyNotShutdown=function(){if(this._clientShutdown)throw new E(_.FAILED_PRECONDITION,\"The client has already been shutdown.\")},t.prototype.startIndexedDbPersistence=function(t,e){var n=this,r=ln.buildStoragePrefix(this.databaseInfo),i=new di(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then(function(){return a.__awaiter(n,void 0,void 0,function(){var n,o;return a.__generator(this,function(a){switch(a.label){case 0:if(e.synchronizeTabs&&!ji.isAvailable(this.platform))throw new E(_.UNIMPLEMENTED,\"IndexedDB persistence is only available on platforms that support LocalStorage.\");return o=e.lruParams(),e.synchronizeTabs?(this.sharedClientState=new ji(this.asyncQueue,this.platform,r,this.clientId,t),[4,ln.createMultiClientIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,i,o,{sequenceNumberSyncer:this.sharedClientState})]):[3,2];case 1:return n=a.sent(),[3,4];case 2:return this.sharedClientState=new Li,[4,ln.createIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,i,o)];case 3:n=a.sent(),a.label=4;case 4:return this.persistence=n,[2,n.referenceDelegate.garbageCollector]}})})})},t.prototype.startMemoryPersistence=function(){return this.persistence=Zn.createEagerPersistence(this.clientId),this.sharedClientState=new Li,Promise.resolve(null)},t.prototype.initializeRest=function(t,e){var n=this;return p(\"FirestoreClient\",\"Initializing. user=\",t.uid),this.platform.loadConnection(this.databaseInfo).then(function(r){return a.__awaiter(n,void 0,void 0,function(){var n,i,o,s,u=this;return a.__generator(this,function(c){switch(c.label){case 0:return this.localStore=new Kn(this.persistence,t),e&&(this.lruScheduler=new nn(e,this.asyncQueue,this.localStore)),n=this.platform.newConnectivityMonitor(),i=this.platform.newSerializer(this.databaseInfo.databaseId),o=new vr(this.asyncQueue,r,this.credentials,i),s=function(t){return u.syncEngine.applyOnlineStateChange(t,br.SharedClientState)},this.remoteStore=new Vr(this.localStore,o,this.asyncQueue,function(t){return u.syncEngine.applyOnlineStateChange(t,br.RemoteStore)},n),this.syncEngine=new Si(this.localStore,this.remoteStore,this.sharedClientState,t),this.sharedClientState.onlineStateHandler=s,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new yi(this.syncEngine),[4,this.sharedClientState.start()];case 1:return c.sent(),[4,this.remoteStore.start()];case 2:return c.sent(),[4,this.persistence.setPrimaryStateListener(function(t){return a.__awaiter(u,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return[4,this.syncEngine.applyPrimaryState(t)];case 1:return e.sent(),this.lruScheduler&&(t&&!this.lruScheduler.started?this.lruScheduler.start():t||this.lruScheduler.stop()),[2]}})})})];case 3:return c.sent(),[4,this.persistence.setDatabaseDeletedListener(function(){return a.__awaiter(u,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return[4,this.shutdown()];case 1:return t.sent(),[2]}})})})];case 4:return c.sent(),[2]}})})})},t.prototype.handleCredentialChange=function(t){return this.asyncQueue.verifyOperationInProgress(),p(\"FirestoreClient\",\"Credential Changed. Current user: \"+t.uid),this.syncEngine.handleCredentialChange(t)},t.prototype.disableNetwork=function(){var t=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return t.syncEngine.disableNetwork()})},t.prototype.shutdown=function(){var t=this;return this.asyncQueue.enqueue(function(){return a.__awaiter(t,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return this._clientShutdown?[3,4]:(this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()]);case 1:return t.sent(),[4,this.sharedClientState.shutdown()];case 2:return t.sent(),[4,this.persistence.shutdown()];case 3:t.sent(),this.credentials.removeChangeListener(),this._clientShutdown=!0,t.label=4;case 4:return[2]}})})})},t.prototype.listen=function(t,e,n){var r=this;this.verifyNotShutdown();var i=new vi(t,e,n);return this.asyncQueue.enqueueAndForget(function(){return r.eventMgr.listen(i)}),i},t.prototype.unlisten=function(t){var e=this;this.verifyNotShutdown(),this.asyncQueue.enqueueAndForget(function(){return e.eventMgr.unlisten(t)})},t.prototype.getDocumentFromLocalCache=function(t){var e=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return e.localStore.readDocument(t)}).then(function(t){if(t instanceof de)return t;if(t instanceof pe)return null;throw new E(_.UNAVAILABLE,\"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)\")})},t.prototype.getDocumentsFromLocalCache=function(t){var e=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return e.localStore.executeQuery(t)}).then(function(e){var n=Lt(),r=new wi(t,n),i=r.computeDocChanges(e);return r.applyChanges(i,!1).snapshot})},t.prototype.write=function(t){var e=this;this.verifyNotShutdown();var n=new lt;return this.asyncQueue.enqueueAndForget(function(){return e.syncEngine.write(t,n)}),n.promise},t.prototype.databaseId=function(){return this.databaseInfo.databaseId},Object.defineProperty(t.prototype,\"clientShutdown\",{get:function(){return this._clientShutdown},enumerable:!0,configurable:!0}),t.prototype.transaction=function(t){var e=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return a.__awaiter(e,void 0,void 0,function(){return a.__generator(this,function(t){return[2]})})}).then(function(){return e.syncEngine.runTransaction(t)})},t}(),Vi=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.scheduleEvent(this.observer.next,t)},t.prototype.error=function(t){this.scheduleEvent(this.observer.error,t)},t.prototype.mute=function(){this.muted=!0},t.prototype.scheduleEvent=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Bi=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(e,n,r,i){if(!(t instanceof Array)||t.length<1)throw new E(_.INVALID_ARGUMENT,\"Function FieldPath() requires its fieldNames argument to be an array with at least \"+H(1,\"element\")+\".\")}();for(var n=0;n<t.length;++n)if(R(\"FieldPath\",\"string\",n,t[n]),0===t[n].length)throw new E(_.INVALID_ARGUMENT,\"Invalid field name at argument $(i + 1). Field names must not be empty.\");this._internalPath=new ut(t)}return t.documentId=function(){return t._DOCUMENT_ID},t.prototype.isEqual=function(e){if(!(e instanceof t))throw W(\"isEqual\",\"FieldPath\",1,e);return this._internalPath.isEqual(e._internalPath)},t._DOCUMENT_ID=new t(ut.keyField().canonicalString()),t}(),Wi=new RegExp(\"[~\\\\*/\\\\[\\\\]]\"),zi=function(){return function(t,e){this.user=e,this.type=\"OAuth\",this.authHeaders={Authorization:\"Bearer \"+t}}}(),Hi=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){g(!this.changeListener,\"Can only call setChangeListener() once.\"),this.changeListener=t,t(Ci.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){g(null!==this.changeListener,\"removeChangeListener() when no listener registered\"),this.changeListener=null},t}(),Qi=function(){function t(t){var e=this;this.app=t,this.tokenListener=null,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){e.tokenCounter++,e.currentUser=e.getUser(),e.changeListener&&e.changeListener(e.currentUser)},this.tokenCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}return t.prototype.getToken=function(){var t=this;g(null!=this.tokenListener,\"getToken cannot be called after listener removed.\");var e=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.app.INTERNAL.getToken(n).then(function(n){if(t.tokenCounter!==e)throw new E(_.ABORTED,\"getToken aborted due to token change.\");return n?(g(\"string\"==typeof n.accessToken,\"Invalid tokenData returned from getToken():\"+n),new zi(n.accessToken,t.currentUser)):null})},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){g(!this.changeListener,\"Can only call setChangeListener() once.\"),this.changeListener=t,this.currentUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){g(null!=this.tokenListener,\"removeChangeListener() called twice\"),g(null!==this.changeListener,\"removeChangeListener() called when no listener registered\"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},t.prototype.getUser=function(){var t=this.app.INTERNAL.getUid();return g(null===t||\"string\"==typeof t,\"Received invalid UID: \"+t),new Ci(t)},t}(),Ki=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,this.type=\"FirstParty\",this.user=Ci.FIRST_PARTY}return Object.defineProperty(t.prototype,\"authHeaders\",{get:function(){var t={\"X-Goog-AuthUser\":this.sessionIndex},e=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),t}(),Gi=function(){function t(t,e){this.gapi=t,this.sessionIndex=e}return t.prototype.getToken=function(){return Promise.resolve(new Ki(this.gapi,this.sessionIndex))},t.prototype.setChangeListener=function(t){t(Ci.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Yi(t){return function(t,e){if(\"object\"!=typeof t||null===t)return!1;for(var n=t,r=0,i=[\"next\",\"error\",\"complete\"];r<i.length;r++){var o=i[r];if(o in n&&\"function\"==typeof n[o])return!0}return!1}(t)}var Xi=function(){function t(t){this._methodName=t}return t.delete=function(){return N(\"FieldValue.delete\",arguments),Ji.instance},t.serverTimestamp=function(){return N(\"FieldValue.serverTimestamp\",arguments),Zi.instance},t.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return D(\"FieldValue.arrayUnion\",arguments,1),new $i(t)},t.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return D(\"FieldValue.arrayRemove\",arguments,1),new to(t)},t.increment=function(t){return R(\"FieldValue.increment\",\"number\",1,t),A(\"FieldValue.increment\",arguments,1),new eo(t)},t.prototype.isEqual=function(t){return this===t},t}(),Ji=function(t){function e(){return t.call(this,\"FieldValue.delete\")||this}return a.__extends(e,t),e.instance=new e,e}(Xi),Zi=function(t){function e(){return t.call(this,\"FieldValue.serverTimestamp\")||this}return a.__extends(e,t),e.instance=new e,e}(Xi),$i=function(t){function e(e){var n=t.call(this,\"FieldValue.arrayUnion\")||this;return n._elements=e,n}return a.__extends(e,t),e}(Xi),to=function(t){function e(e){var n=t.call(this,\"FieldValue.arrayRemove\")||this;return n._elements=e,n}return a.__extends(e,t),e}(Xi),eo=function(t){function e(e){var n=t.call(this,\"FieldValue.increment\")||this;return n._operand=e,n}return a.__extends(e,t),e}(Xi),no=S(Xi,\"Use FieldValue.<field>() instead.\"),ro=/^__.*__$/,io=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[];return n.push(null!==this.fieldMask?new Vn(t,this.data,this.fieldMask,e):new Un(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new Bn(t,this.fieldTransforms)),n},t}(),oo=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[new Vn(t,this.data,this.fieldMask,e)];return this.fieldTransforms.length>0&&n.push(new Bn(t,this.fieldTransforms)),n},t}(),ao=function(t){return t[t.Set=0]=\"Set\",t[t.Update=1]=\"Update\",t[t.MergeSet=2]=\"MergeSet\",t[t.Argument=3]=\"Argument\",t}({});function so(t){switch(t){case ao.Set:case ao.MergeSet:case ao.Update:return!0;case ao.Argument:return!1;default:throw m(\"Unexpected case for UserDataSource: \"+t)}}var uo=function(){function t(t,e,n,r,i,o){this.dataSource=t,this.methodName=e,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return t.prototype.childContextForField=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(e),r},t.prototype.childContextForFieldPath=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},t.prototype.childContextForArray=function(e){return new t(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},t.prototype.createError=function(t){var e=null===this.path||this.path.isEmpty()?\"\":\" (found in field \"+this.path.toString()+\")\";return new E(_.INVALID_ARGUMENT,\"Function \"+this.methodName+\"() called with invalid data. \"+t+e)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.validatePath=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))},t.prototype.validatePathSegment=function(t){if(so(this.dataSource)&&ro.test(t))throw this.createError(\"Document fields cannot begin and end with __\")},t}(),co=function(){return function(t,e){this.databaseId=t,this.key=e}}(),lo=function(){function t(t){this.preConverter=t}return t.prototype.parseSetData=function(t,e){var n=new uo(ao.Set,t,ut.EMPTY_PATH);fo(\"Data must be an object, but it was:\",n,e);var r=this.parseData(e,n);return new io(r,null,n.fieldTransforms)},t.prototype.parseMergeData=function(t,e,n){var r=new uo(ao.MergeSet,t,ut.EMPTY_PATH);fo(\"Data must be an object, but it was:\",r,e);var i,o,a=this.parseData(e,r);if(n){for(var s=new kt(ut.comparator),u=0,c=n;u<c.length;u++){var l=c[u],h=void 0;if(l instanceof Bi)h=l._internalPath;else{if(\"string\"!=typeof l)throw m(\"Expected stringOrFieldPath to be a string or a FieldPath\");h=yo(t,l)}if(!r.contains(h))throw new E(_.INVALID_ARGUMENT,\"Field '\"+h+\"' is specified in your field mask but missing from your input data.\");s=s.add(h)}i=Pn.fromSet(s),o=r.fieldTransforms.filter(function(t){return i.covers(t.field)})}else i=Pn.fromArray(r.fieldMask),o=r.fieldTransforms;return new io(a,i,o)},t.prototype.parseUpdateData=function(t,e){var n=this,r=new uo(ao.Update,t,ut.EMPTY_PATH);fo(\"Data must be an object, but it was:\",r,e);var i=new kt(ut.comparator),o=xn.EMPTY;k(e,function(e,a){var s=yo(t,e),u=r.childContextForFieldPath(s);if((a=n.runPreConverter(a,u))instanceof Ji)i=i.add(s);else{var c=n.parseData(a,u);null!=c&&(i=i.add(s),o=o.set(s,c))}});var a=Pn.fromSet(i);return new oo(o,a,r.fieldTransforms)},t.prototype.parseUpdateVarargs=function(t,e,n,r){var i=new uo(ao.Update,t,ut.EMPTY_PATH),o=[po(t,e)],a=[n];if(r.length%2!=0)throw new E(_.INVALID_ARGUMENT,\"Function \"+t+\"() needs to be called with an even number of arguments that alternate between field names and values.\");for(var s=0;s<r.length;s+=2)o.push(po(t,r[s])),a.push(r[s+1]);var u=new kt(ut.comparator),c=xn.EMPTY;for(s=0;s<o.length;++s){var l=o[s],h=i.childContextForFieldPath(l),f=this.runPreConverter(a[s],h);if(f instanceof Ji)u=u.add(l);else{var d=this.parseData(f,h);null!=d&&(u=u.add(l),c=c.set(l,d))}}var p=Pn.fromSet(u);return new oo(c,p,i.fieldTransforms)},t.prototype.parseQueryValue=function(t,e){var n=new uo(ao.Argument,t,ut.EMPTY_PATH),r=this.parseData(e,n);return g(null!=r,\"Parsed data should not be null.\"),g(0===n.fieldTransforms.length,\"Field transforms should have been disallowed.\"),r},t.prototype.runPreConverter=function(t,e){try{return this.preConverter(t)}catch(r){var n=vo(r);throw e.createError(n)}},t.prototype.parseData=function(t,e){if(ho(t=this.runPreConverter(t,e)))return fo(\"Unsupported field value:\",e,t),this.parseObject(t,e);if(t instanceof Xi)return this.parseSentinelFieldValue(t,e),null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.arrayElement)throw e.createError(\"Nested arrays are not supported\");return this.parseArray(t,e)}return this.parseScalarValue(t,e)},t.prototype.parseObject=function(t,e){var n=this,r=new St(K);return O(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):k(t,function(t,i){var o=n.parseData(i,e.childContextForField(t));null!=o&&(r=r.insert(t,o))}),new xn(r)},t.prototype.parseArray=function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=this.parseData(o[i],e.childContextForArray(r));null==a&&(a=wn.INSTANCE),n.push(a),r++}return new Rn(n)},t.prototype.parseSentinelFieldValue=function(t,e){if(!so(e.dataSource))throw e.createError(t._methodName+\"() can only be used with update() and set()\");if(null===e.path)throw e.createError(t._methodName+\"() is not currently supported inside arrays\");if(t instanceof Ji){if(e.dataSource!==ao.MergeSet)throw e.dataSource===ao.Update?(g(e.path.length>0,\"FieldValue.delete() at the top level should have already been handled.\"),e.createError(\"FieldValue.delete() can only appear at the top level of your update data\")):e.createError(\"FieldValue.delete() cannot be used with set() unless you pass {merge:true}\");e.fieldMask.push(e.path)}else if(t instanceof Zi)e.fieldTransforms.push(new Mn(e.path,ti.instance));else if(t instanceof $i){var n=this.parseArrayTransformElements(t._methodName,t._elements),r=new ei(n);e.fieldTransforms.push(new Mn(e.path,r))}else if(t instanceof to){n=this.parseArrayTransformElements(t._methodName,t._elements);var i=new ni(n);e.fieldTransforms.push(new Mn(e.path,i))}else if(t instanceof eo){var o=this.parseQueryValue(\"FieldValue.increment\",t._operand),a=new ri(o);e.fieldTransforms.push(new Mn(e.path,a))}else m(\"Unknown FieldValue type: \"+t)},t.prototype.parseScalarValue=function(t,e){if(null===t)return wn.INSTANCE;if(\"number\"==typeof t)return sr(t)?new Cn(t):new Tn(t);if(\"boolean\"==typeof t)return _n.of(t);if(\"string\"==typeof t)return new In(t);if(t instanceof Date)return new kn(_t.fromDate(t));if(t instanceof _t)return new kn(new _t(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)));if(t instanceof Br)return new Dn(t);if(t instanceof $)return new Nn(t);if(t instanceof co)return new An(t.databaseId,t.key);throw e.createError(\"Unsupported field value: \"+U(t))},t.prototype.parseArrayTransformElements=function(t,e){var n=this;return e.map(function(e,r){var i=new uo(ao.Argument,t,ut.EMPTY_PATH);return n.parseData(e,i.childContextForArray(r))})},t}();function ho(t){return!(\"object\"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof _t||t instanceof Br||t instanceof $||t instanceof co||t instanceof Xi)}function fo(t,e,n){if(!ho(n)||!q(n)){var r=U(n);throw e.createError(\"an object\"===r?t+\" a custom object\":t+\" \"+r)}}function po(t,e){if(e instanceof Bi)return e._internalPath;if(\"string\"==typeof e)return yo(t,e);throw new E(_.INVALID_ARGUMENT,\"Function \"+t+\"() called with invalid data. Field path arguments must be of type string or FieldPath.\")}function yo(t,e){try{return function(t){if(t.search(Wi)>=0)throw new E(_.INVALID_ARGUMENT,\"Invalid field path (\"+t+\"). Paths must not contain '~', '*', '/', '[', or ']'\");try{return new(Bi.bind.apply(Bi,[void 0].concat(t.split(\".\"))))}catch(e){throw new E(_.INVALID_ARGUMENT,\"Invalid field path (\"+t+\"). Paths must not be empty, begin with '.', end with '.', or contain '..'\")}}(e)._internalPath}catch(r){var n=vo(r);throw new E(_.INVALID_ARGUMENT,\"Function \"+t+\"() called with invalid data. \"+n)}}function vo(t){return t instanceof Error?t.message:t.toString()}var mo=\"firestore.googleapis.com\",go=!0,bo=!0,wo=!1,_o=en.COLLECTION_DISABLED,Eo=function(){function t(t){if(void 0===t.host){if(void 0!==t.ssl)throw new E(_.INVALID_ARGUMENT,\"Can't provide ssl option if host option is not set\");this.host=mo,this.ssl=go}else M(\"settings\",\"non-empty string\",\"host\",t.host),this.host=t.host,j(\"settings\",\"boolean\",\"ssl\",t.ssl),this.ssl=T(t.ssl,go);if(B(\"settings\",t,[\"host\",\"ssl\",\"credentials\",\"timestampsInSnapshots\",\"cacheSizeBytes\",\"experimentalForceLongPolling\"]),j(\"settings\",\"object\",\"credentials\",t.credentials),this.credentials=t.credentials,j(\"settings\",\"boolean\",\"timestampsInSnapshots\",t.timestampsInSnapshots),!0===t.timestampsInSnapshots?y(\"\\n  The timestampsInSnapshots setting now defaults to true and you no\\n  longer need to explicitly set it. In a future release, the setting\\n  will be removed entirely and so it is recommended that you remove it\\n  from your firestore.settings() call now.\"):!1===t.timestampsInSnapshots&&y(\"\\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\\n  YOUR CODE.\\n\\n  To hide this warning, stop using the timestampsInSnapshots setting in your\\n  firestore.settings({ ... }) call.\\n\\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\\n  read back as Firebase Timestamp objects instead of as system Date objects.\\n  So you will also need to update code expecting a Date to instead expect a\\n  Timestamp. For example:\\n\\n  // Old:\\n  const date = snapshot.get('created_at');\\n  // New:\\n  const timestamp = snapshot.get('created_at'); const date =\\n  timestamp.toDate();\\n\\n  Please audit all existing usages of Date when you enable the new\\n  behavior.\"),this.timestampsInSnapshots=T(t.timestampsInSnapshots,bo),j(\"settings\",\"number\",\"cacheSizeBytes\",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=en.DEFAULT_CACHE_SIZE_BYTES;else{if(t.cacheSizeBytes!==_o&&t.cacheSizeBytes<en.MINIMUM_CACHE_SIZE_BYTES)throw new E(_.INVALID_ARGUMENT,\"cacheSizeBytes must be at least \"+en.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=t.cacheSizeBytes}j(\"settings\",\"boolean\",\"experimentalForceLongPolling\",t.experimentalForceLongPolling),this.forceLongPolling=void 0===t.experimentalForceLongPolling?wo:t.experimentalForceLongPolling}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling},t}(),So=function(){return function(){}}(),Co=function(){function t(e){var n=this;this._queue=new ft,this.INTERNAL={delete:function(){return a.__awaiter(n,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.shutdown()];case 1:return t.sent(),[2]}})})}};var r=new So;if(\"object\"==typeof e.options){var i=e;r.firebaseApp=i,r.databaseId=t.databaseIdFromApp(i),r.persistenceKey=r.firebaseApp.name,r.credentials=new Qi(i)}else{var o=e;if(!o.projectId)throw new E(_.INVALID_ARGUMENT,\"Must provide projectId\");r.databaseId=new rt(o.projectId,o.database),r.persistenceKey=\"[DEFAULT]\",r.credentials=new Hi}r.settings=new Eo({}),this._config=r,this._databaseId=r.databaseId}return t.prototype.settings=function(t){if(A(\"Firestore.settings\",arguments,1),R(\"Firestore.settings\",\"object\",1,t),C(t,\"persistence\"))throw new E(_.INVALID_ARGUMENT,'\"persistence\" is now specified with a separate call to firestore.enablePersistence().');var e=new Eo(t);if(this._firestoreClient&&!this._config.settings.isEqual(e))throw new E(_.FAILED_PRECONDITION,\"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.\");this._config.settings=e,void 0!==e.credentials&&(this._config.credentials=function(t){if(!t)return new Hi;switch(t.type){case\"gapi\":var e=t.client;return g(!(\"object\"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty),\"unexpected gapi interface\"),new Gi(e,t.sessionIndex||\"0\");case\"provider\":return t.client;default:throw new E(_.INVALID_ARGUMENT,\"makeCredentialsProvider failed due to invalid credential type\")}}(e.credentials))},t.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},t.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},t.prototype.enablePersistence=function(t){if(this._firestoreClient)throw new E(_.FAILED_PRECONDITION,\"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.\");var e=!1;return t&&(void 0!==t.experimentalTabSynchronization&&y(\"The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'.\"),e=T(void 0!==t.synchronizeTabs?t.synchronizeTabs:t.experimentalTabSynchronization,!1)),this.configureClient(new Fi(this._config.settings.cacheSizeBytes,e))},t.prototype.clearPersistence=function(){var t=this,e=ln.buildStoragePrefix(this.makeDatabaseInfo()),n=new lt;return this._queue.enqueueAndForget(function(){return a.__awaiter(t,void 0,void 0,function(){var t;return a.__generator(this,function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientShutdown)throw new E(_.FAILED_PRECONDITION,\"Persistence cannot be cleared after this Firestore instance is initialized.\");return[4,ln.clearPersistence(e)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return t=r.sent(),n.reject(t),[3,3];case 3:return[2]}})})}),n.promise},t.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new qi),this._firestoreClient},t.prototype.makeDatabaseInfo=function(){return new et(this._config.databaseId,this._config.persistenceKey,this._config.settings.host,this._config.settings.ssl,this._config.settings.forceLongPolling)},t.prototype.configureClient=function(t){var e=this;g(!!this._config.settings.host,\"FirestoreSettings.host cannot be falsey\"),g(!this._firestoreClient,\"configureClient() called multiple times\");var n=this.makeDatabaseInfo();return this._dataConverter=new lo(function(t){if(t instanceof ko){var n=e._config.databaseId,r=t.firestore._config.databaseId;if(!r.isEqual(n))throw new E(_.INVALID_ARGUMENT,\"Document reference is for database \"+r.projectId+\"/\"+r.database+\" but should be for database \"+n.projectId+\"/\"+n.database);return new co(e._config.databaseId,t._key)}return t}),this._firestoreClient=new Ui(b.getPlatform(),n,this._config.credentials,this._queue),this._firestoreClient.start(t)},t.databaseIdFromApp=function(t){var e=t.options;if(!C(e,\"projectId\"))throw new E(_.INVALID_ARGUMENT,'\"projectId\" not provided in firebase.initializeApp.');var n=e.projectId;if(!n||\"string\"!=typeof n)throw new E(_.INVALID_ARGUMENT,\"projectId must be a string in FirebaseApp.options\");return new rt(n)},Object.defineProperty(t.prototype,\"app\",{get:function(){if(!this._config.firebaseApp)throw new E(_.FAILED_PRECONDITION,\"Firestore was not initialized using the Firebase SDK. 'app' is not available\");return this._config.firebaseApp},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){return A(\"Firestore.collection\",arguments,1),R(\"Firestore.collection\",\"non-empty string\",1,t),this.ensureClientConfigured(),new Ro(at.fromString(t),this)},t.prototype.doc=function(t){return A(\"Firestore.doc\",arguments,1),R(\"Firestore.doc\",\"non-empty string\",1,t),this.ensureClientConfigured(),ko.forPath(at.fromString(t),this)},t.prototype.collectionGroup=function(t){if(A(\"Firestore.collectionGroup\",arguments,1),R(\"Firestore.collectionGroup\",\"non-empty string\",1,t),t.indexOf(\"/\")>=0)throw new E(_.INVALID_ARGUMENT,\"Invalid collection ID '\"+t+\"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.\");return this.ensureClientConfigured(),new Do(new Wr(at.EMPTY_PATH,t),this)},t.prototype.runTransaction=function(t){var e=this;return A(\"Firestore.runTransaction\",arguments,1),R(\"Firestore.runTransaction\",\"function\",1,t),this.ensureClientConfigured().transaction(function(n){return t(new To(e,n))})},t.prototype.batch=function(){return this.ensureClientConfigured(),new Io(this)},Object.defineProperty(t,\"logLevel\",{get:function(){switch(f()){case h.DEBUG:return\"debug\";case h.ERROR:return\"error\";case h.SILENT:return\"silent\";default:return m(\"Unknown log level: \"+f())}},enumerable:!0,configurable:!0}),t.setLogLevel=function(t){switch(A(\"Firestore.setLogLevel\",arguments,1),R(\"Firestore.setLogLevel\",\"non-empty string\",1,t),t){case\"debug\":d(h.DEBUG);break;case\"error\":d(h.ERROR);break;case\"silent\":d(h.SILENT);break;default:throw new E(_.INVALID_ARGUMENT,\"Invalid log level: \"+t)}},t.prototype._areTimestampsInSnapshotsEnabled=function(){return this._config.settings.timestampsInSnapshots},t}(),To=function(){function t(t,e){this._firestore=t,this._transaction=e}return t.prototype.get=function(t){var e=this;A(\"Transaction.get\",arguments,1);var n=Lo(\"Transaction.get\",t,this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return m(\"Mismatch in docs returned from document lookup.\");var r=t[0];if(r instanceof pe)return new No(e._firestore,n._key,null,!1,!1);if(r instanceof de)return new No(e._firestore,n._key,r,!1,!1);throw m(\"BatchGetDocumentsRequest returned unexpected document type: \"+r.constructor.name)})},t.prototype.set=function(t,e,n){x(\"Transaction.set\",arguments,2,3);var r=Lo(\"Transaction.set\",t,this._firestore),i=(n=Po(\"Transaction.set\",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(\"Transaction.set\",e,n.mergeFields):this._firestore._dataConverter.parseSetData(\"Transaction.set\",e);return this._transaction.set(r._key,i),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return\"string\"==typeof e||e instanceof Bi?(D(\"Transaction.update\",arguments,3),r=Lo(\"Transaction.update\",t,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs(\"Transaction.update\",e,n,o)):(A(\"Transaction.update\",arguments,2),r=Lo(\"Transaction.update\",t,this._firestore),i=this._firestore._dataConverter.parseUpdateData(\"Transaction.update\",e)),this._transaction.update(r._key,i),this},t.prototype.delete=function(t){A(\"Transaction.delete\",arguments,1);var e=Lo(\"Transaction.delete\",t,this._firestore);return this._transaction.delete(e._key),this},t}(),Io=function(){function t(t){this._firestore=t,this._mutations=[],this._committed=!1}return t.prototype.set=function(t,e,n){x(\"WriteBatch.set\",arguments,2,3),this.verifyNotCommitted();var r=Lo(\"WriteBatch.set\",t,this._firestore),i=(n=Po(\"WriteBatch.set\",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(\"WriteBatch.set\",e,n.mergeFields):this._firestore._dataConverter.parseSetData(\"WriteBatch.set\",e);return this._mutations=this._mutations.concat(i.toMutations(r._key,Fn.NONE)),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.verifyNotCommitted(),\"string\"==typeof e||e instanceof Bi?(D(\"WriteBatch.update\",arguments,3),r=Lo(\"WriteBatch.update\",t,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs(\"WriteBatch.update\",e,n,o)):(A(\"WriteBatch.update\",arguments,2),r=Lo(\"WriteBatch.update\",t,this._firestore),i=this._firestore._dataConverter.parseUpdateData(\"WriteBatch.update\",e)),this._mutations=this._mutations.concat(i.toMutations(r._key,Fn.exists(!0))),this},t.prototype.delete=function(t){A(\"WriteBatch.delete\",arguments,1),this.verifyNotCommitted();var e=Lo(\"WriteBatch.delete\",t,this._firestore);return this._mutations=this._mutations.concat(new Wn(e._key,Fn.NONE)),this},t.prototype.commit=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},t.prototype.verifyNotCommitted=function(){if(this._committed)throw new E(_.FAILED_PRECONDITION,\"A write batch can no longer be used after commit() has been called.\")},t}(),ko=function(){function t(t,e){this._key=t,this.firestore=e,this._firestoreClient=this.firestore.ensureClientConfigured()}return t.forPath=function(e,n){if(e.length%2!=0)throw new E(_.INVALID_ARGUMENT,\"Invalid document reference. Document references must have an even number of segments, but \"+e.canonicalString()+\" has \"+e.length);return new t(new ct(e),n)},Object.defineProperty(t.prototype,\"id\",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"parent\",{get:function(){return new Ro(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"path\",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(A(\"DocumentReference.collection\",arguments,1),R(\"DocumentReference.collection\",\"non-empty string\",1,t),!t)throw new E(_.INVALID_ARGUMENT,\"Must provide a non-empty collection name to collection()\");var e=at.fromString(t);return new Ro(this._key.path.child(e),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw W(\"isEqual\",\"DocumentReference\",1,e);return this.firestore===e.firestore&&this._key.isEqual(e._key)},t.prototype.set=function(t,e){x(\"DocumentReference.set\",arguments,1,2);var n=(e=Po(\"DocumentReference.set\",e)).merge||e.mergeFields?this.firestore._dataConverter.parseMergeData(\"DocumentReference.set\",t,e.mergeFields):this.firestore._dataConverter.parseSetData(\"DocumentReference.set\",t);return this._firestoreClient.write(n.toMutations(this._key,Fn.NONE))},t.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return\"string\"==typeof t||t instanceof Bi?(D(\"DocumentReference.update\",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs(\"DocumentReference.update\",t,e,r)):(A(\"DocumentReference.update\",arguments,1),n=this.firestore._dataConverter.parseUpdateData(\"DocumentReference.update\",t)),this._firestoreClient.write(n.toMutations(this._key,Fn.exists(!0)))},t.prototype.delete=function(){return A(\"DocumentReference.delete\",arguments,0),this._firestoreClient.write([new Wn(this._key,Fn.NONE)])},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];x(\"DocumentReference.onSnapshot\",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;\"object\"!=typeof t[i]||Yi(t[i])||(B(\"DocumentReference.onSnapshot\",r=t[i],[\"includeMetadataChanges\"]),j(\"DocumentReference.onSnapshot\",\"boolean\",\"includeMetadataChanges\",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return Yi(t[i])?n=t[i]:(R(\"DocumentReference.onSnapshot\",\"function\",i,t[i]),P(\"DocumentReference.onSnapshot\",\"function\",i+1,t[i+1]),P(\"DocumentReference.onSnapshot\",\"function\",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(o,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error(\"Uncaught Error in onSnapshot:\",t)};e.error&&(r=e.error.bind(e));var i=new Vi({next:function(t){if(e.next){g(t.docs.size<=1,\"Too many documents returned on a document query\");var r=t.docs.get(n._key);e.next(new No(n.firestore,n._key,r,t.fromCache,t.hasPendingWrites))}},error:r}),o=this._firestoreClient.listen(Wr.atPath(this._key.path),i,t);return function(){i.mute(),n._firestoreClient.unlisten(o)}},t.prototype.get=function(t){var e=this;return x(\"DocumentReference.get\",arguments,0,1),jo(\"DocumentReference.get\",t),new Promise(function(n,r){t&&\"cache\"===t.source?e.firestore.ensureClientConfigured().getDocumentFromLocalCache(e._key).then(function(t){n(new No(e.firestore,e._key,t,!0,t instanceof de&&t.hasLocalMutations))},r):e.getViaSnapshotListener(n,r,t)})},t.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?e(new E(_.UNAVAILABLE,\"Failed to get document because the client is offline.\")):i.exists&&i.metadata.fromCache&&n&&\"server\"===n.source?e(new E(_.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to \"server\" to retrieve the cached document.)')):t(i)},error:e})},t}(),Oo=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),No=function(){function t(t,e,n,r,i){this._firestore=t,this._key=e,this._document=n,this._fromCache=r,this._hasPendingWrites=i}return t.prototype.data=function(t){return x(\"DocumentSnapshot.data\",arguments,0,1),t=Mo(\"DocumentSnapshot.data\",t),this._document?this.convertObject(this._document.data,gn.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},t.prototype.get=function(t,e){if(x(\"DocumentSnapshot.get\",arguments,1,2),e=Mo(\"DocumentSnapshot.get\",e),this._document){var n=this._document.data.field(po(\"DocumentSnapshot.get\",t));if(void 0!==n)return this.convertValue(n,gn.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(t.prototype,\"id\",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"ref\",{get:function(){return new ko(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"exists\",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"metadata\",{get:function(){return new Oo(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw W(\"isEqual\",\"DocumentSnapshot\",1,e);return this._firestore===e._firestore&&this._fromCache===e._fromCache&&this._key.isEqual(e._key)&&(null===this._document?null===e._document:this._document.isEqual(e._document))},t.prototype.convertObject=function(t,e){var n=this,r={};return t.forEach(function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertValue=function(t,e){if(t instanceof xn)return this.convertObject(t,e);if(t instanceof Rn)return this.convertArray(t,e);if(t instanceof An){var n=t.value(e),r=this._firestore.ensureClientConfigured().databaseId();return t.databaseId.isEqual(r)||y(\"Document \"+this._key.path+\" contains a document reference within a different database (\"+t.databaseId.projectId+\"/\"+t.databaseId.database+\") which is not supported. It will be treated as a reference in the current database (\"+r.projectId+\"/\"+r.database+\") instead.\"),new ko(n,this._firestore)}return t.value(e)},t.prototype.convertArray=function(t,e){var n=this;return t.internalValue.map(function(t){return n.convertValue(t,e)})},t}(),Ao=function(t){function e(e,n,r,i,o){return t.call(this,e,n,r,i,o)||this}return a.__extends(e,t),e.prototype.data=function(e){var n=t.prototype.data.call(this,e);return g(\"object\"==typeof n,\"Document in a QueryDocumentSnapshot should exist\"),n},e}(No),Do=function(){function t(t,e){this._query=t,this.firestore=e}return t.prototype.where=function(e,n,r){A(\"Query.where\",arguments,3),V(\"Query.where\",3,r),\"in\"!==n&&\"array-contains-any\"!==n&&function(t,e,n,r){if(!e.some(function(t){return t===r}))throw new E(_.INVALID_ARGUMENT,\"Invalid value \"+U(r)+\" provided to function Query.where() for its \"+z(2)+\" argument. Acceptable values: \"+e.join(\", \"))}(0,[\"<\",\"<=\",\"==\",\">=\",\">\",\"array-contains\"],0,n);var i,o=po(\"Query.where\",e),a=Hr.fromString(n);if(o.isKeyField()){if(a===Hr.ARRAY_CONTAINS||a===Hr.ARRAY_CONTAINS_ANY||a===Hr.IN)throw new E(_.INVALID_ARGUMENT,\"Invalid Query. You can't perform '\"+a.toString()+\"' queries on FieldPath.documentId().\");if(\"string\"==typeof r){if(\"\"===r)throw new E(_.INVALID_ARGUMENT,\"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it was an empty string.\");if(!this._query.isCollectionGroupQuery()&&-1!==r.indexOf(\"/\"))throw new E(_.INVALID_ARGUMENT,\"Invalid third parameter to Query.where(). When querying a collection by FieldPath.documentId(), the value provided must be a plain document ID, but '\"+r+\"' contains a slash.\");var s=this._query.path.child(at.fromString(r));if(!ct.isDocumentKey(s))throw new E(_.INVALID_ARGUMENT,\"Invalid third parameter to Query.where(). When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '\"+s+\"' is not because it has an odd number of segments (\"+s.length+\").\");i=new An(this.firestore._databaseId,new ct(s))}else{if(!(r instanceof ko))throw new E(_.INVALID_ARGUMENT,\"Function Query.where() requires its third parameter to be a string or a DocumentReference if the first parameter is FieldPath.documentId(), but it was: \"+U(r)+\".\");i=new An(this.firestore._databaseId,r._key)}}else{if(a===Hr.IN||a===Hr.ARRAY_CONTAINS_ANY){if(!Array.isArray(r)||0===r.length)throw new E(_.INVALID_ARGUMENT,\"Invalid Query. A non-empty array is required for '\"+a.toString()+\"' filters.\");if(r.length>10)throw new E(_.INVALID_ARGUMENT,\"Invalid Query. '\"+a.toString()+\"' filters support a maximum of 10 elements in the value array.\")}i=this.firestore._dataConverter.parseQueryValue(\"Query.where\",r)}var u=zr.create(o,a,i);return this.validateNewFilter(u),new t(this._query.addFilter(u),this.firestore)},t.prototype.orderBy=function(e,n){var r;if(x(\"Query.orderBy\",arguments,1,2),P(\"Query.orderBy\",\"non-empty string\",2,n),void 0===n||\"asc\"===n)r=Yr.ASCENDING;else{if(\"desc\"!==n)throw new E(_.INVALID_ARGUMENT,\"Function Query.orderBy() has unknown direction '\"+n+\"', expected 'asc' or 'desc'.\");r=Yr.DESCENDING}if(null!==this._query.startAt)throw new E(_.INVALID_ARGUMENT,\"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().\");if(null!==this._query.endAt)throw new E(_.INVALID_ARGUMENT,\"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().\");var i=po(\"Query.orderBy\",e),o=new Jr(i,r);return this.validateNewOrderBy(o),new t(this._query.addOrderBy(o),this.firestore)},t.prototype.limit=function(e){if(A(\"Query.limit\",arguments,1),R(\"Query.limit\",\"number\",1,e),e<=0)throw new E(_.INVALID_ARGUMENT,\"Invalid Query. Query limit (\"+e+\") is invalid. Limit must be positive.\");return new t(this._query.withLimit(e),this.firestore)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];D(\"Query.startAt\",arguments,1);var i=this.boundFromDocOrFields(\"Query.startAt\",e,n,!0);return new t(this._query.withStartAt(i),this.firestore)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];D(\"Query.startAfter\",arguments,1);var i=this.boundFromDocOrFields(\"Query.startAfter\",e,n,!1);return new t(this._query.withStartAt(i),this.firestore)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];D(\"Query.endBefore\",arguments,1);var i=this.boundFromDocOrFields(\"Query.endBefore\",e,n,!0);return new t(this._query.withEndAt(i),this.firestore)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];D(\"Query.endAt\",arguments,1);var i=this.boundFromDocOrFields(\"Query.endAt\",e,n,!1);return new t(this._query.withEndAt(i),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw W(\"isEqual\",\"Query\",1,e);return this.firestore===e.firestore&&this._query.isEqual(e._query)},t.prototype.boundFromDocOrFields=function(t,e,n,r){if(V(t,1,e),e instanceof No){if(n.length>0)throw new E(_.INVALID_ARGUMENT,\"Too many arguments provided to \"+t+\"().\");var i=e;if(!i.exists)throw new E(_.NOT_FOUND,\"Can't use a DocumentSnapshot that doesn't exist for \"+t+\"().\");return this.boundFromDocument(t,i._document,r)}var o=[e].concat(n);return this.boundFromFields(t,o,r)},t.prototype.boundFromDocument=function(t,e,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new An(this.firestore._databaseId,e.key));else{var s=e.field(a.field);if(s instanceof On)throw new E(_.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field \"'+a.field+'\" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(void 0===s){var u=a.field.canonicalString();throw new E(_.INVALID_ARGUMENT,\"Invalid query. You are trying to start or end a query using a document for which the field '\"+u+\"' (used as the orderBy) does not exist.\")}r.push(s)}}return new Xr(r,n)},t.prototype.boundFromFields=function(t,e,n){var r=this._query.explicitOrderBy;if(e.length>r.length)throw new E(_.INVALID_ARGUMENT,\"Too many arguments provided to \"+t+\"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses\");for(var i=[],o=0;o<e.length;o++){var a=e[o];if(r[o].field.isKeyField()){if(\"string\"!=typeof a)throw new E(_.INVALID_ARGUMENT,\"Invalid query. Expected a string for document ID in \"+t+\"(), but got a \"+typeof a);if(!this._query.isCollectionGroupQuery()&&-1!==a.indexOf(\"/\"))throw new E(_.INVALID_ARGUMENT,\"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to \"+t+\"() must be a plain document ID, but '\"+a+\"' contains a slash.\");var s=this._query.path.child(at.fromString(a));if(!ct.isDocumentKey(s))throw new E(_.INVALID_ARGUMENT,\"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to \"+t+\"() must result in a valid document path, but '\"+s+\"' is not because it contains an odd number of segments.\");var u=new ct(s);i.push(new An(this.firestore._databaseId,u))}else{var c=this.firestore._dataConverter.parseQueryValue(t,a);i.push(c)}}return new Xr(i,n)},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];x(\"Query.onSnapshot\",arguments,1,4);var n,r={},i=0;return\"object\"!=typeof t[i]||Yi(t[i])||(B(\"Query.onSnapshot\",r=t[i],[\"includeMetadataChanges\"]),j(\"Query.onSnapshot\",\"boolean\",\"includeMetadataChanges\",r.includeMetadataChanges),i++),Yi(t[i])?n=t[i]:(R(\"Query.onSnapshot\",\"function\",i,t[i]),P(\"Query.onSnapshot\",\"function\",i+1,t[i+1]),P(\"Query.onSnapshot\",\"function\",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(r,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error(\"Uncaught Error in onSnapshot:\",t)};e.error&&(r=e.error.bind(e));var i=new Vi({next:function(t){e.next&&e.next(new xo(n.firestore,n._query,t))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,t);return function(){i.mute(),o.unlisten(a)}},t.prototype.get=function(t){var e=this;return x(\"Query.get\",arguments,0,1),jo(\"Query.get\",t),new Promise(function(n,r){t&&\"cache\"===t.source?e.firestore.ensureClientConfigured().getDocumentsFromLocalCache(e._query).then(function(t){n(new xo(e.firestore,e._query,t))},r):e.getViaSnapshotListener(n,r,t)})},t.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&\"server\"===n.source?e(new E(_.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to \"server\" to retrieve the cached documents.)')):t(i)},error:e})},t.prototype.validateNewFilter=function(t){if(t instanceof Qr){var e=[Hr.ARRAY_CONTAINS,Hr.ARRAY_CONTAINS_ANY],n=[Hr.IN,Hr.ARRAY_CONTAINS_ANY],r=e.indexOf(t.op)>=0,i=n.indexOf(t.op)>=0;if(t.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(t.field))throw new E(_.INVALID_ARGUMENT,\"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '\"+o.toString()+\"' and '\"+t.field.toString()+\"'\");var a=this._query.getFirstOrderByField();null!==a&&this.validateOrderByAndInequalityMatch(t.field,a)}else if(i||r){var s=null;if(i&&(s=this._query.findRelationOpFilter(n)),null===s&&r&&(s=this._query.findRelationOpFilter(e)),null!=s)throw new E(_.INVALID_ARGUMENT,s===t.op?\"Invalid query. You cannot use more than one '\"+t.op.toString()+\"' filter.\":\"Invalid query. You cannot use '\"+t.op.toString()+\"' filters with '\"+s.toString()+\"' filters.\")}}},t.prototype.validateNewOrderBy=function(t){if(null===this._query.getFirstOrderByField()){var e=this._query.getInequalityFilterField();null!==e&&this.validateOrderByAndInequalityMatch(e,t.field)}},t.prototype.validateOrderByAndInequalityMatch=function(t,e){if(!e.isEqual(t))throw new E(_.INVALID_ARGUMENT,\"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '\"+t.toString()+\"' and so you must also use '\"+t.toString()+\"' as your first Query.orderBy(), but your first Query.orderBy() is on field '\"+e.toString()+\"' instead.\")},t}(),xo=function(){function t(t,e,n){this._firestore=t,this._originalQuery=e,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new Oo(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,\"docs\",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"empty\",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"size\",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;x(\"QuerySnapshot.forEach\",arguments,1,2),R(\"QuerySnapshot.forEach\",\"function\",1,t),this._snapshot.docs.forEach(function(r){t.call(e,n.convertToDocumentImpl(r))})},Object.defineProperty(t.prototype,\"query\",{get:function(){return new Do(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),t.prototype.docChanges=function(t){t&&(B(\"QuerySnapshot.docChanges\",t,[\"includeMetadataChanges\"]),j(\"QuerySnapshot.docChanges\",\"boolean\",\"includeMetadataChanges\",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this._snapshot.excludesMetadataChanges)throw new E(_.INVALID_ARGUMENT,\"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().\");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e,n){if(n.oldDocs.isEmpty()){var r,i=0;return n.docChanges.map(function(e){var o=new Ao(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key));return g(e.type===Ir.Added,\"Invalid event type for first snapshot\"),g(!r||n.query.docComparator(r,e.doc)<0,\"Got added events in wrong order\"),r=e.doc,{type:\"added\",doc:o,oldIndex:-1,newIndex:i++}})}var o=n.oldDocs;return n.docChanges.filter(function(t){return e||t.type!==Ir.Metadata}).map(function(e){var r=new Ao(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key)),i=-1,a=-1;return e.type!==Ir.Added&&(g((i=o.indexOf(e.doc.key))>=0,\"Index for document not found\"),o=o.delete(e.doc.key)),e.type!==Ir.Removed&&(a=(o=o.add(e.doc)).indexOf(e.doc.key)),{type:Fo(e.type),doc:r,oldIndex:i,newIndex:a}})}(this._firestore,e,this._snapshot),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t.prototype.isEqual=function(e){if(!(e instanceof t))throw W(\"isEqual\",\"QuerySnapshot\",1,e);return this._firestore===e._firestore&&this._originalQuery.isEqual(e._originalQuery)&&this._snapshot.isEqual(e._snapshot)},t.prototype.convertToDocumentImpl=function(t){return new Ao(this._firestore,t.key,t,this.metadata.fromCache,this._snapshot.mutatedKeys.has(t.key))},t}();[\"length\",\"forEach\",\"map\"].concat(\"undefined\"!=typeof Symbol?[Symbol.iterator]:[]).forEach(function(t){try{Object.defineProperty(xo.prototype.docChanges,t,{get:function(){return function(){throw new E(_.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like \"querySnapshot.docChanges\" should become \"querySnapshot.docChanges()\"')}()}})}catch(e){}});var Ro=function(t){function e(e,n){var r=t.call(this,Wr.atPath(e),n)||this;if(e.length%2!=1)throw new E(_.INVALID_ARGUMENT,\"Invalid collection reference. Collection references must have an odd number of segments, but \"+e.canonicalString()+\" has \"+e.length);return r}return a.__extends(e,t),Object.defineProperty(e.prototype,\"id\",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"parent\",{get:function(){var t=this._query.path.popLast();return t.isEmpty()?null:new ko(new ct(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"path\",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.doc=function(t){if(x(\"CollectionReference.doc\",arguments,0,1),0===arguments.length&&(t=Q.newId()),R(\"CollectionReference.doc\",\"non-empty string\",1,t),\"\"===t)throw new E(_.INVALID_ARGUMENT,\"Document path must be a non-empty string\");var e=at.fromString(t);return ko.forPath(this._query.path.child(e),this.firestore)},e.prototype.add=function(t){A(\"CollectionReference.add\",arguments,1),R(\"CollectionReference.add\",\"object\",1,t);var e=this.doc();return e.set(t).then(function(){return e})},e}(Do);function Po(t,e){if(void 0===e)return{merge:!1};if(B(t,e,[\"merge\",\"mergeFields\"]),j(t,\"boolean\",\"merge\",e.merge),\"mergeFields\",\"a string or a FieldPath\",void 0!==(n=e.mergeFields)&&function(t,e,n,r,i){if(!(r instanceof Array))throw new E(_.INVALID_ARGUMENT,\"Function \"+t+\"() requires its mergeFields option to be an array, but it was: \"+U(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new E(_.INVALID_ARGUMENT,\"Function \"+t+\"() requires all mergeFields elements to be a string or a FieldPath, but the value at index \"+o+\" was: \"+U(r[o]))}(t,0,0,n,function(t){return\"string\"==typeof t||t instanceof Bi}),void 0!==e.mergeFields&&void 0!==e.merge)throw new E(_.INVALID_ARGUMENT,\"Invalid options passed to function \"+t+'(): You cannot specify both \"merge\" and \"mergeFields\".');var n;return e}function Mo(t,e){return void 0===e?{}:(B(t,e,[\"serverTimestamps\"]),L(t,0,\"serverTimestamps\",e.serverTimestamps,[\"estimate\",\"previous\",\"none\"]),e)}function jo(t,e){P(t,\"object\",1,e),e&&(B(t,e,[\"source\"]),L(t,0,\"source\",e.source,[\"default\",\"server\",\"cache\"]))}function Lo(t,e,n){if(e instanceof ko){if(e.firestore!==n)throw new E(_.INVALID_ARGUMENT,\"Provided document reference is from a different Firestore instance.\");return e}throw W(t,\"DocumentReference\",1,e)}function Fo(t){switch(t){case Ir.Added:return\"added\";case Ir.Modified:case Ir.Metadata:return\"modified\";case Ir.Removed:return\"removed\";default:return m(\"Unknown change type: \"+t)}}var qo=S(Co,\"Use firebase.firestore() instead.\"),Uo=S(To,\"Use firebase.firestore().runTransaction() instead.\"),Vo=S(Io,\"Use firebase.firestore().batch() instead.\"),Bo=S(ko,\"Use firebase.firestore().doc() instead.\"),Wo=S(No),zo=S(Ao),Ho=S(Do),Qo=S(xo),Ko=S(Ro,\"Use firebase.firestore().collection() instead.\"),Go={Firestore:qo,GeoPoint:Br,Timestamp:_t,Blob:tt,Transaction:Uo,WriteBatch:Vo,DocumentReference:Bo,DocumentSnapshot:Wo,Query:Ho,QueryDocumentSnapshot:zo,QuerySnapshot:Qo,CollectionReference:Ko,FieldPath:Bi,FieldValue:no,setLogLevel:Co.setLogLevel,CACHE_SIZE_UNLIMITED:_o},Yo=function(){function t(){}return t.prototype.addCallback=function(t){},t.prototype.shutdown=function(){},t}(),Xo=function(){function t(){var t=this;this.networkAvailableListener=function(){return t.onNetworkAvailable()},this.networkUnavailableListener=function(){return t.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}return t.prototype.addCallback=function(t){this.callbacks.push(t)},t.prototype.shutdown=function(){window.removeEventListener(\"online\",this.networkAvailableListener),window.removeEventListener(\"offline\",this.networkUnavailableListener)},t.prototype.configureNetworkMonitoring=function(){window.addEventListener(\"online\",this.networkAvailableListener),window.addEventListener(\"offline\",this.networkUnavailableListener)},t.prototype.onNetworkAvailable=function(){p(\"ConnectivityMonitor\",\"Network connectivity changed: AVAILABLE\");for(var t=0,e=this.callbacks;t<e.length;t++)(0,e[t])(0)},t.prototype.onNetworkUnavailable=function(){p(\"ConnectivityMonitor\",\"Network connectivity changed: UNAVAILABLE\");for(var t=0,e=this.callbacks;t<e.length;t++)(0,e[t])(1)},t.isAvailable=function(){return\"undefined\"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Jo=function(){function t(t){this.sendFn=t.sendFn,this.closeFn=t.closeFn}return t.prototype.onOpen=function(t){g(!this.wrappedOnOpen,\"Called onOpen on stream twice!\"),this.wrappedOnOpen=t},t.prototype.onClose=function(t){g(!this.wrappedOnClose,\"Called onClose on stream twice!\"),this.wrappedOnClose=t},t.prototype.onMessage=function(t){g(!this.wrappedOnMessage,\"Called onMessage on stream twice!\"),this.wrappedOnMessage=t},t.prototype.close=function(){this.closeFn()},t.prototype.send=function(t){this.sendFn(t)},t.prototype.callOnOpen=function(){g(void 0!==this.wrappedOnOpen,\"Cannot call onOpen because no callback was set\"),this.wrappedOnOpen()},t.prototype.callOnClose=function(t){g(void 0!==this.wrappedOnClose,\"Cannot call onClose because no callback was set\"),this.wrappedOnClose(t)},t.prototype.callOnMessage=function(t){g(void 0!==this.wrappedOnMessage,\"Cannot call onMessage because no callback was set\"),this.wrappedOnMessage(t)},t}(),Zo=\"Connection\",$o={BatchGetDocuments:\"batchGet\",Commit:\"commit\"},ta=\"gl-js/ fire/\"+c,ea=function(){function t(t){this.databaseId=t.databaseId,this.baseUrl=(t.ssl?\"https\":\"http\")+\"://\"+t.host,this.forceLongPolling=t.forceLongPolling}return t.prototype.modifyHeadersForRequest=function(t,e){if(e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n]);t[\"X-Goog-Api-Client\"]=ta},t.prototype.invokeRPC=function(t,e,n){var r=this,i=this.makeUrl(t);return new Promise(function(o,a){var s=new u.XhrIo;s.listenOnce(u.EventType.COMPLETE,function(){try{switch(s.getLastErrorCode()){case u.ErrorCode.NO_ERROR:var e=s.getResponseJson();p(Zo,\"XHR received:\",JSON.stringify(e)),o(e);break;case u.ErrorCode.TIMEOUT:p(Zo,'RPC \"'+t+'\" timed out'),a(new E(_.DEADLINE_EXCEEDED,\"Request time out\"));break;case u.ErrorCode.HTTP_ERROR:var n=s.getStatus();p(Zo,'RPC \"'+t+'\" failed with status:',n,\"response text:\",s.getResponseText()),n>0?a(new E(function(t){switch(t){case 200:return _.OK;case 400:return _.INVALID_ARGUMENT;case 401:return _.UNAUTHENTICATED;case 403:return _.PERMISSION_DENIED;case 404:return _.NOT_FOUND;case 409:return _.ABORTED;case 416:return _.OUT_OF_RANGE;case 429:return _.RESOURCE_EXHAUSTED;case 499:return _.CANCELLED;case 500:return _.UNKNOWN;case 501:return _.UNIMPLEMENTED;case 503:return _.UNAVAILABLE;case 504:return _.DEADLINE_EXCEEDED;default:return t>=200&&t<300?_.OK:t>=400&&t<500?_.FAILED_PRECONDITION:t>=500&&t<600?_.INTERNAL:_.UNKNOWN}}(n),\"Server responded with status \"+s.getStatusText())):(p(Zo,'RPC \"'+t+'\" failed'),a(new E(_.UNAVAILABLE,\"Connection failed.\")));break;default:m('RPC \"'+t+'\" failed with unanticipated webchannel error '+s.getLastErrorCode()+\": \"+s.getLastError()+\", giving up.\")}}finally{p(Zo,'RPC \"'+t+'\" completed.')}});var c=JSON.stringify(e);p(Zo,\"XHR sending: \",i+\" \"+c);var l={\"Content-Type\":\"text/plain\"};r.modifyHeadersForRequest(l,n),s.send(i,\"POST\",c,l,15)})},t.prototype.invokeStreamingRPC=function(t,e,n){return this.invokeRPC(t,e,n)},t.prototype.openStream=function(t,e){var n=[this.baseUrl,\"/\",\"google.firestore.v1.Firestore\",\"/\",t,\"/channel\"],r=u.createWebChannelTransport(),i={backgroundChannelTest:!0,httpSessionIdParam:\"gsessionid\",initMessageHeaders:{},messageUrlParams:{database:\"projects/\"+this.databaseId.projectId+\"/databases/\"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(i.initMessageHeaders,e),s.isReactNative()||(i.httpHeadersOverwriteParam=\"$httpHeaders\");var o=n.join(\"\");p(Zo,\"Creating WebChannel: \"+o+\" \"+i);var a=r.createWebChannel(o,i),c=!1,l=!1,h=new Jo({sendFn:function(t){l?p(Zo,\"Not sending because WebChannel is closed:\",t):(c||(p(Zo,\"Opening WebChannel transport.\"),a.open(),c=!0),p(Zo,\"WebChannel sending:\",t),a.send(t))},closeFn:function(){return a.close()}}),f=function(t,e){a.listen(t,function(t){try{e(t)}catch(n){setTimeout(function(){throw n},0)}})};return f(u.WebChannel.EventType.OPEN,function(){l||p(Zo,\"WebChannel transport opened.\")}),f(u.WebChannel.EventType.CLOSE,function(){l||(l=!0,p(Zo,\"WebChannel transport closed\"),h.callOnClose())}),f(u.WebChannel.EventType.ERROR,function(t){l||(l=!0,p(Zo,\"WebChannel transport errored:\",t),h.callOnClose(new E(_.UNAVAILABLE,\"The operation could not be completed\")))}),f(u.WebChannel.EventType.MESSAGE,function(t){if(!l){var e=t.data[0];g(!!e,\"Got a webchannel message without data.\");var n=e.error||e[0]&&e[0].error;if(n){p(Zo,\"WebChannel received error:\",n);var r=n.status,i=function(t){var e=_r[r];if(void 0!==e)return Sr(e)}(),o=n.message;void 0===i&&(i=_.INTERNAL,o=\"Unknown error status: \"+r+\" with message \"+n.message),l=!0,h.callOnClose(new E(i,o)),a.close()}else p(Zo,\"WebChannel received:\",e),h.callOnMessage(e)}}),setTimeout(function(){h.callOnOpen()},0),h},t.prototype.makeUrl=function(t){var e=$o[t];g(void 0!==e,\"Unknown REST mapping for: \"+t);var n=[this.baseUrl,\"/\",\"v1\"];return n.push(\"/projects/\"),n.push(this.databaseId.projectId),n.push(\"/databases/\"),n.push(this.databaseId.database),n.push(\"/documents\"),n.push(\":\"),n.push(e),n.join(\"\")},t}();function na(t){t.INTERNAL.registerService(\"firestore\",function(t){return new Co(t)},function(t){g(t&&\"object\"==typeof t,\"shallowCopy() expects object parameter.\");var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}(Go))}b.setPlatform(new(function(){function t(){this.emptyByteString=\"\",this.base64Available=\"undefined\"!=typeof atob}return Object.defineProperty(t.prototype,\"document\",{get:function(){return\"undefined\"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"window\",{get:function(){return\"undefined\"!=typeof window?window:null},enumerable:!0,configurable:!0}),t.prototype.loadConnection=function(t){return Promise.resolve(new ea(t))},t.prototype.newConnectivityMonitor=function(){return Xo.isAvailable()?new Xo:new Yo},t.prototype.newSerializer=function(t){return new di(t,{useProto3Json:!0})},t.prototype.formatJSON=function(t){return JSON.stringify(t)},t.prototype.atob=function(t){return atob(t)},t.prototype.btoa=function(t){return btoa(t)},t}())),na(i),e.registerFirestore=na},\"6ahw\":function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return o});var r=n(\"iLxQ\"),i=n(\"DKTb\"),o={closed:!0,next:function(t){},error:function(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete:function(){}}},\"6blF\":function(t,e,n){\"use strict\";var r=n(\"FFOo\"),i=n(\"L/V9\"),o=n(\"6ahw\"),a=n(\"xTla\"),s=n(\"y3By\"),u=n(\"iLxQ\");n.d(e,\"a\",function(){return c});var c=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var a=this.operator,s=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(s.add(a?a.call(s,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),u.a.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){var e=t.destination;if(t.closed||t.isStopped)return!1;t=e&&e instanceof r.a?e:null}return!0}(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=l(e))(function(e,r){var i;i=n.subscribe(function(e){try{t(e)}catch(n){r(n),i&&i.unsubscribe()}},r,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[a.a]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:Object(s.b)(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=l(t))(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error(\"no Promise impl found\");return t}},\"8g8A\":function(t,e,n){\"use strict\";function r(){return Error.call(this),this.message=\"object unsubscribed\",this.name=\"ObjectUnsubscribedError\",this}n.d(e,\"a\",function(){return i}),r.prototype=Object.create(Error.prototype);var i=r},CS9Q:function(t,e,n){\"use strict\";var r=n(\"mrSG\"),i=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=function(){return Date.now()},t}();n.d(e,\"a\",function(){return o});var o=function(t){function e(n,r){void 0===r&&(r=i.now);var o=t.call(this,n,function(){return e.delegate&&e.delegate!==o?e.delegate.now():r()})||this;return o.actions=[],o.active=!1,o.scheduled=void 0,o}return r.d(e,t),e.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,i):t.prototype.schedule.call(this,n,r,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(i)},CcnG:function(t,e,n){\"use strict\";n.d(e,\"ib\",function(){return Zn}),n.d(e,\"jb\",function(){return $n}),n.d(e,\"kb\",function(){return tr}),n.d(e,\"hb\",function(){return De}),n.d(e,\"g\",function(){return vn}),n.d(e,\"R\",function(){return fn}),n.d(e,\"y\",function(){return hn}),n.d(e,\"T\",function(){return Vt}),n.d(e,\"X\",function(){return Ut}),n.d(e,\"c\",function(){return Ae}),n.d(e,\"C\",function(){return Re}),n.d(e,\"B\",function(){return Pe}),n.d(e,\"b\",function(){return Me}),n.d(e,\"d\",function(){return Oe}),n.d(e,\"e\",function(){return Ne}),n.d(e,\"V\",function(){return Rn}),n.d(e,\"M\",function(){return on}),n.d(e,\"Z\",function(){return sn}),n.d(e,\"u\",function(){return Jn}),n.d(e,\"f\",function(){return er}),n.d(e,\"m\",function(){return le}),n.d(e,\"l\",function(){return Te}),n.d(e,\"G\",function(){return Mt}),n.d(e,\"H\",function(){return Pt}),n.d(e,\"a\",function(){return _}),n.d(e,\"n\",function(){return ge}),n.d(e,\"r\",function(){return me}),n.d(e,\"P\",function(){return M}),n.d(e,\"N\",function(){return jt}),n.d(e,\"S\",function(){return d}),n.d(e,\"U\",function(){return x}),n.d(e,\"q\",function(){return nt}),n.d(e,\"W\",function(){return W}),n.d(e,\"p\",function(){return y}),n.d(e,\"o\",function(){return j}),n.d(e,\"A\",function(){return L}),n.d(e,\"I\",function(){return q}),n.d(e,\"z\",function(){return Je}),n.d(e,\"D\",function(){return xt}),n.d(e,\"E\",function(){return At}),n.d(e,\"F\",function(){return Dt}),n.d(e,\"i\",function(){return ze}),n.d(e,\"j\",function(){return Et}),n.d(e,\"k\",function(){return kt}),n.d(e,\"v\",function(){return It}),n.d(e,\"x\",function(){return Tt}),n.d(e,\"w\",function(){return ve}),n.d(e,\"J\",function(){return _n}),n.d(e,\"K\",function(){return bn}),n.d(e,\"L\",function(){return he}),n.d(e,\"O\",function(){return Sn}),n.d(e,\"h\",function(){return Tn}),n.d(e,\"s\",function(){return Hn}),n.d(e,\"t\",function(){return Qn}),n.d(e,\"Q\",function(){return K}),n.d(e,\"Y\",function(){return Xn}),n.d(e,\"rb\",function(){return Y}),n.d(e,\"cb\",function(){return je}),n.d(e,\"ab\",function(){return vt}),n.d(e,\"bb\",function(){return St}),n.d(e,\"db\",function(){return ue}),n.d(e,\"eb\",function(){return ye}),n.d(e,\"fb\",function(){return Ht}),n.d(e,\"qb\",function(){return C}),n.d(e,\"ub\",function(){return N}),n.d(e,\"Bb\",function(){return A}),n.d(e,\"sb\",function(){return ke}),n.d(e,\"tb\",function(){return Ie}),n.d(e,\"gb\",function(){return Hr}),n.d(e,\"lb\",function(){return hi}),n.d(e,\"mb\",function(){return da}),n.d(e,\"nb\",function(){return gr}),n.d(e,\"ob\",function(){return Mi}),n.d(e,\"pb\",function(){return Qr}),n.d(e,\"vb\",function(){return ni}),n.d(e,\"wb\",function(){return ei}),n.d(e,\"xb\",function(){return no}),n.d(e,\"yb\",function(){return Ei}),n.d(e,\"zb\",function(){return ji}),n.d(e,\"Ab\",function(){return Ji}),n.d(e,\"Cb\",function(){return io}),n.d(e,\"Db\",function(){return so});var r=n(\"mrSG\"),i=n(\"pugT\"),o=n(\"K9Ia\"),a=n(\"6blF\"),s=n(\"p0ib\"),u=n(\"S1nX\");function c(t){for(var e in t)if(t[e]===c)return e;throw Error(\"Could not find renamed property on target object.\")}function l(t,e){for(var n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}var h=c({ngInjectableDef:c}),f=c({ngBaseDef:c});function d(t){return{providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function p(t){return t&&t.hasOwnProperty(h)?t[h]:null}var y=function(){function t(t,e){this._desc=t,this.ngMetadataName=\"InjectionToken\",this.ngInjectableDef=void 0!==e?d({providedIn:e.providedIn||\"root\",factory:e.factory}):void 0}return t.prototype.toString=function(){return\"InjectionToken \"+this._desc},t}(),v=\"__parameters__\",m=\"__prop__metadata__\";function g(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(t){var i=t.apply(void 0,Object(r.i)(e));for(var o in i)this[o]=i[o]}}}function b(t,e,n){var i=g(e);function o(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(this instanceof o)return i.apply(this,e),this;var a=new((t=o).bind.apply(t,Object(r.i)([void 0],e)));return s.annotation=a,s;function s(t,e,n){for(var r=t.hasOwnProperty(v)?t[v]:Object.defineProperty(t,v,{value:[]})[v];r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(a),t}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o}function w(t,e,n,i){var o=g(e);function a(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(this instanceof a)return o.apply(this,e),this;var s=new((t=a).bind.apply(t,Object(r.i)([void 0],e)));return function(t,n){var o=t.constructor,a=o.hasOwnProperty(m)?o[m]:Object.defineProperty(o,m,{value:{}})[m];a[n]=a.hasOwnProperty(n)&&a[n]||[],a[n].unshift(s),i&&i.apply(void 0,Object(r.i)([t,n],e))}}return n&&(a.prototype=Object.create(n.prototype)),a.prototype.ngMetadataName=t,a.annotationCls=a,a}var _=new y(\"AnalyzeForEntryComponents\"),E=\"undefined\"!=typeof window&&window,S=\"undefined\"!=typeof self&&\"undefined\"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,C=\"undefined\"!=typeof global&&global||E||S,T=Promise.resolve(0),I=null;function k(){if(!I){var t=C.Symbol;if(t&&t.iterator)I=t.iterator;else for(var e=Object.getOwnPropertyNames(Map.prototype),n=0;n<e.length;++n){var r=e[n];\"entries\"!==r&&\"size\"!==r&&Map.prototype[r]===Map.prototype.entries&&(I=r)}}return I}function O(t){\"undefined\"==typeof Zone?T.then(function(){t&&t.apply(null,null)}):Zone.current.scheduleMicroTask(\"scheduleMicrotask\",t)}function N(t,e){return t===e||\"number\"==typeof t&&\"number\"==typeof e&&isNaN(t)&&isNaN(e)}function A(t){if(\"string\"==typeof t)return t;if(t instanceof Array)return\"[\"+t.map(A).join(\", \")+\"]\";if(null==t)return\"\"+t;if(t.overriddenName)return\"\"+t.overriddenName;if(t.name)return\"\"+t.name;var e=t.toString();if(null==e)return\"\"+e;var n=e.indexOf(\"\\n\");return-1===n?e:e.substring(0,n)}var D=c({__forward_ref__:c});function x(t){return t.__forward_ref__=x,t.toString=function(){return A(this())},t}function R(t){var e=t;return\"function\"==typeof e&&e.hasOwnProperty(D)&&e.__forward_ref__===x?e():t}var P,M=function(t){return t[t.Emulated=0]=\"Emulated\",t[t.Native=1]=\"Native\",t[t.None=2]=\"None\",t[t.ShadowDom=3]=\"ShadowDom\",t}({}),j=b(\"Inject\",function(t){return{token:t}}),L=b(\"Optional\"),F=b(\"Self\"),q=b(\"SkipSelf\"),U=function(t){return t[t.Default=0]=\"Default\",t[t.Host=1]=\"Host\",t[t.Self=2]=\"Self\",t[t.SkipSelf=4]=\"SkipSelf\",t[t.Optional=8]=\"Optional\",t}({}),V=void 0;function B(t){var e=V;return V=t,e}function W(t,e){return void 0===e&&(e=U.Default),(P||function(t,e){if(void 0===e&&(e=U.Default),void 0===V)throw new Error(\"inject() must be called from an injection context\");return null===V?function(t,e,n){var r=p(t);if(r&&\"root\"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&U.Optional)return null;throw new Error(\"Injector: NOT_FOUND [\"+A(t)+\"]\")}(t,0,e):V.get(t,e&U.Optional?null:void 0,e)})(t,e)}var z=/([A-Z])/g;function H(t){try{return null!=t?t.toString().slice(0,30):t}catch(e){return\"[ERROR] Exception while trying to serialize the value\"}}function Q(t,e){var n=Y(t),r=Y(e);return n&&r?function(t,e,n){for(var r=t[k()](),i=e[k()]();;){var o=r.next(),a=i.next();if(o.done&&a.done)return!0;if(o.done||a.done)return!1;if(!n(o.value,a.value))return!1}}(t,e,Q):!(n||!t||\"object\"!=typeof t&&\"function\"!=typeof t||r||!e||\"object\"!=typeof e&&\"function\"!=typeof e)||N(t,e)}var K=function(){function t(t){this.wrapped=t}return t.wrap=function(e){return new t(e)},t.unwrap=function(e){return t.isWrapped(e)?e.wrapped:e},t.isWrapped=function(e){return e instanceof t},t}(),G=function(){function t(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}return t.prototype.isFirstChange=function(){return this.firstChange},t}();function Y(t){return!!X(t)&&(Array.isArray(t)||!(t instanceof Map)&&k()in t)}function X(t){return null!==t&&(\"function\"==typeof t||\"object\"==typeof t)}function J(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}var Z=\"__source\",$=new Object,tt=new y(\"INJECTOR\"),et=function(){function t(){}return t.prototype.get=function(t,e){if(void 0===e&&(e=$),e===$)throw new Error(\"NullInjectorError: No provider for \"+A(t)+\"!\");return e},t}(),nt=function(){function t(){}return t.create=function(t,e){return Array.isArray(t)?new ft(t,e):new ft(t.providers,t.parent,t.name||null)},t.THROW_IF_NOT_FOUND=$,t.NULL=new et,t.ngInjectableDef=d({providedIn:\"any\",factory:function(){return W(tt)}}),t.__NG_ELEMENT_ID__=function(){return rt()},t}(),rt=J,it=function(t){return t},ot=[],at=it,st=function(){return Array.prototype.slice.call(arguments)},ut=c({provide:String,useValue:c}),ct=nt.NULL,lt=/\\n/gm,ht=\"\\u0275\",ft=function(){function t(t,e,n){void 0===e&&(e=ct),void 0===n&&(n=null),this.parent=e,this.source=n;var r=this._records=new Map;r.set(nt,{token:nt,fn:it,deps:ot,value:this,useNew:!1}),r.set(tt,{token:tt,fn:it,deps:ot,value:this,useNew:!1}),function t(e,n){if(n)if((n=R(n))instanceof Array)for(var r=0;r<n.length;r++)t(e,n[r]);else{if(\"function\"==typeof n)throw yt(\"Function/Class not supported\",n);if(!n||\"object\"!=typeof n||!n.provide)throw yt(\"Unexpected provider\",n);var i=R(n.provide),o=function(t){var e=function(t){var e=ot,n=t.deps;if(n&&n.length){e=[];for(var r=0;r<n.length;r++){var i=6;if((u=R(n[r]))instanceof Array)for(var o=0,a=u;o<a.length;o++){var s=a[o];s instanceof L||s==L?i|=1:s instanceof q||s==q?i&=-3:s instanceof F||s==F?i&=-5:u=s instanceof j?s.token:R(s)}e.push({token:u,options:i})}}else if(t.useExisting){var u;e=[{token:u=R(t.useExisting),options:6}]}else if(!(n||ut in t))throw yt(\"'deps' required\",t);return e}(t),n=it,r=ot,i=!1,o=R(t.provide);if(ut in t)r=t.useValue;else if(t.useFactory)n=t.useFactory;else if(t.useExisting);else if(t.useClass)i=!0,n=R(t.useClass);else{if(\"function\"!=typeof o)throw yt(\"StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable\",t);i=!0,n=o}return{deps:e,fn:n,useNew:i,value:r}}(n);if(!0===n.multi){var a=e.get(i);if(a){if(a.fn!==st)throw dt(i)}else e.set(i,a={token:n.provide,deps:[],useNew:!1,fn:st,value:ot});a.deps.push({token:i=n,options:6})}var s=e.get(i);if(s&&s.fn==st)throw dt(i);e.set(i,o)}}(r,t)}return t.prototype.get=function(t,e,n){void 0===n&&(n=U.Default);var i=this._records.get(t);try{return function t(e,n,i,o,a,s){try{return function(e,n,i,o,a,s){var u,c;if(!n||s&U.SkipSelf)s&U.Self||(c=o.get(e,a,U.Default));else{if((c=n.value)==at)throw Error(ht+\"Circular dependency\");if(c===ot){n.value=at;var l=n.useNew,h=n.fn,f=n.deps,d=ot;if(f.length){d=[];for(var p=0;p<f.length;p++){var y=f[p],v=y.options,m=2&v?i.get(y.token):void 0;d.push(t(y.token,m,i,m||4&v?o:ct,1&v?null:nt.THROW_IF_NOT_FOUND,U.Default))}}n.value=c=l?new((u=h).bind.apply(u,Object(r.i)([void 0],d))):h.apply(void 0,d)}}return c}(e,n,i,o,a,s)}catch(u){throw u instanceof Error||(u=new Error(u)),(u.ngTempTokenPath=u.ngTempTokenPath||[]).unshift(e),n&&n.value==at&&(n.value=ot),u}}(t,i,this._records,this.parent,e,n)}catch(a){var o=a.ngTempTokenPath;throw t[Z]&&o.unshift(t[Z]),a.message=pt(\"\\n\"+a.message,o,this.source),a.ngTokenPath=o,a.ngTempTokenPath=null,a}},t.prototype.toString=function(){var t=[];return this._records.forEach(function(e,n){return t.push(A(n))}),\"StaticInjector[\"+t.join(\", \")+\"]\"},t}();function dt(t){return yt(\"Cannot mix multi providers and regular providers\",t)}function pt(t,e,n){void 0===n&&(n=null),t=t&&\"\\n\"===t.charAt(0)&&t.charAt(1)==ht?t.substr(2):t;var r=A(e);if(e instanceof Array)r=e.map(A).join(\" -> \");else if(\"object\"==typeof e){var i=[];for(var o in e)if(e.hasOwnProperty(o)){var a=e[o];i.push(o+\":\"+(\"string\"==typeof a?JSON.stringify(a):A(a)))}r=\"{\"+i.join(\", \")+\"}\"}return\"StaticInjectorError\"+(n?\"(\"+n+\")\":\"\")+\"[\"+r+\"]: \"+t.replace(lt,\"\\n  \")}function yt(t,e){return new Error(pt(t,e))}var vt=new y(\"The presence of this token marks an injector as being the root injector.\"),mt=function(){return function(){}}(),gt=function(){return function(){}}();function bt(t){var e=Error(\"No component factory found for \"+A(t)+\". Did you add it to @NgModule.entryComponents?\");return e[wt]=t,e}var wt=\"ngComponent\",_t=function(){function t(){}return t.prototype.resolveComponentFactory=function(t){throw bt(t)},t}(),Et=function(){function t(){}return t.NULL=new _t,t}(),St=function(){function t(t,e,n){this._parent=e,this._ngModule=n,this._factories=new Map;for(var r=0;r<t.length;r++){var i=t[r];this._factories.set(i.componentType,i)}}return t.prototype.resolveComponentFactory=function(t){var e=this._factories.get(t);if(!e&&this._parent&&(e=this._parent.resolveComponentFactory(t)),!e)throw bt(t);return new Ct(e,this._ngModule)},t}(),Ct=function(t){function e(e,n){var r=t.call(this)||this;return r.factory=e,r.ngModule=n,r.selector=e.selector,r.componentType=e.componentType,r.ngContentSelectors=e.ngContentSelectors,r.inputs=e.inputs,r.outputs=e.outputs,r}return Object(r.d)(e,t),e.prototype.create=function(t,e,n,r){return this.factory.create(t,e,n,r||this.ngModule)},e}(gt),Tt=function(){return function(){}}(),It=function(){return function(){}}(),kt=function(){function t(t){this.nativeElement=t}return t.__NG_ELEMENT_ID__=function(){return Ot(t)},t}(),Ot=J,Nt=function(){return function(){}}(),At=function(){return function(){}}(),Dt=function(t){return t[t.Important=1]=\"Important\",t[t.DashCase=2]=\"DashCase\",t}({}),xt=function(){function t(){}return t.__NG_ELEMENT_ID__=function(){return Rt()},t}(),Rt=J,Pt=function(t){return t[t.NONE=0]=\"NONE\",t[t.HTML=1]=\"HTML\",t[t.STYLE=2]=\"STYLE\",t[t.SCRIPT=3]=\"SCRIPT\",t[t.URL=4]=\"URL\",t[t.RESOURCE_URL=5]=\"RESOURCE_URL\",t}({}),Mt=function(){return function(){}}(),jt=function(){return function(t){this.full=t,this.major=t.split(\".\")[0],this.minor=t.split(\".\")[1],this.patch=t.split(\".\").slice(2).join(\".\")}}(),Lt=new jt(\"7.2.15\"),Ft=!0,qt=!1;function Ut(){return qt=!0,Ft}function Vt(){if(qt)throw new Error(\"Cannot enable prod mode after platform setup.\");Ft=!1}var Bt=function(){function t(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument(\"sanitization-inert\"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){var e=this.inertDocument.createElement(\"html\");this.inertDocument.appendChild(e),this.inertBodyElement=this.inertDocument.createElement(\"body\"),e.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload=\"this.parentNode.remove()\"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector(\"svg\")?(this.inertBodyElement.innerHTML='<svg><p><style><img src=\"</style><img src=x onerror=alert(1)//\">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector(\"svg img\")&&function(){try{return!!window.DOMParser}catch(t){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}return t.prototype.getInertBodyElement_XHR=function(t){t=\"<body><remove></remove>\"+t+\"</body>\";try{t=encodeURI(t)}catch(r){return null}var e=new XMLHttpRequest;e.responseType=\"document\",e.open(\"GET\",\"data:text/html;charset=utf-8,\"+t,!1),e.send(void 0);var n=e.response.body;return n.removeChild(n.firstChild),n},t.prototype.getInertBodyElement_DOMParser=function(t){t=\"<body><remove></remove>\"+t+\"</body>\";try{var e=(new window.DOMParser).parseFromString(t,\"text/html\").body;return e.removeChild(e.firstChild),e}catch(n){return null}},t.prototype.getInertBodyElement_InertDocument=function(t){var e=this.inertDocument.createElement(\"template\");return\"content\"in e?(e.innerHTML=t,e):(this.inertBodyElement.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)},t.prototype.stripCustomNsAttrs=function(t){for(var e=t.attributes,n=e.length-1;0<n;n--){var r=e.item(n).name;\"xmlns:ns1\"!==r&&0!==r.indexOf(\"ns1:\")||t.removeAttribute(r)}for(var i=t.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling},t}(),Wt=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:\\/?#]*(?:[\\/?#]|$))/gi,zt=/^data:(?:image\\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\\/(?:mpeg|mp4|ogg|webm)|audio\\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\\/]+=*$/i;function Ht(t){return(t=String(t)).match(Wt)||t.match(zt)?t:(Ut()&&console.warn(\"WARNING: sanitizing unsafe URL value \"+t+\" (see http://g.co/ng/security#xss)\"),\"unsafe:\"+t)}function Qt(t){var e,n,i={};try{for(var o=Object(r.j)(t.split(\",\")),a=o.next();!a.done;a=o.next())i[a.value]=!0}catch(s){e={error:s}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i}function Kt(){for(var t,e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o={};try{for(var a=Object(r.j)(n),s=a.next();!s.done;s=a.next()){var u=s.value;for(var c in u)u.hasOwnProperty(c)&&(o[c]=!0)}}catch(l){t={error:l}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return o}var Gt,Yt=Qt(\"area,br,col,hr,img,wbr\"),Xt=Qt(\"colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr\"),Jt=Qt(\"rp,rt\"),Zt=Kt(Jt,Xt),$t=Kt(Yt,Kt(Xt,Qt(\"address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul\")),Kt(Jt,Qt(\"a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video\")),Zt),te=Qt(\"background,cite,href,itemtype,longdesc,poster,src,xlink:href\"),ee=Qt(\"srcset\"),ne=Kt(te,ee,Qt(\"abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width\")),re=Qt(\"script,style,template\"),ie=function(){function t(){this.sanitizedSomething=!1,this.buf=[]}return t.prototype.sanitizeChildren=function(t){for(var e=t.firstChild,n=!0;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);var r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join(\"\")},t.prototype.startElement=function(t){var e,n=t.nodeName.toLowerCase();if(!$t.hasOwnProperty(n))return this.sanitizedSomething=!0,!re.hasOwnProperty(n);this.buf.push(\"<\"),this.buf.push(n);for(var r=t.attributes,i=0;i<r.length;i++){var o=r.item(i),a=o.name,s=a.toLowerCase();if(ne.hasOwnProperty(s)){var u=o.value;te[s]&&(u=Ht(u)),ee[s]&&(e=u,u=(e=String(e)).split(\",\").map(function(t){return Ht(t.trim())}).join(\", \")),this.buf.push(\" \",a,'=\"',se(u),'\"')}else this.sanitizedSomething=!0}return this.buf.push(\">\"),!0},t.prototype.endElement=function(t){var e=t.nodeName.toLowerCase();$t.hasOwnProperty(e)&&!Yt.hasOwnProperty(e)&&(this.buf.push(\"</\"),this.buf.push(e),this.buf.push(\">\"))},t.prototype.chars=function(t){this.buf.push(se(t))},t.prototype.checkClobberedElement=function(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(\"Failed to sanitize html because the element is clobbered: \"+t.outerHTML);return e},t}(),oe=/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g,ae=/([^\\#-~ |!])/g;function se(t){return t.replace(/&/g,\"&amp;\").replace(oe,function(t){return\"&#\"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+\";\"}).replace(ae,function(t){return\"&#\"+t.charCodeAt(0)+\";\"}).replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\")}function ue(t,e){var n=null;try{Gt=Gt||new Bt(t);var r=e?String(e):\"\";n=Gt.getInertBodyElement(r);var i=5,o=r;do{if(0===i)throw new Error(\"Failed to sanitize html because the input is unstable\");i--,r=o,o=n.innerHTML,n=Gt.getInertBodyElement(r)}while(r!==o);var a=new ie,s=a.sanitizeChildren(ce(n)||n);return Ut()&&a.sanitizedSomething&&console.warn(\"WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss\"),s}finally{if(n)for(var u=ce(n)||n;u.firstChild;)u.removeChild(u.firstChild)}}function ce(t){return\"content\"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&\"TEMPLATE\"===t.nodeName}(t)?t.content:null}var le=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this)||this;return n.__isAsync=e,n}return Object(r.d)(e,t),e.prototype.emit=function(e){t.prototype.next.call(this,e)},e.prototype.subscribe=function(e,n,r){var o,a=function(t){return null},s=function(){return null};e&&\"object\"==typeof e?(o=this.__isAsync?function(t){setTimeout(function(){return e.next(t)})}:function(t){e.next(t)},e.error&&(a=this.__isAsync?function(t){setTimeout(function(){return e.error(t)})}:function(t){e.error(t)}),e.complete&&(s=this.__isAsync?function(){setTimeout(function(){return e.complete()})}:function(){e.complete()})):(o=this.__isAsync?function(t){setTimeout(function(){return e(t)})}:function(t){e(t)},n&&(a=this.__isAsync?function(t){setTimeout(function(){return n(t)})}:function(t){n(t)}),r&&(s=this.__isAsync?function(){setTimeout(function(){return r()})}:function(){r()}));var u=t.prototype.subscribe.call(this,o,a,s);return e instanceof i.a&&e.add(u),u},e}(o.a),he=function(){function t(){}return t.__NG_ELEMENT_ID__=function(){return fe(t,kt)},t}(),fe=J,de=new RegExp(\"^([-,.\\\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\\\([-0-9.%, #a-zA-Z]+\\\\))$\",\"g\"),pe=/^url\\(([^)]+)\\)$/;function ye(t){if(!(t=String(t).trim()))return\"\";var e=t.match(pe);return e&&Ht(e[1])===e[1]||t.match(de)&&function(t){for(var e=!0,n=!0,r=0;r<t.length;r++){var i=t.charAt(r);\"'\"===i&&n?e=!e:'\"'===i&&e&&(n=!n)}return e&&n}(t)?t:(Ut()&&console.warn(\"WARNING: sanitizing unsafe style value \"+t+\" (see http://g.co/ng/security#xss).\"),\"unsafe\")}var ve=function(){return function(){}}(),me=w(\"Input\",function(t){return{bindingPropertyName:t}},void 0,function(t){return function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=t.constructor;i.hasOwnProperty(f)||function(t){var e=t.constructor,n=e.ngBaseDef,r=e.ngBaseDef={inputs:{},outputs:{},declaredInputs:{}};n&&(l(r.inputs,n.inputs),l(r.outputs,n.outputs),l(r.declaredInputs,n.declaredInputs))}(t),(function(t){return t.inputs||{}}(i.ngBaseDef))[e]=n[0]}}()),ge=w(\"HostBinding\",function(t){return{hostPropertyName:t}}),be=\"ngDebugContext\",we=\"ngOriginalError\",_e=\"ngErrorLogger\";function Ee(t){return t[be]}function Se(t){return t[we]}function Ce(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t.error.apply(t,Object(r.i)(e))}var Te=function(){function t(){this._console=console}return t.prototype.handleError=function(t){var e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t[_e]||Ce}(t);r(this._console,\"ERROR\",t),e&&r(this._console,\"ORIGINAL ERROR\",e),n&&r(this._console,\"ERROR CONTEXT\",n)},t.prototype._findContext=function(t){return t?Ee(t)?Ee(t):this._findContext(Se(t)):null},t.prototype._findOriginalError=function(t){for(var e=Se(t);e&&Se(e);)e=Se(e);return e},t}();function Ie(t){return!!t&&\"function\"==typeof t.then}function ke(t){return!!t&&\"function\"==typeof t.subscribe}var Oe=new y(\"Application Initializer\"),Ne=function(){function t(t){var e=this;this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return t.prototype.runInitializers=function(){var t=this;if(!this.initialized){var e=[],n=function(){t.done=!0,t.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var i=this.appInits[r]();Ie(i)&&e.push(i)}Promise.all(e).then(function(){n()}).catch(function(e){t.reject(e)}),0===e.length&&n(),this.initialized=!0}},t}(),Ae=new y(\"AppId\");function De(){return\"\"+xe()+xe()+xe()}function xe(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var Re=new y(\"Platform Initializer\"),Pe=new y(\"Platform ID\"),Me=new y(\"appBootstrapListener\"),je=function(){function t(){}return t.prototype.log=function(t){console.log(t)},t.prototype.warn=function(t){console.warn(t)},t}();function Le(){throw new Error(\"Runtime compiler is not loaded\")}var Fe,qe,Ue=Le,Ve=Le,Be=Le,We=Le,ze=function(){function t(){this.compileModuleSync=Ue,this.compileModuleAsync=Ve,this.compileModuleAndAllComponentsSync=Be,this.compileModuleAndAllComponentsAsync=We}return t.prototype.clearCache=function(){},t.prototype.clearCacheFor=function(t){},t.prototype.getModuleId=function(t){},t}(),He=function(){return function(){}}();function Qe(){var t=C.wtf;return!(!t||!(Fe=t.trace)||(qe=Fe.events,0))}var Ke=Qe();function Ge(t,e){return null}var Ye=Ke?function(t,e){return void 0===e&&(e=null),qe.createScope(t,e)}:function(t,e){return Ge},Xe=Ke?function(t,e){return Fe.leaveScope(t,e),e}:function(t,e){return e},Je=function(){function t(t){var e,n=t.enableLongStackTrace,r=void 0!==n&&n;if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new le(!1),this.onMicrotaskEmpty=new le(!1),this.onStable=new le(!1),this.onError=new le(!1),\"undefined\"==typeof Zone)throw new Error(\"In this configuration Angular requires Zone.js\");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(e=this)._inner=e._inner.fork({name:\"angular\",properties:{isAngularZone:!0},onInvokeTask:function(t,n,r,i,o,a){try{return en(e),t.invokeTask(r,i,o,a)}finally{nn(e)}},onInvoke:function(t,n,r,i,o,a,s){try{return en(e),t.invoke(r,i,o,a,s)}finally{nn(e)}},onHasTask:function(t,n,r,i){t.hasTask(r,i),n===r&&(\"microTask\"==i.change?(e.hasPendingMicrotasks=i.microTask,tn(e)):\"macroTask\"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:function(t,n,r,i){return t.handleError(r,i),e.runOutsideAngular(function(){return e.onError.emit(i)}),!1}})}return t.isInAngularZone=function(){return!0===Zone.current.get(\"isAngularZone\")},t.assertInAngularZone=function(){if(!t.isInAngularZone())throw new Error(\"Expected to be in Angular Zone, but it is not!\")},t.assertNotInAngularZone=function(){if(t.isInAngularZone())throw new Error(\"Expected to not be in Angular Zone, but it is!\")},t.prototype.run=function(t,e,n){return this._inner.run(t,e,n)},t.prototype.runTask=function(t,e,n,r){var i=this._inner,o=i.scheduleEventTask(\"NgZoneEvent: \"+r,t,$e,Ze,Ze);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}},t.prototype.runGuarded=function(t,e,n){return this._inner.runGuarded(t,e,n)},t.prototype.runOutsideAngular=function(t){return this._outer.run(t)},t}();function Ze(){}var $e={};function tn(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(function(){return t.onStable.emit(null)})}finally{t.isStable=!0}}}function en(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function nn(t){t._nesting--,tn(t)}var rn=function(){function t(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new le,this.onMicrotaskEmpty=new le,this.onStable=new le,this.onError=new le}return t.prototype.run=function(t){return t()},t.prototype.runGuarded=function(t){return t()},t.prototype.runOutsideAngular=function(t){return t()},t.prototype.runTask=function(t){return t()},t}(),on=function(){function t(t){var e=this;this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(function(){e.taskTrackingZone=\"undefined\"==typeof Zone?null:Zone.current.get(\"TaskTrackingZone\")})}return t.prototype._watchAngularEvents=function(){var t=this;this._ngZone.onUnstable.subscribe({next:function(){t._didWork=!0,t._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){t._ngZone.onStable.subscribe({next:function(){Je.assertNotInAngularZone(),O(function(){t._isZoneStable=!0,t._runCallbacksIfReady()})}})})},t.prototype.increasePendingRequestCount=function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount},t.prototype.decreasePendingRequestCount=function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error(\"pending async requests below zero\");return this._runCallbacksIfReady(),this._pendingCount},t.prototype.isStable=function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks},t.prototype._runCallbacksIfReady=function(){var t=this;if(this.isStable())O(function(){for(;0!==t._callbacks.length;){var e=t._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(t._didWork)}t._didWork=!1});else{var e=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(t){return!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)}),this._didWork=!0}},t.prototype.getPendingTasks=function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(t){return{source:t.source,creationLocation:t.creationLocation,data:t.data}}):[]},t.prototype.addCallback=function(t,e,n){var r=this,i=-1;e&&e>0&&(i=setTimeout(function(){r._callbacks=r._callbacks.filter(function(t){return t.timeoutId!==i}),t(r._didWork,r.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:n})},t.prototype.whenStable=function(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is \"zone.js/dist/task-tracking.js\" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()},t.prototype.getPendingRequestCount=function(){return this._pendingCount},t.prototype.findProviders=function(t,e,n){return[]},t}(),an=function(){function t(){this._applications=new Map,cn.addToWindow(this)}return t.prototype.registerApplication=function(t,e){this._applications.set(t,e)},t.prototype.unregisterApplication=function(t){this._applications.delete(t)},t.prototype.unregisterAllApplications=function(){this._applications.clear()},t.prototype.getTestability=function(t){return this._applications.get(t)||null},t.prototype.getAllTestabilities=function(){return Array.from(this._applications.values())},t.prototype.getAllRootElements=function(){return Array.from(this._applications.keys())},t.prototype.findTestabilityInTree=function(t,e){return void 0===e&&(e=!0),cn.findTestabilityInTree(this,t,e)},Object(r.c)([Object(r.f)(\"design:paramtypes\",[])],t)}();function sn(t){cn=t}var un,cn=new(function(){function t(){}return t.prototype.addToWindow=function(t){},t.prototype.findTestabilityInTree=function(t,e,n){return null},t}()),ln=new y(\"AllowMultipleToken\"),hn=function(){return function(t,e){this.name=t,this.token=e}}();function fn(t,e,n){void 0===n&&(n=[]);var r=\"Platform: \"+e,i=new y(r);return function(e){void 0===e&&(e=[]);var o=dn();if(!o||o.injector.get(ln,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{var a=n.concat(e).concat({provide:i,useValue:!0});!function(t){if(un&&!un.destroyed&&!un.injector.get(ln,!1))throw new Error(\"There can be only one platform. Destroy the previous one to create a new one.\");un=t.get(pn);var e=t.get(Re,null);e&&e.forEach(function(t){return t()})}(nt.create({providers:a,name:r}))}return function(t){var e=dn();if(!e)throw new Error(\"No platform exists!\");if(!e.injector.get(t,null))throw new Error(\"A platform with a different configuration has been created. Please destroy it first.\");return e}(i)}}function dn(){return un&&!un.destroyed?un:null}var pn=function(){function t(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return t.prototype.bootstrapModuleFactory=function(t,e){var n,r=this,i=\"noop\"===(n=e?e.ngZone:void 0)?new rn:(\"zone.js\"===n?void 0:n)||new Je({enableLongStackTrace:Ut()}),o=[{provide:Je,useValue:i}];return i.run(function(){var e=nt.create({providers:o,parent:r.injector,name:t.moduleType.name}),n=t.create(e),a=n.injector.get(Te,null);if(!a)throw new Error(\"No ErrorHandler. Is platform module (BrowserModule) included?\");return n.onDestroy(function(){return mn(r._modules,n)}),i.runOutsideAngular(function(){return i.onError.subscribe({next:function(t){a.handleError(t)}})}),function(t,e,i){try{var o=((a=n.injector.get(Ne)).runInitializers(),a.donePromise.then(function(){return r._moduleDoBootstrap(n),n}));return Ie(o)?o.catch(function(n){throw e.runOutsideAngular(function(){return t.handleError(n)}),n}):o}catch(s){throw e.runOutsideAngular(function(){return t.handleError(s)}),s}var a}(a,i)})},t.prototype.bootstrapModule=function(t,e){var n=this;void 0===e&&(e=[]);var r=yn({},e);return function(t,e,n){return t.get(He).createCompiler([e]).compileModuleAsync(n)}(this.injector,r,t).then(function(t){return n.bootstrapModuleFactory(t,r)})},t.prototype._moduleDoBootstrap=function(t){var e=t.injector.get(vn);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(function(t){return e.bootstrap(t)});else{if(!t.instance.ngDoBootstrap)throw new Error(\"The module \"+A(t.instance.constructor)+' was bootstrapped, but it does not declare \"@NgModule.bootstrap\" components nor a \"ngDoBootstrap\" method. Please define one of these.');t.instance.ngDoBootstrap(e)}this._modules.push(t)},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},Object.defineProperty(t.prototype,\"injector\",{get:function(){return this._injector},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error(\"The platform has already been destroyed!\");this._modules.slice().forEach(function(t){return t.destroy()}),this._destroyListeners.forEach(function(t){return t()}),this._destroyed=!0},Object.defineProperty(t.prototype,\"destroyed\",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),t}();function yn(t,e){return Array.isArray(e)?e.reduce(yn,t):Object(r.a)({},t,e)}var vn=function(){function t(t,e,n,r,i,o){var c=this;this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Ut(),this._zone.onMicrotaskEmpty.subscribe({next:function(){c._zone.run(function(){c.tick()})}});var l=new a.a(function(t){c._stable=c._zone.isStable&&!c._zone.hasPendingMacrotasks&&!c._zone.hasPendingMicrotasks,c._zone.runOutsideAngular(function(){t.next(c._stable),t.complete()})}),h=new a.a(function(t){var e;c._zone.runOutsideAngular(function(){e=c._zone.onStable.subscribe(function(){Je.assertNotInAngularZone(),O(function(){c._stable||c._zone.hasPendingMacrotasks||c._zone.hasPendingMicrotasks||(c._stable=!0,t.next(!0))})})});var n=c._zone.onUnstable.subscribe(function(){Je.assertInAngularZone(),c._stable&&(c._stable=!1,c._zone.runOutsideAngular(function(){t.next(!1)}))});return function(){e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(l,h.pipe(Object(u.a)()))}var e;return e=t,t.prototype.bootstrap=function(t,e){var n,r=this;if(!this._initStatus.done)throw new Error(\"Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.\");n=t instanceof gt?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);var i=n instanceof Ct?null:this._injector.get(Tt),o=n.create(nt.NULL,[],e||n.selector,i);o.onDestroy(function(){r._unloadComponent(o)});var a=o.injector.get(on,null);return a&&o.injector.get(an).registerApplication(o.location.nativeElement,a),this._loadComponent(o),Ut()&&this._console.log(\"Angular is running in the development mode. Call enableProdMode() to enable the production mode.\"),o},t.prototype.tick=function(){var t=this;if(this._runningTick)throw new Error(\"ApplicationRef.tick is called recursively\");var n=e._tickScope();try{this._runningTick=!0,this._views.forEach(function(t){return t.detectChanges()}),this._enforceNoNewChanges&&this._views.forEach(function(t){return t.checkNoChanges()})}catch(r){this._zone.runOutsideAngular(function(){return t._exceptionHandler.handleError(r)})}finally{this._runningTick=!1,Xe(n)}},t.prototype.attachView=function(t){var e=t;this._views.push(e),e.attachToAppRef(this)},t.prototype.detachView=function(t){var e=t;mn(this._views,e),e.detachFromAppRef()},t.prototype._loadComponent=function(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Me,[]).concat(this._bootstrapListeners).forEach(function(e){return e(t)})},t.prototype._unloadComponent=function(t){this.detachView(t.hostView),mn(this.components,t)},t.prototype.ngOnDestroy=function(){this._views.slice().forEach(function(t){return t.destroy()})},Object.defineProperty(t.prototype,\"viewCount\",{get:function(){return this._views.length},enumerable:!0,configurable:!0}),t._tickScope=Ye(\"ApplicationRef#tick()\"),t}();function mn(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var gn=function(){function t(){this.dirty=!0,this._results=[],this.changes=new le,this.length=0}return t.prototype.map=function(t){return this._results.map(t)},t.prototype.filter=function(t){return this._results.filter(t)},t.prototype.find=function(t){return this._results.find(t)},t.prototype.reduce=function(t,e){return this._results.reduce(t,e)},t.prototype.forEach=function(t){this._results.forEach(t)},t.prototype.some=function(t){return this._results.some(t)},t.prototype.toArray=function(){return this._results.slice()},t.prototype[k()]=function(){return this._results[k()]()},t.prototype.toString=function(){return this._results.toString()},t.prototype.reset=function(t){this._results=function t(e){return e.reduce(function(e,n){var r=Array.isArray(n)?t(n):n;return e.concat(r)},[])}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]},t.prototype.notifyOnChanges=function(){this.changes.emit(this)},t.prototype.setDirty=function(){this.dirty=!0},t.prototype.destroy=function(){this.changes.complete(),this.changes.unsubscribe()},t}(),bn=function(){return function(){}}(),wn={factoryPathPrefix:\"\",factoryPathSuffix:\".ngfactory\"},_n=function(){function t(t,e){this._compiler=t,this._config=e||wn}return t.prototype.load=function(t){return this._compiler instanceof ze?this.loadFactory(t):this.loadAndCompile(t)},t.prototype.loadAndCompile=function(t){var e=this,i=Object(r.h)(t.split(\"#\"),2),o=i[0],a=i[1];return void 0===a&&(a=\"default\"),n(\"crnd\")(o).then(function(t){return t[a]}).then(function(t){return En(t,o,a)}).then(function(t){return e._compiler.compileModuleAsync(t)})},t.prototype.loadFactory=function(t){var e=Object(r.h)(t.split(\"#\"),2),i=e[0],o=e[1],a=\"NgFactory\";return void 0===o&&(o=\"default\",a=\"\"),n(\"crnd\")(this._config.factoryPathPrefix+i+this._config.factoryPathSuffix).then(function(t){return t[o+a]}).then(function(t){return En(t,i,o)})},t}();function En(t,e,n){if(!t)throw new Error(\"Cannot find '\"+n+\"' in '\"+e+\"'\");return t}var Sn=function(){function t(){}return t.__NG_ELEMENT_ID__=function(){return Cn(t,kt)},t}(),Cn=J,Tn=function(){function t(){}return t.__NG_ELEMENT_ID__=function(){return In()},t}(),In=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},kn=function(){return function(t,e){this.name=t,this.callback=e}}(),On=function(){function t(t,e,n){this.listeners=[],this.parent=null,this._debugContext=n,this.nativeNode=t,e&&e instanceof Nn&&e.addChild(this)}return Object.defineProperty(t.prototype,\"injector\",{get:function(){return this._debugContext.injector},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"componentInstance\",{get:function(){return this._debugContext.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"context\",{get:function(){return this._debugContext.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"references\",{get:function(){return this._debugContext.references},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"providerTokens\",{get:function(){return this._debugContext.providerTokens},enumerable:!0,configurable:!0}),t}(),Nn=function(t){function e(e,n,r){var i=t.call(this,e,n,r)||this;return i.properties={},i.attributes={},i.classes={},i.styles={},i.childNodes=[],i.nativeElement=e,i}return Object(r.d)(e,t),e.prototype.addChild=function(t){t&&(this.childNodes.push(t),t.parent=this)},e.prototype.removeChild=function(t){var e=this.childNodes.indexOf(t);-1!==e&&(t.parent=null,this.childNodes.splice(e,1))},e.prototype.insertChildrenAfter=function(t,e){var n,i=this,o=this.childNodes.indexOf(t);-1!==o&&((n=this.childNodes).splice.apply(n,Object(r.i)([o+1,0],e)),e.forEach(function(e){e.parent&&e.parent.removeChild(e),t.parent=i}))},e.prototype.insertBefore=function(t,e){var n=this.childNodes.indexOf(t);-1===n?this.addChild(e):(e.parent&&e.parent.removeChild(e),e.parent=this,this.childNodes.splice(n,0,e))},e.prototype.query=function(t){return this.queryAll(t)[0]||null},e.prototype.queryAll=function(t){var e=[];return An(this,t,e),e},e.prototype.queryAllNodes=function(t){var e=[];return Dn(this,t,e),e},Object.defineProperty(e.prototype,\"children\",{get:function(){return this.childNodes.filter(function(t){return t instanceof e})},enumerable:!0,configurable:!0}),e.prototype.triggerEventHandler=function(t,e){this.listeners.forEach(function(n){n.name==t&&n.callback(e)})},e}(On);function An(t,e,n){t.childNodes.forEach(function(t){t instanceof Nn&&(e(t)&&n.push(t),An(t,e,n))})}function Dn(t,e,n){t instanceof Nn&&t.childNodes.forEach(function(t){e(t)&&n.push(t),t instanceof Nn&&Dn(t,e,n)})}var xn=new Map,Rn=function(t){return xn.get(t)||null};function Pn(t){xn.set(t.nativeNode,t)}var Mn=function(){function t(){}return t.prototype.supports=function(t){return Y(t)},t.prototype.create=function(t){return new Ln(t)},t}(),jn=function(t,e){return e},Ln=function(){function t(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||jn}return t.prototype.forEachItem=function(t){var e;for(e=this._itHead;null!==e;e=e._next)t(e)},t.prototype.forEachOperation=function(t){for(var e=this._itHead,n=this._removalsHead,r=0,i=null;e||n;){var o=!n||e&&e.currentIndex<Vn(n,r,i)?e:n,a=Vn(o,r,i),s=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);var u=a-r,c=s-r;if(u!=c){for(var l=0;l<u;l++){var h=l<i.length?i[l]:i[l]=0,f=h+l;c<=f&&f<u&&(i[l]=h+1)}i[o.previousIndex]=c-u}}a!==s&&t(o,a,s)}},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachMovedItem=function(t){var e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.forEachIdentityChange=function(t){var e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)},t.prototype.diff=function(t){if(null==t&&(t=[]),!Y(t))throw new Error(\"Error trying to diff '\"+A(t)+\"'. Only arrays and iterables are allowed\");return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n,r,i,o=this._itHead,a=!1;if(Array.isArray(t)){this.length=t.length;for(var s=0;s<this.length;s++)i=this._trackByFn(s,r=t[s]),null!==o&&N(o.trackById,i)?(a&&(o=this._verifyReinsertion(o,r,i,s)),N(o.item,r)||this._addIdentityChange(o,r)):(o=this._mismatch(o,r,i,s),a=!0),o=o._next}else n=0,function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e(t[n]);else for(var r=t[k()](),i=void 0;!(i=r.next()).done;)e(i.value)}(t,function(t){i=e._trackByFn(n,t),null!==o&&N(o.trackById,i)?(a&&(o=e._verifyReinsertion(o,t,i,n)),N(o.item,t)||e._addIdentityChange(o,t)):(o=e._mismatch(o,t,i,n),a=!0),o=o._next,n++}),this.length=n;return this._truncate(o),this.collection=t,this.isDirty},Object.defineProperty(t.prototype,\"isDirty\",{get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead},enumerable:!0,configurable:!0}),t.prototype._reset=function(){if(this.isDirty){var t=void 0,e=void 0;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}},t.prototype._mismatch=function(t,e,n,r){var i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(N(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(N(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new Fn(e,n),i,r),t},t.prototype._verifyReinsertion=function(t,e,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t},t.prototype._truncate=function(t){for(;null!==t;){var e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)},t.prototype._reinsertAfter=function(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);var r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._moveAfter=function(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._addAfter=function(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t},t.prototype._insertAfter=function(t,e,n){var r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Un),this._linkedRecords.put(t),t.currentIndex=n,t},t.prototype._remove=function(t){return this._addToRemovals(this._unlink(t))},t.prototype._unlink=function(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);var e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t},t.prototype._addToMoves=function(t,e){return t.previousIndex===e?t:(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t,t)},t.prototype._addToRemovals=function(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Un),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t},t.prototype._addIdentityChange=function(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t},t}(),Fn=function(){return function(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}(),qn=function(){function t(){this._head=null,this._tail=null}return t.prototype.add=function(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)},t.prototype.get=function(t,e){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&N(n.trackById,t))return n;return null},t.prototype.remove=function(t){var e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head},t}(),Un=function(){function t(){this.map=new Map}return t.prototype.put=function(t){var e=t.trackById,n=this.map.get(e);n||(n=new qn,this.map.set(e,n)),n.add(t)},t.prototype.get=function(t,e){var n=this.map.get(t);return n?n.get(t,e):null},t.prototype.remove=function(t){var e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t},Object.defineProperty(t.prototype,\"isEmpty\",{get:function(){return 0===this.map.size},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.map.clear()},t}();function Vn(t,e,n){var r=t.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var Bn=function(){function t(){}return t.prototype.supports=function(t){return t instanceof Map||X(t)},t.prototype.create=function(){return new Wn},t}(),Wn=function(){function t(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return Object.defineProperty(t.prototype,\"isDirty\",{get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead},enumerable:!0,configurable:!0}),t.prototype.forEachItem=function(t){var e;for(e=this._mapHead;null!==e;e=e._next)t(e)},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachChangedItem=function(t){var e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.diff=function(t){if(t){if(!(t instanceof Map||X(t)))throw new Error(\"Error trying to diff '\"+A(t)+\"'. Only maps and objects are allowed\")}else t=new Map;return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(t,function(t,r){if(n&&n.key===r)e._maybeAddToChanges(n,t),e._appendAfter=n,n=n._next;else{var i=e._getOrCreateRecordForKey(r,t);n=e._insertBeforeOrAppend(n,i)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty},t.prototype._insertBeforeOrAppend=function(t,e){if(t){var n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null},t.prototype._getOrCreateRecordForKey=function(t,e){if(this._records.has(t)){var n=this._records.get(t);this._maybeAddToChanges(n,e);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var o=new zn(t);return this._records.set(t,o),o.currentValue=e,this._addToAdditions(o),o},t.prototype._reset=function(){if(this.isDirty){var t=void 0;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}},t.prototype._maybeAddToChanges=function(t,e){N(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))},t.prototype._addToAdditions=function(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)},t.prototype._addToChanges=function(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)},t.prototype._forEach=function(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(function(n){return e(t[n],n)})},t}(),zn=function(){return function(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}(),Hn=function(){function t(t){this.factories=t}return t.create=function(e,n){if(null!=n){var r=n.factories.slice();e=e.concat(r)}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error(\"Cannot extend IterableDiffers without a parent injector\");return t.create(e,n)},deps:[[t,new q,new L]]}},t.prototype.find=function(t){var e,n=this.factories.find(function(e){return e.supports(t)});if(null!=n)return n;throw new Error(\"Cannot find a differ supporting object '\"+t+\"' of type '\"+((e=t).name||typeof e)+\"'\")},t.ngInjectableDef=d({providedIn:\"root\",factory:function(){return new t([new Mn])}}),t}(),Qn=function(){function t(t){this.factories=t}return t.create=function(e,n){if(n){var r=n.factories.slice();e=e.concat(r)}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error(\"Cannot extend KeyValueDiffers without a parent injector\");return t.create(e,n)},deps:[[t,new q,new L]]}},t.prototype.find=function(t){var e=this.factories.find(function(e){return e.supports(t)});if(e)return e;throw new Error(\"Cannot find a differ supporting object '\"+t+\"'\")},t.ngInjectableDef=d({providedIn:\"root\",factory:function(){return new t([new Bn])}}),t}(),Kn=[new Bn],Gn=new Hn([new Mn]),Yn=new Qn(Kn),Xn=fn(null,\"core\",[{provide:Pe,useValue:\"unknown\"},{provide:pn,deps:[nt]},{provide:an,deps:[]},{provide:je,deps:[]}]),Jn=new y(\"LocaleId\");function Zn(){return Gn}function $n(){return Yn}function tr(t){return t||\"en-US\"}var er=function(){return function(t){}}();function nr(t,e,n){var r=t.state,i=1792&r;return i===e?(t.state=-1793&r|n,t.initIndex=-1,!0):i===n}function rr(t,e,n){return(1792&t.state)===e&&t.initIndex<=n&&(t.initIndex=n+1,!0)}function ir(t,e){return t.nodes[e]}function or(t,e){return t.nodes[e]}function ar(t,e){return t.nodes[e]}function sr(t,e){return t.nodes[e]}function ur(t,e){return t.nodes[e]}var cr={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0};function lr(t,e,n,r){var i=\"ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '\"+e+\"'. Current value: '\"+n+\"'.\";return r&&(i+=\" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?\"),function(t,e){var n=new Error(t);return hr(n,e),n}(i,t)}function hr(t,e){t[be]=e,t[_e]=e.logError.bind(e)}function fr(t){return new Error(\"ViewDestroyedError: Attempt to use a destroyed view: \"+t)}var dr=function(){},pr=new Map;function yr(t){var e=pr.get(t);return e||(e=A(t)+\"_\"+pr.size,pr.set(t,e)),e}var vr=\"$$undefined\",mr=\"$$empty\";function gr(t){return{id:vr,styles:t.styles,encapsulation:t.encapsulation,data:t.data}}var br=0;function wr(t,e,n,r){return!(!(2&t.state)&&N(t.oldValues[e.bindingIndex+n],r))}function _r(t,e,n,r){return!!wr(t,e,n,r)&&(t.oldValues[e.bindingIndex+n]=r,!0)}function Er(t,e,n,r){var i=t.oldValues[e.bindingIndex+n];if(1&t.state||!Q(i,r)){var o=e.bindings[n].name;throw lr(cr.createDebugContext(t,e.nodeIndex),o+\": \"+i,o+\": \"+r,0!=(1&t.state))}}function Sr(t){for(var e=t;e;)2&e.def.flags&&(e.state|=8),e=e.viewContainerParent||e.parent}function Cr(t,e){for(var n=t;n&&n!==e;)n.state|=64,n=n.viewContainerParent||n.parent}function Tr(t,e,n,r){try{return Sr(33554432&t.def.nodes[e].flags?or(t,e).componentView:t),cr.handleEvent(t,e,n,r)}catch(i){t.root.errorHandler.handleError(i)}}function Ir(t){return t.parent?or(t.parent,t.parentNodeDef.nodeIndex):null}function kr(t){return t.parent?t.parentNodeDef.parent:null}function Or(t,e){switch(201347067&e.flags){case 1:return or(t,e.nodeIndex).renderElement;case 2:return ir(t,e.nodeIndex).renderText}}function Nr(t){return!!t.parent&&!!(32768&t.parentNodeDef.flags)}function Ar(t){return!(!t.parent||32768&t.parentNodeDef.flags)}function Dr(t){return 1<<t%32}function xr(t){var e={},n=0,i={};return t&&t.forEach(function(t){var o=Object(r.h)(t,2),a=o[0],s=o[1];\"number\"==typeof a?(e[a]=s,n|=Dr(a)):i[a]=s}),{matchedQueries:e,references:i,matchedQueryIds:n}}function Rr(t,e){return t.map(function(t){var n,i,o;return Array.isArray(t)?(o=(n=Object(r.h)(t,2))[0],i=n[1]):(o=0,i=t),i&&(\"function\"==typeof i||\"object\"==typeof i)&&e&&Object.defineProperty(i,Z,{value:e,configurable:!0}),{flags:o,token:i,tokenKey:yr(i)}})}function Pr(t,e,n){var r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===M.Native?or(t,n.renderParent.nodeIndex).renderElement:void 0:e}var Mr=new WeakMap;function jr(t){var e=Mr.get(t);return e||((e=t(function(){return dr})).factory=t,Mr.set(t,e)),e}function Lr(t,e,n,r,i){3===e&&(n=t.renderer.parentNode(Or(t,t.def.lastRenderRootNode))),Fr(t,e,0,t.def.nodes.length-1,n,r,i)}function Fr(t,e,n,r,i,o,a){for(var s=n;s<=r;s++){var u=t.def.nodes[s];11&u.flags&&Ur(t,u,e,i,o,a),s+=u.childCount}}function qr(t,e,n,r,i,o){for(var a=t;a&&!Nr(a);)a=a.parent;for(var s=a.parent,u=kr(a),c=u.nodeIndex+u.childCount,l=u.nodeIndex+1;l<=c;l++){var h=s.def.nodes[l];h.ngContentIndex===e&&Ur(s,h,n,r,i,o),l+=h.childCount}if(!s.parent){var f=t.root.projectableNodes[e];if(f)for(l=0;l<f.length;l++)Vr(t,f[l],n,r,i,o)}}function Ur(t,e,n,r,i,o){if(8&e.flags)qr(t,e.ngContent.index,n,r,i,o);else{var a=Or(t,e);if(3===n&&33554432&e.flags&&48&e.bindingFlags?(16&e.bindingFlags&&Vr(t,a,n,r,i,o),32&e.bindingFlags&&Vr(or(t,e.nodeIndex).componentView,a,n,r,i,o)):Vr(t,a,n,r,i,o),16777216&e.flags)for(var s=or(t,e.nodeIndex).viewContainer._embeddedViews,u=0;u<s.length;u++)Lr(s[u],n,r,i,o);1&e.flags&&!e.element.name&&Fr(t,n,e.nodeIndex+1,e.nodeIndex+e.childCount,r,i,o)}}function Vr(t,e,n,r,i,o){var a=t.renderer;switch(n){case 1:a.appendChild(r,e);break;case 2:a.insertBefore(r,e,i);break;case 3:a.removeChild(r,e);break;case 0:o.push(e)}}var Br=/^:([^:]+):(.+)$/;function Wr(t){if(\":\"===t[0]){var e=t.match(Br);return[e[1],e[2]]}return[\"\",t]}function zr(t){for(var e=0,n=0;n<t.length;n++)e|=t[n].flags;return e}function Hr(t,e,n,r,i,o){t|=1;var a=xr(e);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:a.matchedQueries,matchedQueryIds:a.matchedQueryIds,references:a.references,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:o?jr(o):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:i||dr},provider:null,text:null,query:null,ngContent:null}}function Qr(t,e,n,i,o,a,s,u,c,l,h,f){var d;void 0===s&&(s=[]),l||(l=dr);var p=xr(n),y=p.matchedQueries,v=p.references,m=p.matchedQueryIds,g=null,b=null;a&&(g=(d=Object(r.h)(Wr(a),2))[0],b=d[1]),u=u||[];for(var w=new Array(u.length),_=0;_<u.length;_++){var E=Object(r.h)(u[_],3),S=E[0],C=E[1],T=E[2],I=Object(r.h)(Wr(C),2),k=I[0],O=I[1],N=void 0,A=void 0;switch(15&S){case 4:A=T;break;case 1:case 8:N=T}w[_]={flags:S,ns:k,name:O,nonMinifiedName:O,securityContext:N,suffix:A}}c=c||[];var D=new Array(c.length);for(_=0;_<c.length;_++){var x=Object(r.h)(c[_],2);D[_]={type:0,target:x[0],eventName:x[1],propName:null}}var R=(s=s||[]).map(function(t){var e=Object(r.h)(t,2),n=e[0],i=e[1],o=Object(r.h)(Wr(n),2);return[o[0],o[1],i]});return f=function(t){if(t&&t.id===vr){var e=null!=t.encapsulation&&t.encapsulation!==M.None||t.styles.length||Object.keys(t.data).length;t.id=e?\"c\"+br++:mr}return t&&t.id===mr&&(t=null),t||null}(f),h&&(e|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:y,matchedQueryIds:m,references:v,ngContentIndex:i,childCount:o,bindings:w,bindingFlags:zr(w),outputs:D,element:{ns:g,name:b,attrs:R,template:null,componentProvider:null,componentView:h||null,componentRendererType:f,publicProviders:null,allProviders:null,handleEvent:l||dr},provider:null,text:null,query:null,ngContent:null}}function Kr(t,e,n){var i,o=n.element,a=t.root.selectorOrNode,s=t.renderer;if(t.parent||!a){i=o.name?s.createElement(o.name,o.ns):s.createComment(\"\");var u=Pr(t,e,n);u&&s.appendChild(u,i)}else i=s.selectRootElement(a,!!o.componentRendererType&&o.componentRendererType.encapsulation===M.ShadowDom);if(o.attrs)for(var c=0;c<o.attrs.length;c++){var l=Object(r.h)(o.attrs[c],3);s.setAttribute(i,l[1],l[2],l[0])}return i}function Gr(t,e,n,r){for(var i=0;i<n.outputs.length;i++){var o=n.outputs[i],a=Yr(t,n.nodeIndex,(h=o.eventName,(l=o.target)?l+\":\"+h:h)),s=o.target,u=t;\"component\"===o.target&&(s=null,u=e);var c=u.renderer.listen(s||r,o.eventName,a);t.disposables[n.outputIndex+i]=c}var l,h}function Yr(t,e,n){return function(r){return Tr(t,e,n,r)}}function Xr(t,e,n,r){if(!_r(t,e,n,r))return!1;var i=e.bindings[n],o=or(t,e.nodeIndex),a=o.renderElement,s=i.name;switch(15&i.flags){case 1:!function(t,e,n,r,i,o){var a=e.securityContext,s=a?t.root.sanitizer.sanitize(a,o):o;s=null!=s?s.toString():null;var u=t.renderer;null!=o?u.setAttribute(n,i,s,r):u.removeAttribute(n,i,r)}(t,i,a,i.ns,s,r);break;case 2:!function(t,e,n,r){var i=t.renderer;r?i.addClass(e,n):i.removeClass(e,n)}(t,a,s,r);break;case 4:!function(t,e,n,r,i){var o=t.root.sanitizer.sanitize(Pt.STYLE,i);if(null!=o){o=o.toString();var a=e.suffix;null!=a&&(o+=a)}else o=null;var s=t.renderer;null!=o?s.setStyle(n,r,o):s.removeStyle(n,r)}(t,i,a,s,r);break;case 8:!function(t,e,n,r,i){var o=e.securityContext,a=o?t.root.sanitizer.sanitize(o,i):i;t.renderer.setProperty(n,r,a)}(33554432&e.flags&&32&i.flags?o.componentView:t,i,a,s,r)}return!0}var Jr=new Object,Zr=yr(nt),$r=yr(tt),ti=yr(Tt);function ei(t,e,n,r){return n=R(n),{index:-1,deps:Rr(r,A(e)),flags:t,token:e,value:n}}function ni(t){for(var e={},n=[],r=!1,i=0;i<t.length;i++){var o=t[i];o.token===vt&&!0===o.value&&(r=!0),1073741824&o.flags&&n.push(o.token),o.index=i,e[yr(o.token)]=o}return{factory:null,providersByKey:e,providers:t,modules:n,isRoot:r}}function ri(t,e,n){void 0===n&&(n=nt.THROW_IF_NOT_FOUND);var r,i,o=B(t);try{if(8&e.flags)return e.token;if(2&e.flags&&(n=null),1&e.flags)return t._parent.get(e.token,n);var a=e.tokenKey;switch(a){case Zr:case $r:case ti:return t}var s,u=t._def.providersByKey[a];if(u){var c=t._providers[u.index];return void 0===c&&(c=t._providers[u.index]=ii(t,u)),c===Jr?void 0:c}if((s=p(e.token))&&(r=t,null!=(i=s).providedIn&&(function(t,e){return t._def.modules.indexOf(i.providedIn)>-1}(r)||\"root\"===i.providedIn&&r._def.isRoot))){var l=t._providers.length;return t._def.providersByKey[e.tokenKey]={flags:5120,value:s.factory,deps:[],index:l,token:e.token},t._providers[l]=Jr,t._providers[l]=ii(t,t._def.providersByKey[e.tokenKey])}return 4&e.flags?n:t._parent.get(e.token,n)}finally{B(o)}}function ii(t,e){var n;switch(201347067&e.flags){case 512:n=function(t,e,n){var i=n.length;switch(i){case 0:return new e;case 1:return new e(ri(t,n[0]));case 2:return new e(ri(t,n[0]),ri(t,n[1]));case 3:return new e(ri(t,n[0]),ri(t,n[1]),ri(t,n[2]));default:for(var o=new Array(i),a=0;a<i;a++)o[a]=ri(t,n[a]);return new(e.bind.apply(e,Object(r.i)([void 0],o)))}}(t,e.value,e.deps);break;case 1024:n=function(t,e,n){var i=n.length;switch(i){case 0:return e();case 1:return e(ri(t,n[0]));case 2:return e(ri(t,n[0]),ri(t,n[1]));case 3:return e(ri(t,n[0]),ri(t,n[1]),ri(t,n[2]));default:for(var o=Array(i),a=0;a<i;a++)o[a]=ri(t,n[a]);return e.apply(void 0,Object(r.i)(o))}}(t,e.value,e.deps);break;case 2048:n=ri(t,e.deps[0]);break;case 256:n=e.value}return n===Jr||null==n||\"object\"!=typeof n||131072&e.flags||\"function\"!=typeof n.ngOnDestroy||(e.flags|=131072),void 0===n?Jr:n}function oi(t,e){var n=t.viewContainer._embeddedViews;if((null==e||e>=n.length)&&(e=n.length-1),e<0)return null;var r=n[e];return r.viewContainerParent=null,ci(n,e),cr.dirtyParentQueries(r),si(r),r}function ai(t,e,n){var r=e?Or(e,e.def.lastRenderRootNode):t.renderElement,i=n.renderer.parentNode(r),o=n.renderer.nextSibling(r);Lr(n,2,i,o,void 0)}function si(t){Lr(t,3,null,null,void 0)}function ui(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ci(t,e){e>=t.length-1?t.pop():t.splice(e,1)}var li=new Object;function hi(t,e,n,r,i,o){return new fi(t,e,n,r,i,o)}var fi=function(t){function e(e,n,r,i,o,a){var s=t.call(this)||this;return s.selector=e,s.componentType=n,s._inputs=i,s._outputs=o,s.ngContentSelectors=a,s.viewDefFactory=r,s}return Object(r.d)(e,t),Object.defineProperty(e.prototype,\"inputs\",{get:function(){var t=[],e=this._inputs;for(var n in e)t.push({propName:n,templateName:e[n]});return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"outputs\",{get:function(){var t=[];for(var e in this._outputs)t.push({propName:e,templateName:this._outputs[e]});return t},enumerable:!0,configurable:!0}),e.prototype.create=function(t,e,n,r){if(!r)throw new Error(\"ngModule should be provided\");var i=jr(this.viewDefFactory),o=i.nodes[0].element.componentProvider.nodeIndex,a=cr.createRootView(t,e||[],n,i,r,li),s=ar(a,o).instance;return n&&a.renderer.setAttribute(or(a,0).renderElement,\"ng-version\",Lt.full),new di(a,new mi(a),s)},e}(gt),di=function(t){function e(e,n,r){var i=t.call(this)||this;return i._view=e,i._viewRef=n,i._component=r,i._elDef=i._view.def.nodes[0],i.hostView=n,i.changeDetectorRef=n,i.instance=r,i}return Object(r.d)(e,t),Object.defineProperty(e.prototype,\"location\",{get:function(){return new kt(or(this._view,this._elDef.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"injector\",{get:function(){return new _i(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"componentType\",{get:function(){return this._component.constructor},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this._viewRef.destroy()},e.prototype.onDestroy=function(t){this._viewRef.onDestroy(t)},e}(mt);function pi(t,e,n){return new yi(t,e,n)}var yi=function(){function t(t,e,n){this._view=t,this._elDef=e,this._data=n,this._embeddedViews=[]}return Object.defineProperty(t.prototype,\"element\",{get:function(){return new kt(this._data.renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"injector\",{get:function(){return new _i(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"parentInjector\",{get:function(){for(var t=this._view,e=this._elDef.parent;!e&&t;)e=kr(t),t=t.parent;return t?new _i(t,e):new _i(this._view,null)},enumerable:!0,configurable:!0}),t.prototype.clear=function(){for(var t=this._embeddedViews.length-1;t>=0;t--){var e=oi(this._data,t);cr.destroyView(e)}},t.prototype.get=function(t){var e=this._embeddedViews[t];if(e){var n=new mi(e);return n.attachToViewContainerRef(this),n}return null},Object.defineProperty(t.prototype,\"length\",{get:function(){return this._embeddedViews.length},enumerable:!0,configurable:!0}),t.prototype.createEmbeddedView=function(t,e,n){var r=t.createEmbeddedView(e||{});return this.insert(r,n),r},t.prototype.createComponent=function(t,e,n,r,i){var o=n||this.parentInjector;i||t instanceof Ct||(i=o.get(Tt));var a=t.create(o,r,void 0,i);return this.insert(a.hostView,e),a},t.prototype.insert=function(t,e){if(t.destroyed)throw new Error(\"Cannot insert a destroyed View in a ViewContainer!\");var n,r,i,o,a=t;return o=(n=this._data).viewContainer._embeddedViews,null==(r=e)&&(r=o.length),(i=a._view).viewContainerParent=this._view,ui(o,r,i),function(t,e){var n=Ir(e);if(n&&n!==t&&!(16&e.state)){e.state|=16;var r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(e),function(t,n){if(!(4&n.flags)){e.parent.def.nodeFlags|=4,n.flags|=4;for(var r=n.parent;r;)r.childFlags|=4,r=r.parent}}(0,e.parentNodeDef)}}(n,i),cr.dirtyParentQueries(i),ai(n,r>0?o[r-1]:null,i),a.attachToViewContainerRef(this),t},t.prototype.move=function(t,e){if(t.destroyed)throw new Error(\"Cannot move a destroyed View in a ViewContainer!\");var n,r,i,o,a,s=this._embeddedViews.indexOf(t._view);return i=e,a=(o=(n=this._data).viewContainer._embeddedViews)[r=s],ci(o,r),null==i&&(i=o.length),ui(o,i,a),cr.dirtyParentQueries(a),si(a),ai(n,i>0?o[i-1]:null,a),t},t.prototype.indexOf=function(t){return this._embeddedViews.indexOf(t._view)},t.prototype.remove=function(t){var e=oi(this._data,t);e&&cr.destroyView(e)},t.prototype.detach=function(t){var e=oi(this._data,t);return e?new mi(e):null},t}();function vi(t){return new mi(t)}var mi=function(){function t(t){this._view=t,this._viewContainerRef=null,this._appRef=null}return Object.defineProperty(t.prototype,\"rootNodes\",{get:function(){return Lr(this._view,0,void 0,void 0,t=[]),t;var t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"context\",{get:function(){return this._view.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"destroyed\",{get:function(){return 0!=(128&this._view.state)},enumerable:!0,configurable:!0}),t.prototype.markForCheck=function(){Sr(this._view)},t.prototype.detach=function(){this._view.state&=-5},t.prototype.detectChanges=function(){var t=this._view.root.rendererFactory;t.begin&&t.begin();try{cr.checkAndUpdateView(this._view)}finally{t.end&&t.end()}},t.prototype.checkNoChanges=function(){cr.checkNoChangesView(this._view)},t.prototype.reattach=function(){this._view.state|=4},t.prototype.onDestroy=function(t){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(t)},t.prototype.destroy=function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),cr.destroyView(this._view)},t.prototype.detachFromAppRef=function(){this._appRef=null,si(this._view),cr.dirtyParentQueries(this._view)},t.prototype.attachToAppRef=function(t){if(this._viewContainerRef)throw new Error(\"This view is already attached to a ViewContainer!\");this._appRef=t},t.prototype.attachToViewContainerRef=function(t){if(this._appRef)throw new Error(\"This view is already attached directly to the ApplicationRef!\");this._viewContainerRef=t},t}();function gi(t,e){return new bi(t,e)}var bi=function(t){function e(e,n){var r=t.call(this)||this;return r._parentView=e,r._def=n,r}return Object(r.d)(e,t),e.prototype.createEmbeddedView=function(t){return new mi(cr.createEmbeddedView(this._parentView,this._def,this._def.element.template,t))},Object.defineProperty(e.prototype,\"elementRef\",{get:function(){return new kt(or(this._parentView,this._def.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),e}(he);function wi(t,e){return new _i(t,e)}var _i=function(){function t(t,e){this.view=t,this.elDef=e}return t.prototype.get=function(t,e){return void 0===e&&(e=nt.THROW_IF_NOT_FOUND),cr.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:t,tokenKey:yr(t)},e)},t}();function Ei(t,e){var n=t.def.nodes[e];if(1&n.flags){var r=or(t,n.nodeIndex);return n.element.template?r.template:r.renderElement}if(2&n.flags)return ir(t,n.nodeIndex).renderText;if(20240&n.flags)return ar(t,n.nodeIndex).instance;throw new Error(\"Illegal state: read nodeValue for node index \"+e)}function Si(t){return new Ci(t.renderer)}var Ci=function(){function t(t){this.delegate=t}return t.prototype.selectRootElement=function(t){return this.delegate.selectRootElement(t)},t.prototype.createElement=function(t,e){var n=Object(r.h)(Wr(e),2),i=this.delegate.createElement(n[1],n[0]);return t&&this.delegate.appendChild(t,i),i},t.prototype.createViewRoot=function(t){return t},t.prototype.createTemplateAnchor=function(t){var e=this.delegate.createComment(\"\");return t&&this.delegate.appendChild(t,e),e},t.prototype.createText=function(t,e){var n=this.delegate.createText(e);return t&&this.delegate.appendChild(t,n),n},t.prototype.projectNodes=function(t,e){for(var n=0;n<e.length;n++)this.delegate.appendChild(t,e[n])},t.prototype.attachViewAfter=function(t,e){for(var n=this.delegate.parentNode(t),r=this.delegate.nextSibling(t),i=0;i<e.length;i++)this.delegate.insertBefore(n,e[i],r)},t.prototype.detachView=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}},t.prototype.destroyView=function(t,e){for(var n=0;n<e.length;n++)this.delegate.destroyNode(e[n])},t.prototype.listen=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.listenGlobal=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.setElementProperty=function(t,e,n){this.delegate.setProperty(t,e,n)},t.prototype.setElementAttribute=function(t,e,n){var i=Object(r.h)(Wr(e),2),o=i[0],a=i[1];null!=n?this.delegate.setAttribute(t,a,n,o):this.delegate.removeAttribute(t,a,o)},t.prototype.setBindingDebugInfo=function(t,e,n){},t.prototype.setElementClass=function(t,e,n){n?this.delegate.addClass(t,e):this.delegate.removeClass(t,e)},t.prototype.setElementStyle=function(t,e,n){null!=n?this.delegate.setStyle(t,e,n):this.delegate.removeStyle(t,e)},t.prototype.invokeElementMethod=function(t,e,n){t[e].apply(t,n)},t.prototype.setText=function(t,e){this.delegate.setValue(t,e)},t.prototype.animate=function(){throw new Error(\"Renderer.animate is no longer supported!\")},t}();function Ti(t,e,n,r){return new Ii(t,e,n,r)}var Ii=function(){function t(t,e,n,r){this._moduleType=t,this._parent=e,this._bootstrapComponents=n,this._def=r,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(t){for(var e=t._def,n=t._providers=new Array(e.providers.length),r=0;r<e.providers.length;r++){var i=e.providers[r];4096&i.flags||void 0===n[r]&&(n[r]=ii(t,i))}}(this)}return t.prototype.get=function(t,e,n){void 0===e&&(e=nt.THROW_IF_NOT_FOUND),void 0===n&&(n=U.Default);var r=0;return n&U.SkipSelf?r|=1:n&U.Self&&(r|=4),ri(this,{token:t,tokenKey:yr(t),flags:r},e)},Object.defineProperty(t.prototype,\"instance\",{get:function(){return this.get(this._moduleType)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"componentFactoryResolver\",{get:function(){return this.get(Et)},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error(\"The ng module \"+A(this.instance.constructor)+\" has already been destroyed.\");this._destroyed=!0,function(t,e){for(var n=t._def,r=new Set,i=0;i<n.providers.length;i++)if(131072&n.providers[i].flags){var o=t._providers[i];if(o&&o!==Jr){var a=o.ngOnDestroy;\"function\"!=typeof a||r.has(o)||(a.apply(o),r.add(o))}}}(this),this._destroyListeners.forEach(function(t){return t()})},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},t}(),ki=yr(Nt),Oi=yr(xt),Ni=yr(kt),Ai=yr(Sn),Di=yr(he),xi=yr(Tn),Ri=yr(nt),Pi=yr(tt);function Mi(t,e,n,i,o,a,s,u){var c=[];if(s)for(var l in s){var h=Object(r.h)(s[l],2);c[h[0]]={flags:8,name:l,nonMinifiedName:h[1],ns:null,securityContext:null,suffix:null}}var f=[];if(u)for(var d in u)f.push({type:1,propName:d,target:null,eventName:u[d]});return Li(t,e|=16384,n,i,o,o,a,c,f)}function ji(t,e,n,r,i){return Li(-1,t,e,0,n,r,i)}function Li(t,e,n,r,i,o,a,s,u){var c=xr(n),l=c.matchedQueries,h=c.references,f=c.matchedQueryIds;u||(u=[]),s||(s=[]),o=R(o);var d=Rr(a,A(i));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:l,matchedQueryIds:f,references:h,ngContentIndex:-1,childCount:r,bindings:s,bindingFlags:zr(s),outputs:u,element:null,provider:{token:i,value:o,deps:d},text:null,query:null,ngContent:null}}function Fi(t,e){return Bi(t,e)}function qi(t,e){for(var n=t;n.parent&&!Nr(n);)n=n.parent;return Wi(n.parent,kr(n),!0,e.provider.value,e.provider.deps)}function Ui(t,e){var n=Wi(t,e.parent,(32768&e.flags)>0,e.provider.value,e.provider.deps);if(e.outputs.length)for(var r=0;r<e.outputs.length;r++){var i=e.outputs[r],o=n[i.propName];if(!ke(o))throw new Error(\"@Output \"+i.propName+\" not initialized in '\"+n.constructor.name+\"'.\");var a=o.subscribe(Vi(t,e.parent.nodeIndex,i.eventName));t.disposables[e.outputIndex+r]=a.unsubscribe.bind(a)}return n}function Vi(t,e,n){return function(r){return Tr(t,e,n,r)}}function Bi(t,e){var n=(8192&e.flags)>0,i=e.provider;switch(201347067&e.flags){case 512:return Wi(t,e.parent,n,i.value,i.deps);case 1024:return function(t,e,n,i,o){var a=o.length;switch(a){case 0:return i();case 1:return i(Hi(t,e,n,o[0]));case 2:return i(Hi(t,e,n,o[0]),Hi(t,e,n,o[1]));case 3:return i(Hi(t,e,n,o[0]),Hi(t,e,n,o[1]),Hi(t,e,n,o[2]));default:for(var s=Array(a),u=0;u<a;u++)s[u]=Hi(t,e,n,o[u]);return i.apply(void 0,Object(r.i)(s))}}(t,e.parent,n,i.value,i.deps);case 2048:return Hi(t,e.parent,n,i.deps[0]);case 256:return i.value}}function Wi(t,e,n,i,o){var a=o.length;switch(a){case 0:return new i;case 1:return new i(Hi(t,e,n,o[0]));case 2:return new i(Hi(t,e,n,o[0]),Hi(t,e,n,o[1]));case 3:return new i(Hi(t,e,n,o[0]),Hi(t,e,n,o[1]),Hi(t,e,n,o[2]));default:for(var s=new Array(a),u=0;u<a;u++)s[u]=Hi(t,e,n,o[u]);return new(i.bind.apply(i,Object(r.i)([void 0],s)))}}var zi={};function Hi(t,e,n,r,i){if(void 0===i&&(i=nt.THROW_IF_NOT_FOUND),8&r.flags)return r.token;var o=t;2&r.flags&&(i=null);var a=r.tokenKey;a===xi&&(n=!(!e||!e.element.componentView)),e&&1&r.flags&&(n=!1,e=e.parent);for(var s=t;s;){if(e)switch(a){case ki:return Si(Qi(s,e,n));case Oi:return Qi(s,e,n).renderer;case Ni:return new kt(or(s,e.nodeIndex).renderElement);case Ai:return or(s,e.nodeIndex).viewContainer;case Di:if(e.element.template)return or(s,e.nodeIndex).template;break;case xi:return vi(Qi(s,e,n));case Ri:case Pi:return wi(s,e);default:var u=(n?e.element.allProviders:e.element.publicProviders)[a];if(u){var c=ar(s,u.nodeIndex);return c||(c={instance:Bi(s,u)},s.nodes[u.nodeIndex]=c),c.instance}}n=Nr(s),e=kr(s),s=s.parent,4&r.flags&&(s=null)}var l=o.root.injector.get(r.token,zi);return l!==zi||i===zi?l:o.root.ngModule.injector.get(r.token,i)}function Qi(t,e,n){var r;if(n)r=or(t,e.nodeIndex).componentView;else for(r=t;r.parent&&!Nr(r);)r=r.parent;return r}function Ki(t,e,n,r,i,o){if(32768&n.flags){var a=or(t,n.parent.nodeIndex).componentView;2&a.def.flags&&(a.state|=8)}if(e.instance[n.bindings[r].name]=i,524288&n.flags){o=o||{};var s=K.unwrap(t.oldValues[n.bindingIndex+r]);o[n.bindings[r].nonMinifiedName]=new G(s,i,0!=(2&t.state))}return t.oldValues[n.bindingIndex+r]=i,o}function Gi(t,e){if(t.def.nodeFlags&e)for(var n=t.def.nodes,r=0,i=0;i<n.length;i++){var o=n[i],a=o.parent;for(!a&&o.flags&e&&Xi(t,i,o.flags&e,r++),0==(o.childFlags&e)&&(i+=o.childCount);a&&1&a.flags&&i===a.nodeIndex+a.childCount;)a.directChildFlags&e&&(r=Yi(t,a,e,r)),a=a.parent}}function Yi(t,e,n,r){for(var i=e.nodeIndex+1;i<=e.nodeIndex+e.childCount;i++){var o=t.def.nodes[i];o.flags&n&&Xi(t,i,o.flags&n,r++),i+=o.childCount}return r}function Xi(t,e,n,r){var i=ar(t,e);if(i){var o=i.instance;o&&(cr.setCurrentNode(t,e),1048576&n&&rr(t,512,r)&&o.ngAfterContentInit(),2097152&n&&o.ngAfterContentChecked(),4194304&n&&rr(t,768,r)&&o.ngAfterViewInit(),8388608&n&&o.ngAfterViewChecked(),131072&n&&o.ngOnDestroy())}}function Ji(t,e,n){var r=[];for(var i in n)r.push({propName:i,bindingType:n[i]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:e,filterId:Dr(e),bindings:r},ngContent:null}}function Zi(t){for(var e=t.def.nodeMatchedQueries;t.parent&&Ar(t);){var n=t.parentNodeDef;t=t.parent;for(var r=n.nodeIndex+n.childCount,i=0;i<=r;i++)67108864&(o=t.def.nodes[i]).flags&&536870912&o.flags&&(o.query.filterId&e)===o.query.filterId&&ur(t,i).setDirty(),!(1&o.flags&&i+o.childCount<n.nodeIndex)&&67108864&o.childFlags&&536870912&o.childFlags||(i+=o.childCount)}if(134217728&t.def.nodeFlags)for(i=0;i<t.def.nodes.length;i++){var o;134217728&(o=t.def.nodes[i]).flags&&536870912&o.flags&&ur(t,i).setDirty(),i+=o.childCount}}function $i(t,e){var n=ur(t,e.nodeIndex);if(n.dirty){var r,i=void 0;if(67108864&e.flags){var o=e.parent.parent;i=to(t,o.nodeIndex,o.nodeIndex+o.childCount,e.query,[]),r=ar(t,e.parent.nodeIndex).instance}else 134217728&e.flags&&(i=to(t,0,t.def.nodes.length-1,e.query,[]),r=t.component);n.reset(i);for(var a=e.query.bindings,s=!1,u=0;u<a.length;u++){var c=a[u],l=void 0;switch(c.bindingType){case 0:l=n.first;break;case 1:l=n,s=!0}r[c.propName]=l}s&&n.notifyOnChanges()}}function to(t,e,n,r,i){for(var o=e;o<=n;o++){var a=t.def.nodes[o],s=a.matchedQueries[r.id];if(null!=s&&i.push(eo(t,a,s)),1&a.flags&&a.element.template&&(a.element.template.nodeMatchedQueries&r.filterId)===r.filterId){var u=or(t,o);if((a.childMatchedQueries&r.filterId)===r.filterId&&(to(t,o+1,o+a.childCount,r,i),o+=a.childCount),16777216&a.flags)for(var c=u.viewContainer._embeddedViews,l=0;l<c.length;l++){var h=c[l],f=Ir(h);f&&f===u&&to(h,0,h.def.nodes.length-1,r,i)}var d=u.template._projectedViews;if(d)for(l=0;l<d.length;l++){var p=d[l];to(p,0,p.def.nodes.length-1,r,i)}}(a.childMatchedQueries&r.filterId)!==r.filterId&&(o+=a.childCount)}return i}function eo(t,e,n){if(null!=n)switch(n){case 1:return or(t,e.nodeIndex).renderElement;case 0:return new kt(or(t,e.nodeIndex).renderElement);case 2:return or(t,e.nodeIndex).template;case 3:return or(t,e.nodeIndex).viewContainer;case 4:return ar(t,e.nodeIndex).instance}}function no(t,e){return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:e}}}function ro(t,e,n){var r=Pr(t,e,n);r&&qr(t,n.ngContent.index,1,r,null,void 0)}function io(t,e,n){for(var r=new Array(n.length-1),i=1;i<n.length;i++)r[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function oo(t,e,n){var r,i=t.renderer;r=i.createText(n.text.prefix);var o=Pr(t,e,n);return o&&i.appendChild(o,r),{renderText:r}}function ao(t,e){return(null!=t?t.toString():\"\")+e.suffix}function so(t,e,n,r){for(var i=0,o=0,a=0,s=0,u=0,c=null,l=null,h=!1,f=!1,d=null,p=0;p<e.length;p++){var y=e[p];if(y.nodeIndex=p,y.parent=c,y.bindingIndex=i,y.outputIndex=o,y.renderParent=l,a|=y.flags,u|=y.matchedQueryIds,y.element){var v=y.element;v.publicProviders=c?c.element.publicProviders:Object.create(null),v.allProviders=v.publicProviders,h=!1,f=!1,y.element.template&&(u|=y.element.template.nodeMatchedQueries)}if(co(c,y,e.length),i+=y.bindings.length,o+=y.outputs.length,!l&&3&y.flags&&(d=y),20224&y.flags){h||(h=!0,c.element.publicProviders=Object.create(c.element.publicProviders),c.element.allProviders=c.element.publicProviders);var m=0!=(32768&y.flags);0==(8192&y.flags)||m?c.element.publicProviders[yr(y.provider.token)]=y:(f||(f=!0,c.element.allProviders=Object.create(c.element.publicProviders)),c.element.allProviders[yr(y.provider.token)]=y),m&&(c.element.componentProvider=y)}if(c?(c.childFlags|=y.flags,c.directChildFlags|=y.flags,c.childMatchedQueries|=y.matchedQueryIds,y.element&&y.element.template&&(c.childMatchedQueries|=y.element.template.nodeMatchedQueries)):s|=y.flags,y.childCount>0)c=y,uo(y)||(l=y);else for(;c&&p===c.nodeIndex+c.childCount;){var g=c.parent;g&&(g.childFlags|=c.childFlags,g.childMatchedQueries|=c.childMatchedQueries),l=(c=g)&&uo(c)?c.renderParent:c}}return{factory:null,nodeFlags:a,rootNodeFlags:s,nodeMatchedQueries:u,flags:t,nodes:e,updateDirectives:n||dr,updateRenderer:r||dr,handleEvent:function(t,n,r,i){return e[n].element.handleEvent(t,r,i)},bindingCount:i,outputCount:o,lastRenderRootNode:d}}function uo(t){return 0!=(1&t.flags)&&null===t.element.name}function co(t,e,n){var r=e.element&&e.element.template;if(r){if(!r.lastRenderRootNode)throw new Error(\"Illegal State: Embedded templates without nodes are not allowed!\");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error(\"Illegal State: Last root node of a template can't have embedded views, at index \"+e.nodeIndex+\"!\")}if(20224&e.flags&&0==(1&(t?t.flags:0)))throw new Error(\"Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index \"+e.nodeIndex+\"!\");if(e.query){if(67108864&e.flags&&(!t||0==(16384&t.flags)))throw new Error(\"Illegal State: Content Query nodes need to be children of directives, at index \"+e.nodeIndex+\"!\");if(134217728&e.flags&&t)throw new Error(\"Illegal State: View Query nodes have to be top level nodes, at index \"+e.nodeIndex+\"!\")}if(e.childCount){var i=t?t.nodeIndex+t.childCount:n-1;if(e.nodeIndex<=i&&e.nodeIndex+e.childCount>i)throw new Error(\"Illegal State: childCount of node leads outside of parent, at index \"+e.nodeIndex+\"!\")}}function lo(t,e,n,r){var i=po(t.root,t.renderer,t,e,n);return yo(i,t.component,r),vo(i),i}function ho(t,e,n){var r=po(t,t.renderer,null,null,e);return yo(r,n,n),vo(r),r}function fo(t,e,n,r){var i,o=e.element.componentRendererType;return i=o?t.root.rendererFactory.createRenderer(r,o):t.root.renderer,po(t.root,i,t,e.element.componentProvider,n)}function po(t,e,n,r,i){var o=new Array(i.nodes.length),a=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:o,state:13,root:t,renderer:e,oldValues:new Array(i.bindingCount),disposables:a,initIndex:-1}}function yo(t,e,n){t.component=e,t.context=n}function vo(t){var e;Nr(t)&&(e=or(t.parent,t.parentNodeDef.parent.nodeIndex).renderElement);for(var n=t.def,r=t.nodes,i=0;i<n.nodes.length;i++){var o=n.nodes[i];cr.setCurrentNode(t,i);var a=void 0;switch(201347067&o.flags){case 1:var s=Kr(t,e,o),u=void 0;if(33554432&o.flags){var c=jr(o.element.componentView);u=cr.createComponentView(t,o,c,s)}Gr(t,u,o,s),a={renderElement:s,componentView:u,viewContainer:null,template:o.element.template?gi(t,o):void 0},16777216&o.flags&&(a.viewContainer=pi(t,o,a));break;case 2:a=oo(t,e,o);break;case 512:case 1024:case 2048:case 256:(a=r[i])||4096&o.flags||(a={instance:Fi(t,o)});break;case 16:a={instance:qi(t,o)};break;case 16384:(a=r[i])||(a={instance:Ui(t,o)}),32768&o.flags&&yo(or(t,o.parent.nodeIndex).componentView,a.instance,a.instance);break;case 32:case 64:case 128:a={value:void 0};break;case 67108864:case 134217728:a=new gn;break;case 8:ro(t,e,o),a=void 0}r[i]=a}To(t,Co.CreateViewNodes),No(t,201326592,268435456,0)}function mo(t){wo(t),cr.updateDirectives(t,1),Io(t,Co.CheckNoChanges),cr.updateRenderer(t,1),To(t,Co.CheckNoChanges),t.state&=-97}function go(t){1&t.state?(t.state&=-2,t.state|=2):t.state&=-3,nr(t,0,256),wo(t),cr.updateDirectives(t,0),Io(t,Co.CheckAndUpdate),No(t,67108864,536870912,0);var e=nr(t,256,512);Gi(t,2097152|(e?1048576:0)),cr.updateRenderer(t,0),To(t,Co.CheckAndUpdate),No(t,134217728,536870912,0),Gi(t,8388608|((e=nr(t,512,768))?4194304:0)),2&t.def.flags&&(t.state&=-9),t.state&=-97,nr(t,768,1024)}function bo(t,e,n,i,o,a,s,u,c,l,h,f,d){return 0===n?function(t,e,n,r,i,o,a,s,u,c,l,h){switch(201347067&e.flags){case 1:return function(t,e,n,r,i,o,a,s,u,c,l,h){var f=e.bindings.length,d=!1;return f>0&&Xr(t,e,0,n)&&(d=!0),f>1&&Xr(t,e,1,r)&&(d=!0),f>2&&Xr(t,e,2,i)&&(d=!0),f>3&&Xr(t,e,3,o)&&(d=!0),f>4&&Xr(t,e,4,a)&&(d=!0),f>5&&Xr(t,e,5,s)&&(d=!0),f>6&&Xr(t,e,6,u)&&(d=!0),f>7&&Xr(t,e,7,c)&&(d=!0),f>8&&Xr(t,e,8,l)&&(d=!0),f>9&&Xr(t,e,9,h)&&(d=!0),d}(t,e,n,r,i,o,a,s,u,c,l,h);case 2:return function(t,e,n,r,i,o,a,s,u,c,l,h){var f=!1,d=e.bindings,p=d.length;if(p>0&&_r(t,e,0,n)&&(f=!0),p>1&&_r(t,e,1,r)&&(f=!0),p>2&&_r(t,e,2,i)&&(f=!0),p>3&&_r(t,e,3,o)&&(f=!0),p>4&&_r(t,e,4,a)&&(f=!0),p>5&&_r(t,e,5,s)&&(f=!0),p>6&&_r(t,e,6,u)&&(f=!0),p>7&&_r(t,e,7,c)&&(f=!0),p>8&&_r(t,e,8,l)&&(f=!0),p>9&&_r(t,e,9,h)&&(f=!0),f){var y=e.text.prefix;p>0&&(y+=ao(n,d[0])),p>1&&(y+=ao(r,d[1])),p>2&&(y+=ao(i,d[2])),p>3&&(y+=ao(o,d[3])),p>4&&(y+=ao(a,d[4])),p>5&&(y+=ao(s,d[5])),p>6&&(y+=ao(u,d[6])),p>7&&(y+=ao(c,d[7])),p>8&&(y+=ao(l,d[8])),p>9&&(y+=ao(h,d[9]));var v=ir(t,e.nodeIndex).renderText;t.renderer.setValue(v,y)}return f}(t,e,n,r,i,o,a,s,u,c,l,h);case 16384:return function(t,e,n,r,i,o,a,s,u,c,l,h){var f=ar(t,e.nodeIndex),d=f.instance,p=!1,y=void 0,v=e.bindings.length;return v>0&&wr(t,e,0,n)&&(p=!0,y=Ki(t,f,e,0,n,y)),v>1&&wr(t,e,1,r)&&(p=!0,y=Ki(t,f,e,1,r,y)),v>2&&wr(t,e,2,i)&&(p=!0,y=Ki(t,f,e,2,i,y)),v>3&&wr(t,e,3,o)&&(p=!0,y=Ki(t,f,e,3,o,y)),v>4&&wr(t,e,4,a)&&(p=!0,y=Ki(t,f,e,4,a,y)),v>5&&wr(t,e,5,s)&&(p=!0,y=Ki(t,f,e,5,s,y)),v>6&&wr(t,e,6,u)&&(p=!0,y=Ki(t,f,e,6,u,y)),v>7&&wr(t,e,7,c)&&(p=!0,y=Ki(t,f,e,7,c,y)),v>8&&wr(t,e,8,l)&&(p=!0,y=Ki(t,f,e,8,l,y)),v>9&&wr(t,e,9,h)&&(p=!0,y=Ki(t,f,e,9,h,y)),y&&d.ngOnChanges(y),65536&e.flags&&rr(t,256,e.nodeIndex)&&d.ngOnInit(),262144&e.flags&&d.ngDoCheck(),p}(t,e,n,r,i,o,a,s,u,c,l,h);case 32:case 64:case 128:return function(t,e,n,r,i,o,a,s,u,c,l,h){var f=e.bindings,d=!1,p=f.length;if(p>0&&_r(t,e,0,n)&&(d=!0),p>1&&_r(t,e,1,r)&&(d=!0),p>2&&_r(t,e,2,i)&&(d=!0),p>3&&_r(t,e,3,o)&&(d=!0),p>4&&_r(t,e,4,a)&&(d=!0),p>5&&_r(t,e,5,s)&&(d=!0),p>6&&_r(t,e,6,u)&&(d=!0),p>7&&_r(t,e,7,c)&&(d=!0),p>8&&_r(t,e,8,l)&&(d=!0),p>9&&_r(t,e,9,h)&&(d=!0),d){var y=sr(t,e.nodeIndex),v=void 0;switch(201347067&e.flags){case 32:v=new Array(f.length),p>0&&(v[0]=n),p>1&&(v[1]=r),p>2&&(v[2]=i),p>3&&(v[3]=o),p>4&&(v[4]=a),p>5&&(v[5]=s),p>6&&(v[6]=u),p>7&&(v[7]=c),p>8&&(v[8]=l),p>9&&(v[9]=h);break;case 64:v={},p>0&&(v[f[0].name]=n),p>1&&(v[f[1].name]=r),p>2&&(v[f[2].name]=i),p>3&&(v[f[3].name]=o),p>4&&(v[f[4].name]=a),p>5&&(v[f[5].name]=s),p>6&&(v[f[6].name]=u),p>7&&(v[f[7].name]=c),p>8&&(v[f[8].name]=l),p>9&&(v[f[9].name]=h);break;case 128:var m=n;switch(p){case 1:v=m.transform(n);break;case 2:v=m.transform(r);break;case 3:v=m.transform(r,i);break;case 4:v=m.transform(r,i,o);break;case 5:v=m.transform(r,i,o,a);break;case 6:v=m.transform(r,i,o,a,s);break;case 7:v=m.transform(r,i,o,a,s,u);break;case 8:v=m.transform(r,i,o,a,s,u,c);break;case 9:v=m.transform(r,i,o,a,s,u,c,l);break;case 10:v=m.transform(r,i,o,a,s,u,c,l,h)}}y.value=v}return d}(t,e,n,r,i,o,a,s,u,c,l,h);default:throw\"unreachable\"}}(t,e,i,o,a,s,u,c,l,h,f,d):function(t,e,n){switch(201347067&e.flags){case 1:return function(t,e,n){for(var r=!1,i=0;i<n.length;i++)Xr(t,e,i,n[i])&&(r=!0);return r}(t,e,n);case 2:return function(t,e,n){for(var r=e.bindings,i=!1,o=0;o<n.length;o++)_r(t,e,o,n[o])&&(i=!0);if(i){var a=\"\";for(o=0;o<n.length;o++)a+=ao(n[o],r[o]);a=e.text.prefix+a;var s=ir(t,e.nodeIndex).renderText;t.renderer.setValue(s,a)}return i}(t,e,n);case 16384:return function(t,e,n){for(var r=ar(t,e.nodeIndex),i=r.instance,o=!1,a=void 0,s=0;s<n.length;s++)wr(t,e,s,n[s])&&(o=!0,a=Ki(t,r,e,s,n[s],a));return a&&i.ngOnChanges(a),65536&e.flags&&rr(t,256,e.nodeIndex)&&i.ngOnInit(),262144&e.flags&&i.ngDoCheck(),o}(t,e,n);case 32:case 64:case 128:return function(t,e,n){for(var i=e.bindings,o=!1,a=0;a<n.length;a++)_r(t,e,a,n[a])&&(o=!0);if(o){var s=sr(t,e.nodeIndex),u=void 0;switch(201347067&e.flags){case 32:u=n;break;case 64:for(u={},a=0;a<n.length;a++)u[i[a].name]=n[a];break;case 128:var c=n[0],l=n.slice(1);u=c.transform.apply(c,Object(r.i)(l))}s.value=u}return o}(t,e,n);default:throw\"unreachable\"}}(t,e,i)}function wo(t){var e=t.def;if(4&e.nodeFlags)for(var n=0;n<e.nodes.length;n++){var r=e.nodes[n];if(4&r.flags){var i=or(t,n).template._projectedViews;if(i)for(var o=0;o<i.length;o++){var a=i[o];a.state|=32,Cr(a,t)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function _o(t,e,n,r,i,o,a,s,u,c,l,h,f){return 0===n?function(t,e,n,r,i,o,a,s,u,c,l,h){var f=e.bindings.length;f>0&&Er(t,e,0,n),f>1&&Er(t,e,1,r),f>2&&Er(t,e,2,i),f>3&&Er(t,e,3,o),f>4&&Er(t,e,4,a),f>5&&Er(t,e,5,s),f>6&&Er(t,e,6,u),f>7&&Er(t,e,7,c),f>8&&Er(t,e,8,l),f>9&&Er(t,e,9,h)}(t,e,r,i,o,a,s,u,c,l,h,f):function(t,e,n){for(var r=0;r<n.length;r++)Er(t,e,r,n[r])}(t,e,r),!1}function Eo(t,e){if(ur(t,e.nodeIndex).dirty)throw lr(cr.createDebugContext(t,e.nodeIndex),\"Query \"+e.query.id+\" not dirty\",\"Query \"+e.query.id+\" dirty\",0!=(1&t.state))}function So(t){if(!(128&t.state)){if(Io(t,Co.Destroy),To(t,Co.Destroy),Gi(t,131072),t.disposables)for(var e=0;e<t.disposables.length;e++)t.disposables[e]();!function(t){if(16&t.state){var e=Ir(t);if(e){var n=e.template._projectedViews;n&&(ci(n,n.indexOf(t)),cr.dirtyParentQueries(t))}}}(t),t.renderer.destroyNode&&function(t){for(var e=t.def.nodes.length,n=0;n<e;n++){var r=t.def.nodes[n];1&r.flags?t.renderer.destroyNode(or(t,n).renderElement):2&r.flags?t.renderer.destroyNode(ir(t,n).renderText):(67108864&r.flags||134217728&r.flags)&&ur(t,n).destroy()}}(t),Nr(t)&&t.renderer.destroy(),t.state|=128}}var Co=function(t){return t[t.CreateViewNodes=0]=\"CreateViewNodes\",t[t.CheckNoChanges=1]=\"CheckNoChanges\",t[t.CheckNoChangesProjectedViews=2]=\"CheckNoChangesProjectedViews\",t[t.CheckAndUpdate=3]=\"CheckAndUpdate\",t[t.CheckAndUpdateProjectedViews=4]=\"CheckAndUpdateProjectedViews\",t[t.Destroy=5]=\"Destroy\",t}({});function To(t,e){var n=t.def;if(33554432&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];33554432&i.flags?ko(or(t,r).componentView,e):0==(33554432&i.childFlags)&&(r+=i.childCount)}}function Io(t,e){var n=t.def;if(16777216&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];if(16777216&i.flags)for(var o=or(t,r).viewContainer._embeddedViews,a=0;a<o.length;a++)ko(o[a],e);else 0==(16777216&i.childFlags)&&(r+=i.childCount)}}function ko(t,e){var n=t.state;switch(e){case Co.CheckNoChanges:0==(128&n)&&(12==(12&n)?mo(t):64&n&&Oo(t,Co.CheckNoChangesProjectedViews));break;case Co.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?mo(t):64&n&&Oo(t,e));break;case Co.CheckAndUpdate:0==(128&n)&&(12==(12&n)?go(t):64&n&&Oo(t,Co.CheckAndUpdateProjectedViews));break;case Co.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?go(t):64&n&&Oo(t,e));break;case Co.Destroy:So(t);break;case Co.CreateViewNodes:vo(t)}}function Oo(t,e){Io(t,e),To(t,e)}function No(t,e,n,r){if(t.def.nodeFlags&e&&t.def.nodeFlags&n)for(var i=t.def.nodes.length,o=0;o<i;o++){var a=t.def.nodes[o];if(a.flags&e&&a.flags&n)switch(cr.setCurrentNode(t,a.nodeIndex),r){case 0:$i(t,a);break;case 1:Eo(t,a)}a.childFlags&e&&a.childFlags&n||(o+=a.childCount)}}var Ao=!1;function Do(t,e,n,r,i,o){var a=i.injector.get(At);return ho(Ro(t,i,a,e,n),r,o)}function xo(t,e,n,r,i,o){var a=i.injector.get(At),s=Ro(t,i,new ha(a),e,n),u=Wo(r);return ca(Zo.create,ho,null,[s,u,o])}function Ro(t,e,n,r,i){var o=e.injector.get(Mt),a=e.injector.get(Te),s=n.createRenderer(null,null);return{ngModule:e,injector:t,projectableNodes:r,selectorOrNode:i,sanitizer:o,rendererFactory:n,renderer:s,errorHandler:a}}function Po(t,e,n,r){var i=Wo(n);return ca(Zo.create,lo,null,[t,e,i,r])}function Mo(t,e,n,r){return n=qo.get(e.element.componentProvider.provider.token)||Wo(n),ca(Zo.create,fo,null,[t,e,n,r])}function jo(t,e,n,r){return Ti(t,e,n,function(t){var e=function(t){var e=!1,n=!1;return 0===Lo.size?{hasOverrides:e,hasDeprecatedOverrides:n}:(t.providers.forEach(function(t){var r=Lo.get(t.token);3840&t.flags&&r&&(e=!0,n=n||r.deprecatedBehavior)}),t.modules.forEach(function(t){Fo.forEach(function(r,i){p(i).providedIn===t&&(e=!0,n=n||r.deprecatedBehavior)})}),{hasOverrides:e,hasDeprecatedOverrides:n})}(t),n=e.hasDeprecatedOverrides;return e.hasOverrides?(function(t){for(var e=0;e<t.providers.length;e++){var r=t.providers[e];n&&(r.flags|=4096);var i=Lo.get(r.token);i&&(r.flags=-3841&r.flags|i.flags,r.deps=Rr(i.deps),r.value=i.value)}if(Fo.size>0){var o=new Set(t.modules);Fo.forEach(function(e,r){if(o.has(p(r).providedIn)){var i={token:r,flags:e.flags|(n?4096:0),deps:Rr(e.deps),value:e.value,index:t.providers.length};t.providers.push(i),t.providersByKey[yr(r)]=i}})}}(t=t.factory(function(){return dr})),t):t}(r))}var Lo=new Map,Fo=new Map,qo=new Map;function Uo(t){var e;Lo.set(t.token,t),\"function\"==typeof t.token&&(e=p(t.token))&&\"function\"==typeof e.providedIn&&Fo.set(t.token,t)}function Vo(t,e){var n=jr(e.viewDefFactory),r=jr(n.nodes[0].element.componentView);qo.set(t,r)}function Bo(){Lo.clear(),Fo.clear(),qo.clear()}function Wo(t){if(0===Lo.size)return t;var e=function(t){for(var e=[],n=null,r=0;r<t.nodes.length;r++){var i=t.nodes[r];1&i.flags&&(n=i),n&&3840&i.flags&&Lo.has(i.provider.token)&&(e.push(n.nodeIndex),n=null)}return e}(t);if(0===e.length)return t;t=t.factory(function(){return dr});for(var n=0;n<e.length;n++)r(t,e[n]);return t;function r(t,e){for(var n=e+1;n<t.nodes.length;n++){var r=t.nodes[n];if(1&r.flags)return;if(3840&r.flags){var i=r.provider,o=Lo.get(i.token);o&&(r.flags=-3841&r.flags|o.flags,i.deps=Rr(o.deps),i.value=o.value)}}}}function zo(t,e,n,r,i,o,a,s,u,c,l,h,f){var d=t.def.nodes[e];return bo(t,d,n,r,i,o,a,s,u,c,l,h,f),224&d.flags?sr(t,e).value:void 0}function Ho(t,e,n,r,i,o,a,s,u,c,l,h,f){var d=t.def.nodes[e];return _o(t,d,n,r,i,o,a,s,u,c,l,h,f),224&d.flags?sr(t,e).value:void 0}function Qo(t){return ca(Zo.detectChanges,go,null,[t])}function Ko(t){return ca(Zo.checkNoChanges,mo,null,[t])}function Go(t){return ca(Zo.destroy,So,null,[t])}var Yo,Xo,Jo,Zo=function(t){return t[t.create=0]=\"create\",t[t.detectChanges=1]=\"detectChanges\",t[t.checkNoChanges=2]=\"checkNoChanges\",t[t.destroy=3]=\"destroy\",t[t.handleEvent=4]=\"handleEvent\",t}({});function $o(t,e){Xo=t,Jo=e}function ta(t,e,n,r){return $o(t,e),ca(Zo.handleEvent,t.def.handleEvent,null,[t,e,n,r])}function ea(t,e){if(128&t.state)throw fr(Zo[Yo]);return $o(t,oa(t,0)),t.def.updateDirectives(function(t,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=t.def.nodes[n];return 0===e?ra(t,a,r,i):ia(t,a,r,i),16384&a.flags&&$o(t,oa(t,n)),224&a.flags?sr(t,a.nodeIndex).value:void 0},t)}function na(t,e){if(128&t.state)throw fr(Zo[Yo]);return $o(t,aa(t,0)),t.def.updateRenderer(function(t,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=t.def.nodes[n];return 0===e?ra(t,a,r,i):ia(t,a,r,i),3&a.flags&&$o(t,aa(t,n)),224&a.flags?sr(t,a.nodeIndex).value:void 0},t)}function ra(t,e,n,i){if(bo.apply(void 0,Object(r.i)([t,e,n],i))){var o=1===n?i[0]:i;if(16384&e.flags){for(var a={},s=0;s<e.bindings.length;s++){var u=e.bindings[s],c=o[s];8&u.flags&&(a[(d=u.nonMinifiedName,\"ng-reflect-\"+d.replace(/[$@]/g,\"_\").replace(z,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return\"-\"+t[1].toLowerCase()}))]=H(c))}var l=e.parent,h=or(t,l.nodeIndex).renderElement;if(l.element.name)for(var f in a)null!=(c=a[f])?t.renderer.setAttribute(h,f,c):t.renderer.removeAttribute(h,f);else t.renderer.setValue(h,\"bindings=\"+JSON.stringify(a,null,2))}}var d}function ia(t,e,n,i){_o.apply(void 0,Object(r.i)([t,e,n],i))}function oa(t,e){for(var n=e;n<t.def.nodes.length;n++){var r=t.def.nodes[n];if(16384&r.flags&&r.bindings&&r.bindings.length)return n}return null}function aa(t,e){for(var n=e;n<t.def.nodes.length;n++){var r=t.def.nodes[n];if(3&r.flags&&r.bindings&&r.bindings.length)return n}return null}var sa=function(){function t(t,e){this.view=t,this.nodeIndex=e,null==e&&(this.nodeIndex=e=0),this.nodeDef=t.def.nodes[e];for(var n=this.nodeDef,r=t;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&r;)n=kr(r),r=r.parent;this.elDef=n,this.elView=r}return Object.defineProperty(t.prototype,\"elOrCompView\",{get:function(){return or(this.elView,this.elDef.nodeIndex).componentView||this.view},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"injector\",{get:function(){return wi(this.elView,this.elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"component\",{get:function(){return this.elOrCompView.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"context\",{get:function(){return this.elOrCompView.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"providerTokens\",{get:function(){var t=[];if(this.elDef)for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&t.push(n.provider.token),e+=n.childCount}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"references\",{get:function(){var t={};if(this.elDef){ua(this.elView,this.elDef,t);for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&ua(this.elView,n,t),e+=n.childCount}}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"componentRenderElement\",{get:function(){var t=function(t){for(;t&&!Nr(t);)t=t.parent;return t.parent?or(t.parent,kr(t).nodeIndex):null}(this.elOrCompView);return t?t.renderElement:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"renderNode\",{get:function(){return 2&this.nodeDef.flags?Or(this.view,this.nodeDef):Or(this.elView,this.elDef)},enumerable:!0,configurable:!0}),t.prototype.logError=function(t){for(var e,n,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];2&this.nodeDef.flags?(e=this.view.def,n=this.nodeDef.nodeIndex):(e=this.elView.def,n=this.elDef.nodeIndex);var a=function(t,e){for(var n=-1,r=0;r<=e;r++)3&t.nodes[r].flags&&n++;return n}(e,n),s=-1;e.factory(function(){var e;return++s===a?(e=t.error).bind.apply(e,Object(r.i)([t],i)):dr}),s<a&&(t.error(\"Illegal state: the ViewDefinitionFactory did not call the logger!\"),t.error.apply(t,Object(r.i)(i)))},t}();function ua(t,e,n){for(var r in e.references)n[r]=eo(t,e,e.references[r])}function ca(t,e,n,r){var i=Yo,o=Xo,a=Jo;try{Yo=t;var s=e.apply(n,r);return Xo=o,Jo=a,Yo=i,s}catch(u){if(Ee(u)||!Xo)throw u;throw function(t,e){return t instanceof Error||(t=new Error(t.toString())),hr(t,e),t}(u,la())}}function la(){return Xo?new sa(Xo,Jo):null}var ha=function(){function t(t){this.delegate=t}return t.prototype.createRenderer=function(t,e){return new fa(this.delegate.createRenderer(t,e))},t.prototype.begin=function(){this.delegate.begin&&this.delegate.begin()},t.prototype.end=function(){this.delegate.end&&this.delegate.end()},t.prototype.whenRenderingDone=function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)},t}(),fa=function(){function t(t){this.delegate=t,this.debugContextFactory=la,this.data=this.delegate.data}return t.prototype.createDebugContext=function(t){return this.debugContextFactory(t)},t.prototype.destroyNode=function(t){!function(t){xn.delete(t.nativeNode)}(Rn(t)),this.delegate.destroyNode&&this.delegate.destroyNode(t)},t.prototype.destroy=function(){this.delegate.destroy()},t.prototype.createElement=function(t,e){var n=this.delegate.createElement(t,e),r=this.createDebugContext(n);if(r){var i=new Nn(n,null,r);i.name=t,Pn(i)}return n},t.prototype.createComment=function(t){var e=this.delegate.createComment(t),n=this.createDebugContext(e);return n&&Pn(new On(e,null,n)),e},t.prototype.createText=function(t){var e=this.delegate.createText(t),n=this.createDebugContext(e);return n&&Pn(new On(e,null,n)),e},t.prototype.appendChild=function(t,e){var n=Rn(t),r=Rn(e);n&&r&&n instanceof Nn&&n.addChild(r),this.delegate.appendChild(t,e)},t.prototype.insertBefore=function(t,e,n){var r=Rn(t),i=Rn(e),o=Rn(n);r&&i&&r instanceof Nn&&r.insertBefore(o,i),this.delegate.insertBefore(t,e,n)},t.prototype.removeChild=function(t,e){var n=Rn(t),r=Rn(e);n&&r&&n instanceof Nn&&n.removeChild(r),this.delegate.removeChild(t,e)},t.prototype.selectRootElement=function(t,e){var n=this.delegate.selectRootElement(t,e),r=la();return r&&Pn(new Nn(n,null,r)),n},t.prototype.setAttribute=function(t,e,n,r){var i=Rn(t);i&&i instanceof Nn&&(i.attributes[r?r+\":\"+e:e]=n),this.delegate.setAttribute(t,e,n,r)},t.prototype.removeAttribute=function(t,e,n){var r=Rn(t);r&&r instanceof Nn&&(r.attributes[n?n+\":\"+e:e]=null),this.delegate.removeAttribute(t,e,n)},t.prototype.addClass=function(t,e){var n=Rn(t);n&&n instanceof Nn&&(n.classes[e]=!0),this.delegate.addClass(t,e)},t.prototype.removeClass=function(t,e){var n=Rn(t);n&&n instanceof Nn&&(n.classes[e]=!1),this.delegate.removeClass(t,e)},t.prototype.setStyle=function(t,e,n,r){var i=Rn(t);i&&i instanceof Nn&&(i.styles[e]=n),this.delegate.setStyle(t,e,n,r)},t.prototype.removeStyle=function(t,e,n){var r=Rn(t);r&&r instanceof Nn&&(r.styles[e]=null),this.delegate.removeStyle(t,e,n)},t.prototype.setProperty=function(t,e,n){var r=Rn(t);r&&r instanceof Nn&&(r.properties[e]=n),this.delegate.setProperty(t,e,n)},t.prototype.listen=function(t,e,n){if(\"string\"!=typeof t){var r=Rn(t);r&&r.listeners.push(new kn(e,n))}return this.delegate.listen(t,e,n)},t.prototype.parentNode=function(t){return this.delegate.parentNode(t)},t.prototype.nextSibling=function(t){return this.delegate.nextSibling(t)},t.prototype.setValue=function(t,e){return this.delegate.setValue(t,e)},t}();function da(t,e,n){return new pa(t,e,n)}var pa=function(t){function e(e,n,r){var i=t.call(this)||this;return i.moduleType=e,i._bootstrapComponents=n,i._ngModuleDefFactory=r,i}return Object(r.d)(e,t),e.prototype.create=function(t){!function(){if(!Ao){Ao=!0;var t=Ut()?{setCurrentNode:$o,createRootView:xo,createEmbeddedView:Po,createComponentView:Mo,createNgModuleRef:jo,overrideProvider:Uo,overrideComponentView:Vo,clearOverrides:Bo,checkAndUpdateView:Qo,checkNoChangesView:Ko,destroyView:Go,createDebugContext:function(t,e){return new sa(t,e)},handleEvent:ta,updateDirectives:ea,updateRenderer:na}:{setCurrentNode:function(){},createRootView:Do,createEmbeddedView:lo,createComponentView:fo,createNgModuleRef:Ti,overrideProvider:dr,overrideComponentView:dr,clearOverrides:dr,checkAndUpdateView:go,checkNoChangesView:mo,destroyView:So,createDebugContext:function(t,e){return new sa(t,e)},handleEvent:function(t,e,n,r){return t.def.handleEvent(t,e,n,r)},updateDirectives:function(t,e){return t.def.updateDirectives(0===e?zo:Ho,t)},updateRenderer:function(t,e){return t.def.updateRenderer(0===e?zo:Ho,t)}};cr.setCurrentNode=t.setCurrentNode,cr.createRootView=t.createRootView,cr.createEmbeddedView=t.createEmbeddedView,cr.createComponentView=t.createComponentView,cr.createNgModuleRef=t.createNgModuleRef,cr.overrideProvider=t.overrideProvider,cr.overrideComponentView=t.overrideComponentView,cr.clearOverrides=t.clearOverrides,cr.checkAndUpdateView=t.checkAndUpdateView,cr.checkNoChangesView=t.checkNoChangesView,cr.destroyView=t.destroyView,cr.resolveDep=Hi,cr.createDebugContext=t.createDebugContext,cr.handleEvent=t.handleEvent,cr.updateDirectives=t.updateDirectives,cr.updateRenderer=t.updateRenderer,cr.dirtyParentQueries=Zi}}();var e=function(t){var e=Array.from(t.providers),n=Array.from(t.modules),r={};for(var i in t.providersByKey)r[i]=t.providersByKey[i];return{factory:t.factory,isRoot:t.isRoot,providers:e,modules:n,providersByKey:r}}(jr(this._ngModuleDefFactory));return cr.createNgModuleRef(this.moduleType,t||nt.NULL,this._bootstrapComponents,e)},e}(It)},DKTb:function(t,e,n){\"use strict\";function r(t){setTimeout(function(){throw t},0)}n.d(e,\"a\",function(){return r})},\"En8+\":function(t,e,n){\"use strict\";function r(){return\"function\"==typeof Symbol&&Symbol.iterator?Symbol.iterator:\"@@iterator\"}n.d(e,\"a\",function(){return i});var i=r()},\"F/XL\":function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return a});var r=n(\"nkY7\"),i=n(\"IUTb\"),o=n(\"JF+6\");function a(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return Object(r.a)(n)?(t.pop(),Object(o.a)(t,n)):Object(i.a)(t)}},FFOo:function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return l});var r=n(\"mrSG\"),i=n(\"2Bdj\"),o=n(\"6ahw\"),a=n(\"pugT\"),s=n(\"L/V9\"),u=n(\"iLxQ\"),c=n(\"DKTb\"),l=function(t){function e(n,r,i){var a=t.call(this)||this;switch(a.syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,arguments.length){case 0:a.destination=o.a;break;case 1:if(!n){a.destination=o.a;break}if(\"object\"==typeof n){n instanceof e?(a.syncErrorThrowable=n.syncErrorThrowable,a.destination=n,n.add(a)):(a.syncErrorThrowable=!0,a.destination=new h(a,n));break}default:a.syncErrorThrowable=!0,a.destination=new h(a,n,r,i)}return a}return r.d(e,t),e.prototype[s.a]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(a.a),h=function(t){function e(e,n,r,a){var s,u=t.call(this)||this;u._parentSubscriber=e;var c=u;return Object(i.a)(n)?s=n:n&&(s=n.next,r=n.error,a=n.complete,n!==o.a&&(c=Object.create(n),Object(i.a)(c.unsubscribe)&&u.add(c.unsubscribe.bind(c)),c.unsubscribe=u.unsubscribe.bind(u))),u._context=c,u._next=s,u._error=r,u._complete=a,u}return r.d(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;u.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=u.a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(c.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(c.a)(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};u.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),u.a.useDeprecatedSynchronousErrorHandling)throw n;Object(c.a)(n)}},e.prototype.__tryOrSetError=function(t,e,n){if(!u.a.useDeprecatedSynchronousErrorHandling)throw new Error(\"bad call\");try{e.call(this._context,n)}catch(r){return u.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(c.a)(r),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(l)},Fxb1:function(t,e,n){\"use strict\";var r=n(\"+tJ4\"),i=n(\"DKTb\"),o=n(\"En8+\"),a=n(\"xTla\"),s=n(\"2ePl\"),u=n(\"/WYv\"),c=n(\"McSo\");n.d(e,\"a\",function(){return l});var l=function(t){if(t&&\"function\"==typeof t[a.a])return l=t,function(t){var e=l[a.a]();if(\"function\"!=typeof e.subscribe)throw new TypeError(\"Provided object does not correctly implement Symbol.observable\");return e.subscribe(t)};if(Object(s.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,function(t){return n.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,i.a),t};if(t&&\"function\"==typeof t[o.a])return e=t,function(t){for(var n=e[o.a]();;){var r=n.next();if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return\"function\"==typeof n.return&&t.add(function(){n.return&&n.return()}),t};var e,n,l,h=Object(c.a)(t)?\"an invalid object\":\"'\"+t+\"'\";throw new TypeError(\"You provided \"+h+\" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.\")}},G5J1:function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return i}),n.d(e,\"b\",function(){return o});var r=n(\"6blF\"),i=new r.a(function(t){return t.complete()});function o(t){return t?function(t){return new r.a(function(e){return t.schedule(function(){return e.complete()})})}(t):i}},HPGL:function(t,e,n){\"use strict\";function r(){if(\"undefined\"==typeof process){var t=\"undefined\"!=typeof window?window:{},e=Date.now(),n=!1;t.document.addEventListener(\"deviceready\",function(){console.log(\"Ionic Native: deviceready event fired after \"+(Date.now()-e)+\" ms\"),n=!0}),setTimeout(function(){!n&&t.cordova&&console.warn(\"Ionic Native: deviceready did not fire within 5000ms. This can happen when plugins are in an inconsistent state. Try removing plugins from plugins/ and reinstalling them.\")},5e3)}}n.d(e,\"a\",function(){return r})},IUTb:function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return a});var r=n(\"6blF\"),i=n(\"+tJ4\"),o=n(\"JF+6\");function a(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},Ip0R:function(t,e,n){\"use strict\";n.d(e,\"q\",function(){return m}),n.d(e,\"j\",function(){return b}),n.d(e,\"k\",function(){return g}),n.d(e,\"r\",function(){return w}),n.d(e,\"b\",function(){return k}),n.d(e,\"h\",function(){return E}),n.d(e,\"i\",function(){return C}),n.d(e,\"c\",function(){return O}),n.d(e,\"p\",function(){return N}),n.d(e,\"o\",function(){return D}),n.d(e,\"n\",function(){return x}),n.d(e,\"m\",function(){return o}),n.d(e,\"e\",function(){return a}),n.d(e,\"g\",function(){return s}),n.d(e,\"a\",function(){return u}),n.d(e,\"d\",function(){return h}),n.d(e,\"l\",function(){return f}),n.d(e,\"f\",function(){return c});var r=n(\"CcnG\"),i=n(\"mrSG\"),o=function(){return function(){}}(),a=new r.p(\"Location Initialized\"),s=function(){return function(){}}(),u=new r.p(\"appBaseHref\"),c=function(){function t(t){var n=this;this._subject=new r.m,this._platformStrategy=t;var i=this._platformStrategy.getBaseHref();this._baseHref=e.stripTrailingSlash(l(i)),this._platformStrategy.onPopState(function(t){n._subject.emit({url:n.path(!0),pop:!0,state:t.state,type:t.type})})}var e;return e=t,t.prototype.path=function(t){return void 0===t&&(t=!1),this.normalize(this._platformStrategy.path(t))},t.prototype.isCurrentPathEqualTo=function(t,n){return void 0===n&&(n=\"\"),this.path()==this.normalize(t+e.normalizeQueryParams(n))},t.prototype.normalize=function(t){return e.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,l(t)))},t.prototype.prepareExternalUrl=function(t){return t&&\"/\"!==t[0]&&(t=\"/\"+t),this._platformStrategy.prepareExternalUrl(t)},t.prototype.go=function(t,e,n){void 0===e&&(e=\"\"),void 0===n&&(n=null),this._platformStrategy.pushState(n,\"\",t,e)},t.prototype.replaceState=function(t,e,n){void 0===e&&(e=\"\"),void 0===n&&(n=null),this._platformStrategy.replaceState(n,\"\",t,e)},t.prototype.forward=function(){this._platformStrategy.forward()},t.prototype.back=function(){this._platformStrategy.back()},t.prototype.subscribe=function(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})},t.normalizeQueryParams=function(t){return t&&\"?\"!==t[0]?\"?\"+t:t},t.joinWithSlash=function(t,e){if(0==t.length)return e;if(0==e.length)return t;var n=0;return t.endsWith(\"/\")&&n++,e.startsWith(\"/\")&&n++,2==n?t+e.substring(1):1==n?t+e:t+\"/\"+e},t.stripTrailingSlash=function(t){var e=t.match(/#|\\?|$/),n=e&&e.index||t.length;return t.slice(0,n-(\"/\"===t[n-1]?1:0))+t.slice(n)},t}();function l(t){return t.replace(/\\/index.html$/,\"\")}var h=function(t){function e(e,n){var r=t.call(this)||this;return r._platformLocation=e,r._baseHref=\"\",null!=n&&(r._baseHref=n),r}return Object(i.d)(e,t),e.prototype.onPopState=function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)},e.prototype.getBaseHref=function(){return this._baseHref},e.prototype.path=function(t){void 0===t&&(t=!1);var e=this._platformLocation.hash;return null==e&&(e=\"#\"),e.length>0?e.substring(1):e},e.prototype.prepareExternalUrl=function(t){var e=c.joinWithSlash(this._baseHref,t);return e.length>0?\"#\"+e:e},e.prototype.pushState=function(t,e,n,r){var i=this.prepareExternalUrl(n+c.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)},e.prototype.replaceState=function(t,e,n,r){var i=this.prepareExternalUrl(n+c.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)},e.prototype.forward=function(){this._platformLocation.forward()},e.prototype.back=function(){this._platformLocation.back()},e}(s),f=function(t){function e(e,n){var r=t.call(this)||this;if(r._platformLocation=e,null==n&&(n=r._platformLocation.getBaseHrefFromDOM()),null==n)throw new Error(\"No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.\");return r._baseHref=n,r}return Object(i.d)(e,t),e.prototype.onPopState=function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)},e.prototype.getBaseHref=function(){return this._baseHref},e.prototype.prepareExternalUrl=function(t){return c.joinWithSlash(this._baseHref,t)},e.prototype.path=function(t){void 0===t&&(t=!1);var e=this._platformLocation.pathname+c.normalizeQueryParams(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?\"\"+e+n:e},e.prototype.pushState=function(t,e,n,r){var i=this.prepareExternalUrl(n+c.normalizeQueryParams(r));this._platformLocation.pushState(t,e,i)},e.prototype.replaceState=function(t,e,n,r){var i=this.prepareExternalUrl(n+c.normalizeQueryParams(r));this._platformLocation.replaceState(t,e,i)},e.prototype.forward=function(){this._platformLocation.forward()},e.prototype.back=function(){this._platformLocation.back()},e}(s),d=void 0,p=[\"en\",[[\"a\",\"p\"],[\"AM\",\"PM\"],d],[[\"AM\",\"PM\"],d,d],[[\"S\",\"M\",\"T\",\"W\",\"T\",\"F\",\"S\"],[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],[\"Su\",\"Mo\",\"Tu\",\"We\",\"Th\",\"Fr\",\"Sa\"]],d,[[\"J\",\"F\",\"M\",\"A\",\"M\",\"J\",\"J\",\"A\",\"S\",\"O\",\"N\",\"D\"],[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"]],d,[[\"B\",\"A\"],[\"BC\",\"AD\"],[\"Before Christ\",\"Anno Domini\"]],0,[6,0],[\"M/d/yy\",\"MMM d, y\",\"MMMM d, y\",\"EEEE, MMMM d, y\"],[\"h:mm a\",\"h:mm:ss a\",\"h:mm:ss a z\",\"h:mm:ss a zzzz\"],[\"{1}, {0}\",d,\"{1} 'at' {0}\",d],[\".\",\",\",\";\",\"%\",\"+\",\"-\",\"E\",\"\\xd7\",\"\\u2030\",\"\\u221e\",\"NaN\",\":\"],[\"#,##0.###\",\"#,##0%\",\"\\xa4#,##0.00\",\"#E0\"],\"$\",\"US Dollar\",{},function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\\.?/,\"\").length;return 1===e&&0===n?1:5}],y={},v=function(t){return t[t.Zero=0]=\"Zero\",t[t.One=1]=\"One\",t[t.Two=2]=\"Two\",t[t.Few=3]=\"Few\",t[t.Many=4]=\"Many\",t[t.Other=5]=\"Other\",t}({}),m=new r.p(\"UseV4Plurals\"),g=function(){return function(){}}(),b=function(t){function e(e,n){var r=t.call(this)||this;return r.locale=e,r.deprecatedPluralFn=n,r}return Object(i.d)(e,t),e.prototype.getPluralCategory=function(t,e){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(e||this.locale,t):function(t){return function(t){var e=t.toLowerCase().replace(/_/g,\"-\"),n=y[e];if(n)return n;var r=e.split(\"-\")[0];if(n=y[r])return n;if(\"en\"===r)return p;throw new Error('Missing locale data for the locale \"'+t+'\".')}(t)[18]}(e||this.locale)(t)){case v.Zero:return\"zero\";case v.One:return\"one\";case v.Two:return\"two\";case v.Few:return\"few\";case v.Many:return\"many\";default:return\"other\"}},e}(g);function w(t,e){var n,r;e=encodeURIComponent(e);try{for(var o=Object(i.j)(t.split(\";\")),a=o.next();!a.done;a=o.next()){var s=a.value,u=s.indexOf(\"=\"),c=Object(i.h)(-1==u?[s,\"\"]:[s.slice(0,u),s.slice(u+1)],2),l=c[1];if(c[0].trim()===e)return decodeURIComponent(l)}}catch(h){n={error:h}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return null}var _=function(){function t(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}return Object.defineProperty(t.prototype,\"first\",{get:function(){return 0===this.index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"last\",{get:function(){return this.index===this.count-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"even\",{get:function(){return this.index%2==0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"odd\",{get:function(){return!this.even},enumerable:!0,configurable:!0}),t}(),E=function(){function t(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOfDirty=!0,this._differ=null}return Object.defineProperty(t.prototype,\"ngForOf\",{set:function(t){this._ngForOf=t,this._ngForOfDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"ngForTrackBy\",{get:function(){return this._trackByFn},set:function(t){Object(r.X)()&&null!=t&&\"function\"!=typeof t&&console&&console.warn&&console.warn(\"trackBy must be a function, but received \"+JSON.stringify(t)+\". See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information.\"),this._trackByFn=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"ngForTemplate\",{set:function(t){t&&(this._template=t)},enumerable:!0,configurable:!0}),t.prototype.ngDoCheck=function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error(\"Cannot find a differ supporting object '\"+t+\"' of type '\"+((e=t).name||typeof e)+\"'. NgFor only supports binding to Iterables such as Arrays.\")}}var e;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}},t.prototype._applyChanges=function(t){var e=this,n=[];t.forEachOperation(function(t,r,i){if(null==t.previousIndex){var o=e._viewContainer.createEmbeddedView(e._template,new _(null,e._ngForOf,-1,-1),i),a=new S(t,o);n.push(a)}else null==i?e._viewContainer.remove(r):(o=e._viewContainer.get(r),e._viewContainer.move(o,i),a=new S(t,o),n.push(a))});for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);r=0;for(var i=this._viewContainer.length;r<i;r++){var o=this._viewContainer.get(r);o.context.index=r,o.context.count=i,o.context.ngForOf=this._ngForOf}t.forEachIdentityChange(function(t){e._viewContainer.get(t.currentIndex).context.$implicit=t.item})},t.prototype._perViewChange=function(t,e){t.context.$implicit=e.item},t.ngTemplateContextGuard=function(t,e){return!0},t}(),S=function(){return function(t,e){this.record=t,this.view=e}}(),C=function(){function t(t,e){this._viewContainer=t,this._context=new T,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}return Object.defineProperty(t.prototype,\"ngIf\",{set:function(t){this._context.$implicit=this._context.ngIf=t,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"ngIfThen\",{set:function(t){I(\"ngIfThen\",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"ngIfElse\",{set:function(t){I(\"ngIfElse\",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),t.prototype._updateView=function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))},t.ngTemplateGuard_ngIf=function(t,e){return!0},t}(),T=function(){return function(){this.$implicit=null,this.ngIf=null}}();function I(t,e){if(e&&!e.createEmbeddedView)throw new Error(t+\" must be a TemplateRef, but received '\"+Object(r.Bb)(e)+\"'.\")}var k=function(){return function(){}}(),O=new r.p(\"DocumentToken\"),N=\"browser\",A=\"server\";function D(t){return t===A}var x=function(){function t(){}return t.ngInjectableDef=Object(r.S)({providedIn:\"root\",factory:function(){return new R(Object(r.W)(O),window,Object(r.W)(r.l))}}),t}(),R=function(){function t(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=function(){return[0,0]}}return t.prototype.setOffset=function(t){this.offset=Array.isArray(t)?function(){return t}:t},t.prototype.getScrollPosition=function(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]},t.prototype.scrollToPosition=function(t){this.supportScrollRestoration()&&this.window.scrollTo(t[0],t[1])},t.prototype.scrollToAnchor=function(t){if(this.supportScrollRestoration()){t=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(t):t.replace(/(\\\"|\\'\\ |:|\\.|\\[|\\]|,|=)/g,\"\\\\$1\");try{var e=this.document.querySelector(\"#\"+t);if(e)return void this.scrollToElement(e);var n=this.document.querySelector(\"[name='\"+t+\"']\");if(n)return void this.scrollToElement(n)}catch(r){this.errorHandler.handleError(r)}}},t.prototype.setHistoryScrollRestoration=function(t){if(this.supportScrollRestoration()){var e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}},t.prototype.scrollToElement=function(t){var e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])},t.prototype.supportScrollRestoration=function(){try{return!!this.window&&!!this.window.scrollTo}catch(t){return!1}},t}()},\"JF+6\":function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return o});var r=n(\"6blF\"),i=n(\"pugT\");function o(t,e){return new r.a(function(n){var r=new i.a,o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},Ji5e:function(t,e,n){},K9Ia:function(t,e,n){\"use strict\";var r=n(\"mrSG\"),i=n(\"6blF\"),o=n(\"FFOo\"),a=n(\"pugT\"),s=n(\"8g8A\"),u=function(t){function e(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r}return r.d(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(a.a),c=n(\"L/V9\");n.d(e,\"b\",function(){return l}),n.d(e,\"a\",function(){return h});var l=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return r.d(e,t),e}(o.a),h=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return r.d(e,t),e.prototype[c.a]=function(){return new l(this)},e.prototype.lift=function(t){var e=new f(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new s.a;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new s.a;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new s.a;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),a.a.EMPTY):this.isStopped?(t.complete(),a.a.EMPTY):(this.observers.push(t),new u(this,t))},e.prototype.asObservable=function(){var t=new i.a;return t.source=this,t},e.create=function(t,e){return new f(t,e)},e}(i.a),f=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return r.d(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):a.a.EMPTY},e}(h)},\"KOl+\":function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return u}),n.d(e,\"b\",function(){return f}),n.d(e,\"c\",function(){return p}),n.d(e,\"d\",function(){return y});var r=n(\"6blF\"),i=n(\"bne5\"),o={error:\"cordova_not_available\"},a={error:\"plugin_not_installed\"};function s(t){if(\"undefined\"!=typeof window&&window.angular){var e=window.document,n=window.angular.element(e.querySelector(\"[ng-app]\")||e.body).injector();if(n)return n.get(\"$q\")(function(e,n){t(e,n)});console.warn(\"Angular 1 was detected but $q couldn't be retrieved. This is usually when the app is not bootstrapped on the html or body tag. Falling back to native promises which won't trigger an automatic digest when promises resolve.\")}return function(){if(Promise)return new Promise(function(e,n){t(e,n)});console.error(\"No Promise support or polyfill found. To enable Ionic Native support, please add the es6-promise polyfill before this script, or run with a library like Angular or on a recent browser.\")}()}function u(t,e,n){var r,i,s;return\"string\"==typeof t?r=t:(r=t.constructor.getPluginRef(),n=t.constructor.getPluginName(),s=t.constructor.getPluginInstallName()),!(!(i=f(r))||e&&void 0===i[e])||(\"undefined\"!=typeof window&&window.cordova?(function(t,n,r){e?console.warn(\"Native: tried calling \"+t+\".\"+e+\", but the \"+t+\" plugin is not installed.\"):console.warn(\"Native: tried accessing the \"+t+\" plugin but it's not installed.\"),n&&console.warn(\"Install the \"+t+\" plugin: 'ionic cordova plugin add \"+n+\"'\")}(n,s),a):(function(t,n){\"undefined\"==typeof process&&(e?console.warn(\"Native: tried calling \"+t+\".\"+e+\", but Cordova is not available. Make sure to include cordova.js or run in a device/simulator\"):console.warn(\"Native: tried accessing the \"+t+\" plugin but Cordova is not available. Make sure to include cordova.js or run in a device/simulator\"))}(n),o))}function c(t,e,n,r){if(void 0===e&&(e={}),e.sync)return t;if(\"reverse\"===e.callbackOrder)t.unshift(r),t.unshift(n);else if(\"node\"===e.callbackStyle)t.push(function(t,e){t?r(t):n(e)});else if(\"object\"===e.callbackStyle&&e.successName&&e.errorName){var i={};i[e.successName]=n,i[e.errorName]=r,t.push(i)}else if(void 0!==e.successIndex||void 0!==e.errorIndex){var o=function(){e.successIndex>t.length?t[e.successIndex]=n:t.splice(e.successIndex,0,n)},a=function(){e.errorIndex>t.length?t[e.errorIndex]=r:t.splice(e.errorIndex,0,r)};e.successIndex>e.errorIndex?(a(),o()):(o(),a())}else t.push(n),t.push(r);return t}function l(t,e,n,r,i,o){void 0===r&&(r={}),n=c(n,r,i,o);var a=u(t,e);if(!0===a){var s=f(t.constructor.getPluginRef());return s[e].apply(s,n)}return a}function h(t,e,n,r,i,o){if(void 0===r&&(r={}),n=c(n,r,i,o),function(t,e){return t._objectInstance&&(!e||void 0!==t._objectInstance[e])}(t,e))return t._objectInstance[e].apply(t._objectInstance,n)}function f(t){return\"undefined\"!=typeof window?d(window,t):null}function d(t,e){for(var n=e.split(\".\"),r=t,i=0;i<n.length;i++){if(!r)return null;r=r[n[i]]}return r}var p=function(t,e,n){return void 0===n&&(n={}),function(){for(var o,a,u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];return n.sync?l(t,e,u,n):n.observable?function(t,e,n,i){return void 0===i&&(i={}),new r.a(function(r){var o;return(o=i.destruct?l(t,e,n,i,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.next(t)},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.error(t)}):l(t,e,n,i,r.next.bind(r),r.error.bind(r)))&&o.error&&(r.error(o.error),r.complete()),function(){try{if(i.clearFunction)return i.clearWithArgs?l(t,i.clearFunction,n,i,r.next.bind(r),r.error.bind(r)):l(t,i.clearFunction,[])}catch(o){console.warn(\"Unable to clear the previous observable watch for\",t.constructor.getPluginName(),e),console.warn(o)}}})}(t,e,u,n):n.eventObservable&&n.event?(o=n.event,a=n.element,a=\"undefined\"!=typeof window&&a?d(window,a):a||\"undefined\"!=typeof window||{},Object(i.a)(a,o)):n.otherPromise?function(t,e,n,r){return void 0===r&&(r={}),s(function(i,o){var a=l(t,e,n,r);a?a.error?o(a.error):a.then&&a.then(i).catch(o):o({error:\"unexpected_error\"})})}(t,e,u,n):function(t,e,n,r){var i,o;void 0===r&&(r={});var a=s(function(a,s){i=r.destruct?l(t,e,n,r,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a(t)},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return s(t)}):l(t,e,n,r,a,s),o=s});return i&&i.error&&(a.catch(function(){}),\"function\"==typeof o&&o(i.error)),a}(t,e,u,n)}};function y(t,e,n){return void 0===n&&(n={}),function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(n.sync)return h(t,e,i,n);if(n.observable)return new r.a(function(r){var o;return(o=n.destruct?h(t,e,i,n,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.next(t)},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.error(t)}):h(t,e,i,n,r.next.bind(r),r.error.bind(r)))&&o.error&&r.error(o.error),function(){try{return n.clearWithArgs?h(t,n.clearFunction,i,n,r.next.bind(r),r.error.bind(r)):h(t,n.clearFunction,[])}catch(o){console.warn(\"Unable to clear the previous observable watch for\",t.constructor.getPluginName(),e),console.warn(o)}}});if(n.otherPromise)return s(function(r,o){var a;(a=n.destruct?h(t,e,i,n,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r(t)},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o(t)}):h(t,e,i,n,r,o))&&a.then?a.then(r,o):o()});var a,u,c=s(function(r,o){a=n.destruct?h(t,e,i,n,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r(t)},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o(t)}):h(t,e,i,n,r,o),u=o});return a&&a.error&&(c.catch(function(){}),\"function\"==typeof u&&u(a.error)),c}}},\"L/V9\":function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return r});var r=\"function\"==typeof Symbol?Symbol(\"rxSubscriber\"):\"@@rxSubscriber_\"+Math.random()},Lq6m:function(t,e,n){\"use strict\";var r=n(\"KOl+\");n.d(e,\"a\",function(){return i});var i=function(){function t(){}return t.installed=function(){return!0===Object(r.a)(this.pluginRef)},t.getPlugin=function(){return\"undefined\"!=typeof window?function(t,e){for(var n=e.split(\".\"),r=t,i=0;i<n.length;i++){if(!r)return null;r=r[n[i]]}return r}(window,this.pluginRef):null},t.getPluginName=function(){return this.pluginName},t.getPluginRef=function(){return this.pluginRef},t.getPluginInstallName=function(){return this.plugin},t.getSupportedPlatforms=function(){return this.platforms||[]},t}()},MGBS:function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return i});var r=n(\"mrSG\"),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.d(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(n(\"FFOo\").a)},McSo:function(t,e,n){\"use strict\";function r(t){return null!==t&&\"object\"==typeof t}n.d(e,\"a\",function(){return r})},NKHs:function(t,e,n){\"use strict\";var r=n(\"CcnG\"),i=n(\"Ip0R\"),o=n(\"mrSG\"),a=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return o.d(e,t),e.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,r):e.flush(this)},e}(n(\"h9Dq\").a),s=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.d(e,t),e}(n(\"CS9Q\").a))(a),u=n(\"6blF\");n.d(e,\"b\",function(){return c}),n.d(e,\"a\",function(){return l}),n.d(e,\"c\",function(){return h});var c=new r.p(\"angularfire2.realtimeDatabaseURL\"),l=function(){function t(t,e){this.zone=t,this.platformId=e}return t.prototype.schedule=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.zone.runGuarded(function(){return s.schedule.apply(s,t)})},t.prototype.keepUnstableUntilFirst=function(t){return Object(i.o)(this.platformId)?new u.a(function(e){var n=function(){},r=Zone.current.scheduleMacroTask(\"firebaseZoneBlock\",n,{},n,n);t.subscribe(function(t){\"scheduled\"===r.state&&r.invoke(),e.next(t)},function(t){\"scheduled\"===r.state&&r.invoke(),e.error(t)},function(){\"scheduled\"===r.state&&r.invoke(),e.complete()})}):t},t.prototype.runOutsideAngular=function(t){var e=this;return new u.a(function(n){return e.zone.runOutsideAngular(function(){return t.subscribe(function(t){return e.zone.run(function(){return n.next(t)})},function(t){return e.zone.run(function(){return n.error(t)})},function(){return e.zone.run(function(){return n.complete()})})})})},t}(),h=function(t){return function(e){return new u.a(function(n){return e.subscribe(function(e){return t.run(function(){return n.next(e)})},function(e){return t.run(function(){return n.error(e)})},function(){return t.run(function(){return n.complete()})})})}}},NSPt:function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r,i,o,a,s,u,c,l,h,f,d,p,y=(r=n(\"wj3C\"))&&\"object\"==typeof r&&\"default\"in r?r.default:r,v=n(\"mAIw\"),m=n(\"zVF4\"),g=n(\"q/0M\"),b=function(){function t(t){this.domStorage_=t,this.prefix_=\"firebase:\"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),m.stringify(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:m.jsonEval(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),w=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return m.contains(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),_=function(t){try{if(\"undefined\"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem(\"firebase:sentinel\",\"cache\"),e.removeItem(\"firebase:sentinel\"),new b(e)}}catch(n){}return new w},E=_(\"localStorage\"),S=_(\"sessionStorage\"),C=new g.Logger(\"@firebase/database\"),T=(i=1,function(){return i++}),I=function(t){var e=m.stringToByteArray(t),n=new m.Sha1;n.update(e);var r=n.digest();return m.base64.encodeByteArray(r)},k=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=\"\",r=0;r<t.length;r++)Array.isArray(t[r])||t[r]&&\"object\"==typeof t[r]&&\"number\"==typeof t[r].length?n+=k.apply(null,t[r]):n+=\"object\"==typeof t[r]?m.stringify(t[r]):t[r],n+=\" \";return n},O=null,N=!0,A=function(t,e){m.assert(!e||!0===t||!1===t,\"Can't turn on custom loggers persistently.\"),!0===t?(C.logLevel=g.LogLevel.VERBOSE,O=C.log.bind(C),e&&S.set(\"logging_enabled\",!0)):\"function\"==typeof t?O=t:(O=null,S.remove(\"logging_enabled\"))},D=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===N&&(N=!1,null===O&&!0===S.get(\"logging_enabled\")&&A(!0)),O){var n=k.apply(null,t);O(n)}},x=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];D.apply(void 0,[t].concat(e))}},R=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=\"FIREBASE INTERNAL ERROR: \"+k.apply(void 0,t);C.error(n)},P=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=\"FIREBASE FATAL ERROR: \"+k.apply(void 0,t);throw C.error(n),new Error(n)},M=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=\"FIREBASE WARNING: \"+k.apply(void 0,t);C.warn(n)},j=function(t){return\"number\"==typeof t&&(t!=t||t==Number.POSITIVE_INFINITY||t==Number.NEGATIVE_INFINITY)},L=\"[MIN_NAME]\",F=\"[MAX_NAME]\",q=function(t,e){if(t===e)return 0;if(t===L||e===F)return-1;if(e===L||t===F)return 1;var n=K(t),r=K(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},U=function(t,e){return t===e?0:t<e?-1:1},V=function(t,e){if(e&&t in e)return e[t];throw new Error(\"Missing required key (\"+t+\") in object: \"+m.stringify(e))},B=function(t){if(\"object\"!=typeof t||null===t)return m.stringify(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r=\"{\",i=0;i<e.length;i++)0!==i&&(r+=\",\"),r+=m.stringify(e[i]),r+=\":\",r+=B(t[e[i]]);return r+\"}\"},W=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r},z=function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;++n)e(n,t[n]);else m.forEach(t,function(t,n){return e(n,t)})},H=function(t){var e,n,r,i,o,a,s;for(m.assert(!j(t),\"Invalid JSON number\"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074)))),a=[],o=52;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse(),s=a.join(\"\");var u=\"\";for(o=0;o<64;o+=8){var c=parseInt(s.substr(o,8),2).toString(16);1===c.length&&(c=\"0\"+c),u+=c}return u.toLowerCase()},Q=new RegExp(\"^-?\\\\d{1,10}$\"),K=function(t){if(Q.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},G=function(t){try{t()}catch(e){setTimeout(function(){throw M(\"Exception was thrown by user callback.\",e.stack||\"\"),e},Math.floor(0))}},Y=function(){return(\"object\"==typeof window&&window.navigator&&window.navigator.userAgent||\"\").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},X=function(t,e){var n=setTimeout(t,e);return\"object\"==typeof n&&n.unref&&n.unref(),n},J=function(){function t(t,e){if(void 0===e){this.pieces_=t.split(\"/\");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,\"Empty\",{get:function(){return new t(\"\")},enumerable:!0,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t=\"\",e=this.pieceNum_;e<this.pieces_.length;e++)\"\"!==this.pieces_[e]&&(t+=\"/\"+this.pieces_[e]);return t||\"/\"},t.prototype.toUrlEncodedString=function(){for(var t=\"\",e=this.pieceNum_;e<this.pieces_.length;e++)\"\"!==this.pieces_[e]&&(t+=\"/\"+encodeURIComponent(String(this.pieces_[e])));return t||\"/\"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split(\"/\");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error(\"INTERNAL ERROR: innerPath (\"+n+\") is not within outerPath (\"+e+\")\")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=q(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),Z=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=m.stringLength(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,\"MAX_PATH_DEPTH\",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(t,\"MAX_PATH_LENGTH_BYTES\",{get:function(){return 768},enumerable:!0,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=m.stringLength(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=m.stringLength(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+\"has a key path longer than \"+t.MAX_PATH_LENGTH_BYTES+\" bytes (\"+this.byteLength_+\").\");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+\"path specified exceeds the maximum depth that can be written (\"+t.MAX_PATH_DEPTH+\") or object contains a cycle \"+this.toErrorString())},t.prototype.toErrorString=function(){return 0==this.parts_.length?\"\":\"in property '\"+this.parts_.join(\".\")+\"'\"},t}(),$=\"long_polling\",tt=function(){function t(t,e,n,r,i){void 0===i&&(i=\"\"),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(\".\")+1),this.internalHost=E.get(\"host:\"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()},t.prototype.isCacheableHost=function(){return\"s-\"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return\"firebaseio-demo.com\"===this.domain},t.prototype.isCustomHost=function(){return\"firebaseio.com\"!==this.domain&&\"firebaseio-demo.com\"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&E.set(\"host:\"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(m.assert(\"string\"==typeof t,\"typeof type must == string\"),m.assert(\"object\"==typeof e,\"typeof params must == object\"),\"websocket\"===t)n=(this.secure?\"wss://\":\"ws://\")+this.internalHost+\"/.ws?\";else{if(t!==$)throw new Error(\"Unknown connection type: \"+t);n=(this.secure?\"https://\":\"http://\")+this.internalHost+\"/.lp?\"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return m.forEach(e,function(t,e){r.push(t+\"=\"+e)}),n+r.join(\"&\")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+=\"<\"+this.persistenceKey+\">\"),t},t.prototype.toURLString=function(){return(this.secure?\"https://\":\"http://\")+this.host},t}(),et=function(t){var e=nt(t),n=e.subdomain;return\"firebase\"===e.domain&&P(e.host+\" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead\"),n&&\"undefined\"!=n||\"localhost\"===e.domain||P(\"Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com\"),e.secure||\"undefined\"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf(\"https:\")&&M(\"Insecure Firebase access from a secure page. Please use https in calls to new Firebase().\"),{repoInfo:new tt(e.host,e.secure,n,\"ws\"===e.scheme||\"wss\"===e.scheme),path:new J(e.pathString)}},nt=function(t){var e=\"\",n=\"\",r=\"\",i=\"\",o=!0,a=\"https\",s=443;if(\"string\"==typeof t){var u=t.indexOf(\"//\");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));var c=t.indexOf(\"/\");-1===c&&(c=t.length);var l=t.indexOf(\"?\");-1===l&&(l=t.length),e=t.substring(0,Math.min(c,l)),c<l&&(i=function(e){for(var n=\"\",r=t.substring(c,l).split(\"/\"),i=0;i<r.length;i++)if(r[i].length>0){var o=r[i];try{o=decodeURIComponent(o.replace(/\\+/g,\" \"))}catch(a){}n+=\"/\"+o}return n}());var h=function(t){var e={};\"?\"===t.charAt(0)&&(t=t.substring(1));for(var n=0,r=t.split(\"&\");n<r.length;n++){var i=r[n];if(0!==i.length){var o=i.split(\"=\");2===o.length?e[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):M(\"Invalid query segment '\"+i+\"' in query '\"+t+\"'\")}}return e}(t.substring(Math.min(t.length,l)));(u=e.indexOf(\":\"))>=0?(o=\"https\"===a||\"wss\"===a,s=parseInt(e.substring(u+1),10)):u=t.length;var f=e.split(\".\");3===f.length?(n=f[1],r=f[0].toLowerCase()):2===f.length?n=f[0]:\"localhost\"===f[0].slice(0,u).toLowerCase()&&(n=\"localhost\"),\"\"===r&&\"ns\"in h&&(r=h.ns)}return{host:e,port:s,domain:n,subdomain:r,secure:o,scheme:a,pathString:i}},rt=/[\\[\\].#$\\/\\u0000-\\u001F\\u007F]/,it=/[\\[\\].#$\\u0000-\\u001F\\u007F]/,ot=function(t){return\"string\"==typeof t&&0!==t.length&&!rt.test(t)},at=function(t){return\"string\"==typeof t&&0!==t.length&&!it.test(t)},st=function(t){return null===t||\"string\"==typeof t||\"number\"==typeof t&&!j(t)||t&&\"object\"==typeof t&&m.contains(t,\".sv\")},ut=function(t,e,n,r,i){i&&void 0===n||ct(m.errorPrefix(t,e,i),n,r)},ct=function(t,e,n){var r=n instanceof J?new Z(n,t):n;if(void 0===e)throw new Error(t+\"contains undefined \"+r.toErrorString());if(\"function\"==typeof e)throw new Error(t+\"contains a function \"+r.toErrorString()+\" with contents = \"+e.toString());if(j(e))throw new Error(t+\"contains \"+e.toString()+\" \"+r.toErrorString());if(\"string\"==typeof e&&e.length>10485760/3&&m.stringLength(e)>10485760)throw new Error(t+\"contains a string greater than 10485760 utf8 bytes \"+r.toErrorString()+\" ('\"+e.substring(0,50)+\"...')\");if(e&&\"object\"==typeof e){var i=!1,o=!1;if(m.forEach(e,function(e,n){if(\".value\"===e)i=!0;else if(\".priority\"!==e&&\".sv\"!==e&&(o=!0,!ot(e)))throw new Error(t+\" contains an invalid key (\"+e+\") \"+r.toErrorString()+'.  Keys must be non-empty strings and can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\"');r.push(e),ct(t,n,r),r.pop()}),i&&o)throw new Error(t+' contains \".value\" child '+r.toErrorString()+\" in addition to actual children.\")}},lt=function(t,e,n,r,i){if(!i||void 0!==n){var o=m.errorPrefix(t,e,i);if(!n||\"object\"!=typeof n||Array.isArray(n))throw new Error(o+\" must be an object containing the children to replace.\");var a=[];m.forEach(n,function(t,e){var n=new J(t);if(ct(o,e,r.child(n)),\".priority\"===n.getBack()&&!st(e))throw new Error(o+\"contains an invalid value for '\"+n.toString()+\"', which must be a valid Firebase priority (a string, finite number, server value, or null).\");a.push(n)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(\".priority\"===i[o]&&o===i.length-1);else if(!ot(i[o]))throw new Error(t+\"contains an invalid key (\"+i[o]+\") in path \"+r.toString()+'. Keys must be non-empty strings and can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\"');e.sort(J.comparePaths);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&a.contains(r))throw new Error(t+\"contains a path \"+a.toString()+\" that is ancestor of another path \"+r.toString());a=r}}(o,a)}},ht=function(t,e,n,r){if(!r||void 0!==n){if(j(n))throw new Error(m.errorPrefix(t,e,r)+\"is \"+n.toString()+\", but must be a valid Firebase priority (a string, finite number, server value, or null).\");if(!st(n))throw new Error(m.errorPrefix(t,e,r)+\"must be a valid Firebase priority (a string, finite number, server value, or null).\")}},ft=function(t,e,n,r){if(!r||void 0!==n)switch(n){case\"value\":case\"child_added\":case\"child_removed\":case\"child_changed\":case\"child_moved\":break;default:throw new Error(m.errorPrefix(t,e,r)+'must be a valid event type = \"value\", \"child_added\", \"child_removed\", \"child_changed\", or \"child_moved\".')}},dt=function(t,e,n,r){if(!(r&&void 0===n||ot(n)))throw new Error(m.errorPrefix(t,e,r)+'was an invalid key = \"'+n+'\".  Firebase keys must be non-empty strings and can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\").')},pt=function(t,e,n,r){if(!(r&&void 0===n||at(n)))throw new Error(m.errorPrefix(t,e,r)+'was an invalid path = \"'+n+'\". Paths must be non-empty strings and can\\'t contain \".\", \"#\", \"$\", \"[\", or \"]\"')},yt=function(t,e){if(\".info\"===e.getFront())throw new Error(t+\" failed = Can't modify data under /.info/\")},vt=function(t,e,n){var r=n.path.toString();if(\"string\"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!ot(n.repoInfo.namespace)&&\"localhost\"!==n.repoInfo.host.split(\":\")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\\/*\\.info(\\/|$)/,\"/\")),at(t)}(r))throw new Error(m.errorPrefix(t,e,!1)+'must be a valid firebase URL and the path can\\'t contain \".\", \"#\", \"$\", \"[\", or \"]\".')},mt=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){m.validateArgCount(\"OnDisconnect.cancel\",0,1,arguments.length),m.validateCallback(\"OnDisconnect.cancel\",1,t,!0);var e=new m.Deferred;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){m.validateArgCount(\"OnDisconnect.remove\",0,1,arguments.length),yt(\"OnDisconnect.remove\",this.path_),m.validateCallback(\"OnDisconnect.remove\",1,t,!0);var e=new m.Deferred;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){m.validateArgCount(\"OnDisconnect.set\",1,2,arguments.length),yt(\"OnDisconnect.set\",this.path_),ut(\"OnDisconnect.set\",1,t,this.path_,!1),m.validateCallback(\"OnDisconnect.set\",2,e,!0);var n=new m.Deferred;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){m.validateArgCount(\"OnDisconnect.setWithPriority\",2,3,arguments.length),yt(\"OnDisconnect.setWithPriority\",this.path_),ut(\"OnDisconnect.setWithPriority\",1,t,this.path_,!1),ht(\"OnDisconnect.setWithPriority\",2,e,!1),m.validateCallback(\"OnDisconnect.setWithPriority\",3,n,!0);var r=new m.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(m.validateArgCount(\"OnDisconnect.update\",1,2,arguments.length),yt(\"OnDisconnect.update\",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[\"\"+r]=t[r];t=n,M(\"Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.\")}lt(\"OnDisconnect.update\",1,t,this.path_,!1),m.validateCallback(\"OnDisconnect.update\",2,e,!0);var i=new m.Deferred;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),gt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return m.validateArgCount(\"TransactionResult.toJSON\",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),bt=(o=\"-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz\",a=0,s=[],function(t){var e,n=t===a;a=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=o.charAt(t%64),t=Math.floor(t/64);m.assert(0===t,\"Cannot push at time == 0\");var i=r.join(\"\");if(n){for(e=11;e>=0&&63===s[e];e--)s[e]=0;s[e]++}else for(e=0;e<12;e++)s[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=o.charAt(s[e]);return m.assert(20===i.length,\"nextPushId: Length should be 20.\"),i}),wt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),_t=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new wt(L,t),r=new wt(L,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return wt.MIN},t}(),Et=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return v.__extends(e,t),Object.defineProperty(e,\"__EMPTY_NODE\",{get:function(){return u},set:function(t){u=t},enumerable:!0,configurable:!0}),e.prototype.compare=function(t,e){return q(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw m.assertionError(\"KeyIndex.isDefinedOn not expected to be called.\")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return wt.MIN},e.prototype.maxPost=function(){return new wt(F,u)},e.prototype.makePost=function(t,e){return m.assert(\"string\"==typeof t,\"KeyIndex indexValue must always be a string.\"),new wt(t,u)},e.prototype.toString=function(){return\".key\"},e}(_t),St=new Et,Ct=function(t){return\"number\"==typeof t?\"number:\"+H(t):\"string:\"+t},Tt=function(t){if(t.isLeafNode()){var e=t.val();m.assert(\"string\"==typeof e||\"number\"==typeof e||\"object\"==typeof e&&m.contains(e,\".sv\"),\"Priority must be a string or number.\")}else m.assert(t===c||t.isEmpty(),\"priority of unexpected type.\");m.assert(t===c||t.getPriority().isEmpty(),\"Priority nodes can't have a priority of their own.\")},It=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,m.assert(null!=this.value_,\"LeafNode shouldn't be created with null/undefined value.\"),Tt(this.priorityNode_)}return Object.defineProperty(t,\"__childrenNodeConstructor\",{get:function(){return l},set:function(t){l=t},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return\".priority\"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:\".priority\"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return\".priority\"===e?this.updatePriority(n):n.isEmpty()&&\".priority\"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&\".priority\"!==r?this:(m.assert(\".priority\"!==r||1===e.getLength(),\".priority must be the last token in a path\"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{\".value\":this.getValue(),\".priority\":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t=\"\";this.priorityNode_.isEmpty()||(t+=\"priority:\"+Ct(this.priorityNode_.val())+\":\");var e=typeof this.value_;t+=e+\":\",t+=\"number\"===e?H(this.value_):this.value_,this.lazyHash_=I(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(m.assert(e.isLeafNode(),\"Unknown node type\"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return m.assert(i>=0,\"Unknown leaf type: \"+n),m.assert(o>=0,\"Unknown leaf type: \"+r),i===o?\"object\"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=[\"object\",\"boolean\",\"number\",\"string\"],t}(),kt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return v.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?q(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return wt.MIN},e.prototype.maxPost=function(){return new wt(F,new It(\"[PRIORITY-POST]\",f))},e.prototype.makePost=function(t,e){var n=h(t);return new wt(e,new It(\"[PRIORITY-POST]\",n))},e.prototype.toString=function(){return\".priority\"},e}(_t)),Ot=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Nt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Dt.EMPTY_NODE,this.right=null!=o?o:Dt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r,i;return(i=(r=n(t,(i=this).key))<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Dt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Dt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){var t;if(this.isRed_()&&this.left.isRed_())throw new Error(\"Red node has red child(\"+this.key+\",\"+this.value+\")\");if(this.right.isRed_())throw new Error(\"Right child of (\"+this.key+\",\"+this.value+\") is red\");if((t=this.left.check_())!==this.right.check_())throw new Error(\"Black depths differ\");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),At=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Nt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Dt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Nt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Nt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error(\"Attempted to find predecessor key for a nonexistent key.  What gives?\")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Ot(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Ot(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Ot(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Ot(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new At,t}(),xt=Math.log(2),Rt=function(){function t(t){this.count=parseInt(Math.log(t+1)/xt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join(\"1\"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Pt=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,a,s=r-e;if(0==s)return null;if(1==s)return o=t[e],a=n?n(o):o,new Nt(a,o.node,Nt.BLACK,null,null);var u=parseInt(s/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],a=n?n(o):o,new Nt(a,o.node,Nt.BLACK,c,l)},o=function(e){for(var r=null,o=null,a=t.length,s=function(e,r){var o=a-e,s=a;a-=e;var c=i(o+1,s),l=t[o],h=n?n(l):l;u(new Nt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?s(h,Nt.BLACK):(s(h,Nt.BLACK),s(h,Nt.RED))}return o}(new Rt(t.length));return new Dt(r||e,o)},Mt={},jt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,\"Default\",{get:function(){return m.assert(Mt&&kt,\"ChildrenNode.ts has not been loaded\"),d=d||new t({\".priority\":Mt},{\".priority\":kt})},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var e=m.safeGet(this.indexes_,t);if(!e)throw new Error(\"No index defined for \"+t);return e===Mt?null:e},t.prototype.hasIndex=function(t){return m.contains(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){m.assert(e!==St,\"KeyIndex always exists and isn't meant to be added to the IndexMap.\");for(var r,i=[],o=!1,a=n.getIterator(wt.Wrap),s=a.getNext();s;)o=o||e.isDefinedOn(s.node),i.push(s),s=a.getNext();r=o?Pt(i,e.getCompare()):Mt;var u=e.toString(),c=m.clone(this.indexSet_);c[u]=e;var l=m.clone(this.indexes_);return l[u]=r,new t(l,c)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(m.map(this.indexes_,function(t,i){var o=m.safeGet(r.indexSet_,i);if(m.assert(o,\"Missing index implementation for \"+i),t===Mt){if(o.isDefinedOn(e.node)){for(var a=[],s=n.getIterator(wt.Wrap),u=s.getNext();u;)u.name!=e.name&&a.push(u),u=s.getNext();return a.push(e),Pt(a,o.getCompare())}return Mt}var c=n.get(e.name),l=t;return c&&(l=l.remove(new wt(e.name,c))),l.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(m.map(this.indexes_,function(t){if(t===Mt)return t;var r=n.get(e.name);return r?t.remove(new wt(e.name,r)):t}),this.indexSet_)},t}();function Lt(t,e){return q(t.name,e.name)}function Ft(t,e){return q(t,e)}var qt=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Tt(this.priorityNode_),this.children_.isEmpty()&&m.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),\"An empty node cannot have a priority\")}return Object.defineProperty(t,\"EMPTY_NODE\",{get:function(){return p||(p=new t(new Dt(Ft),null,jt.Default))},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||p},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(\".priority\"===t)return this.getPriority();var e=this.children_.get(t);return null===e?p:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(m.assert(n,\"We should always be passing snapshot nodes\"),\".priority\"===e)return this.updatePriority(n);var r,i=new wt(e,n),o=void 0,a=void 0;return n.isEmpty()?(o=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(i,this.children_)),r=o.isEmpty()?p:this.priorityNode_,new t(o,r,a)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;m.assert(\".priority\"!==t.getFront()||1===t.getLength(),\".priority must be the last token in a path\");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(kt,function(a,s){n[a]=s.val(e),r++,o&&t.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1}),!e&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[\".priority\"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t=\"\";this.getPriority().isEmpty()||(t+=\"priority:\"+Ct(this.getPriority().val())+\":\"),this.forEachChild(kt,function(e,n){var r=n.hash();\"\"!==r&&(t+=\":\"+e+\":\"+r)}),this.lazyHash_=\"\"===t?\"\":I(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new wt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new wt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new wt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,wt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,wt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Ut?-1:0},t.prototype.withIndex=function(e){if(e===St||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===St||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(kt),r=e.getIterator(kt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===St?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\\d*)$/,t}(),Ut=new(function(t){function e(){return t.call(this,new Dt(Ft),qt.EMPTY_NODE,jt.Default)||this}return v.__extends(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return qt.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(qt));Object.defineProperties(wt,{MIN:{value:new wt(L,qt.EMPTY_NODE)},MAX:{value:new wt(F,Ut)}}),Et.__EMPTY_NODE=qt.EMPTY_NODE,It.__childrenNodeConstructor=qt,c=Ut,f=Ut;var Vt=!0;function Bt(t,e){if(void 0===e&&(e=null),null===t)return qt.EMPTY_NODE;if(\"object\"==typeof t&&\".priority\"in t&&(e=t[\".priority\"]),m.assert(null===e||\"string\"==typeof e||\"number\"==typeof e||\"object\"==typeof e&&\".sv\"in e,\"Invalid priority type found: \"+typeof e),\"object\"==typeof t&&\".value\"in t&&null!==t[\".value\"]&&(t=t[\".value\"]),\"object\"!=typeof t||\".sv\"in t)return new It(t,Bt(e));if(t instanceof Array||!Vt){var n=qt.EMPTY_NODE,r=t;return m.forEach(r,function(t,e){if(m.contains(r,t)&&\".\"!==t.substring(0,1)){var i=Bt(e);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}}),n.updatePriority(Bt(e))}var i=[],o=!1,a=t;if(m.forEach(a,function(t,e){if(\"string\"!=typeof t||\".\"!==t.substring(0,1)){var n=Bt(a[t]);n.isEmpty()||(o=o||!n.getPriority().isEmpty(),i.push(new wt(t,n)))}}),0==i.length)return qt.EMPTY_NODE;var s=Pt(i,Lt,function(t){return t.name},Ft);if(o){var u=Pt(i,kt.getCompare());return new qt(s,Bt(e),new jt({\".priority\":u},{\".priority\":kt}))}return new qt(s,Bt(e),jt.Default)}h=Bt;var Wt,zt,Ht,Qt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return v.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?q(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return wt.MIN},e.prototype.maxPost=function(){return wt.MAX},e.prototype.makePost=function(t,e){var n=Bt(t);return new wt(e,n)},e.prototype.toString=function(){return\".value\"},e}(_t)),Kt=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,m.assert(!e.isEmpty()&&\".priority\"!==e.getFront(),\"Can't create PathIndex with empty path or .priority key\"),n}return v.__extends(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?q(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=Bt(t),r=qt.EMPTY_NODE.updateChild(this.indexPath_,n);return new wt(e,r)},e.prototype.maxPost=function(){var t=qt.EMPTY_NODE.updateChild(this.indexPath_,Ut);return new wt(F,t)},e.prototype.toString=function(){return this.indexPath_.slice().join(\"/\")},e}(_t),Gt=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return m.validateArgCount(\"DataSnapshot.val\",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return m.validateArgCount(\"DataSnapshot.exportVal\",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return m.validateArgCount(\"DataSnapshot.toJSON\",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return m.validateArgCount(\"DataSnapshot.exists\",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){m.validateArgCount(\"DataSnapshot.child\",0,1,arguments.length),e=String(e),pt(\"DataSnapshot.child\",1,e,!1);var n=new J(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,kt)},t.prototype.hasChild=function(t){m.validateArgCount(\"DataSnapshot.hasChild\",1,1,arguments.length),pt(\"DataSnapshot.hasChild\",1,t,!1);var e=new J(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return m.validateArgCount(\"DataSnapshot.getPriority\",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;return m.validateArgCount(\"DataSnapshot.forEach\",1,1,arguments.length),m.validateCallback(\"DataSnapshot.forEach\",1,e,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(r,i){return e(new t(i,n.ref_.child(r),kt))})},t.prototype.hasChildren=function(){return m.validateArgCount(\"DataSnapshot.hasChildren\",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,\"key\",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),t.prototype.numChildren=function(){return m.validateArgCount(\"DataSnapshot.numChildren\",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return m.validateArgCount(\"DataSnapshot.ref\",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,\"ref\",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}(),Yt=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return\"value\"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+\":\"+this.eventType+\":\"+m.stringify(this.snapshot.exportVal())},t}(),Xt=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return\"cancel\"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+\":cancel\"},t}(),Jt=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return\"value\"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Yt(\"value\",this,new Gt(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if(\"cancel\"===t.getEventType()){m.assert(this.cancelCallback_,\"Raising a cancel event on a listener with no cancel callback\");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Xt(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Zt=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e=\"children_added\"===t?\"child_added\":t;return m.contains(this.callbacks_,e=\"children_removed\"===e?\"child_removed\":e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Xt(this,t,e):null},t.prototype.createEvent=function(t,e){m.assert(null!=t.childName,\"Child events should have a childName.\");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Yt(t.type,this,new Gt(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if(\"cancel\"===t.getEventType()){m.assert(this.cancelCallback_,\"Raising a cancel event on a listener with no cancel callback\");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var n=m.getCount(e.callbacks_);if(n===m.getCount(this.callbacks_)){if(1===n){var r=m.getAnyKey(e.callbacks_),i=m.getAnyKey(this.callbacks_);return!(i!==r||e.callbacks_[r]&&this.callbacks_[i]&&e.callbacks_[r]!==this.callbacks_[i])}return m.every(this.callbacks_,function(t,n){return e.callbacks_[t]===n})}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),$t=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,\"__referenceConstructor\",{get:function(){return m.assert(Wt,\"Reference.ts has not been loaded\"),Wt},set:function(t){Wt=t},enumerable:!0,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===St){var r=\"Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().\",i=\"Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.\";if(t.hasStart()){if(t.getIndexStartName()!=L)throw new Error(r);if(\"string\"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!=F)throw new Error(r);if(\"string\"!=typeof n)throw new Error(i)}}else if(t.getIndex()===kt){if(null!=e&&!st(e)||null!=n&&!st(n))throw new Error(\"Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).\")}else if(m.assert(t.getIndex()instanceof Kt||t.getIndex()===Qt,\"unknown index type.\"),null!=e&&\"object\"==typeof e||null!=n&&\"object\"==typeof n)throw new Error(\"Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.\")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error(\"Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.\")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+\": You can't combine multiple orderBy calls.\")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return m.validateArgCount(\"Query.ref\",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){m.validateArgCount(\"Query.on\",2,4,arguments.length),ft(\"Query.on\",1,e,!1),m.validateCallback(\"Query.on\",2,n,!1);var o=t.getCancelAndContextArgs_(\"Query.on\",r,i);if(\"value\"===e)this.onValueEvent(n,o.cancel,o.context);else{var a={};a[e]=n,this.onChildEvent(a,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Jt(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new Zt(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){m.validateArgCount(\"Query.off\",0,3,arguments.length),ft(\"Query.off\",1,t,!0),m.validateCallback(\"Query.off\",2,e,!0),m.validateContextObject(\"Query.off\",3,n,!0);var r=null,i=null;\"value\"===t?r=new Jt(e||null,null,n||null):t&&(e&&((i={})[t]=e),r=new Zt(i,null,n||null)),this.repo.removeEventCallbackForQuery(this,r)},t.prototype.once=function(e,n,r,i){var o=this;m.validateArgCount(\"Query.once\",1,4,arguments.length),ft(\"Query.once\",1,e,!1),m.validateCallback(\"Query.once\",2,n,!0);var a=t.getCancelAndContextArgs_(\"Query.once\",r,i),s=!0,u=new m.Deferred;u.promise.catch(function(){});var c=function(t){s&&(s=!1,o.off(e,c),n&&n.bind(a.context)(t),u.resolve(t))};return this.on(e,c,function(t){o.off(e,c),a.cancel&&a.cancel.bind(a.context)(t),u.reject(t)}),u.promise},t.prototype.limitToFirst=function(e){if(m.validateArgCount(\"Query.limitToFirst\",1,1,arguments.length),\"number\"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error(\"Query.limitToFirst: First argument must be a positive integer.\");if(this.queryParams_.hasLimit())throw new Error(\"Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).\");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(m.validateArgCount(\"Query.limitToLast\",1,1,arguments.length),\"number\"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error(\"Query.limitToLast: First argument must be a positive integer.\");if(this.queryParams_.hasLimit())throw new Error(\"Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).\");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(m.validateArgCount(\"Query.orderByChild\",1,1,arguments.length),\"$key\"===e)throw new Error('Query.orderByChild: \"$key\" is invalid.  Use Query.orderByKey() instead.');if(\"$priority\"===e)throw new Error('Query.orderByChild: \"$priority\" is invalid.  Use Query.orderByPriority() instead.');if(\"$value\"===e)throw new Error('Query.orderByChild: \"$value\" is invalid.  Use Query.orderByValue() instead.');pt(\"Query.orderByChild\",1,e,!1),this.validateNoPreviousOrderByCall_(\"Query.orderByChild\");var n=new J(e);if(n.isEmpty())throw new Error(\"Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.\");var r=new Kt(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){m.validateArgCount(\"Query.orderByKey\",0,0,arguments.length),this.validateNoPreviousOrderByCall_(\"Query.orderByKey\");var e=this.queryParams_.orderBy(St);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){m.validateArgCount(\"Query.orderByPriority\",0,0,arguments.length),this.validateNoPreviousOrderByCall_(\"Query.orderByPriority\");var e=this.queryParams_.orderBy(kt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){m.validateArgCount(\"Query.orderByValue\",0,0,arguments.length),this.validateNoPreviousOrderByCall_(\"Query.orderByValue\");var e=this.queryParams_.orderBy(Qt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),m.validateArgCount(\"Query.startAt\",0,2,arguments.length),ut(\"Query.startAt\",1,e,this.path,!0),dt(\"Query.startAt\",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error(\"Query.startAt: Starting point was already set (by another call to startAt or equalTo).\");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),m.validateArgCount(\"Query.endAt\",0,2,arguments.length),ut(\"Query.endAt\",1,e,this.path,!0),dt(\"Query.endAt\",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error(\"Query.endAt: Ending point was already set (by another call to endAt or equalTo).\");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(m.validateArgCount(\"Query.equalTo\",1,2,arguments.length),ut(\"Query.equalTo\",1,t,this.path,!1),dt(\"Query.equalTo\",2,e,!0),this.queryParams_.hasStart())throw new Error(\"Query.equalTo: Starting point was already set (by another call to startAt or equalTo).\");if(this.queryParams_.hasEnd())throw new Error(\"Query.equalTo: Ending point was already set (by another call to endAt or equalTo).\");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return m.validateArgCount(\"Query.toString\",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return m.validateArgCount(\"Query.toJSON\",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=B(t);return\"{}\"===e?\"default\":e},t.prototype.isEqual=function(e){if(m.validateArgCount(\"Query.isEqual\",1,1,arguments.length),!(e instanceof t))throw new Error(\"Query.isEqual failed: First argument must be an instance of firebase.database.Query.\");var n=this.repo===e.repo,r=this.path.equals(e.path),i=this.queryIdentifier()===e.queryIdentifier();return n&&r&&i},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,m.validateCallback(t,3,r.cancel,!0),r.context=n,m.validateContextObject(t,4,r.context,!0);else if(e)if(\"object\"==typeof e&&null!==e)r.context=e;else{if(\"function\"!=typeof e)throw new Error(m.errorPrefix(t,3,!0)+\" must either be a cancel callback or a context object.\");r.cancel=e}return r},Object.defineProperty(t.prototype,\"ref\",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}(),te=function(){function t(){this.set={}}return t.prototype.add=function(t,e){this.set[t]=null===e||e},t.prototype.contains=function(t){return m.contains(this.set,t)},t.prototype.get=function(t){return this.contains(t)?this.set[t]:void 0},t.prototype.remove=function(t){delete this.set[t]},t.prototype.clear=function(){this.set={}},t.prototype.isEmpty=function(){return m.isEmpty(this.set)},t.prototype.count=function(){return m.getCount(this.set)},t.prototype.each=function(t){m.forEach(this.set,function(e,n){return t(e,n)})},t.prototype.keys=function(){var t=[];return m.forEach(this.set,function(e){t.push(e)}),t},t}(),ee=function(){function t(){this.value_=null,this.children_=null}return t.prototype.find=function(t){if(null!=this.value_)return this.value_.getChild(t);if(t.isEmpty()||null==this.children_)return null;var e=t.getFront();return t=t.popFront(),this.children_.contains(e)?this.children_.get(e).find(t):null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value_=n,this.children_=null;else if(null!==this.value_)this.value_=this.value_.updateChild(e,n);else{null==this.children_&&(this.children_=new te);var r=e.getFront();this.children_.contains(r)||this.children_.add(r,new t);var i=this.children_.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value_=null,this.children_=null,!0;if(null!==this.value_){if(this.value_.isLeafNode())return!1;var e=this.value_;this.value_=null;var n=this;return e.forEachChild(kt,function(t,e){n.remember(new J(t),e)}),this.forget(t)}if(null!==this.children_){var r=t.getFront();return t=t.popFront(),this.children_.contains(r)&&this.children_.get(r).forget(t)&&this.children_.remove(r),!!this.children_.isEmpty()&&(this.children_=null,!0)}return!0},t.prototype.forEachTree=function(t,e){null!==this.value_?e(t,this.value_):this.forEachChild(function(n,r){var i=new J(t.toString()+\"/\"+n);r.forEachTree(i,e)})},t.prototype.forEachChild=function(t){null!==this.children_&&this.children_.each(function(e,n){t(e,n)})},t}(),ne=function(t,e){return t&&\"object\"==typeof t?(m.assert(\".sv\"in t,\"Unexpected leaf node or priority contents\"),e[t[\".sv\"]]):t},re=function(t,e){var n,r=t.getPriority().val(),i=ne(r,e);if(t.isLeafNode()){var o=t,a=ne(o.getValue(),e);return a!==o.getValue()||i!==o.getPriority().val()?new It(a,Bt(i)):t}var s=t;return n=s,i!==s.getPriority().val()&&(n=n.updatePriority(new It(i))),s.forEachChild(kt,function(t,r){var i=re(r,e);i!==r&&(n=n.updateImmediateChild(t,i))}),n},ie=function(t){return t[t.OVERWRITE=0]=\"OVERWRITE\",t[t.MERGE=1]=\"MERGE\",t[t.ACK_USER_WRITE=2]=\"ACK_USER_WRITE\",t[t.LISTEN_COMPLETE=3]=\"LISTEN_COMPLETE\",t}({}),oe=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,m.assert(!r||e,\"Tagged queries must be from server.\")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),ae=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=ie.ACK_USER_WRITE,this.source=oe.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return m.assert(this.affectedTree.children.isEmpty(),\"affectedTree should not have overlapping affected paths.\"),this;var n=this.affectedTree.subtree(new J(e));return new t(J.Empty,n,this.revert)}return m.assert(this.path.getFront()===e,\"operationForChild called for unrelated child.\"),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),se=function(){return zt||(zt=new Dt(U)),zt},ue=function(){function t(t,e){void 0===e&&(e=se()),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return m.forEach(e,function(t,e){n=n.set(new J(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:J.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new J(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r,i=e.getFront(),o=(this.children.get(i)||t.Empty).setTree(e.popFront(),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(J.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(t.child(r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,J.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,J.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(J.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(t.child(n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t.Empty=new t(null),t}(),ce=function(){function t(t,e){this.source=t,this.path=e,this.type=ie.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,J.Empty):new t(this.source,this.path.popFront())},t}(),le=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=ie.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,J.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),he=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=ie.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new J(e));return n.isEmpty()?null:n.value?new le(this.source,J.Empty,n.value):new t(this.source,J.Empty,n)}return m.assert(this.path.getFront()===e,\"Can't get a merge for a child not on the path of the operation\"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return\"Operation(\"+this.path+\": \"+this.source.toString()+\" merge: \"+this.children.toString()+\")\"},t}(),fe=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),de=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new fe(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new fe(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new fe(qt.EMPTY_NODE,!1,!1),new fe(qt.EMPTY_NODE,!1,!1)),t}(),pe=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED=\"child_added\",t.CHILD_REMOVED=\"child_removed\",t.CHILD_CHANGED=\"child_changed\",t.CHILD_MOVED=\"child_moved\",t.VALUE=\"value\",t}(),ye=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){m.assert(t.isIndexed(this.index_),\"A node must be indexed if only a child is updated\");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()==n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(pe.childRemovedChange(e,a)):m.assert(t.isLeafNode(),\"A child remove without an old child only makes sense on a leaf node\"):a.isEmpty()?o.trackChildChange(pe.childAddedChange(e,n)):o.trackChildChange(pe.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(kt,function(t,r){e.hasChild(t)||n.trackChildChange(pe.childRemovedChange(t,r))}),e.isLeafNode()||e.forEachChild(kt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(pe.childChangedChange(e,r,i))}else n.trackChildChange(pe.childAddedChange(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?qt.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),ve=function(){function t(){this.changeMap_={}}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;m.assert(e==pe.CHILD_ADDED||e==pe.CHILD_CHANGED||e==pe.CHILD_REMOVED,\"Only child changes supported for tracking\"),m.assert(\".priority\"!==n,\"Only non-priority child changes can be tracked.\");var r=m.safeGet(this.changeMap_,n);if(r){var i=r.type;if(e==pe.CHILD_ADDED&&i==pe.CHILD_REMOVED)this.changeMap_[n]=pe.childChangedChange(n,t.snapshotNode,r.snapshotNode);else if(e==pe.CHILD_REMOVED&&i==pe.CHILD_ADDED)delete this.changeMap_[n];else if(e==pe.CHILD_REMOVED&&i==pe.CHILD_CHANGED)this.changeMap_[n]=pe.childRemovedChange(n,r.oldSnap);else if(e==pe.CHILD_CHANGED&&i==pe.CHILD_ADDED)this.changeMap_[n]=pe.childAddedChange(n,t.snapshotNode);else{if(e!=pe.CHILD_CHANGED||i!=pe.CHILD_CHANGED)throw m.assertionError(\"Illegal combination of changes: \"+t+\" occurred after \"+r);this.changeMap_[n]=pe.childChangedChange(n,t.snapshotNode,r.oldSnap)}}else this.changeMap_[n]=t},t.prototype.getChanges=function(){return m.getValues(this.changeMap_)},t}(),me=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),ge=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new fe(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),be=function(){return function(t,e){this.viewCache=t,this.changes=e}}(),we=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){m.assert(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),\"Event snap not indexed\"),m.assert(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),\"Server snap not indexed\")},t.prototype.applyOperation=function(e,n,r,i){var o,a,s=new ve;if(n.type===ie.OVERWRITE){var u=n;u.source.fromUser?o=this.applyUserOverwrite_(e,u.path,u.snap,r,i,s):(m.assert(u.source.fromServer,\"Unknown source.\"),a=u.source.tagged||e.getServerCache().isFiltered()&&!u.path.isEmpty(),o=this.applyServerOverwrite_(e,u.path,u.snap,r,i,a,s))}else if(n.type===ie.MERGE){var c=n;c.source.fromUser?o=this.applyUserMerge_(e,c.path,c.children,r,i,s):(m.assert(c.source.fromServer,\"Unknown source.\"),a=c.source.tagged||e.getServerCache().isFiltered(),o=this.applyServerMerge_(e,c.path,c.children,r,i,a,s))}else if(n.type===ie.ACK_USER_WRITE){var l=n;o=l.revert?this.revertUserWrite_(e,l.path,r,i,s):this.ackUserWrite_(e,l.path,l.affectedTree,r,i,s)}else{if(n.type!==ie.LISTEN_COMPLETE)throw m.assertionError(\"Unknown operation type: \"+n.type);o=this.listenComplete_(e,n.path,r,s)}var h=s.getChanges();return t.maybeAddValueEvent_(e,o,h),new be(o,h)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(pe.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,s=void 0;if(e.isEmpty())if(m.assert(t.getServerCache().isFullyInitialized(),\"If change path is empty, we must have complete server data\"),t.getServerCache().isFiltered()){var u=t.getCompleteServerSnap(),c=n.calcCompleteEventChildren(u instanceof qt?u:qt.EMPTY_NODE);a=this.filter_.updateFullNode(t.getEventCache().getNode(),c,i)}else{var l=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=e.getFront();if(\".priority\"==h){m.assert(1==e.getLength(),\"Can't have a priority with additional path components\");var f=o.getNode();s=t.getServerCache().getNode();var d=n.calcEventCacheAfterServerOverwrite(e,f,s);a=null!=d?this.filter_.updatePriority(f,d):o.getNode()}else{var p=e.popFront(),y=void 0;if(o.isCompleteForChild(h)){s=t.getServerCache().getNode();var v=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),s);y=null!=v?o.getNode().getImmediateChild(h).updateChild(p,v):o.getNode().getImmediateChild(h)}else y=n.calcCompleteChild(h,t.getServerCache());a=null!=y?this.filter_.updateChild(o.getNode(),h,y,p,r,i):o.getNode()}}return t.updateEventSnap(a,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,a){var s,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())s=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);s=c.updateFullNode(u.getNode(),l,null)}else{var h=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),d=u.getNode().getImmediateChild(h).updateChild(f,n);s=\".priority\"==h?c.updatePriority(u.getNode(),d):c.updateChild(u.getNode(),h,d,f,me,null)}var p=t.updateServerSnap(s,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),y=new ge(r,p,i);return this.generateEventCacheAfterServerEvent_(p,e,r,y,a)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var a,s,u=t.getEventCache(),c=new ge(r,t,i);if(e.isEmpty())s=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),a=t.updateEventSnap(s,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(\".priority\"===l)s=this.filter_.updatePriority(t.getEventCache().getNode(),n),a=t.updateEventSnap(s,u.isFullyInitialized(),u.isFiltered());else{var h=e.popFront(),f=u.getNode().getImmediateChild(l),d=void 0;if(h.isEmpty())d=n;else{var p=c.getCompleteChild(l);d=null!=p?\".priority\"===h.getBack()&&p.getChild(h.parent()).isEmpty()?p:p.updateChild(h,n):qt.EMPTY_NODE}if(f.equals(d))a=t;else{var y=this.filter_.updateChild(u.getNode(),l,d,h,c,o);a=t.updateEventSnap(y,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,a){var s=this,u=e;return r.foreach(function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())&&(u=s.applyUserOverwrite_(u,l,c,i,o,a))}),r.foreach(function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())||(u=s.applyUserOverwrite_(u,l,c,i,o,a))}),u},t.prototype.applyMerge_=function(t,e){return e.foreach(function(e,n){t=t.updateChild(e,n)}),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,a){var s=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:ue.Empty.setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal(function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=s.applyMerge_(u,n);c=s.applyServerOverwrite_(c,new J(e),h,r,i,o,a)}}),u.children.inorderTraversal(function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=s.applyMerge_(h,n);c=s.applyServerOverwrite_(c,new J(e),f,r,i,o,a)}}),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var a=t.getServerCache().isFiltered(),s=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,s.getNode().getChild(e),r,i,a,o);if(e.isEmpty()){var u=ue.Empty;return s.getNode().forEachChild(St,function(t,e){u=u.set(new J(t),e)}),this.applyServerMerge_(t,e,u,r,i,a,o)}return t}var c=ue.Empty;return n.foreach(function(t,n){var r=e.child(t);s.isCompleteForPath(r)&&(c=c.set(t,s.getNode().getChild(r)))}),this.applyServerMerge_(t,e,c,r,i,a,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,me,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var a=new ge(n,t,r),s=t.getEventCache().getNode(),u=void 0;if(e.isEmpty()||\".priority\"===e.getFront()){var c=void 0;if(t.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var l=t.getServerCache().getNode();m.assert(l instanceof qt,\"serverChildren would be complete if leaf node\"),c=n.calcCompleteEventChildren(l)}u=this.filter_.updateFullNode(s,c=c,i)}else{var h=e.getFront(),f=n.calcCompleteChild(h,t.getServerCache());null==f&&t.getServerCache().isCompleteForChild(h)&&(f=s.getImmediateChild(h)),(u=null!=f?this.filter_.updateChild(s,h,f,e.popFront(),a,i):t.getEventCache().getNode().hasChild(h)?this.filter_.updateChild(s,h,qt.EMPTY_NODE,e.popFront(),a,i):s).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(J.Empty),t.updateEventSnap(u,o,this.filter_.filtersNodes())},t}(),_e=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===pe.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(pe.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,pe.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,pe.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,pe.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,pe.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,pe.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,a=n.filter(function(t){return t.type===e});a.sort(this.compareChanges_.bind(this)),a.forEach(function(e){var n=o.materializeSingleChange_(e,i);r.forEach(function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))})})},t.prototype.materializeSingleChange_=function(t,e){return\"value\"===t.type||\"child_removed\"===t.type?t:(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_),t)},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw m.assertionError(\"Should only compare child_ events.\");var n=new wt(t.childName,t.snapshotNode),r=new wt(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),Ee=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new ye(n.getIndex()),i=n.getNodeFilter();this.processor_=new we(i);var o=e.getServerCache(),a=e.getEventCache(),s=r.updateFullNode(qt.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(qt.EMPTY_NODE,a.getNode(),null),c=new fe(s,o.isFullyInitialized(),r.filtersNodes()),l=new fe(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=new de(l,c),this.eventGenerator_=new _e(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){m.assert(null==t,\"A cancel should cancel all event registrations.\");var r=this.query_.path;this.eventRegistrations_.forEach(function(t){var i=t.createCancelEvent(e=e,r);i&&n.push(i)})}if(t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var a=this.eventRegistrations_[o];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===ie.MERGE&&null!==t.source.queryId&&(m.assert(this.viewCache_.getCompleteServerSnap(),\"We should always have a full cache before handling merges\"),m.assert(this.viewCache_.getCompleteEventSnap(),\"Missing event cache, even though we have a server cache\"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),m.assert(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),\"Once a server snap is complete, it should never go back\"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(kt,function(t,e){n.push(pe.childAddedChange(t,e))}),e.isFullyInitialized()&&n.push(pe.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){return this.eventGenerator_.generateEventsForChanges(t,e,n?[n]:this.eventRegistrations_)},t}(),Se=function(){function t(){this.views_={}}return Object.defineProperty(t,\"__referenceConstructor\",{get:function(){return m.assert(Ht,\"Reference.ts has not been loaded\"),Ht},set:function(t){m.assert(!Ht,\"__referenceConstructor has already been defined\"),Ht=t},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return m.isEmpty(this.views_)},t.prototype.applyOperation=function(t,e,n){var r=t.source.queryId;if(null!==r){var i=m.safeGet(this.views_,r);return m.assert(null!=i,\"SyncTree gave us an op for an invalid query.\"),i.applyOperation(t,e,n)}var o=[];return m.forEach(this.views_,function(r,i){o=o.concat(i.applyOperation(t,e,n))}),o},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),a=m.safeGet(this.views_,o);if(!a){var s=n.calcCompleteEventCache(i?r:null),u=!1;s?u=!0:r instanceof qt?(s=n.calcCompleteEventChildren(r),u=!1):(s=qt.EMPTY_NODE,u=!1);var c=new de(new fe(s,u,!1),new fe(r,i,!1));a=new Ee(t,c),this.views_[o]=a}return a.addEventRegistration(e),a.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var i=e.queryIdentifier(),o=[],a=[],s=this.hasCompleteView();if(\"default\"===i){var u=this;m.forEach(this.views_,function(t,e){a=a.concat(e.removeEventRegistration(n,r)),e.isEmpty()&&(delete u.views_[t],e.getQuery().getQueryParams().loadsAllData()||o.push(e.getQuery()))})}else{var c=m.safeGet(this.views_,i);c&&(a=a.concat(c.removeEventRegistration(n,r)),c.isEmpty()&&(delete this.views_[i],c.getQuery().getQueryParams().loadsAllData()||o.push(c.getQuery())))}return s&&!this.hasCompleteView()&&o.push(new t.__referenceConstructor(e.repo,e.path)),{removed:o,events:a}},t.prototype.getQueryViews=function(){var t=this;return Object.keys(this.views_).map(function(e){return t.views_[e]}).filter(function(t){return!t.getQuery().getQueryParams().loadsAllData()})},t.prototype.getCompleteServerCache=function(t){var e=null;return m.forEach(this.views_,function(n,r){e=e||r.getCompleteServerCache(t)}),e},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return m.safeGet(this.views_,e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){return m.findValue(this.views_,function(t){return t.getQuery().getQueryParams().loadsAllData()})||null},t}(),Ce=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new ue(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,a=J.relativePath(i,e);return o=o.updateChild(a,n),new t(this.writeTree_.set(i,o))}var s=new ue(n);return new t(this.writeTree_.setTree(e,s))},t.prototype.addWrites=function(t,e){var n=this;return m.forEach(e,function(e,r){n=n.addWrite(t.child(e),r)}),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,ue.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(J.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(kt,function(e,n){t.push(new wt(e,n))}):this.writeTree_.children.inorderTraversal(function(e,n){null!=n.value&&t.push(new wt(e,n.value))}),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new ue(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(e){return t.applySubtreeWrite_(J.Empty,this.writeTree_,e)},t.Empty=new t(new ue(null)),t.applySubtreeWrite_=function(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal(function(n,o){\".priority\"===n?(m.assert(null!==o.value,\"Priority writes must always be leaf nodes\"),i=o.value):r=t.applySubtreeWrite_(e.child(n),o,r)}),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(e.child(\".priority\"),i)),r},t}(),Te=function(){function t(){this.visibleWrites_=Ce.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new Ie(t,this)},t.prototype.addOverwrite=function(t,e,n,r){m.assert(n>this.lastWriteId_,\"Stacking an older write on top of newer ones\"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){m.assert(n>this.lastWriteId_,\"Stacking an older merge on top of newer ones\"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex(function(e){return e.writeId===t});m.assert(n>=0,\"removeWrite called with nonexistent writeId.\");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,a=this.allWrites_.length-1;i&&a>=0;){var s=this.allWrites_[a];s.visible&&(a>=n&&this.recordContainsPath_(s,r.path)?i=!1:r.path.contains(s.path)&&(o=!0)),a--}return!!i&&(o?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):m.forEach(r.children,function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))}),!0))},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);return!i&&o.isEmpty()?n:i||null!=n||o.hasCompleteWrite(J.Empty)?t.layerTree_(this.allWrites_,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e).apply(n||qt.EMPTY_NODE):null}var a=this.visibleWrites_.getCompleteNode(e);if(null!=a)return a;var s=this.visibleWrites_.childCompoundWrite(e);return s.isEmpty()?n:null!=n||s.hasCompleteWrite(J.Empty)?s.apply(n||qt.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=qt.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(kt,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(kt,function(t,e){var r=i.childCompoundWrite(new J(t)).apply(e);n=n.updateImmediateChild(t,r)}),i.getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){m.assert(n||r,\"Either existingEventSnap or existingServerSnap must exist\");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var a,s=this.visibleWrites_.childCompoundWrite(t),u=s.getCompleteNode(J.Empty);if(null!=u)a=u;else{if(null==e)return[];a=s.apply(e)}if((a=a.withIndex(o)).isEmpty()||a.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){return t.snap?t.path.contains(e):!!m.findKey(t.children,function(n,r){return t.path.child(r).contains(e)})},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,J.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=Ce.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var a=o.path,s=void 0;if(o.snap)n.contains(a)?(s=J.relativePath(n,a),r=r.addWrite(s,o.snap)):a.contains(n)&&(s=J.relativePath(a,n),r=r.addWrite(J.Empty,o.snap.getChild(s)));else{if(!o.children)throw m.assertionError(\"WriteRecord should have .snap or .children\");if(n.contains(a))s=J.relativePath(n,a),r=r.addWrites(s,o.children);else if(a.contains(n))if((s=J.relativePath(a,n)).isEmpty())r=r.addWrites(J.Empty,o.children);else{var u=m.safeGet(o.children,s.getFront());if(u){var c=u.getChild(s.popFront());r=r.addWrite(J.Empty,c)}}}}}return r},t}(),Ie=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),ke=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=ue.Empty,this.pendingWriteTree_=new Te,this.tagToQueryMap_={},this.queryToTagMap_={}}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new le(oe.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=ue.fromObject(e);return this.applyOperationToSyncPoints_(new he(oe.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=ue.Empty;return null!=n.snap?r=r.set(J.Empty,!0):m.forEach(n.children,function(t,e){r=r.set(new J(t),e)}),this.applyOperationToSyncPoints_(new ae(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new le(oe.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=ue.fromObject(e);return this.applyOperationToSyncPoints_(new he(oe.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new ce(oe.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),a=o.path,s=o.queryId,u=J.relativePath(a,e),c=new le(oe.forServerTaggedQuery(s),u,n);return this.applyTaggedOperation_(a,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),a=o.path,s=o.queryId,u=J.relativePath(a,e),c=ue.fromObject(n),l=new he(oe.forServerTaggedQuery(s),u,c);return this.applyTaggedOperation_(a,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,a=i.queryId,s=J.relativePath(o,e),u=new ce(oe.forServerTaggedQuery(a),s);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,function(t,e){var n=J.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()});var a,s=this.syncPointTree_.get(r);s?(o=o||s.hasCompleteView(),i=i||s.getCompleteServerCache(J.Empty)):(s=new Se,this.syncPointTree_=this.syncPointTree_.set(r,s)),null!=i?a=!0:(a=!1,i=qt.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=e.getCompleteServerCache(J.Empty);n&&(i=i.updateImmediateChild(t,n))}));var u=s.viewExistsForQuery(e);if(!u&&!e.getQueryParams().loadsAllData()){var c=t.makeQueryKey_(e);m.assert(!(c in this.queryToTagMap_),\"View does not exist, but we have a tag\");var l=t.getNextQueryTag_();this.queryToTagMap_[c]=l,this.tagToQueryMap_[\"_\"+l]=c}var h=this.pendingWriteTree_.childWrites(r),f=s.addEventRegistration(e,n,h,i,a);if(!u&&!o){var d=s.viewForQuery(e);f=f.concat(this.setupListener_(e,d))}return f},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,a=this.syncPointTree_.get(o),s=[];if(a&&(\"default\"===e.queryIdentifier()||a.viewExistsForQuery(e))){var u=a.removeEventRegistration(e,n,r);a.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;s=u.events;var l=-1!==c.findIndex(function(t){return t.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(o,function(t,e){return e.hasCompleteView()});if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var d=this.collectDistinctViewsForSubTree_(f),p=0;p<d.length;++p){var y=d[p],v=y.getQuery(),m=this.createListenerForView_(y);this.listenProvider_.startListening(t.queryForListening_(v),this.tagForQuery_(v),m.hashFn,m.onComplete)}}!h&&c.length>0&&!r&&(l?this.listenProvider_.stopListening(t.queryForListening_(e),null):c.forEach(function(e){var n=i.queryToTagMap_[t.makeQueryKey_(e)];i.listenProvider_.stopListening(t.queryForListening_(e),n)})),this.removeTags_(c)}return s},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,function(e,n){var r=J.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i});return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),m.forEach(n,function(t,e){r=r.concat(e)}),r})},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap_[i];delete this.queryToTagMap_[i],delete this.tagToQueryMap_[\"_\"+o]}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),o=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,o.hashFn,o.onComplete),s=this.syncPointTree_.subtree(r);if(i)m.assert(!s.value.hasCompleteView(),\"If we're adding a query, it shouldn't be shadowed\");else for(var u=s.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),m.forEach(n,function(t,e){r=r.concat(e)}),r}),c=0;c<u.length;++c){var l=u[c];this.listenProvider_.stopListening(t.queryForListening_(l),this.tagForQuery_(l))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||qt.EMPTY_NODE).hash()},onComplete:function(t){if(\"ok\"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n=\"Unknown Error\";\"too_big\"===t?n=\"The data requested exceeds the maximum size that can be accessed with a single request.\":\"permission_denied\"==t?n=\"Client doesn't have permission to access the desired data.\":\"unavailable\"==t&&(n=\"The service is unavailable\");var r=new Error(t+\" at \"+e.path.toString()+\": \"+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+\"$\"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf(\"$\");return m.assert(-1!==e&&e<t.length-1,\"Bad queryKey.\"),{queryId:t.substr(e+1),path:new J(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap_[\"_\"+t]},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return m.safeGet(this.queryToTagMap_,n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);m.assert(n,\"Missing sync point for query tag that we're tracking\");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(J.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(J.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(J.Empty));var o=[],a=t.path.getFront(),s=t.operationForChild(a),u=e.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=r.child(a);o=o.concat(this.applyOperationHelper_(s,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(J.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(J.Empty));var a=[];return e.children.inorderTraversal(function(e,o){var s=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(a=a.concat(i.applyOperationDescendantsHelper_(c,o,s,u)))}),o&&(a=a.concat(o.applyOperation(t,r,n))),a},t.nextQueryTag_=1,t}(),Oe=function(){function t(){this.rootNode_=qt.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Ne=function(){function t(t){this.app_=t}return t.prototype.getToken=function(t){return this.app_.INTERNAL.getToken(t).then(null,function(t){return t&&\"auth/token-not-initialized\"===t.code?(D(\"Got auth/token-not-initialized error.  Treating as null token.\"),null):Promise.reject(t)})},t.prototype.addTokenChangeListener=function(t){this.app_.INTERNAL.addAuthTokenListener(t)},t.prototype.removeTokenChangeListener=function(t){this.app_.INTERNAL.removeAuthTokenListener(t)},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named \"'+this.app_.name+'\" are invalid. This usually indicates your app was not initialized correctly. ';M(t+=\"credential\"in this.app_.options?'Make sure the \"credential\" property provided to initializeApp() is authorized to access the specified \"databaseURL\" and is from the correct project.':\"serviceAccount\"in this.app_.options?'Make sure the \"serviceAccount\" property provided to initializeApp() is authorized to access the specified \"databaseURL\" and is from the correct project.':'Make sure the \"apiKey\" and \"databaseURL\" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),Ae=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),m.contains(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return m.deepCopy(this.counters_)},t}(),De=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Ae),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),xe=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=m.clone(t);return this.last_&&m.forEach(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),Re=1e4,Pe=3e4,Me=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new xe(t);var n=Re+(Pe-Re)*Math.random();X(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;m.forEach(e,function(e,i){i>0&&m.contains(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),X(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),je=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Le(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.equals(t)})},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.contains(t)||t.contains(e)})},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),Le=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();O&&D(\"event: \"+e.toString()),G(n)}}},t.prototype.getPath=function(){return this.path_},t}(),Fe=function(){function t(t){this.allowedEvents_=t,this.listeners_={},m.assert(Array.isArray(t)&&t.length>0,\"Requires a non-empty array\")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=this.listeners_[t].slice(),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){m.assert(this.allowedEvents_.find(function(e){return e===t}),\"Unknown event: \"+t)},t}(),qe=function(t){function e(){var e,n,r=t.call(this,[\"visible\"])||this;return\"undefined\"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n=\"visibilitychange\",e=\"hidden\"):void 0!==document.mozHidden?(n=\"mozvisibilitychange\",e=\"mozHidden\"):void 0!==document.msHidden?(n=\"msvisibilitychange\",e=\"msHidden\"):void 0!==document.webkitHidden&&(n=\"webkitvisibilitychange\",e=\"webkitHidden\")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger(\"visible\",t))},!1),r}return v.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return m.assert(\"visible\"===t,\"Unknown event type: \"+t),[this.visible_]},e}(Fe),Ue=function(t){function e(){var e=t.call(this,[\"online\"])||this;return e.online_=!0,\"undefined\"==typeof window||void 0===window.addEventListener||m.isMobileCordova()||(window.addEventListener(\"online\",function(){e.online_||(e.online_=!0,e.trigger(\"online\",!0))},!1),window.addEventListener(\"offline\",function(){e.online_&&(e.online_=!1,e.trigger(\"online\",!1))},!1)),e}return v.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return m.assert(\"online\"===t,\"Unknown event type: \"+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Fe),Ve=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&G(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),\"break\";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&\"break\"!==r(););},t}(),Be=\"pLPCommand\",We=\"pRTLPCB\",ze=function(){function t(t,e,n,r){this.connId=t,this.repoInfo=e,this.transportSessionId=n,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=x(t),this.stats_=De.getCollection(e),this.urlFn=function(t){return e.connectionURL($,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Ve(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_(\"Timed out trying to connect.\"),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(m.isNodeSdk()||\"complete\"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener(\"DOMContentLoaded\",n,!1),window.addEventListener(\"load\",n,!1)):document.attachEvent&&(document.attachEvent(\"onreadystatechange\",function(){\"complete\"===document.readyState&&n()}),window.attachEvent(\"onload\",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new He(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[0],i=t[1],o=t[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,\"start\"==r)n.id=i,n.password=o;else{if(\"close\"!==r)throw new Error(\"Unrecognized command received: \"+r);i?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(i,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[0],i=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(r,i)},function(){n.onClosed_()},n.urlFn);var t={start:\"t\"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v=\"5\",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),!m.isNodeSdk()&&\"undefined\"!=typeof location&&location.href&&-1!==location.href.indexOf(\"firebaseio.com\")&&(t.r=\"f\");var e=n.urlFn(t);n.log_(\"Connecting via long-poll to \"+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return t.forceAllow_||!t.forceDisallow_&&\"undefined\"!=typeof document&&null!=document.createElement&&!(\"object\"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!(\"object\"==typeof Windows&&\"object\"==typeof Windows.UI)&&!m.isNodeSdk()},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_(\"Longpoll is closing itself\"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_(\"Longpoll is being closed.\"),this.shutdown_())},t.prototype.send=function(t){var e=m.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter(\"bytes_sent\",e.length);for(var n=m.base64Encode(e),r=W(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!m.isNodeSdk()){this.myDisconnFrame=document.createElement(\"iframe\");var n={dframe:\"t\"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display=\"none\",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=m.stringify(t).length;this.bytesReceived+=e,this.stats_.incrementCounter(\"bytes_received\",e)},t}(),He=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new te,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,m.isNodeSdk())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=T(),window[Be+this.uniqueCallbackIdentifier]=e,window[We+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o=\"\";this.myIFrame.src&&\"javascript:\"===this.myIFrame.src.substr(0,\"javascript:\".length)&&(o='<script>document.domain=\"'+document.domain+'\";<\\/script>');var a=\"<html><body>\"+o+\"</body></html>\";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(s){D(\"frame writing exception\"),s.stack&&D(s.stack),D(s)}}}return t.createIFrame_=function(){var t=document.createElement(\"iframe\");if(t.style.display=\"none\",!document.body)throw\"Document body has not initialized. Wait to initialize Firebase until after the document is ready.\";document.body.appendChild(t);try{t.contentWindow.document||D(\"No IE domain setting required\")}catch(n){var e=document.domain;t.src=\"javascript:void((function(){document.open();document.domain='\"+e+\"';document.close();})())\"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var e=this;if(this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML=\"\",setTimeout(function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)},Math.floor(0))),m.isNodeSdk()&&this.myID){var n={disconn:\"t\"};n.id=this.myID,n.pw=this.myPW;var r=this.urlFn(n);t.nodeRestRequest(r)}var i=this.onDisconnect;i&&(this.onDisconnect=null,i())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.count()<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n=\"\",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+\"&seg\"+r+\"=\"+i.seg+\"&ts\"+r+\"=\"+i.ts+\"&d\"+r+\"=\"+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e,1);var r=function(){n.outstandingRequests.remove(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;m.isNodeSdk()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement(\"script\");r.type=\"text/javascript\",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&\"loaded\"!==t&&\"complete\"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){D(\"Long-poll script failed to load: \"+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),Qe=null;\"undefined\"!=typeof MozWebSocket?Qe=MozWebSocket:\"undefined\"!=typeof WebSocket&&(Qe=WebSocket);var Ke=function(){function t(e,n,r,i){this.connId=e,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=x(this.connId),this.stats_=De.getCollection(n),this.connURL=t.connectionURL_(n,r,i)}return t.connectionURL_=function(t,e,n){var r={v:\"5\"};return!m.isNodeSdk()&&\"undefined\"!=typeof location&&location.href&&-1!==location.href.indexOf(\"firebaseio.com\")&&(r.r=\"f\"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(\"websocket\",r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_(\"Websocket connecting to \"+this.connURL),this.everConnected_=!1,E.set(\"previous_websocket_failure\",!0);try{if(m.isNodeSdk()){var r={headers:{\"User-Agent\":\"Firebase/5/\"+y.SDK_VERSION+\"/\"+process.platform+\"/\"+(m.CONSTANTS.NODE_ADMIN?\"AdminNode\":\"Node\")}},i=process.env,o=0==this.connURL.indexOf(\"wss://\")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;o&&(r.proxy={origin:o}),this.mySock=new Qe(this.connURL,[],r)}else this.mySock=new Qe(this.connURL)}catch(s){this.log_(\"Error instantiating WebSocket.\");var a=s.message||s.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_(\"Websocket connected.\"),n.everConnected_=!0},this.mySock.onclose=function(){n.log_(\"Websocket connection was disconnected.\"),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_(\"WebSocket error.  Closing connection.\");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if(\"undefined\"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Qe&&!t.forceDisallow_},t.previouslyFailed=function(){return E.isInMemoryStorage||!0===E.get(\"previous_websocket_failure\")},t.prototype.markConnectionHealthy=function(){E.remove(\"previous_websocket_failure\")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length==this.totalFrames){var e=this.frames.join(\"\");this.frames=null;var n=m.jsonEval(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(m.assert(null===this.frames,\"We already have a frame buffer\"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter(\"bytes_received\",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=m.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter(\"bytes_sent\",e.length);var n=W(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_(\"WebSocket is closing itself\"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_(\"WebSocket is being closed\"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_(\"0\"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_(\"Exception thrown from WebSocket.send():\",e.message||e.data,\"Closing connection.\"),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Ge=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,\"ALL_TRANSPORTS\",{get:function(){return[ze,Ke]},enumerable:!0,configurable:!0}),t.prototype.initTransports_=function(e){var n=Ke&&Ke.isAvailable(),r=n&&!Ke.previouslyFailed();if(e.webSocketOnly&&(n||M(\"wss:// URL used, but browser isn't known to support websockets.  Trying anyway.\"),r=!0),r)this.transports_=[Ke];else{var i=this.transports_=[];z(t.ALL_TRANSPORTS,function(t,e){e&&e.isAvailable()&&i.push(e)})}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error(\"No transports available\")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),Ye=function(){function t(t,e,n,r,i,o,a){this.id=t,this.repoInfo_=e,this.onMessage_=n,this.onReady_=r,this.onDisconnect_=i,this.onKill_=o,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=x(\"c:\"+this.id+\":\"),this.transportManager_=new Ge(e),this.log_(\"Connection created\"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=X(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_(\"Connection exceeded healthy timeout but has received \"+t.conn_.bytesReceived+\" bytes.  Marking connection healthy.\"),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_(\"Connection exceeded healthy timeout but has sent \"+t.conn_.bytesSent+\" bytes.  Leaving connection alive.\"):(t.log_(\"Closing unhealthy connection after timeout.\"),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return\"c:\"+this.id+\":\"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_(\"Secondary connection lost.\"),e.onSecondaryConnectionLost_()):e.log_(\"closing an old connection\")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!=e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_(\"message on old connection\"))}},t.prototype.sendRequest=function(t){this.sendData_({t:\"d\",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_(\"cleaning up and promoting a connection: \"+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if(\"t\"in t){var e=t.t;\"a\"===e?this.upgradeIfSecondaryHealthy_():\"r\"===e?(this.log_(\"Got a reset on secondary, closing it\"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):\"o\"===e&&(this.log_(\"got pong on secondary.\"),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=V(\"t\",t),n=V(\"d\",t);if(\"c\"==e)this.onSecondaryControl_(n);else{if(\"d\"!=e)throw new Error(\"Unknown protocol layer: \"+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_(\"Secondary connection is healthy.\"),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_(\"sending ping on secondary.\"),this.secondaryConn_.send({t:\"c\",d:{t:\"p\",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_(\"sending client ack on secondary\"),this.secondaryConn_.send({t:\"c\",d:{t:\"a\",d:{}}}),this.log_(\"Ending transmission on primary\"),this.conn_.send({t:\"c\",d:{t:\"n\",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=V(\"t\",t),n=V(\"d\",t);\"c\"==e?this.onControl_(n):\"d\"==e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_(\"Primary connection is healthy.\"),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=V(\"t\",t);if(\"d\"in t){var n=t.d;if(\"h\"===e)this.onHandshake_(n);else if(\"n\"===e){this.log_(\"recvd end transmission on primary\"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else\"s\"===e?this.onConnectionShutdown_(n):\"r\"===e?this.onReset_(n):\"e\"===e?R(\"Server Error: \"+n):\"o\"===e?(this.log_(\"got pong on primary.\"),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):R(\"Unknown control packet command: \"+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0==this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),\"5\"!==n&&M(\"Protocol version mismatch detected\"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),X(function(){e.secondaryConn_&&(e.log_(\"Timed out trying to upgrade.\"),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_(\"Reset packet received.  New host: \"+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_(\"Realtime connection established.\"),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_(\"Primary connection is healthy.\"),this.isHealthy_=!0):X(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_(\"sending ping on primary.\"),this.sendData_({t:\"c\",d:{t:\"p\",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_(\"Realtime connection lost.\"):(this.log_(\"Realtime connection failed.\"),this.repoInfo_.isCacheableHost()&&(E.remove(\"host:\"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_(\"Connection shutdown command received. Shutting down...\"),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw\"Connection is not connected\";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_(\"Closing realtime connection.\"),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_(\"Shutting down all connections\"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Xe=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),Je=1e3,Ze=3e5,$e=function(t){function e(n,r,i,o,a,s){var u=t.call(this)||this;if(u.repoInfo_=n,u.onDataUpdate_=r,u.onConnectStatus_=i,u.onServerInfoUpdate_=o,u.authTokenProvider_=a,u.authOverride_=s,u.id=e.nextPersistentConnectionId_++,u.log_=x(\"p:\"+u.id+\":\"),u.interruptReasons_={},u.listens_={},u.outstandingPuts_=[],u.outstandingPutCount_=0,u.onDisconnectRequestQueue_=[],u.connected_=!1,u.reconnectDelay_=Je,u.maxReconnectDelay_=Ze,u.securityDebugCallback_=null,u.lastSessionId=null,u.establishConnectionTimer_=null,u.visible_=!1,u.requestCBHash_={},u.requestNumber_=0,u.realtime_=null,u.authToken_=null,u.forceTokenRefresh_=!1,u.invalidAuthTokenCount_=0,u.firstConnection_=!0,u.lastConnectionAttemptTime_=null,u.lastConnectionEstablishedTime_=null,s&&!m.isNodeSdk())throw new Error(\"Auth override specified in options, but not supported on non Node.js platforms\");return u.scheduleConnect_(0),qe.getInstance().on(\"visible\",u.onVisible_,u),-1===n.host.indexOf(\"fblocal\")&&Ue.getInstance().on(\"online\",u.onOnline_,u),u}return v.__extends(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(m.stringify(i)),m.assert(this.connected_,\"sendRequest call when we're not connected not allowed.\"),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_(\"Listen called for \"+o+\" \"+i),this.listens_[o]=this.listens_[o]||{},m.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),\"listen() called for non-default but complete query\"),m.assert(!this.listens_[o][i],\"listen() called twice for same path/queryId.\");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens_[o][i]=a,this.connected_&&this.sendListen_(a)},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_(\"Listen on \"+i+\" for \"+o);var a={p:i};t.tag&&(a.q=r.queryObject(),a.t=t.tag),a.h=t.hashFn(),this.sendRequest(\"q\",a,function(a){var s=a.d,u=a.s;e.warnOnListenWarnings_(s,r),(n.listens_[i]&&n.listens_[i][o])===t&&(n.log_(\"listen response\",a),\"ok\"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,s))})},e.warnOnListenWarnings_=function(t,e){if(t&&\"object\"==typeof t&&m.contains(t,\"w\")){var n=m.safeGet(t,\"w\");if(Array.isArray(n)&&~n.indexOf(\"no_index\")){var r='\".indexOn\": \"'+e.getQueryParams().getIndex().toString()+'\"',i=e.path.toString();M(\"Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding \"+r+\" at \"+i+\" to your security rules for better performance.\")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_(\"Auth token refreshed\"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest(\"unauth\",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||m.isAdmin(t))&&(this.log_(\"Admin auth credential detected.  Reducing max reconnect time.\"),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=m.isValidFormat(e)?\"auth\":\"gauth\",r={cred:e};null===this.authOverride_?r.noauth=!0:\"object\"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||\"error\";t.authToken_===e&&(\"ok\"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_(\"Unlisten called for \"+n+\" \"+r),m.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),\"unlisten() called for non-default but complete query\"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_(\"Unlisten on \"+t+\" for \"+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest(\"n\",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_(\"o\",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:\"o\",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_(\"om\",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:\"om\",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_(\"oc\",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:\"oc\",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_(\"onDisconnect \"+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal(\"p\",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal(\"m\",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_(\"Buffering put: \"+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+\" response\",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_(\"reportStats\",n),this.sendRequest(\"s\",n,function(t){\"ok\"!==t.s&&e.log_(\"reportStats\",\"Error sending stats: \"+t.d)})}},e.prototype.onDataMessage_=function(t){if(\"r\"in t){this.log_(\"from server: \"+m.stringify(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if(\"error\"in t)throw\"A server-side error has occurred: \"+t.error;\"a\"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_(\"handleServerMessage\",t,e),\"d\"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):\"m\"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):\"c\"===t?this.onListenRevoked_(e.p,e.q):\"ac\"===t?this.onAuthRevoked_(e.s,e.d):\"sd\"===t?this.onSecurityDebugPacket_(e):R(\"Unrecognized action received from server: \"+m.stringify(t)+\"\\nAre you using the latest client?\")},e.prototype.onReady_=function(t,e){this.log_(\"connection ready\"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;m.assert(!this.realtime_,\"Scheduling a connect when we're already connected/ing?\"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_(\"Window became visible.  Reducing delay.\"),this.reconnectDelay_=Je,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_(\"Browser went online.\"),this.reconnectDelay_=Je,this.realtime_||this.scheduleConnect_(0)):(this.log_(\"Browser went offline.  Killing connection.\"),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_(\"data client disconnected\"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Je),this.lastConnectionEstablishedTime_=null):(this.log_(\"Window isn't visible.  Delaying reconnect.\"),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_(\"Trying to reconnect in \"+e+\"ms\"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_(\"Making a connection attempt\"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+\":\"+e.nextConnectionId_++,o=this,a=this.lastSessionId,s=!1,u=null,c=function(){u?u.close():(s=!0,r())};this.realtime_={close:c,sendRequest:function(t){m.assert(u,\"sendRequest call when we're not connected not allowed.\"),u.sendRequest(t)}};var l=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(l).then(function(e){s?D(\"getToken() completed but was canceled\"):(D(\"getToken() completed. Creating connection.\"),o.authToken_=e&&e.accessToken,u=new Ye(i,o.repoInfo_,t,n,r,function(t){M(t+\" (\"+o.repoInfo_.toString()+\")\"),o.interrupt(\"server_kill\")},a))}).then(null,function(t){o.log_(\"Failed to get token: \"+t),s||(m.CONSTANTS.NODE_ADMIN&&M(t),c())})}},e.prototype.interrupt=function(t){D(\"Interrupting connection for reason: \"+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){D(\"Resuming connection for reason: \"+t),delete this.interruptReasons_[t],m.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=Je,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&\"h\"in e.request&&e.queued&&(e.onComplete&&e.onComplete(\"disconnect\"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return B(t)}).join(\"$\"):\"default\";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete(\"permission_denied\")},e.prototype.removeListen_=function(t,e){var n,r=new J(t).toString();return void 0!==this.listens_[r]?(n=this.listens_[r][e],delete this.listens_[r][e],0===m.getCount(this.listens_[r])&&delete this.listens_[r]):n=void 0,n},e.prototype.onAuthRevoked_=function(t,e){D(\"Auth token revoked: \"+t+\"/\"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),\"invalid_token\"!==t&&\"permission_denied\"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):\"msg\"in t&&console.log(\"FIREBASE: \"+t.msg.replace(\"\\n\",\"\\nFIREBASE: \"))},e.prototype.restoreState_=function(){var t=this;this.tryAuth(),m.forEach(this.listens_,function(e,n){m.forEach(n,function(e,n){t.sendListen_(n)})});for(var e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){var n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}},e.prototype.sendConnectStats_=function(){var t={},e=\"js\";m.CONSTANTS.NODE_ADMIN?e=\"admin_node\":m.CONSTANTS.NODE_CLIENT&&(e=\"node\"),t[\"sdk.\"+e+\".\"+y.SDK_VERSION.replace(/\\./g,\"-\")]=1,m.isMobileCordova()?t[\"framework.cordova\"]=1:m.isReactNative()&&(t[\"framework.reactnative\"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=Ue.getInstance().currentlyOnline();return m.isEmpty(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(Xe),tn=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=x(\"p:rest:\"),i.listens_={},i}return v.__extends(e,t),e.prototype.reportStats=function(t){throw new Error(\"Method not implemented.\")},e.getListenId_=function(t,e){return void 0!==e?\"tag$\"+e:(m.assert(t.getQueryParams().isDefault(),\"should have a tag if it's not a default query.\"),t.path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,a=t.path.toString();this.log_(\"Listen called for \"+a+\" \"+t.queryIdentifier());var s=e.getListenId_(t,r),u={};this.listens_[s]=u;var c=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+\".json\",c,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(a,n,!1,r),m.safeGet(o.listens_,s)===u&&i(t?401==t?\"permission_denied\":\"rest_error:\"+t:\"ok\",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format=\"export\",this.authTokenProvider_.getToken(!1).then(function(i){var o=i&&i.accessToken;o&&(e.auth=o);var a=(r.repoInfo_.secure?\"https://\":\"http://\")+r.repoInfo_.host+t+\"?ns=\"+r.repoInfo_.namespace+m.querystring(e);r.log_(\"Sending REST request for \"+a);var s=new XMLHttpRequest;s.onreadystatechange=function(){if(n&&4===s.readyState){r.log_(\"REST Response for \"+a+\" received. status:\",s.status,\"response:\",s.responseText);var t=null;if(s.status>=200&&s.status<300){try{t=m.jsonEval(s.responseText)}catch(e){M(\"Failed to parse JSON response for \"+a+\": \"+s.responseText)}n(null,t)}else 401!==s.status&&404!==s.status&&M(\"Got unsuccessful REST response for \"+a+\" Status: \"+s.status),n(s.status);n=null}},s.open(\"GET\",a,!0),s.send()})},e}(Xe),en=function(){function t(t,e,n){var r=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new je,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new ee,this.persistentConnection_=null;var i=new Ne(n);if(this.stats_=De.getCollection(t),e||Y())this.server_=new tn(this.repoInfo_,this.onDataUpdate_.bind(this),i),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var o=n.options.databaseAuthVariableOverride;if(null!=o){if(\"object\"!=typeof o)throw new Error(\"Only objects are supported for option databaseAuthVariableOverride\");try{m.stringify(o)}catch(a){throw new Error(\"Invalid authOverride provided: \"+a)}}this.persistentConnection_=new $e(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),i,o),this.server_=this.persistentConnection_}i.addTokenChangeListener(function(t){r.server_.refreshAuthToken(t)}),this.statsReporter_=De.getOrCreateReporter(t,function(){return new Me(r.stats_,r.server_)}),this.transactions_init_(),this.infoData_=new Oe,this.infoSyncTree_=new ke({startListening:function(t,e,n,i){var o=[],a=r.infoData_.getNode(t.path);return a.isEmpty()||(o=r.infoSyncTree_.applyServerOverwrite(t.path,a),setTimeout(function(){i(\"ok\")},0)),o},stopListening:function(){}}),this.updateInfo_(\"connected\",!1),this.serverSyncTree_=new ke({startListening:function(t,e,n,i){return r.server_.listen(t,n,e,function(e,n){var o=i(e,n);r.eventQueue_.raiseEventsForChangedPath(t.path,o)}),[]},stopListening:function(t,e){r.server_.unlisten(t,e)}})}return t.prototype.toString=function(){return(this.repoInfo_.secure?\"https://\":\"http://\")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new J(\".info/serverTimeOffset\")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new J(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var a=m.map(e,function(t){return Bt(t)});o=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var s=Bt(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,s,r)}else if(n){var u=m.map(e,function(t){return Bt(t)});o=this.serverSyncTree_.applyServerMerge(i,u)}else{var c=Bt(e);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var l=i;o.length>0&&(l=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(l,o)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_(\"connected\",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;z(t,function(t,n){e.updateInfo_(n,t)})},t.prototype.updateInfo_=function(t,e){var n=new J(\"/.info/\"+t),r=Bt(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_(\"set\",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),a=Bt(e,n),s=re(a,o),u=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserOverwrite(t,s,u,!0);this.eventQueue_.queueEvents(c),this.server_.put(t.toString(),a.val(!0),function(e,n){var o=\"ok\"===e;o||M(\"set at \"+t+\" failed: \"+e);var a=i.serverSyncTree_.ackUserWrite(u,!o);i.eventQueue_.raiseEventsForChangedPath(t,a),i.callOnCompleteCallback(r,e,n)});var l=this.abortTransactions_(t);this.rerunTransactions_(l),this.eventQueue_.raiseEventsForChangedPath(l,[])},t.prototype.update=function(t,e,n){var r=this;this.log_(\"update\",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),a={};if(m.forEach(e,function(t,e){i=!1;var n=Bt(e);a[t]=re(n,o)}),i)D(\"update() called with empty data.  Don't do anything.\"),this.callOnCompleteCallback(n,\"ok\");else{var s=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,a,s);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,function(e,i){var o=\"ok\"===e;o||M(\"update at \"+t+\" failed: \"+e);var a=r.serverSyncTree_.ackUserWrite(s,!o),u=a.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,a),r.callOnCompleteCallback(n,e,i)}),m.forEach(e,function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)}),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_(\"onDisconnectEvents\");var e=this.generateServerValues(),n=function(t,e){var n=new ee;return t.forEachTree(new J(\"\"),function(t,r){n.remember(t,re(r,e))}),n}(this.onDisconnect_,e),r=[];n.forEachTree(J.Empty,function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)}),this.onDisconnect_=new ee,this.eventQueue_.raiseEventsForChangedPath(J.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),function(r,i){\"ok\"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)})},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=Bt(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),function(e,o){\"ok\"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)})},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=Bt(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),function(e,n){\"ok\"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)})},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(m.isEmpty(e))return D(\"onDisconnect().update() called with empty data.  Don't do anything.\"),void this.callOnCompleteCallback(n,\"ok\");this.server_.onDisconnectMerge(t.toString(),e,function(i,o){\"ok\"===i&&m.forEach(e,function(e,n){var i=Bt(n);r.onDisconnect_.remember(t.child(e),i)}),r.callOnCompleteCallback(n,i,o)})},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=\".info\"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=\".info\"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(\"repo_interrupt\")},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(\"repo_interrupt\")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),\"undefined\"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new xe(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);m.forEach(e,function(t,e){for(var r=t.length;r<n+2;r++)t+=\" \";console.log(t+e)})}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=\"\";this.persistentConnection_&&(n=this.persistentConnection_.id+\":\"),D.apply(void 0,[n].concat(t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&G(function(){if(\"ok\"==e)t(null);else{var r=(e||\"error\").toUpperCase(),i=r;n&&(i+=\": \"+n);var o=new Error(i);o.code=r,t(o)}})},Object.defineProperty(t.prototype,\"database\",{get:function(){return this.__database||(this.__database=new fn(this))},enumerable:!0,configurable:!0}),t}(),nn=function(){function t(e){this.indexedFilter_=new ye(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new wt(e,n))||(n=qt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=qt.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(qt.EMPTY_NODE);var i=this;return e.forEachChild(kt,function(t,e){i.matches(new wt(t,e))||(r=r.updateImmediateChild(t,qt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),rn=function(){function t(t){this.rangedFilter_=new nn(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new wt(e,n))||(n=qt.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=qt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=qt.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(qt.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)a=i.getNext(),!h&&c(s,a)<=0&&(h=!0),h&&o<this.limit_&&c(a,u)<=0?o++:r=r.updateImmediateChild(a.name,qt.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(t,e){return a(e,t)}}else o=this.index_.getCompare();var s=t;m.assert(s.numChildren()==this.limit_,\"\");var u=new wt(e,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(e)){for(var h=s.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name==e||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:o(f,u);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(pe.childChangedChange(e,n,h)),s.updateImmediateChild(e,n);null!=i&&i.trackChildChange(pe.childRemovedChange(e,h));var p=s.updateImmediateChild(e,qt.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(pe.childAddedChange(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}return n.isEmpty()?t:l&&o(c,u)>=0?(null!=i&&(i.trackChildChange(pe.childRemovedChange(c.name,c.node)),i.trackChildChange(pe.childAddedChange(e,n))),s.updateImmediateChild(e,n).updateImmediateChild(c.name,qt.EMPTY_NODE)):t},t}(),on=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_=\"\",this.indexStartValue_=null,this.indexStartName_=\"\",this.indexEndValue_=null,this.indexEndName_=\"\",this.index_=kt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return\"\"===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return m.assert(this.startSet_,\"Only valid if start has been set\"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return m.assert(this.startSet_,\"Only valid if start has been set\"),this.startNameSet_?this.indexStartName_:L},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return m.assert(this.endSet_,\"Only valid if end has been set\"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return m.assert(this.endSet_,\"Only valid if end has been set\"),this.endNameSet_?this.indexEndName_:F},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&\"\"!==this.viewFrom_},t.prototype.getLimit=function(){return m.assert(this.limitSet_,\"Only valid if limit has been set\"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=\"\",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=\"\"),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=\"\"),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;\"\"===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==kt&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_==kt},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new ye(this.getIndex()):this.hasLimit()?new rn(this):new nn(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()?r:(this.index_===kt?e=n.PRIORITY_INDEX:this.index_===Qt?e=n.VALUE_INDEX:this.index_===St?e=n.KEY_INDEX:(m.assert(this.index_ instanceof Kt,\"Unrecognized index type!\"),e=this.index_.toString()),r[n.ORDER_BY]=m.stringify(e),this.startSet_&&(r[n.START_AT]=m.stringify(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=\",\"+m.stringify(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=m.stringify(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=\",\"+m.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_),r)},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:\"sp\",INDEX_START_NAME:\"sn\",INDEX_END_VALUE:\"ep\",INDEX_END_NAME:\"en\",LIMIT:\"l\",VIEW_FROM:\"vf\",VIEW_FROM_LEFT:\"l\",VIEW_FROM_RIGHT:\"r\",INDEX:\"i\"},t.REST_QUERY_CONSTANTS_={ORDER_BY:\"orderBy\",PRIORITY_INDEX:\"$priority\",VALUE_INDEX:\"$value\",KEY_INDEX:\"$key\",START_AT:\"startAt\",END_AT:\"endAt\",LIMIT_TO_FIRST:\"limitToFirst\",LIMIT_TO_LAST:\"limitToLast\"},t.DEFAULT=new t,t}(),an=function(t){function e(e,n){if(!(e instanceof en))throw new Error(\"new Reference() no longer supported - use app.database().\");return t.call(this,e,n,on.DEFAULT,!1)||this}return v.__extends(e,t),e.prototype.getKey=function(){return m.validateArgCount(\"Reference.key\",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return m.validateArgCount(\"Reference.child\",1,1,arguments.length),\"number\"==typeof t?t=String(t):t instanceof J||(null===this.path.getFront()?function(t,e,n,r){n&&(n=n.replace(/^\\/*\\.info(\\/|$)/,\"/\")),pt(\"Reference.child\",1,n,!1)}(0,0,t):pt(\"Reference.child\",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){m.validateArgCount(\"Reference.parent\",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){m.validateArgCount(\"Reference.root\",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){m.validateArgCount(\"Reference.set\",1,2,arguments.length),yt(\"Reference.set\",this.path),ut(\"Reference.set\",1,t,this.path,!1),m.validateCallback(\"Reference.set\",2,e,!0);var n=new m.Deferred;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(m.validateArgCount(\"Reference.update\",1,2,arguments.length),yt(\"Reference.update\",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[\"\"+r]=t[r];t=n,M(\"Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.\")}lt(\"Reference.update\",1,t,this.path,!1),m.validateCallback(\"Reference.update\",2,e,!0);var i=new m.Deferred;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(m.validateArgCount(\"Reference.setWithPriority\",2,3,arguments.length),yt(\"Reference.setWithPriority\",this.path),ut(\"Reference.setWithPriority\",1,t,this.path,!1),ht(\"Reference.setWithPriority\",2,e,!1),m.validateCallback(\"Reference.setWithPriority\",3,n,!0),\".length\"===this.getKey()||\".keys\"===this.getKey())throw\"Reference.setWithPriority failed: \"+this.getKey()+\" is a read-only object.\";var r=new m.Deferred;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return m.validateArgCount(\"Reference.remove\",0,1,arguments.length),yt(\"Reference.remove\",this.path),m.validateCallback(\"Reference.remove\",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(m.validateArgCount(\"Reference.transaction\",1,3,arguments.length),yt(\"Reference.transaction\",this.path),m.validateCallback(\"Reference.transaction\",1,t,!1),m.validateCallback(\"Reference.transaction\",2,e,!0),function(t,e,r,i){if(void 0!==n&&\"boolean\"!=typeof n)throw new Error(m.errorPrefix(\"Reference.transaction\",3,!0)+\"must be a boolean.\")}(),\".length\"===this.getKey()||\".keys\"===this.getKey())throw\"Reference.transaction failed: \"+this.getKey()+\" is a read-only object.\";void 0===n&&(n=!0);var r=new m.Deferred;return\"function\"==typeof e&&r.promise.catch(function(){}),this.repo.startTransaction(this.path,t,function(t,n,i){t?r.reject(t):r.resolve(new gt(n,i)),\"function\"==typeof e&&e(t,n,i)},n),r.promise},e.prototype.setPriority=function(t,e){m.validateArgCount(\"Reference.setPriority\",1,2,arguments.length),yt(\"Reference.setPriority\",this.path),ht(\"Reference.setPriority\",1,t,!1),m.validateCallback(\"Reference.setPriority\",2,e,!0);var n=new m.Deferred;return this.repo.setWithPriority(this.path.child(\".priority\"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){m.validateArgCount(\"Reference.push\",0,2,arguments.length),yt(\"Reference.push\",this.path),ut(\"Reference.push\",1,t,this.path,!0),m.validateCallback(\"Reference.push\",2,e,!0);var n,r=this.repo.serverTime(),i=bt(r),o=this.child(i),a=this.child(i);return n=null!=t?o.set(t,e).then(function(){return a}):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),\"function\"==typeof e&&n.catch(function(){}),o},e.prototype.onDisconnect=function(){return yt(\"Reference.onDisconnect\",this.path),new mt(this.repo,this.path)},Object.defineProperty(e.prototype,\"database\",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"key\",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"parent\",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"root\",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),e}($t);$t.__referenceConstructor=an,Se.__referenceConstructor=an;var sn=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),un=function(){function t(t,e,n){void 0===t&&(t=\"\"),void 0===e&&(e=null),void 0===n&&(n=new sn),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n,r=e instanceof J?e:new J(e),i=this;null!==(n=r.getFront());)i=new t(n,i,m.safeGet(i.node_.children,n)||new sn),r=r.popFront();return i},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){m.assert(void 0!==t,\"Cannot set value to undefined\"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;m.forEach(this.node_.children,function(r,i){e(new t(r,n,i))})},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild(function(e){e.forEachDescendant(t,!0,n)}),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)})},t.prototype.path=function(){return new J(null===this.parent_?this.name_:this.parent_.path()+\"/\"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=m.contains(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}(),cn=function(t){return t[t.RUN=0]=\"RUN\",t[t.SENT=1]=\"SENT\",t[t.COMPLETED=2]=\"COMPLETED\",t[t.SENT_NEEDS_ABORT=3]=\"SENT_NEEDS_ABORT\",t[t.NEEDS_ABORT=4]=\"NEEDS_ABORT\",t}({});en.MAX_TRANSACTION_RETRIES_=25,en.prototype.transactions_init_=function(){this.transactionQueueTree_=new un},en.prototype.startTransaction=function(t,e,n,r){this.log_(\"transaction on \"+t);var i=function(){},o=new an(this,t);o.on(\"value\",i);var a={path:t,update:e,onComplete:n,status:null,order:T(),applyLocally:r,retryCount:0,unwatcher:function(){o.off(\"value\",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=this.getLatestState_(t);a.currentInputSnapshot=s;var u=a.update(s.val());if(void 0===u){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var c=new Gt(a.currentInputSnapshot,new an(this,a.path),kt);a.onComplete(null,!1,c)}}else{ct(\"transaction failed: Data returned \",u,a.path),a.status=cn.RUN;var l=this.transactionQueueTree_.subTree(t),h=l.getValue()||[];h.push(a),l.setValue(h);var f=void 0;\"object\"==typeof u&&null!==u&&m.contains(u,\".priority\")?(f=m.safeGet(u,\".priority\"),m.assert(st(f),\"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.\")):f=(this.serverSyncTree_.calcCompleteEventCache(t)||qt.EMPTY_NODE).getPriority().val(),f=f;var d=this.generateServerValues(),p=Bt(u,f),y=re(p,d);a.currentOutputSnapshotRaw=p,a.currentOutputSnapshotResolved=y,a.currentWriteId=this.getNextWriteId_();var v=this.serverSyncTree_.applyUserOverwrite(t,y,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,v),this.sendReadyTransactions_()}},en.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||qt.EMPTY_NODE},en.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);m.assert(n.length>0,\"Sending zero length transaction queue\"),n.every(function(t){return t.status===cn.RUN})&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},en.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map(function(t){return t.currentWriteId}),i=this.getLatestState_(t,r),o=i,a=i.hash(),s=0;s<e.length;s++){var u=e[s];m.assert(u.status===cn.RUN,\"tryToSendTransactionQueue_: items in queue should all be run.\"),u.status=cn.SENT,u.retryCount++;var c=J.relativePath(t,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var l=o.val(!0),h=t;this.server_.put(h.toString(),l,function(r){n.log_(\"transaction put response\",{path:h.toString(),status:r});var i=[];if(\"ok\"===r){for(var o=[],a=0;a<e.length;a++){if(e[a].status=cn.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[a].currentWriteId)),e[a].onComplete){var s=e[a].currentOutputSnapshotResolved,u=new an(n,e[a].path),c=new Gt(s,u,kt);o.push(e[a].onComplete.bind(null,null,!0,c))}e[a].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i),a=0;a<o.length;a++)G(o[a])}else{if(\"datastale\"===r)for(a=0;a<e.length;a++)e[a].status=e[a].status===cn.SENT_NEEDS_ABORT?cn.NEEDS_ABORT:cn.RUN;else for(M(\"transaction at \"+h.toString()+\" failed: \"+r),a=0;a<e.length;a++)e[a].status=cn.NEEDS_ABORT,e[a].abortReason=r;n.rerunTransactions_(t)}},a)},en.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},en.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter(function(t){return t.status===cn.RUN}).map(function(t){return t.currentWriteId}),o=0;o<t.length;o++){var a=t[o],s=J.relativePath(e,a.path),u=!1,c=void 0;if(m.assert(null!==s,\"rerunTransactionsUnderNode_: relativePath should not be null.\"),a.status===cn.NEEDS_ABORT)u=!0,c=a.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===cn.RUN)if(a.retryCount>=en.MAX_TRANSACTION_RETRIES_)u=!0,c=\"maxretry\",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var l=this.getLatestState_(a.path,i);a.currentInputSnapshot=l;var h=t[o].update(l.val());if(void 0!==h){ct(\"transaction failed: Data returned \",h,a.path);var f=Bt(h);\"object\"==typeof h&&null!=h&&m.contains(h,\".priority\")||(f=f.updatePriority(l.getPriority()));var d=a.currentWriteId,p=this.generateServerValues(),y=re(f,p);a.currentOutputSnapshotRaw=f,a.currentOutputSnapshotResolved=y,a.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(d),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(a.path,y,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(d,!0))}else u=!0,c=\"nodata\",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],u&&(t[o].status=cn.COMPLETED,setTimeout(t[o].unwatcher,Math.floor(0)),t[o].onComplete))if(\"nodata\"===c){var v=new an(this,t[o].path),g=new Gt(t[o].currentInputSnapshot,v,kt);n.push(t[o].onComplete.bind(null,null,!1,g))}else n.push(t[o].onComplete.bind(null,new Error(c),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),o=0;o<n.length;o++)G(n[o]);this.sendReadyTransactions_()}},en.prototype.getAncestorTransactionNode_=function(t){for(var e,n=this.transactionQueueTree_;null!==(e=t.getFront())&&null===n.getValue();)n=n.subTree(e),t=t.popFront();return n},en.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},en.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},en.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==cn.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},en.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},en.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)e[o].status===cn.SENT_NEEDS_ABORT||(e[o].status===cn.SENT?(m.assert(i===o-1,\"All SENT items should be at beginning of queue.\"),i=o,e[o].status=cn.SENT_NEEDS_ABORT,e[o].abortReason=\"set\"):(m.assert(e[o].status===cn.RUN,\"Unexpected transaction status in abort\"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete&&n.push(e[o].onComplete.bind(null,new Error(\"set\"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),o=0;o<n.length;o++)G(n[o])}};var ln,hn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return ln||(ln=new t),ln},t.prototype.interrupt=function(){for(var t in this.repos_)for(var e in this.repos_[t])this.repos_[t][e].interrupt()},t.prototype.resume=function(){for(var t in this.repos_)for(var e in this.repos_[t])this.repos_[t][e].resume()},t.prototype.databaseFromApp=function(t,e){var n=e||t.options.databaseURL;void 0===n&&P(\"Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.initializeApp().\");var r=et(n),i=r.repoInfo;return vt(\"Invalid Firebase Database URL\",1,r),r.path.isEmpty()||P(\"Database URL must point to the root of a Firebase Database (not including a child path).\"),this.createRepo(i,t).database},t.prototype.deleteRepo=function(t){var e=m.safeGet(this.repos_,t.app.name);e&&m.safeGet(e,t.repoInfo_.toURLString())===t||P(\"Database \"+t.app.name+\"(\"+t.repoInfo_+\") has already been deleted.\"),t.interrupt(),delete e[t.repoInfo_.toURLString()]},t.prototype.createRepo=function(t,e){var n=m.safeGet(this.repos_,e.name);n||(this.repos_[e.name]=n={});var r=m.safeGet(n,t.toURLString());return r&&P(\"Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.\"),r=new en(t,this.useRestClient_,e),n[t.toURLString()]=r,r},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),fn=function(){function t(t){this.repo_=t,t instanceof en||P(\"Don't call new Database() directly - please use firebase.database().\"),this.root_=new an(t,J.Empty),this.INTERNAL=new dn(this)}return Object.defineProperty(t.prototype,\"app\",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),t.prototype.ref=function(t){return this.checkDeleted_(\"ref\"),m.validateArgCount(\"database.ref\",0,1,arguments.length),t instanceof an?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e=\"database.refFromURL\";this.checkDeleted_(e),m.validateArgCount(e,1,1,arguments.length);var n=et(t);vt(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&P(e+\": Host name does not match the current database: (found \"+r.host+\" but expected \"+this.repo_.repoInfo_.host+\")\"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repo_&&P(\"Cannot call \"+t+\" on a deleted database.\")},t.prototype.goOffline=function(){m.validateArgCount(\"database.goOffline\",0,0,arguments.length),this.checkDeleted_(\"goOffline\"),this.repo_.interrupt()},t.prototype.goOnline=function(){m.validateArgCount(\"database.goOnline\",0,0,arguments.length),this.checkDeleted_(\"goOnline\"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{\".sv\":\"timestamp\"}},t}(),dn=function(){function t(t){this.database=t}return t.prototype.delete=function(){return v.__awaiter(this,void 0,void 0,function(){return v.__generator(this,function(t){return this.database.checkDeleted_(\"delete\"),hn.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},t}(),pn=Object.freeze({forceLongPolling:function(){Ke.forceDisallow(),ze.forceAllow()},forceWebSockets:function(){ze.forceDisallow()},isWebSocketsAvailable:function(){return Ke.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),yn=$e;$e.prototype.simpleListen=function(t,e){this.sendRequest(\"q\",{p:t},e)},$e.prototype.echo=function(t,e){this.sendRequest(\"echo\",{d:t},e)};var vn=Object.freeze({DataConnection:yn,RealTimeConnection:Ye,hijackHash:function(t){var e=$e.prototype.put;return $e.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){$e.prototype.put=e}},ConnectionTarget:tt,queryIdentifier:function(t){return t.queryIdentifier()},listens:function(t){return t.repo.persistentConnection_.listens_},forceRestClient:function(t){hn.getInstance().forceRestClient(t)}}),mn=fn.ServerValue;function gn(e){var n=e.INTERNAL.registerService(\"database\",function(t,e,n){return hn.getInstance().databaseFromApp(t,n)},{Reference:an,Query:$t,Database:fn,DataSnapshot:Gt,enableLogging:A,INTERNAL:pn,ServerValue:mn,TEST_ACCESS:vn},null,!0);m.isNodeSdk()&&(t.exports=n)}gn(y),e.DataSnapshot=Gt,e.Database=fn,e.OnDisconnect=mt,e.Query=$t,e.Reference=an,e.ServerValue=mn,e.enableLogging=A,e.registerDatabase=gn},\"Rt+L\":function(t,e,n){\"use strict\";n(\"KOl+\")},S1nX:function(t,e,n){\"use strict\";var r=n(\"mrSG\"),i=n(\"K9Ia\"),o=n(\"6blF\"),a=n(\"FFOo\"),s=n(\"pugT\");function u(){return function(t){return t.lift(new c(t))}}var c=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new l(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i},t}(),l=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return r.d(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(a.a),h=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return r.d(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new s.a).add(this.source.subscribe(new d(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.a.EMPTY)),t},e.prototype.refCount=function(){return u()(this)},e}(o.a).prototype,f={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:h._subscribe},_isComplete:{value:h._isComplete,writable:!0},getSubject:{value:h.getSubject},connect:{value:h.connect},refCount:{value:h.refCount}},d=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return r.d(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(i.b);function p(){return new i.a}function y(){return function(t){return u()((e=p,function(t){var n;n=\"function\"==typeof e?e:function(){return e};var r=Object.create(t,f);return r.source=t,r.subjectFactory=n,r})(t));var e}}n.d(e,\"a\",function(){return y})},\"VnD/\":function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return o});var r=n(\"mrSG\"),i=n(\"FFOo\");function o(t,e){return function(n){return n.lift(new a(t,e))}}var a=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.predicate,this.thisArg))},t}(),s=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return r.d(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)},e}(i.a)},Wcq6:function(t,e,n){\"use strict\";var r,i=(r=n(\"wj3C\"))&&\"object\"==typeof r&&\"default\"in r?r.default:r;t.exports=i},ZBkt:function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return c}),n(\"mrSG\");var r=n(\"6blF\"),i=n(\"0/uQ\"),o=n(\"F/XL\"),a=n(\"15JJ\"),s=n(\"NKHs\"),u=n(\"hDTV\"),c=function(){return function(t,e,n,c){var l=this;this.zone=c;var h=new s.a(c,n);this.auth=c.runOutsideAngular(function(){return Object(u.e)(t,e).auth()}),this.authState=h.keepUnstableUntilFirst(h.runOutsideAngular(new r.a(function(t){return{unsubscribe:l.auth.onAuthStateChanged(t)}}))),this.user=h.keepUnstableUntilFirst(h.runOutsideAngular(new r.a(function(t){return{unsubscribe:l.auth.onIdTokenChanged(t)}}))),this.idToken=this.user.pipe(Object(a.a)(function(t){return t?Object(i.a)(t.getIdToken()):Object(o.a)(null)})),this.idTokenResult=this.user.pipe(Object(a.a)(function(t){return t?Object(i.a)(t.getIdTokenResult()):Object(o.a)(null)}))}}()},ZYCi:function(t,e,n){\"use strict\";var r=n(\"mrSG\"),i=n(\"Ip0R\"),o=n(\"CcnG\"),a=n(\"F/XL\"),s=n(\"0/uQ\"),u=n(\"26FU\"),c=n(\"6blF\");function l(){return Error.call(this),this.message=\"no elements in sequence\",this.name=\"EmptyError\",this}l.prototype=Object.create(Error.prototype);var h=l,f=n(\"nkY7\"),d=n(\"isby\"),p=n(\"MGBS\"),y=n(\"zotm\"),v=n(\"IUTb\"),m={},g=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new b(t,this.resultSelector))},t}(),b=function(t){function e(e,n){var r=t.call(this,e)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return r.d(e,t),e.prototype._next=function(t){this.values.push(m),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(Object(y.a)(this,r,r,n))}}},e.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.values,a=this.toRespond?o[n]===m?--this.toRespond:this.toRespond:0;o[n]=e,0===a&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},e.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)},e}(p.a),w=n(\"G5J1\");function _(t){return new c.a(function(e){var n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(s.a)(n):Object(w.b)()).subscribe(e)})}var E=n(\"K9Ia\"),S=n(\"67Y/\"),C=n(\"Zn8D\");function T(){return Object(C.a)(1)}var I=n(\"VnD/\"),k=n(\"FFOo\");function O(){return Error.call(this),this.message=\"argument out of range\",this.name=\"ArgumentOutOfRangeError\",this}O.prototype=Object.create(Error.prototype);var N=O;function A(t){return function(e){return 0===t?Object(w.b)():e.lift(new D(t))}}var D=function(){function t(t){if(this.total=t,this.total<0)throw new N}return t.prototype.call=function(t,e){return e.subscribe(new x(t,this.total))},t}(),x=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.ring=new Array,r.count=0,r}return r.d(e,t),e.prototype._next=function(t){var e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t},e.prototype._complete=function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=e++%n;t.next(r[o])}t.complete()},e}(k.a);function R(t){return void 0===t&&(t=j),function(e){return e.lift(new P(t))}}var P=function(){function t(t){this.errorFactory=t}return t.prototype.call=function(t,e){return e.subscribe(new M(t,this.errorFactory))},t}(),M=function(t){function e(e,n){var r=t.call(this,e)||this;return r.errorFactory=n,r.hasValue=!1,r}return r.d(e,t),e.prototype._next=function(t){this.hasValue=!0,this.destination.next(t)},e.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var t=void 0;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)},e}(k.a);function j(){return new h}function L(t){return void 0===t&&(t=null),function(e){return e.lift(new F(t))}}var F=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new q(t,this.defaultValue))},t}(),q=function(t){function e(e,n){var r=t.call(this,e)||this;return r.defaultValue=n,r.isEmpty=!0,r}return r.d(e,t),e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(k.a),U=n(\"mChF\");function V(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?Object(I.a)(function(e,n){return t(e,n,r)}):U.a,A(1),n?L(e):R(function(){return new h}))}}var B=n(\"rPjj\");function W(t){return function(e){var n=new z(t),r=e.lift(n);return n.caught=r}}var z=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new H(t,this.selector,this.caught))},t}(),H=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.selector=n,i.caught=r,i}return r.d(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(i){return void t.prototype.error.call(this,i)}this._unsubscribeAndRecycle();var r=new B.a(this,void 0,void 0);this.add(r),Object(y.a)(this,n,void 0,void 0,r)}},e}(p.a);function Q(t){return function(e){return 0===t?Object(w.b)():e.lift(new K(t))}}var K=function(){function t(t){if(this.total=t,this.total<0)throw new N}return t.prototype.call=function(t,e){return e.subscribe(new G(t,this.total))},t}(),G=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return r.d(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},e}(k.a);function Y(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?Object(I.a)(function(e,n){return t(e,n,r)}):U.a,Q(1),n?L(e):R(function(){return new h}))}}var X=n(\"psW0\"),J=function(){function t(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}return t.prototype.call=function(t,e){return e.subscribe(new Z(t,this.predicate,this.thisArg,this.source))},t}(),Z=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.predicate=n,o.thisArg=r,o.source=i,o.index=0,o.thisArg=r||o,o}return r.d(e,t),e.prototype.notifyComplete=function(t){this.destination.next(t),this.destination.complete()},e.prototype._next=function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(k.a),$=n(\"15JJ\");function tt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return T()(a.a.apply(void 0,t))}var et=n(\"dC0D\");function nt(t,e){return Object(X.a)(t,e,1)}var rt=n(\"y3By\"),it=n(\"+umK\"),ot=n(\"2Bdj\");function at(t,e,n){return function(r){return r.lift(new st(t,e,n))}}var st=function(){function t(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return t.prototype.call=function(t,e){return e.subscribe(new ut(t,this.nextOrObserver,this.error,this.complete))},t}(),ut=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o._tapNext=it.a,o._tapError=it.a,o._tapComplete=it.a,o._tapError=r||it.a,o._tapComplete=i||it.a,Object(ot.a)(n)?(o._context=o,o._tapNext=n):n&&(o._context=n,o._tapNext=n.next||it.a,o._tapError=n.error||it.a,o._tapComplete=n.complete||it.a),o}return r.d(e,t),e.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)},e.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},e}(k.a),ct=n(\"pugT\"),lt=function(){function t(t){this.callback=t}return t.prototype.call=function(t,e){return e.subscribe(new ht(t,this.callback))},t}(),ht=function(t){function e(e,n){var r=t.call(this,e)||this;return r.add(new ct.a(n)),r}return r.d(e,t),e}(k.a),ft=n(\"ZYjt\");n.d(e,\"u\",function(){return Hn}),n.d(e,\"B\",function(){return er}),n.d(e,\"w\",function(){return Yn}),n.d(e,\"C\",function(){return nr}),n.d(e,\"D\",function(){return rr}),n.d(e,\"y\",function(){return Jn}),n.d(e,\"x\",function(){return Xn}),n.d(e,\"A\",function(){return tr}),n.d(e,\"v\",function(){return Kn}),n.d(e,\"z\",function(){return $n}),n.d(e,\"E\",function(){return Wn}),n.d(e,\"n\",function(){return Rn}),n.d(e,\"p\",function(){return Ln}),n.d(e,\"d\",function(){return pt}),n.d(e,\"l\",function(){return Sn}),n.d(e,\"m\",function(){return xn}),n.d(e,\"k\",function(){return Tn}),n.d(e,\"i\",function(){return zn}),n.d(e,\"j\",function(){return ir}),n.d(e,\"o\",function(){return Gn}),n.d(e,\"b\",function(){return jn}),n.d(e,\"e\",function(){return Vn}),n.d(e,\"g\",function(){return Un}),n.d(e,\"h\",function(){return qn}),n.d(e,\"q\",function(){return Bn}),n.d(e,\"a\",function(){return _e}),n.d(e,\"f\",function(){return Dt}),n.d(e,\"r\",function(){return kn}),n.d(e,\"c\",function(){return te}),n.d(e,\"s\",function(){return $t}),n.d(e,\"t\",function(){return At});var dt=function(){return function(t,e){this.id=t,this.url=e}}(),pt=function(t){function e(e,n,r,i){void 0===r&&(r=\"imperative\"),void 0===i&&(i=null);var o=t.call(this,e,n)||this;return o.navigationTrigger=r,o.restoredState=i,o}return Object(r.d)(e,t),e.prototype.toString=function(){return\"NavigationStart(id: \"+this.id+\", url: '\"+this.url+\"')\"},e}(dt),yt=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.urlAfterRedirects=r,i}return Object(r.d)(e,t),e.prototype.toString=function(){return\"NavigationEnd(id: \"+this.id+\", url: '\"+this.url+\"', urlAfterRedirects: '\"+this.urlAfterRedirects+\"')\"},e}(dt),vt=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.reason=r,i}return Object(r.d)(e,t),e.prototype.toString=function(){return\"NavigationCancel(id: \"+this.id+\", url: '\"+this.url+\"')\"},e}(dt),mt=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.error=r,i}return Object(r.d)(e,t),e.prototype.toString=function(){return\"NavigationError(id: \"+this.id+\", url: '\"+this.url+\"', error: \"+this.error+\")\"},e}(dt),gt=function(t){function e(e,n,r,i){var o=t.call(this,e,n)||this;return o.urlAfterRedirects=r,o.state=i,o}return Object(r.d)(e,t),e.prototype.toString=function(){return\"RoutesRecognized(id: \"+this.id+\", url: '\"+this.url+\"', urlAfterRedirects: '\"+this.urlAfterRedirects+\"', state: \"+this.state+\")\"},e}(dt),bt=function(t){function e(e,n,r,i){var o=t.call(this,e,n)||this;return o.urlAfterRedirects=r,o.state=i,o}return Object(r.d)(e,t),e.prototype.toString=function(){return\"GuardsCheckStart(id: \"+this.id+\", url: '\"+this.url+\"', urlAfterRedirects: '\"+this.urlAfterRedirects+\"', state: \"+this.state+\")\"},e}(dt),wt=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n)||this;return a.urlAfterRedirects=r,a.state=i,a.shouldActivate=o,a}return Object(r.d)(e,t),e.prototype.toString=function(){return\"GuardsCheckEnd(id: \"+this.id+\", url: '\"+this.url+\"', urlAfterRedirects: '\"+this.urlAfterRedirects+\"', state: \"+this.state+\", shouldActivate: \"+this.shouldActivate+\")\"},e}(dt),_t=function(t){function e(e,n,r,i){var o=t.call(this,e,n)||this;return o.urlAfterRedirects=r,o.state=i,o}return Object(r.d)(e,t),e.prototype.toString=function(){return\"ResolveStart(id: \"+this.id+\", url: '\"+this.url+\"', urlAfterRedirects: '\"+this.urlAfterRedirects+\"', state: \"+this.state+\")\"},e}(dt),Et=function(t){function e(e,n,r,i){var o=t.call(this,e,n)||this;return o.urlAfterRedirects=r,o.state=i,o}return Object(r.d)(e,t),e.prototype.toString=function(){return\"ResolveEnd(id: \"+this.id+\", url: '\"+this.url+\"', urlAfterRedirects: '\"+this.urlAfterRedirects+\"', state: \"+this.state+\")\"},e}(dt),St=function(){function t(t){this.route=t}return t.prototype.toString=function(){return\"RouteConfigLoadStart(path: \"+this.route.path+\")\"},t}(),Ct=function(){function t(t){this.route=t}return t.prototype.toString=function(){return\"RouteConfigLoadEnd(path: \"+this.route.path+\")\"},t}(),Tt=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return\"ChildActivationStart(path: '\"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||\"\")+\"')\"},t}(),It=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return\"ChildActivationEnd(path: '\"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||\"\")+\"')\"},t}(),kt=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return\"ActivationStart(path: '\"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||\"\")+\"')\"},t}(),Ot=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return\"ActivationEnd(path: '\"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||\"\")+\"')\"},t}(),Nt=function(){function t(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}return t.prototype.toString=function(){return\"Scroll(anchor: '\"+this.anchor+\"', position: '\"+(this.position?this.position[0]+\", \"+this.position[1]:null)+\"')\"},t}(),At=function(){return function(){}}(),Dt=\"primary\",xt=function(){function t(t){this.params=t||{}}return t.prototype.has=function(t){return this.params.hasOwnProperty(t)},t.prototype.get=function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e[0]:e}return null},t.prototype.getAll=function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e:[e]}return[]},Object.defineProperty(t.prototype,\"keys\",{get:function(){return Object.keys(this.params)},enumerable:!0,configurable:!0}),t}();function Rt(t){return new xt(t)}var Pt=\"ngNavigationCancelingError\";function Mt(t){var e=Error(\"NavigationCancelingError: \"+t);return e[Pt]=!0,e}function jt(t,e,n){var r=n.path.split(\"/\");if(r.length>t.length)return null;if(\"full\"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;for(var i={},o=0;o<r.length;o++){var a=r[o],s=t[o];if(a.startsWith(\":\"))i[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}var Lt=function(){return function(t,e){this.routes=t,this.module=e}}();function Ft(t,e){void 0===e&&(e=\"\");for(var n=0;n<t.length;n++){var r=t[n];qt(r,Ut(e,r))}}function qt(t,e){if(!t)throw new Error(\"\\n      Invalid configuration of route '\"+e+\"': Encountered undefined route.\\n      The reason might be an extra comma.\\n\\n      Example:\\n      const routes: Routes = [\\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\\n        { path: 'detail/:id', component: HeroDetailComponent }\\n      ];\\n    \");if(Array.isArray(t))throw new Error(\"Invalid configuration of route '\"+e+\"': Array cannot be specified\");if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&t.outlet!==Dt)throw new Error(\"Invalid configuration of route '\"+e+\"': a componentless route without children or loadChildren cannot have a named outlet set\");if(t.redirectTo&&t.children)throw new Error(\"Invalid configuration of route '\"+e+\"': redirectTo and children cannot be used together\");if(t.redirectTo&&t.loadChildren)throw new Error(\"Invalid configuration of route '\"+e+\"': redirectTo and loadChildren cannot be used together\");if(t.children&&t.loadChildren)throw new Error(\"Invalid configuration of route '\"+e+\"': children and loadChildren cannot be used together\");if(t.redirectTo&&t.component)throw new Error(\"Invalid configuration of route '\"+e+\"': redirectTo and component cannot be used together\");if(t.path&&t.matcher)throw new Error(\"Invalid configuration of route '\"+e+\"': path and matcher cannot be used together\");if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(\"Invalid configuration of route '\"+e+\"'. One of the following must be provided: component, redirectTo, children or loadChildren\");if(void 0===t.path&&void 0===t.matcher)throw new Error(\"Invalid configuration of route '\"+e+\"': routes must have either a path or a matcher specified\");if(\"string\"==typeof t.path&&\"/\"===t.path.charAt(0))throw new Error(\"Invalid configuration of route '\"+e+\"': path cannot start with a slash\");if(\"\"===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(\"Invalid configuration of route '{path: \\\"\"+e+'\", redirectTo: \"'+t.redirectTo+\"\\\"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.\");if(void 0!==t.pathMatch&&\"full\"!==t.pathMatch&&\"prefix\"!==t.pathMatch)throw new Error(\"Invalid configuration of route '\"+e+\"': pathMatch can only be set to 'prefix' or 'full'\");t.children&&Ft(t.children,e)}function Ut(t,e){return e?t||e.path?t&&!e.path?t+\"/\":!t&&e.path?e.path:t+\"/\"+e.path:\"\":t}function Vt(t){var e=t.children&&t.children.map(Vt),n=e?Object(r.a)({},t,{children:e}):Object(r.a)({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Dt&&(n.component=At),n}function Bt(t,e){var n,r=Object.keys(t),i=Object.keys(e);if(r.length!=i.length)return!1;for(var o=0;o<r.length;o++)if(t[n=r[o]]!==e[n])return!1;return!0}function Wt(t){return Array.prototype.concat.apply([],t)}function zt(t){return t.length>0?t[t.length-1]:null}function Ht(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Qt(t){return Object(o.sb)(t)?t:Object(o.tb)(t)?Object(s.a)(Promise.resolve(t)):Object(a.a)(t)}function Kt(t,e,n){return n?function(t,e){return Bt(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!Jt(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(var r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(function(n){return e[n]===t[n]})}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!Jt(a=n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!Jt(n.segments,i))return!1;for(var o in r.children){if(!n.children[o])return!1;if(!t(n.children[o],r.children[o]))return!1}return!0}var a=i.slice(0,n.segments.length),s=i.slice(n.segments.length);return!!Jt(n.segments,a)&&!!n.children[Dt]&&e(n.children[Dt],r,s)}(e,n,n.segments)}(t.root,e.root)}var Gt=function(){function t(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}return Object.defineProperty(t.prototype,\"queryParamMap\",{get:function(){return this._queryParamMap||(this._queryParamMap=Rt(this.queryParams)),this._queryParamMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return ee.serialize(this)},t}(),Yt=function(){function t(t,e){var n=this;this.segments=t,this.children=e,this.parent=null,Ht(e,function(t,e){return t.parent=n})}return t.prototype.hasChildren=function(){return this.numberOfChildren>0},Object.defineProperty(t.prototype,\"numberOfChildren\",{get:function(){return Object.keys(this.children).length},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return ne(this)},t}(),Xt=function(){function t(t,e){this.path=t,this.parameters=e}return Object.defineProperty(t.prototype,\"parameterMap\",{get:function(){return this._parameterMap||(this._parameterMap=Rt(this.parameters)),this._parameterMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return ue(this)},t}();function Jt(t,e){return t.length===e.length&&t.every(function(t,n){return t.path===e[n].path})}function Zt(t,e){var n=[];return Ht(t.children,function(t,r){r===Dt&&(n=n.concat(e(t,r)))}),Ht(t.children,function(t,r){r!==Dt&&(n=n.concat(e(t,r)))}),n}var $t=function(){return function(){}}(),te=function(){function t(){}return t.prototype.parse=function(t){var e=new de(t);return new Gt(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())},t.prototype.serialize=function(t){var e,n;return\"/\"+function t(e,n){if(!e.hasChildren())return ne(e);if(n){var r=e.children[Dt]?t(e.children[Dt],!1):\"\",i=[];return Ht(e.children,function(e,n){n!==Dt&&i.push(n+\":\"+t(e,!1))}),i.length>0?r+\"(\"+i.join(\"//\")+\")\":r}var o=Zt(e,function(n,r){return r===Dt?[t(e.children[Dt],!1)]:[r+\":\"+t(n,!1)]});return ne(e)+\"/(\"+o.join(\"//\")+\")\"}(t.root,!0)+(e=t.queryParams,(n=Object.keys(e).map(function(t){var n=e[t];return Array.isArray(n)?n.map(function(e){return ie(t)+\"=\"+ie(e)}).join(\"&\"):ie(t)+\"=\"+ie(n)})).length?\"?\"+n.join(\"&\"):\"\")+(\"string\"==typeof t.fragment?\"#\"+encodeURI(t.fragment):\"\")},t}(),ee=new te;function ne(t){return t.segments.map(function(t){return ue(t)}).join(\"/\")}function re(t){return encodeURIComponent(t).replace(/%40/g,\"@\").replace(/%3A/gi,\":\").replace(/%24/g,\"$\").replace(/%2C/gi,\",\")}function ie(t){return re(t).replace(/%3B/gi,\";\")}function oe(t){return re(t).replace(/\\(/g,\"%28\").replace(/\\)/g,\"%29\").replace(/%26/gi,\"&\")}function ae(t){return decodeURIComponent(t)}function se(t){return ae(t.replace(/\\+/g,\"%20\"))}function ue(t){return\"\"+oe(t.path)+(e=t.parameters,Object.keys(e).map(function(t){return\";\"+oe(t)+\"=\"+oe(e[t])}).join(\"\"));var e}var ce=/^[^\\/()?;=#]+/;function le(t){var e=t.match(ce);return e?e[0]:\"\"}var he=/^[^=?&#]+/,fe=/^[^?&#]+/,de=function(){function t(t){this.url=t,this.remaining=t}return t.prototype.parseRootSegment=function(){return this.consumeOptional(\"/\"),\"\"===this.remaining||this.peekStartsWith(\"?\")||this.peekStartsWith(\"#\")?new Yt([],{}):new Yt([],this.parseChildren())},t.prototype.parseQueryParams=function(){var t={};if(this.consumeOptional(\"?\"))do{this.parseQueryParam(t)}while(this.consumeOptional(\"&\"));return t},t.prototype.parseFragment=function(){return this.consumeOptional(\"#\")?decodeURIComponent(this.remaining):null},t.prototype.parseChildren=function(){if(\"\"===this.remaining)return{};this.consumeOptional(\"/\");var t=[];for(this.peekStartsWith(\"(\")||t.push(this.parseSegment());this.peekStartsWith(\"/\")&&!this.peekStartsWith(\"//\")&&!this.peekStartsWith(\"/(\");)this.capture(\"/\"),t.push(this.parseSegment());var e={};this.peekStartsWith(\"/(\")&&(this.capture(\"/\"),e=this.parseParens(!0));var n={};return this.peekStartsWith(\"(\")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[Dt]=new Yt(t,e)),n},t.prototype.parseSegment=function(){var t=le(this.remaining);if(\"\"===t&&this.peekStartsWith(\";\"))throw new Error(\"Empty path url segment cannot have parameters: '\"+this.remaining+\"'.\");return this.capture(t),new Xt(ae(t),this.parseMatrixParams())},t.prototype.parseMatrixParams=function(){for(var t={};this.consumeOptional(\";\");)this.parseParam(t);return t},t.prototype.parseParam=function(t){var e=le(this.remaining);if(e){this.capture(e);var n=\"\";if(this.consumeOptional(\"=\")){var r=le(this.remaining);r&&this.capture(n=r)}t[ae(e)]=ae(n)}},t.prototype.parseQueryParam=function(t){var e,n=(e=this.remaining.match(he))?e[0]:\"\";if(n){this.capture(n);var r=\"\";if(this.consumeOptional(\"=\")){var i=function(t){var e=t.match(fe);return e?e[0]:\"\"}(this.remaining);i&&this.capture(r=i)}var o=se(n),a=se(r);if(t.hasOwnProperty(o)){var s=t[o];Array.isArray(s)||(t[o]=s=[s]),s.push(a)}else t[o]=a}},t.prototype.parseParens=function(t){var e={};for(this.capture(\"(\");!this.consumeOptional(\")\")&&this.remaining.length>0;){var n=le(this.remaining),r=this.remaining[n.length];if(\"/\"!==r&&\")\"!==r&&\";\"!==r)throw new Error(\"Cannot parse url '\"+this.url+\"'\");var i=void 0;n.indexOf(\":\")>-1?(i=n.substr(0,n.indexOf(\":\")),this.capture(i),this.capture(\":\")):t&&(i=Dt);var o=this.parseChildren();e[i]=1===Object.keys(o).length?o[Dt]:new Yt([],o),this.consumeOptional(\"//\")}return e},t.prototype.peekStartsWith=function(t){return this.remaining.startsWith(t)},t.prototype.consumeOptional=function(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)},t.prototype.capture=function(t){if(!this.consumeOptional(t))throw new Error('Expected \"'+t+'\".')},t}(),pe=function(){function t(t){this._root=t}return Object.defineProperty(t.prototype,\"root\",{get:function(){return this._root.value},enumerable:!0,configurable:!0}),t.prototype.parent=function(t){var e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null},t.prototype.children=function(t){var e=ye(t,this._root);return e?e.children.map(function(t){return t.value}):[]},t.prototype.firstChild=function(t){var e=ye(t,this._root);return e&&e.children.length>0?e.children[0].value:null},t.prototype.siblings=function(t){var e=ve(t,this._root);return e.length<2?[]:e[e.length-2].children.map(function(t){return t.value}).filter(function(e){return e!==t})},t.prototype.pathFromRoot=function(t){return ve(t,this._root).map(function(t){return t.value})},t}();function ye(t,e){var n,i;if(t===e.value)return e;try{for(var o=Object(r.j)(e.children),a=o.next();!a.done;a=o.next()){var s=ye(t,a.value);if(s)return s}}catch(u){n={error:u}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return null}function ve(t,e){var n,i;if(t===e.value)return[e];try{for(var o=Object(r.j)(e.children),a=o.next();!a.done;a=o.next()){var s=ve(t,a.value);if(s.length)return s.unshift(e),s}}catch(u){n={error:u}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return[]}var me=function(){function t(t,e){this.value=t,this.children=e}return t.prototype.toString=function(){return\"TreeNode(\"+this.value+\")\"},t}();function ge(t){var e={};return t&&t.children.forEach(function(t){return e[t.value.outlet]=t}),e}var be=function(t){function e(e,n){var r=t.call(this,e)||this;return r.snapshot=n,Te(r,e),r}return Object(r.d)(e,t),e.prototype.toString=function(){return this.snapshot.toString()},e}(pe);function we(t,e){var n=function(t,e){var n=new Se([],{},{},\"\",{},Dt,e,null,t.root,-1,{});return new Ce(\"\",new me(n,[]))}(t,e),r=new u.a([new Xt(\"\",{})]),i=new u.a({}),o=new u.a({}),a=new u.a({}),s=new u.a(\"\"),c=new _e(r,i,a,s,o,Dt,e,n.root);return c.snapshot=n.root,new be(new me(c,[]),n)}var _e=function(){function t(t,e,n,r,i,o,a,s){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=a,this._futureSnapshot=s}return Object.defineProperty(t.prototype,\"routeConfig\",{get:function(){return this._futureSnapshot.routeConfig},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"root\",{get:function(){return this._routerState.root},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"parent\",{get:function(){return this._routerState.parent(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"firstChild\",{get:function(){return this._routerState.firstChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"children\",{get:function(){return this._routerState.children(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"pathFromRoot\",{get:function(){return this._routerState.pathFromRoot(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"paramMap\",{get:function(){return this._paramMap||(this._paramMap=this.params.pipe(Object(S.a)(function(t){return Rt(t)}))),this._paramMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"queryParamMap\",{get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(S.a)(function(t){return Rt(t)}))),this._queryParamMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.snapshot?this.snapshot.toString():\"Future(\"+this._futureSnapshot+\")\"},t}();function Ee(t,e){void 0===e&&(e=\"emptyOnly\");var n=t.pathFromRoot,i=0;if(\"always\"!==e)for(i=n.length-1;i>=1;){var o=n[i],a=n[i-1];if(o.routeConfig&&\"\"===o.routeConfig.path)i--;else{if(a.component)break;i--}}return function(t){return t.reduce(function(t,e){return{params:Object(r.a)({},t.params,e.params),data:Object(r.a)({},t.data,e.data),resolve:Object(r.a)({},t.resolve,e._resolvedData)}},{params:{},data:{},resolve:{}})}(n.slice(i))}var Se=function(){function t(t,e,n,r,i,o,a,s,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=a,this.routeConfig=s,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}return Object.defineProperty(t.prototype,\"root\",{get:function(){return this._routerState.root},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"parent\",{get:function(){return this._routerState.parent(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"firstChild\",{get:function(){return this._routerState.firstChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"children\",{get:function(){return this._routerState.children(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"pathFromRoot\",{get:function(){return this._routerState.pathFromRoot(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"paramMap\",{get:function(){return this._paramMap||(this._paramMap=Rt(this.params)),this._paramMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"queryParamMap\",{get:function(){return this._queryParamMap||(this._queryParamMap=Rt(this.queryParams)),this._queryParamMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return\"Route(url:'\"+this.url.map(function(t){return t.toString()}).join(\"/\")+\"', path:'\"+(this.routeConfig?this.routeConfig.path:\"\")+\"')\"},t}(),Ce=function(t){function e(e,n){var r=t.call(this,n)||this;return r.url=e,Te(r,n),r}return Object(r.d)(e,t),e.prototype.toString=function(){return Ie(this._root)},e}(pe);function Te(t,e){e.value._routerState=t,e.children.forEach(function(e){return Te(t,e)})}function Ie(t){var e=t.children.length>0?\" { \"+t.children.map(Ie).join(\", \")+\" } \":\"\";return\"\"+t.value+e}function ke(t){if(t.snapshot){var e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Bt(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Bt(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!Bt(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Bt(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Oe(t,e){var n,r;return Bt(t.params,e.params)&&Jt(n=t.url,r=e.url)&&n.every(function(t,e){return Bt(t.parameters,r[e].parameters)})&&!(!t.parent!=!e.parent)&&(!t.parent||Oe(t.parent,e.parent))}function Ne(t){return\"object\"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Ae(t,e,n,r,i){var o={};return r&&Ht(r,function(t,e){o[e]=Array.isArray(t)?t.map(function(t){return\"\"+t}):\"\"+t}),new Gt(n.root===t?e:function t(e,n,r){var i={};return Ht(e.children,function(e,o){i[o]=e===n?r:t(e,n,r)}),new Yt(e.segments,i)}(n.root,t,e),o,i)}var De=function(){function t(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Ne(n[0]))throw new Error(\"Root segment cannot have matrix parameters\");var r=n.find(function(t){return\"object\"==typeof t&&null!=t&&t.outlets});if(r&&r!==zt(n))throw new Error(\"{outlets:{}} has to be the last command\")}return t.prototype.toRoot=function(){return this.isAbsolute&&1===this.commands.length&&\"/\"==this.commands[0]},t}(),xe=function(){return function(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}();function Re(t){return\"object\"==typeof t&&null!=t&&t.outlets?t.outlets[Dt]:\"\"+t}function Pe(t,e,n){if(t||(t=new Yt([],{})),0===t.segments.length&&t.hasChildren())return Me(t,e,n);var r=function(t,e,n){for(var r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};i<t.segments.length;){if(r>=n.length)return o;var a=t.segments[i],s=Re(n[r]),u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&u&&\"object\"==typeof u&&void 0===u.outlets){if(!qe(s,u,a))return o;r+=2}else{if(!qe(s,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){var o=new Yt(t.segments.slice(0,r.pathIndex),{});return o.children[Dt]=new Yt(t.segments.slice(r.pathIndex),t.children),Me(o,0,i)}return r.match&&0===i.length?new Yt(t.segments,{}):r.match&&!t.hasChildren()?je(t,e,n):r.match?Me(t,0,i):je(t,e,n)}function Me(t,e,n){if(0===n.length)return new Yt(t.segments,{});var r=function(t){var e,n;return\"object\"!=typeof t[0]?((e={})[Dt]=t,e):void 0===t[0].outlets?((n={})[Dt]=t,n):t[0].outlets}(n),i={};return Ht(r,function(n,r){null!==n&&(i[r]=Pe(t.children[r],e,n))}),Ht(t.children,function(t,e){void 0===r[e]&&(i[e]=t)}),new Yt(t.segments,i)}function je(t,e,n){for(var r=t.segments.slice(0,e),i=0;i<n.length;){if(\"object\"==typeof n[i]&&void 0!==n[i].outlets){var o=Le(n[i].outlets);return new Yt(r,o)}if(0===i&&Ne(n[0]))r.push(new Xt(t.segments[e].path,n[0])),i++;else{var a=Re(n[i]),s=i<n.length-1?n[i+1]:null;a&&s&&Ne(s)?(r.push(new Xt(a,Fe(s))),i+=2):(r.push(new Xt(a,{})),i++)}}return new Yt(r,{})}function Le(t){var e={};return Ht(t,function(t,n){null!==t&&(e[n]=je(new Yt([],{}),0,t))}),e}function Fe(t){var e={};return Ht(t,function(t,n){return e[n]=\"\"+t}),e}function qe(t,e,n){return t==n.path&&Bt(e,n.parameters)}var Ue=function(){function t(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}return t.prototype.activate=function(t){var e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),ke(this.futureState.root),this.activateChildRoutes(e,n,t)},t.prototype.deactivateChildRoutes=function(t,e,n){var r=this,i=ge(e);t.children.forEach(function(t){var e=t.value.outlet;r.deactivateRoutes(t,i[e],n),delete i[e]}),Ht(i,function(t,e){r.deactivateRouteAndItsChildren(t,n)})},t.prototype.deactivateRoutes=function(t,e,n){var r=t.value,i=e?e.value:null;if(r===i)if(r.component){var o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)},t.prototype.deactivateRouteAndItsChildren=function(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)},t.prototype.detachAndStoreRouteSubtree=function(t,e){var n=e.getContext(t.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:r,route:t,contexts:i})}},t.prototype.deactivateRouteAndOutlet=function(t,e){var n=this,r=e.getContext(t.value.outlet);if(r){var i=ge(t),o=t.value.component?r.children:e;Ht(i,function(t,e){return n.deactivateRouteAndItsChildren(t,o)}),r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated())}},t.prototype.activateChildRoutes=function(t,e,n){var r=this,i=ge(e);t.children.forEach(function(t){r.activateRoutes(t,i[t.value.outlet],n),r.forwardEvent(new Ot(t.value.snapshot))}),t.children.length&&this.forwardEvent(new It(t.value.snapshot))},t.prototype.activateRoutes=function(t,e,n){var r=t.value,i=e?e.value:null;if(ke(r),r===i)if(r.component){var o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(r.component)if(o=n.getOrCreateContext(r.outlet),this.routeReuseStrategy.shouldAttach(r.snapshot)){var a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Ve(a.route)}else{var s=function(t){for(var e=r.snapshot.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(),u=s?s.module.componentFactoryResolver:null;o.attachRef=null,o.route=r,o.resolver=u,o.outlet&&o.outlet.activateWith(r,u),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,n)},t}();function Ve(t){ke(t.value),t.children.forEach(Ve)}function Be(t){return\"function\"==typeof t}function We(t){return t instanceof Gt}var ze=function(){return function(t){this.segmentGroup=t||null}}(),He=function(){return function(t){this.urlTree=t}}();function Qe(t){return new c.a(function(e){return e.error(new ze(t))})}function Ke(t){return new c.a(function(e){return e.error(new He(t))})}function Ge(t){return new c.a(function(e){return e.error(new Error(\"Only absolute redirects can have named outlets. redirectTo: '\"+t+\"'\"))})}var Ye=function(){function t(t,e,n,r,i){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=i,this.allowRedirects=!0,this.ngModule=t.get(o.x)}return t.prototype.apply=function(){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,Dt).pipe(Object(S.a)(function(e){return t.createUrlTree(e,t.urlTree.queryParams,t.urlTree.fragment)})).pipe(W(function(e){if(e instanceof He)return t.allowRedirects=!1,t.match(e.urlTree);if(e instanceof ze)throw t.noMatchError(e);throw e}))},t.prototype.match=function(t){var e=this;return this.expandSegmentGroup(this.ngModule,this.config,t.root,Dt).pipe(Object(S.a)(function(n){return e.createUrlTree(n,t.queryParams,t.fragment)})).pipe(W(function(t){if(t instanceof ze)throw e.noMatchError(t);throw t}))},t.prototype.noMatchError=function(t){return new Error(\"Cannot match any routes. URL Segment: '\"+t.segmentGroup+\"'\")},t.prototype.createUrlTree=function(t,e,n){var r,i=t.segments.length>0?new Yt([],((r={})[Dt]=t,r)):t;return new Gt(i,e,n)},t.prototype.expandSegmentGroup=function(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(S.a)(function(t){return new Yt([],t)})):this.expandSegment(t,n,e,n.segments,r,!0)},t.prototype.expandChildren=function(t,e,n){var r=this;return function(n,i){if(0===Object.keys(n).length)return Object(a.a)({});var o=[],s=[],u={};return Ht(n,function(n,i){var a,c,l=(a=i,c=n,r.expandSegmentGroup(t,e,c,a)).pipe(Object(S.a)(function(t){return u[i]=t}));i===Dt?o.push(l):s.push(l)}),a.a.apply(null,o.concat(s)).pipe(T(),V(),Object(S.a)(function(){return u}))}(n.children)},t.prototype.expandSegment=function(t,e,n,i,o,s){var u=this;return a.a.apply(void 0,Object(r.i)(n)).pipe(Object(S.a)(function(r){return u.expandSegmentAgainstRoute(t,e,n,r,i,o,s).pipe(W(function(t){if(t instanceof ze)return Object(a.a)(null);throw t}))}),T(),Y(function(t){return!!t}),W(function(t,n){if(t instanceof h||\"EmptyError\"===t.name){if(u.noLeftoversInUrl(e,i,o))return Object(a.a)(new Yt([],{}));throw new ze(e)}throw t}))},t.prototype.noLeftoversInUrl=function(t,e,n){return 0===e.length&&!t.children[n]},t.prototype.expandSegmentAgainstRoute=function(t,e,n,r,i,o,a){return $e(r)!==o?Qe(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Qe(e)},t.prototype.expandSegmentAgainstRouteUsingRedirect=function(t,e,n,r,i,o){return\"**\"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)},t.prototype.expandWildCardWithParamsAgainstRouteUsingRedirect=function(t,e,n,r){var i=this,o=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith(\"/\")?Ke(o):this.lineralizeSegments(n,o).pipe(Object(X.a)(function(n){var o=new Yt(n,{});return i.expandSegment(t,o,e,n,r,!1)}))},t.prototype.expandRegularSegmentAgainstRouteUsingRedirect=function(t,e,n,r,i,o){var a=this,s=Xe(e,r,i),u=s.consumedSegments,c=s.lastChild,l=s.positionalParamSegments;if(!s.matched)return Qe(e);var h=this.applyRedirectCommands(u,r.redirectTo,l);return r.redirectTo.startsWith(\"/\")?Ke(h):this.lineralizeSegments(r,h).pipe(Object(X.a)(function(r){return a.expandSegment(t,e,n,r.concat(i.slice(c)),o,!1)}))},t.prototype.matchSegmentAgainstRoute=function(t,e,n,i){var o=this;if(\"**\"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(S.a)(function(t){return n._loadedConfig=t,new Yt(i,{})})):Object(a.a)(new Yt(i,{}));var s=Xe(e,n,i),u=s.consumedSegments,c=s.lastChild;if(!s.matched)return Qe(e);var l=i.slice(c);return this.getChildConfig(t,n,i).pipe(Object(X.a)(function(t){var n=t.module,i=t.routes,s=function(t,e,n,i){return n.length>0&&function(t,e,n){return i.some(function(n){return Ze(t,e,n)&&$e(n)!==Dt})}(t,n)?{segmentGroup:Je(new Yt(e,function(t,e){var n,i,o={};o[Dt]=e;try{for(var a=Object(r.j)(t),s=a.next();!s.done;s=a.next()){var u=s.value;\"\"===u.path&&$e(u)!==Dt&&(o[$e(u)]=new Yt([],{}))}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return o}(i,new Yt(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return i.some(function(n){return Ze(t,e,n)})}(t,n)?{segmentGroup:Je(new Yt(t.segments,function(t,e,n,i){var o,a,s={};try{for(var u=Object(r.j)(n),c=u.next();!c.done;c=u.next()){var l=c.value;Ze(t,e,l)&&!i[$e(l)]&&(s[$e(l)]=new Yt([],{}))}}catch(h){o={error:h}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(o)throw o.error}}return Object(r.a)({},i,s)}(t,n,i,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,u,l,i),c=s.segmentGroup,h=s.slicedSegments;return 0===h.length&&c.hasChildren()?o.expandChildren(n,i,c).pipe(Object(S.a)(function(t){return new Yt(u,t)})):0===i.length&&0===h.length?Object(a.a)(new Yt(u,{})):o.expandSegment(n,c,i,h,Dt,!0).pipe(Object(S.a)(function(t){return new Yt(u.concat(t.segments),t.children)}))}))},t.prototype.getChildConfig=function(t,e,n){var r=this;return e.children?Object(a.a)(new Lt(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(a.a)(e._loadedConfig):function(t,e,n){var r,i=e.canLoad;return i&&0!==i.length?Object(s.a)(i).pipe(Object(S.a)(function(r){var i,o=t.get(r);if(function(t){return t&&Be(t.canLoad)}(o))i=o.canLoad(e,n);else{if(!Be(o))throw new Error(\"Invalid CanLoad guard\");i=o(e,n)}return Qt(i)})).pipe(T(),(r=function(t){return!0===t},function(t){return t.lift(new J(r,void 0,t))})):Object(a.a)(!0)}(t.injector,e,n).pipe(Object(X.a)(function(n){return n?r.configLoader.load(t.injector,e).pipe(Object(S.a)(function(t){return e._loadedConfig=t,t})):function(t){return new c.a(function(e){return e.error(Mt(\"Cannot load children because the guard of the route \\\"path: '\"+t.path+\"'\\\" returned false\"))})}(e)})):Object(a.a)(new Lt([],t))},t.prototype.lineralizeSegments=function(t,e){for(var n=[],r=e.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(a.a)(n);if(r.numberOfChildren>1||!r.children[Dt])return Ge(t.redirectTo);r=r.children[Dt]}},t.prototype.applyRedirectCommands=function(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)},t.prototype.applyRedirectCreatreUrlTree=function(t,e,n,r){var i=this.createSegmentGroup(t,e.root,n,r);return new Gt(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)},t.prototype.createQueryParams=function(t,e){var n={};return Ht(t,function(t,r){if(\"string\"==typeof t&&t.startsWith(\":\")){var i=t.substring(1);n[r]=e[i]}else n[r]=t}),n},t.prototype.createSegmentGroup=function(t,e,n,r){var i=this,o=this.createSegments(t,e.segments,n,r),a={};return Ht(e.children,function(e,o){a[o]=i.createSegmentGroup(t,e,n,r)}),new Yt(o,a)},t.prototype.createSegments=function(t,e,n,r){var i=this;return e.map(function(e){return e.path.startsWith(\":\")?i.findPosParam(t,e,r):i.findOrReturn(e,n)})},t.prototype.findPosParam=function(t,e,n){var r=n[e.path.substring(1)];if(!r)throw new Error(\"Cannot redirect to '\"+t+\"'. Cannot find '\"+e.path+\"'.\");return r},t.prototype.findOrReturn=function(t,e){var n,i,o=0;try{for(var a=Object(r.j)(e),s=a.next();!s.done;s=a.next()){var u=s.value;if(u.path===t.path)return e.splice(o),u;o++}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return t},t}();function Xe(t,e,n){if(\"\"===e.path)return\"full\"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};var r=(e.matcher||jt)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Je(t){if(1===t.numberOfChildren&&t.children[Dt]){var e=t.children[Dt];return new Yt(t.segments.concat(e.segments),e.children)}return t}function Ze(t,e,n){return(!(t.hasChildren()||e.length>0)||\"full\"!==n.pathMatch)&&\"\"===n.path&&void 0!==n.redirectTo}function $e(t){return t.outlet||Dt}var tn=function(){return function(t){this.path=t,this.route=this.path[this.path.length-1]}}(),en=function(){return function(t,e){this.component=t,this.route=e}}();function nn(t,e,n){var r=function(t){if(!t)return null;for(var e=t.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function rn(t,e,n,r,i){void 0===i&&(i={canDeactivateChecks:[],canActivateChecks:[]});var o=ge(e);return t.children.forEach(function(t){!function(t,e,n,r,i){void 0===i&&(i={canDeactivateChecks:[],canActivateChecks:[]});var o=t.value,a=e?e.value:null,s=n?n.getContext(t.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){var u=function(t,e,n){if(\"function\"==typeof n)return n(t,e);switch(n){case\"pathParamsChange\":return!Jt(t.url,e.url);case\"pathParamsOrQueryParamsChange\":return!Jt(t.url,e.url)||!Bt(t.queryParams,e.queryParams);case\"always\":return!0;case\"paramsOrQueryParamsChange\":return!Oe(t,e)||!Bt(t.queryParams,e.queryParams);case\"paramsChange\":default:return!Oe(t,e)}}(a,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new tn(r)):(o.data=a.data,o._resolvedData=a._resolvedData),rn(t,e,o.component?s?s.children:null:n,r,i),u&&i.canDeactivateChecks.push(new en(s&&s.outlet&&s.outlet.component||null,a))}else a&&on(e,s,i),i.canActivateChecks.push(new tn(r)),rn(t,null,o.component?s?s.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),Ht(o,function(t,e){return on(t,n.getContext(e),i)}),i}function on(t,e,n){var r=ge(t),i=t.value;Ht(r,function(t,r){on(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new en(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}var an=Symbol(\"INITIAL_VALUE\");function sn(){return Object($.a)(function(t){return(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null,r=null;return Object(f.a)(t[t.length-1])&&(r=t.pop()),\"function\"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&Object(d.a)(t[0])&&(t=t[0]),Object(v.a)(t,r).lift(new g(n))}).apply(void 0,Object(r.i)(t.map(function(t){return t.pipe(Q(1),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return Object(f.a)(n)?(t.pop(),function(e){return tt(t,e,n)}):function(e){return tt(t,e)}}(an))}))).pipe(Object(et.a)(function(t,e){var n=!1;return e.reduce(function(t,r,i){if(t!==an)return t;if(r===an&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||We(r))return r}return t},t)},an),Object(I.a)(function(t){return t!==an}),Object(S.a)(function(t){return We(t)?t:!0===t}),Q(1))})}function un(t,e){return null!==t&&e&&e(new kt(t)),Object(a.a)(!0)}function cn(t,e){return null!==t&&e&&e(new Tt(t)),Object(a.a)(!0)}function ln(t,e,n){var r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(a.a)(!0);var i=r.map(function(r){return _(function(){var i,o=nn(r,e,n);if(function(t){return t&&Be(t.canActivate)}(o))i=Qt(o.canActivate(e,t));else{if(!Be(o))throw new Error(\"Invalid CanActivate guard\");i=Qt(o(e,t))}return i.pipe(Y())})});return Object(a.a)(i).pipe(sn())}function hn(t,e,n){var r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(function(t){return function(t){var e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)}).filter(function(t){return null!==t}).map(function(e){return _(function(){var i=e.guards.map(function(i){var o,a=nn(i,e.node,n);if(function(t){return t&&Be(t.canActivateChild)}(a))o=Qt(a.canActivateChild(r,t));else{if(!Be(a))throw new Error(\"Invalid CanActivateChild guard\");o=Qt(a(r,t))}return o.pipe(Y())});return Object(a.a)(i).pipe(sn())})});return Object(a.a)(i).pipe(sn())}var fn=function(){return function(){}}(),dn=function(){function t(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}return t.prototype.recognize=function(){try{var t=vn(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Dt),n=new Se([],Object.freeze({}),Object.freeze(Object(r.a)({},this.urlTree.queryParams)),this.urlTree.fragment,{},Dt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new me(n,e),o=new Ce(this.url,i);return this.inheritParamsAndData(o._root),Object(a.a)(o)}catch(s){return new c.a(function(t){return t.error(s)})}},t.prototype.inheritParamsAndData=function(t){var e=this,n=t.value,r=Ee(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(function(t){return e.inheritParamsAndData(t)})},t.prototype.processSegmentGroup=function(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)},t.prototype.processChildren=function(t,e){var n,r=this,i=Zt(e,function(e,n){return r.processSegmentGroup(t,e,n)});return n={},i.forEach(function(t){var e=n[t.value.outlet];if(e){var r=e.url.map(function(t){return t.toString()}).join(\"/\"),i=t.value.url.map(function(t){return t.toString()}).join(\"/\");throw new Error(\"Two segments cannot have the same outlet name: '\"+r+\"' and '\"+i+\"'.\")}n[t.value.outlet]=t.value}),i.sort(function(t,e){return t.value.outlet===Dt?-1:e.value.outlet===Dt?1:t.value.outlet.localeCompare(e.value.outlet)}),i},t.prototype.processSegment=function(t,e,n,i){var o,a;try{for(var s=Object(r.j)(t),u=s.next();!u.done;u=s.next()){var c=u.value;try{return this.processSegmentAgainstRoute(c,e,n,i)}catch(l){if(!(l instanceof fn))throw l}}}catch(h){o={error:h}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}if(this.noLeftoversInUrl(e,n,i))return[];throw new fn},t.prototype.noLeftoversInUrl=function(t,e,n){return 0===e.length&&!t.children[n]},t.prototype.processSegmentAgainstRoute=function(t,e,n,i){if(t.redirectTo)throw new fn;if((t.outlet||Dt)!==i)throw new fn;var o,a=[],s=[];if(\"**\"===t.path){var u=n.length>0?zt(n).parameters:{};o=new Se(n,u,Object.freeze(Object(r.a)({},this.urlTree.queryParams)),this.urlTree.fragment,bn(t),i,t.component,t,pn(e),yn(e)+n.length,wn(t))}else{var c=function(t,e,n){if(\"\"===e.path){if(\"full\"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new fn;return{consumedSegments:[],lastChild:0,parameters:{}}}var i=(e.matcher||jt)(n,t,e);if(!i)throw new fn;var o={};Ht(i.posParams,function(t,e){o[e]=t.path});var a=i.consumed.length>0?Object(r.a)({},o,i.consumed[i.consumed.length-1].parameters):o;return{consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:a}}(e,t,n);a=c.consumedSegments,s=n.slice(c.lastChild),o=new Se(a,c.parameters,Object.freeze(Object(r.a)({},this.urlTree.queryParams)),this.urlTree.fragment,bn(t),i,t.component,t,pn(e),yn(e)+a.length,wn(t))}var l=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),h=vn(e,a,s,l,this.relativeLinkResolution),f=h.segmentGroup,d=h.slicedSegments;if(0===d.length&&f.hasChildren()){var p=this.processChildren(l,f);return[new me(o,p)]}if(0===l.length&&0===d.length)return[new me(o,[])];var y=this.processSegment(l,f,d,Dt);return[new me(o,y)]},t}();function pn(t){for(var e=t;e._sourceSegment;)e=e._sourceSegment;return e}function yn(t){for(var e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;e._sourceSegment;)n+=(e=e._sourceSegment)._segmentIndexShift?e._segmentIndexShift:0;return n-1}function vn(t,e,n,i,o){if(n.length>0&&function(t,e,n){return i.some(function(n){return mn(t,e,n)&&gn(n)!==Dt})}(t,n)){var a=new Yt(e,function(t,e,n,i){var o,a,s={};s[Dt]=i,i._sourceSegment=t,i._segmentIndexShift=e.length;try{for(var u=Object(r.j)(n),c=u.next();!c.done;c=u.next()){var l=c.value;if(\"\"===l.path&&gn(l)!==Dt){var h=new Yt([],{});h._sourceSegment=t,h._segmentIndexShift=e.length,s[gn(l)]=h}}}catch(f){o={error:f}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(o)throw o.error}}return s}(t,e,i,new Yt(n,t.children)));return a._sourceSegment=t,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return i.some(function(n){return mn(t,e,n)})}(t,n)){var s=new Yt(t.segments,function(t,e,n,i,o,a){var s,u,c={};try{for(var l=Object(r.j)(i),h=l.next();!h.done;h=l.next()){var f=h.value;if(mn(t,n,f)&&!o[gn(f)]){var d=new Yt([],{});d._sourceSegment=t,d._segmentIndexShift=\"legacy\"===a?t.segments.length:e.length,c[gn(f)]=d}}}catch(p){s={error:p}}finally{try{h&&!h.done&&(u=l.return)&&u.call(l)}finally{if(s)throw s.error}}return Object(r.a)({},o,c)}(t,e,n,i,t.children,o));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}var u=new Yt(t.segments,t.children);return u._sourceSegment=t,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:n}}function mn(t,e,n){return(!(t.hasChildren()||e.length>0)||\"full\"!==n.pathMatch)&&\"\"===n.path&&void 0===n.redirectTo}function gn(t){return t.outlet||Dt}function bn(t){return t.data||{}}function wn(t){return t.resolve||{}}function _n(t,e,n,r){var i=nn(t,e,r);return Qt(i.resolve?i.resolve(e,n):i(e,n))}function En(t){return function(e){return e.pipe(Object($.a)(function(e){var n=t(e);return n?Object(s.a)(n).pipe(Object(S.a)(function(){return e})):Object(s.a)([e])}))}}var Sn=function(){return function(){}}(),Cn=function(){function t(){}return t.prototype.shouldDetach=function(t){return!1},t.prototype.store=function(t,e){},t.prototype.shouldAttach=function(t){return!1},t.prototype.retrieve=function(t){return null},t.prototype.shouldReuseRoute=function(t,e){return t.routeConfig===e.routeConfig},t}(),Tn=new o.p(\"ROUTES\"),In=function(){function t(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}return t.prototype.load=function(t,e){var n=this;return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(S.a)(function(r){n.onLoadEndListener&&n.onLoadEndListener(e);var i=r.create(t);return new Lt(Wt(i.injector.get(Tn)).map(Vt),i)}))},t.prototype.loadModuleFactory=function(t){var e=this;return\"string\"==typeof t?Object(s.a)(this.loader.load(t)):Qt(t()).pipe(Object(X.a)(function(t){return t instanceof o.v?Object(a.a)(t):Object(s.a)(e.compiler.compileModuleAsync(t))}))},t}(),kn=function(){return function(){}}(),On=function(){function t(){}return t.prototype.shouldProcessUrl=function(t){return!0},t.prototype.extract=function(t){return t},t.prototype.merge=function(t,e){return t},t}();function Nn(t){throw t}function An(t,e,n){return e.parse(\"/\")}function Dn(t,e){return Object(a.a)(null)}var xn=function(){function t(t,e,n,r,i,a,s,c){var l=this;this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new E.a,this.errorHandler=Nn,this.malformedUriErrorHandler=An,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Dn,afterPreactivation:Dn},this.urlHandlingStrategy=new On,this.routeReuseStrategy=new Cn,this.onSameUrlNavigation=\"ignore\",this.paramsInheritanceStrategy=\"emptyOnly\",this.urlUpdateStrategy=\"deferred\",this.relativeLinkResolution=\"legacy\",this.ngModule=i.get(o.x),this.console=i.get(o.cb);var h=i.get(o.z);this.isNgZoneEnabled=h instanceof o.z,this.resetConfig(c),this.currentUrlTree=new Gt(new Yt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new In(a,s,function(t){return l.triggerEvent(new St(t))},function(t){return l.triggerEvent(new Ct(t))}),this.routerState=we(this.currentUrlTree,this.rootComponentType),this.transitions=new u.a({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:\"imperative\",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return t.prototype.setupNavigations=function(t){var e=this,n=this.events;return t.pipe(Object(I.a)(function(t){return 0!==t.id}),Object(S.a)(function(t){return Object(r.a)({},t,{extractedUrl:e.urlHandlingStrategy.extract(t.rawUrl)})}),Object($.a)(function(t){var i,o,c,l,h=!1,f=!1;return Object(a.a)(t).pipe(at(function(t){e.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:e.lastSuccessfulNavigation?Object(r.a)({},e.lastSuccessfulNavigation,{previousNavigation:null}):null}}),Object($.a)(function(t){var i,o,s,u,c=!e.navigated||t.extractedUrl.toString()!==e.browserUrlTree.toString();if((\"reload\"===e.onSameUrlNavigation||c)&&e.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(a.a)(t).pipe(Object($.a)(function(t){var r=e.transitions.getValue();return n.next(new pt(t.id,e.serializeUrl(t.extractedUrl),t.source,t.restoredState)),r!==e.transitions.getValue()?w.a:[t]}),Object($.a)(function(t){return Promise.resolve(t)}),(i=e.ngModule.injector,o=e.configLoader,s=e.urlSerializer,u=e.config,function(t){return t.pipe(Object($.a)(function(t){return function(e,n,r,i,o){return new Ye(e,n,r,t.extractedUrl,o).apply()}(i,o,s,0,u).pipe(Object(S.a)(function(e){return Object(r.a)({},t,{urlAfterRedirects:e})}))}))}),at(function(t){e.currentNavigation=Object(r.a)({},e.currentNavigation,{finalUrl:t.urlAfterRedirects})}),function(t,n,i,o,a){return function(i){return i.pipe(Object(X.a)(function(i){return function(t,e,n,r,i,o){return void 0===i&&(i=\"emptyOnly\"),void 0===o&&(o=\"legacy\"),new dn(t,e,n,r,i,o).recognize()}(t,n,i.urlAfterRedirects,(s=i.urlAfterRedirects,e.serializeUrl(s)),o,a).pipe(Object(S.a)(function(t){return Object(r.a)({},i,{targetSnapshot:t})}));var s}))}}(e.rootComponentType,e.config,0,e.paramsInheritanceStrategy,e.relativeLinkResolution),at(function(t){\"eager\"===e.urlUpdateStrategy&&(t.extras.skipLocationChange||e.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id),e.browserUrlTree=t.urlAfterRedirects)}),at(function(t){var r=new gt(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);n.next(r)}));if(c&&e.rawUrlTree&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){var l=t.extractedUrl,h=t.source,f=t.restoredState,d=t.extras,p=new pt(t.id,e.serializeUrl(l),h,f);n.next(p);var y=we(l,e.rootComponentType).snapshot;return Object(a.a)(Object(r.a)({},t,{targetSnapshot:y,urlAfterRedirects:l,extras:Object(r.a)({},d,{skipLocationChange:!1,replaceUrl:!1})}))}return e.rawUrlTree=t.rawUrl,t.resolve(null),w.a}),En(function(t){var n=t.extras;return e.hooks.beforePreactivation(t.targetSnapshot,{navigationId:t.id,appliedUrlTree:t.extractedUrl,rawUrlTree:t.rawUrl,skipLocationChange:!!n.skipLocationChange,replaceUrl:!!n.replaceUrl})}),at(function(t){var n=new bt(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)}),Object(S.a)(function(t){return Object(r.a)({},t,{guards:(n=t.targetSnapshot,i=t.currentSnapshot,o=e.rootContexts,a=n._root,rn(a,i?i._root:null,o,[a.value]))});var n,i,o,a}),function(t,e){return function(n){return n.pipe(Object(X.a)(function(n){var i=n.targetSnapshot,o=n.currentSnapshot,u=n.guards,c=u.canActivateChecks,l=u.canDeactivateChecks;return 0===l.length&&0===c.length?Object(a.a)(Object(r.a)({},n,{guardsResult:!0})):function(t,e,n,r){return Object(s.a)(t).pipe(Object(X.a)(function(t){return function(t,e,n,r,i){var o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(a.a)(!0);var s=o.map(function(o){var a,s=nn(o,e,i);if(function(t){return t&&Be(t.canDeactivate)}(s))a=Qt(s.canDeactivate(t,e,n,r));else{if(!Be(s))throw new Error(\"Invalid CanDeactivate guard\");a=Qt(s(t,e,n,r))}return a.pipe(Y())});return Object(a.a)(s).pipe(sn())}(t.component,t.route,n,e,r)}),Y(function(t){return!0!==t},!0))}(l,i,o,t).pipe(Object(X.a)(function(n){return n&&\"boolean\"==typeof n?function(t,e,n,r){return Object(s.a)(e).pipe(nt(function(e){return Object(s.a)([cn(e.route.parent,r),un(e.route,r),hn(t,e.path,n),ln(t,e.route,n)]).pipe(T(),Y(function(t){return!0!==t},!0))}),Y(function(t){return!0!==t},!0))}(i,c,t,e):Object(a.a)(n)}),Object(S.a)(function(t){return Object(r.a)({},n,{guardsResult:t})}))}))}}(e.ngModule.injector,function(t){return e.triggerEvent(t)}),at(function(t){if(We(t.guardsResult)){var n=Mt('Redirecting to \"'+e.serializeUrl(t.guardsResult)+'\"');throw n.url=t.guardsResult,n}}),at(function(t){var n=new wt(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);e.triggerEvent(n)}),Object(I.a)(function(t){if(!t.guardsResult){e.resetUrlToCurrentUrlTree();var r=new vt(t.id,e.serializeUrl(t.extractedUrl),\"\");return n.next(r),t.resolve(!1),!1}return!0}),En(function(t){if(t.guards.canActivateChecks.length)return Object(a.a)(t).pipe(at(function(t){var n=new _t(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)}),(n=e.paramsInheritanceStrategy,i=e.ngModule.injector,function(t){return t.pipe(Object(X.a)(function(t){var e=t.targetSnapshot,o=t.guards.canActivateChecks;return o.length?Object(s.a)(o).pipe(nt(function(t){return function(t,n,i,o){return function(t,e,n,r){var i=Object.keys(t);if(0===i.length)return Object(a.a)({});if(1===i.length){var o=i[0];return _n(t[o],e,n,r).pipe(Object(S.a)(function(t){var e;return(e={})[o]=t,e}))}var u={};return Object(s.a)(i).pipe(Object(X.a)(function(i){return _n(t[i],e,n,r).pipe(Object(S.a)(function(t){return u[i]=t,t}))})).pipe(V(),Object(S.a)(function(){return u}))}(t._resolve,t,e,o).pipe(Object(S.a)(function(e){return t._resolvedData=e,t.data=Object(r.a)({},t.data,Ee(t,i).resolve),null}))}(t.route,0,n,i)}),function(t,e){return arguments.length>=2?function(e){return Object(rt.a)(Object(et.a)(t,void 0),A(1),L(void 0))(e)}:function(e){return Object(rt.a)(Object(et.a)(function(e,n,r){return t(e)}),A(1))(e)}}(function(t,e){return t}),Object(S.a)(function(e){return t})):Object(a.a)(t)}))}),at(function(t){var n=new Et(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)}));var n,i}),En(function(t){var n=t.extras;return e.hooks.afterPreactivation(t.targetSnapshot,{navigationId:t.id,appliedUrlTree:t.extractedUrl,rawUrlTree:t.rawUrl,skipLocationChange:!!n.skipLocationChange,replaceUrl:!!n.replaceUrl})}),Object(S.a)(function(t){var n,i,o,a=(o=function t(e,n,i){if(i&&e.shouldReuseRoute(n.value,i.value.snapshot)){(l=i.value)._futureSnapshot=n.value;var o=function(e,n,i){return n.children.map(function(n){var o,a;try{for(var s=Object(r.j)(i.children),u=s.next();!u.done;u=s.next()){var c=u.value;if(e.shouldReuseRoute(c.value.snapshot,n.value))return t(e,n,c)}}catch(l){o={error:l}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}return t(e,n)})}(e,n,i);return new me(l,o)}var a=e.retrieve(n.value);if(a){var s=a.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error(\"Cannot reattach ActivatedRouteSnapshot created from a different route\");if(e.children.length!==n.children.length)throw new Error(\"Cannot reattach ActivatedRouteSnapshot with a different number of children\");n.value._futureSnapshot=e.value;for(var r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,s),s}var c,l=new _e(new u.a((c=n.value).url),new u.a(c.params),new u.a(c.queryParams),new u.a(c.fragment),new u.a(c.data),c.outlet,c.component,c);return o=n.children.map(function(n){return t(e,n)}),new me(l,o)}(e.routeReuseStrategy,(n=t.targetSnapshot)._root,(i=t.currentRouterState)?i._root:void 0),new be(o,n));return Object(r.a)({},t,{targetRouterState:a})}),at(function(t){e.currentUrlTree=t.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(e.currentUrlTree,t.rawUrl),e.routerState=t.targetRouterState,\"deferred\"===e.urlUpdateStrategy&&(t.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),e.browserUrlTree=t.urlAfterRedirects)}),(o=e.rootContexts,c=e.routeReuseStrategy,l=function(t){return e.triggerEvent(t)},Object(S.a)(function(t){return new Ue(c,t.targetRouterState,t.currentRouterState,l).activate(o),t})),at({next:function(){h=!0},complete:function(){h=!0}}),(i=function(){if(!h&&!f){e.resetUrlToCurrentUrlTree();var r=new vt(t.id,e.serializeUrl(t.extractedUrl),\"Navigation ID \"+t.id+\" is not equal to the current navigation id \"+e.navigationId);n.next(r),t.resolve(!1)}e.currentNavigation=null},function(t){return t.lift(new lt(i))}),W(function(r){if(f=!0,(s=r)&&s[Pt]){var i=We(r.url);i||(e.navigated=!0,e.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));var o=new vt(t.id,e.serializeUrl(t.extractedUrl),r.message);n.next(o),t.resolve(!1),i&&e.navigateByUrl(r.url)}else{e.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);var a=new mt(t.id,e.serializeUrl(t.extractedUrl),r);n.next(a);try{t.resolve(e.errorHandler(r))}catch(u){t.reject(u)}}var s;return w.a}))}))},t.prototype.resetRootComponentType=function(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType},t.prototype.getTransition=function(){return this.transitions.value},t.prototype.setTransition=function(t){this.transitions.next(Object(r.a)({},this.getTransition(),t))},t.prototype.initialNavigation=function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})},t.prototype.setUpLocationChangeListener=function(){var t=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(function(e){var n=t.parseUrl(e.url),r=\"popstate\"===e.type?\"popstate\":\"hashchange\",i=e.state&&e.state.navigationId?e.state:null;setTimeout(function(){t.scheduleNavigation(n,r,i,{replaceUrl:!0})},0)}))},Object.defineProperty(t.prototype,\"url\",{get:function(){return this.serializeUrl(this.currentUrlTree)},enumerable:!0,configurable:!0}),t.prototype.getCurrentNavigation=function(){return this.currentNavigation},t.prototype.triggerEvent=function(t){this.events.next(t)},t.prototype.resetConfig=function(t){Ft(t),this.config=t.map(Vt),this.navigated=!1,this.lastSuccessfulId=-1},t.prototype.ngOnDestroy=function(){this.dispose()},t.prototype.dispose=function(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)},t.prototype.createUrlTree=function(t,e){void 0===e&&(e={});var n=e.relativeTo,i=e.queryParams,a=e.fragment,s=e.preserveQueryParams,u=e.queryParamsHandling,c=e.preserveFragment;Object(o.X)()&&s&&console&&console.warn&&console.warn(\"preserveQueryParams is deprecated, use queryParamsHandling instead.\");var l=n||this.routerState.root,h=c?this.currentUrlTree.fragment:a,f=null;if(u)switch(u){case\"merge\":f=Object(r.a)({},this.currentUrlTree.queryParams,i);break;case\"preserve\":f=this.currentUrlTree.queryParams;break;default:f=i||null}else f=s?this.currentUrlTree.queryParams:i||null;return null!==f&&(f=this.removeEmptyProps(f)),function(t,e,n,i,o){if(0===n.length)return Ae(e.root,e.root,e,i,o);var a=function(t){if(\"string\"==typeof t[0]&&1===t.length&&\"/\"===t[0])return new De(!0,0,t);var e=0,n=!1,i=t.reduce(function(t,i,o){if(\"object\"==typeof i&&null!=i){if(i.outlets){var a={};return Ht(i.outlets,function(t,e){a[e]=\"string\"==typeof t?t.split(\"/\"):t}),Object(r.i)(t,[{outlets:a}])}if(i.segmentPath)return Object(r.i)(t,[i.segmentPath])}return\"string\"!=typeof i?Object(r.i)(t,[i]):0===o?(i.split(\"/\").forEach(function(r,i){0==i&&\".\"===r||(0==i&&\"\"===r?n=!0:\"..\"===r?e++:\"\"!=r&&t.push(r))}),t):Object(r.i)(t,[i])},[]);return new De(n,e,i)}(n);if(a.toRoot())return Ae(e.root,new Yt([],{}),e,i,o);var s=function(t,n,r){if(t.isAbsolute)return new xe(e.root,!0,0);if(-1===r.snapshot._lastPathIndex)return new xe(r.snapshot._urlSegment,!0,0);var i=Ne(t.commands[0])?0:1;return function(e,n,o){for(var a=r.snapshot._urlSegment,s=r.snapshot._lastPathIndex+i,u=t.numberOfDoubleDots;u>s;){if(u-=s,!(a=a.parent))throw new Error(\"Invalid number of '../'\");s=a.segments.length}return new xe(a,!1,s-u)}()}(a,0,t),u=s.processChildren?Me(s.segmentGroup,s.index,a.commands):Pe(s.segmentGroup,s.index,a.commands);return Ae(s.segmentGroup,u,e,i,o)}(l,this.currentUrlTree,t,f,h)},t.prototype.navigateByUrl=function(t,e){void 0===e&&(e={skipLocationChange:!1}),Object(o.X)()&&this.isNgZoneEnabled&&!o.z.isInAngularZone()&&this.console.warn(\"Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?\");var n=We(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,\"imperative\",null,e)},t.prototype.navigate=function(t,e){return void 0===e&&(e={skipLocationChange:!1}),function(t){for(var e=0;e<t.length;e++){var n=t[e];if(null==n)throw new Error(\"The requested path contains \"+n+\" segment at index \"+e)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)},t.prototype.serializeUrl=function(t){return this.urlSerializer.serialize(t)},t.prototype.parseUrl=function(t){var e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e},t.prototype.isActive=function(t,e){if(We(t))return Kt(this.currentUrlTree,t,e);var n=this.parseUrl(t);return Kt(this.currentUrlTree,n,e)},t.prototype.removeEmptyProps=function(t){return Object.keys(t).reduce(function(e,n){var r=t[n];return null!=r&&(e[n]=r),e},{})},t.prototype.processNavigations=function(){var t=this;this.navigations.subscribe(function(e){t.navigated=!0,t.lastSuccessfulId=e.id,t.events.next(new yt(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(t.currentUrlTree))),t.lastSuccessfulNavigation=t.currentNavigation,t.currentNavigation=null,e.resolve(!0)},function(e){t.console.warn(\"Unhandled Navigation Error: \")})},t.prototype.scheduleNavigation=function(t,e,n,r){var i=this.getTransition();if(i&&\"imperative\"!==e&&\"imperative\"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(i&&\"hashchange\"==e&&\"popstate\"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(i&&\"popstate\"==e&&\"hashchange\"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);var o=null,a=null,s=new Promise(function(t,e){o=t,a=e}),u=++this.navigationId;return this.setTransition({id:u,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:o,reject:a,promise:s,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),s.catch(function(t){return Promise.reject(t)})},t.prototype.setBrowserUrl=function(t,e,n,i){var o=this.urlSerializer.serialize(t);i=i||{},this.location.isCurrentPathEqualTo(o)||e?this.location.replaceState(o,\"\",Object(r.a)({},i,{navigationId:n})):this.location.go(o,\"\",Object(r.a)({},i,{navigationId:n}))},t.prototype.resetStateAndUrl=function(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()},t.prototype.resetUrlToCurrentUrlTree=function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),\"\",{navigationId:this.lastSuccessfulId})},t}(),Rn=function(){function t(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],null==n&&r.setAttribute(i.nativeElement,\"tabindex\",\"0\")}return Object.defineProperty(t.prototype,\"routerLink\",{set:function(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"preserveQueryParams\",{set:function(t){Object(o.X)()&&console&&console.warn&&console.warn(\"preserveQueryParams is deprecated!, use queryParamsHandling instead.\"),this.preserve=t},enumerable:!0,configurable:!0}),t.prototype.onClick=function(){var t={skipLocationChange:Pn(this.skipLocationChange),replaceUrl:Pn(this.replaceUrl)};return this.router.navigateByUrl(this.urlTree,t),!0},Object.defineProperty(t.prototype,\"urlTree\",{get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:Pn(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:Pn(this.preserveFragment)})},enumerable:!0,configurable:!0}),t}();function Pn(t){return\"\"===t||!!t}var Mn=function(){return function(){this.outlet=null,this.route=null,this.resolver=null,this.children=new jn,this.attachRef=null}}(),jn=function(){function t(){this.contexts=new Map}return t.prototype.onChildOutletCreated=function(t,e){var n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)},t.prototype.onChildOutletDestroyed=function(t){var e=this.getContext(t);e&&(e.outlet=null)},t.prototype.onOutletDeactivated=function(){var t=this.contexts;return this.contexts=new Map,t},t.prototype.onOutletReAttached=function(t){this.contexts=t},t.prototype.getOrCreateContext=function(t){var e=this.getContext(t);return e||(e=new Mn,this.contexts.set(t,e)),e},t.prototype.getContext=function(t){return this.contexts.get(t)||null},t}(),Ln=function(){function t(t,e,n,r,i){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new o.m,this.deactivateEvents=new o.m,this.name=r||Dt,t.onChildOutletCreated(this.name,this)}return t.prototype.ngOnDestroy=function(){this.parentContexts.onChildOutletDestroyed(this.name)},t.prototype.ngOnInit=function(){if(!this.activated){var t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}},Object.defineProperty(t.prototype,\"isActivated\",{get:function(){return!!this.activated},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"component\",{get:function(){if(!this.activated)throw new Error(\"Outlet is not activated\");return this.activated.instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"activatedRoute\",{get:function(){if(!this.activated)throw new Error(\"Outlet is not activated\");return this._activatedRoute},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"activatedRouteData\",{get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}},enumerable:!0,configurable:!0}),t.prototype.detach=function(){if(!this.activated)throw new Error(\"Outlet is not activated\");this.location.detach();var t=this.activated;return this.activated=null,this._activatedRoute=null,t},t.prototype.attach=function(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)},t.prototype.deactivate=function(){if(this.activated){var t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}},t.prototype.activateWith=function(t,e){if(this.isActivated)throw new Error(\"Cannot activate an already activated outlet\");this._activatedRoute=t;var n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Fn(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)},t}(),Fn=function(){function t(t,e,n){this.route=t,this.childContexts=e,this.parent=n}return t.prototype.get=function(t,e){return t===_e?this.route:t===jn?this.childContexts:this.parent.get(t,e)},t}(),qn=function(){return function(){}}(),Un=function(){function t(){}return t.prototype.preload=function(t,e){return e().pipe(W(function(){return Object(a.a)(null)}))},t}(),Vn=function(){function t(){}return t.prototype.preload=function(t,e){return Object(a.a)(null)},t}(),Bn=function(){function t(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new In(e,n,function(e){return t.triggerEvent(new St(e))},function(e){return t.triggerEvent(new Ct(e))})}return t.prototype.setUpPreloading=function(){var t=this;this.subscription=this.router.events.pipe(Object(I.a)(function(t){return t instanceof yt}),nt(function(){return t.preload()})).subscribe(function(){})},t.prototype.preload=function(){var t=this.injector.get(o.x);return this.processRoutes(t,this.router.config)},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.prototype.processRoutes=function(t,e){var n,i,o=[];try{for(var a=Object(r.j)(e),u=a.next();!u.done;u=a.next()){var c=u.value;if(c.loadChildren&&!c.canLoad&&c._loadedConfig){var l=c._loadedConfig;o.push(this.processRoutes(l.module,l.routes))}else c.loadChildren&&!c.canLoad?o.push(this.preloadConfig(t,c)):c.children&&o.push(this.processRoutes(t,c.children))}}catch(h){n={error:h}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return Object(s.a)(o).pipe(Object(C.a)(),Object(S.a)(function(t){}))},t.prototype.preloadConfig=function(t,e){var n=this;return this.preloadingStrategy.preload(e,function(){return n.loader.load(t.injector,e).pipe(Object(X.a)(function(t){return e._loadedConfig=t,n.processRoutes(t.module,t.routes)}))})},t}(),Wn=function(){function t(t,e,n){void 0===n&&(n={}),this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource=\"imperative\",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||\"disabled\",n.anchorScrolling=n.anchorScrolling||\"disabled\"}return t.prototype.init=function(){\"disabled\"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration(\"manual\"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()},t.prototype.createScrollEvents=function(){var t=this;return this.router.events.subscribe(function(e){e instanceof pt?(t.store[t.lastId]=t.viewportScroller.getScrollPosition(),t.lastSource=e.navigationTrigger,t.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof yt&&(t.lastId=e.id,t.scheduleScrollEvent(e,t.router.parseUrl(e.urlAfterRedirects).fragment))})},t.prototype.consumeScrollEvents=function(){var t=this;return this.router.events.subscribe(function(e){e instanceof Nt&&(e.position?\"top\"===t.options.scrollPositionRestoration?t.viewportScroller.scrollToPosition([0,0]):\"enabled\"===t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition(e.position):e.anchor&&\"enabled\"===t.options.anchorScrolling?t.viewportScroller.scrollToAnchor(e.anchor):\"disabled\"!==t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition([0,0]))})},t.prototype.scheduleScrollEvent=function(t,e){this.router.triggerEvent(new Nt(t,\"popstate\"===this.lastSource?this.store[this.restoredId]:null,e))},t.prototype.ngOnDestroy=function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()},t}(),zn=new o.p(\"ROUTER_CONFIGURATION\"),Hn=new o.p(\"ROUTER_FORROOT_GUARD\"),Qn=[i.f,{provide:$t,useClass:te},{provide:xn,useFactory:$n,deps:[o.g,$t,jn,i.f,o.q,o.w,o.i,Tn,zn,[kn,new o.A],[Sn,new o.A]]},jn,{provide:_e,useFactory:tr,deps:[xn]},{provide:o.w,useClass:o.J},Bn,Vn,Un,{provide:zn,useValue:{enableTracing:!1}}];function Kn(){return new o.y(\"Router\",xn)}var Gn=function(){function t(t,e){}var e;return e=t,t.forRoot=function(t,n){return{ngModule:e,providers:[Qn,Zn(t),{provide:Hn,useFactory:Jn,deps:[[xn,new o.A,new o.I]]},{provide:zn,useValue:n||{}},{provide:i.g,useFactory:Xn,deps:[i.m,[new o.o(i.a),new o.A],zn]},{provide:Wn,useFactory:Yn,deps:[xn,i.n,zn]},{provide:qn,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Vn},{provide:o.y,multi:!0,useFactory:Kn},[er,{provide:o.d,multi:!0,useFactory:nr,deps:[er]},{provide:ir,useFactory:rr,deps:[er]},{provide:o.b,multi:!0,useExisting:ir}]]}},t.forChild=function(t){return{ngModule:e,providers:[Zn(t)]}},t}();function Yn(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Wn(t,e,n)}function Xn(t,e,n){return void 0===n&&(n={}),n.useHash?new i.d(t,e):new i.l(t,e)}function Jn(t){if(t)throw new Error(\"RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.\");return\"guarded\"}function Zn(t){return[{provide:o.a,multi:!0,useValue:t},{provide:Tn,multi:!0,useValue:t}]}function $n(t,e,n,r,i,o,a,s,u,c,l){void 0===u&&(u={});var h=new xn(null,e,n,r,i,o,a,Wt(s));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),u.errorHandler&&(h.errorHandler=u.errorHandler),u.malformedUriErrorHandler&&(h.malformedUriErrorHandler=u.malformedUriErrorHandler),u.enableTracing){var f=Object(ft.r)();h.events.subscribe(function(t){f.logGroup(\"Router Event: \"+t.constructor.name),f.log(t.toString()),f.log(t),f.logGroupEnd()})}return u.onSameUrlNavigation&&(h.onSameUrlNavigation=u.onSameUrlNavigation),u.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=u.paramsInheritanceStrategy),u.urlUpdateStrategy&&(h.urlUpdateStrategy=u.urlUpdateStrategy),u.relativeLinkResolution&&(h.relativeLinkResolution=u.relativeLinkResolution),h}function tr(t){return t.routerState.root}var er=function(){function t(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new E.a}return t.prototype.appInitializer=function(){var t=this;return this.injector.get(i.e,Promise.resolve(null)).then(function(){var e=null,n=new Promise(function(t){return e=t}),r=t.injector.get(xn),i=t.injector.get(zn);if(t.isLegacyDisabled(i)||t.isLegacyEnabled(i))e(!0);else if(\"disabled\"===i.initialNavigation)r.setUpLocationChangeListener(),e(!0);else{if(\"enabled\"!==i.initialNavigation)throw new Error(\"Invalid initialNavigation options: '\"+i.initialNavigation+\"'\");r.hooks.afterPreactivation=function(){return t.initNavigation?Object(a.a)(null):(t.initNavigation=!0,e(!0),t.resultOfPreactivationDone)},r.initialNavigation()}return n})},t.prototype.bootstrapListener=function(t){var e=this.injector.get(zn),n=this.injector.get(Bn),r=this.injector.get(Wn),i=this.injector.get(xn),a=this.injector.get(o.g);t===a.components[0]&&(this.isLegacyEnabled(e)?i.initialNavigation():this.isLegacyDisabled(e)&&i.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),i.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())},t.prototype.isLegacyEnabled=function(t){return\"legacy_enabled\"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation},t.prototype.isLegacyDisabled=function(t){return\"legacy_disabled\"===t.initialNavigation||!1===t.initialNavigation},t}();function nr(t){return t.appInitializer.bind(t)}function rr(t){return t.bootstrapListener.bind(t)}var ir=new o.p(\"Router Initializer\")},ZYjt:function(t,e,n){\"use strict\";n.d(e,\"p\",function(){return mt}),n.d(e,\"q\",function(){return I}),n.d(e,\"a\",function(){return gt}),n.d(e,\"h\",function(){return vt}),n.d(e,\"c\",function(){return k}),n.d(e,\"d\",function(){return O}),n.d(e,\"e\",function(){return tt}),n.d(e,\"f\",function(){return et}),n.d(e,\"g\",function(){return nt}),n.d(e,\"b\",function(){return st}),n.d(e,\"r\",function(){return s}),n.d(e,\"j\",function(){return F}),n.d(e,\"i\",function(){return Z}),n.d(e,\"m\",function(){return rt}),n.d(e,\"n\",function(){return at}),n.d(e,\"l\",function(){return D}),n.d(e,\"o\",function(){return A}),n.d(e,\"k\",function(){return ut});var r=n(\"mrSG\"),i=n(\"Ip0R\"),o=n(\"CcnG\"),a=null;function s(){return a}var u,c={class:\"className\",innerHtml:\"innerHTML\",readonly:\"readOnly\",tabindex:\"tabIndex\"},l={\"\\b\":\"Backspace\",\"\\t\":\"Tab\",\"\\x7f\":\"Delete\",\"\\x1b\":\"Escape\",Del:\"Delete\",Esc:\"Escape\",Left:\"ArrowLeft\",Right:\"ArrowRight\",Up:\"ArrowUp\",Down:\"ArrowDown\",Menu:\"ContextMenu\",Scroll:\"ScrollLock\",Win:\"OS\"},h={A:\"1\",B:\"2\",C:\"3\",D:\"4\",E:\"5\",F:\"6\",G:\"7\",H:\"8\",I:\"9\",J:\"*\",K:\"+\",M:\"-\",N:\".\",O:\"/\",\"`\":\"0\",\"\\x90\":\"NumLock\"};o.qb.Node&&(u=o.qb.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))});var f,d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.d)(e,t),e.prototype.parse=function(t){throw new Error(\"parse not implemented\")},e.makeCurrent=function(){var t;t=new e,a||(a=t)},e.prototype.hasProperty=function(t,e){return e in t},e.prototype.setProperty=function(t,e,n){t[e]=n},e.prototype.getProperty=function(t,e){return t[e]},e.prototype.invoke=function(t,e,n){var i;(i=t)[e].apply(i,Object(r.i)(n))},e.prototype.logError=function(t){window.console&&(console.error?console.error(t):console.log(t))},e.prototype.log=function(t){window.console&&window.console.log&&window.console.log(t)},e.prototype.logGroup=function(t){window.console&&window.console.group&&window.console.group(t)},e.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(e.prototype,\"attrToPropMap\",{get:function(){return c},enumerable:!0,configurable:!0}),e.prototype.contains=function(t,e){return u.call(t,e)},e.prototype.querySelector=function(t,e){return t.querySelector(e)},e.prototype.querySelectorAll=function(t,e){return t.querySelectorAll(e)},e.prototype.on=function(t,e,n){t.addEventListener(e,n,!1)},e.prototype.onAndCancel=function(t,e,n){return t.addEventListener(e,n,!1),function(){t.removeEventListener(e,n,!1)}},e.prototype.dispatchEvent=function(t,e){t.dispatchEvent(e)},e.prototype.createMouseEvent=function(t){var e=this.getDefaultDocument().createEvent(\"MouseEvent\");return e.initEvent(t,!0,!0),e},e.prototype.createEvent=function(t){var e=this.getDefaultDocument().createEvent(\"Event\");return e.initEvent(t,!0,!0),e},e.prototype.preventDefault=function(t){t.preventDefault(),t.returnValue=!1},e.prototype.isPrevented=function(t){return t.defaultPrevented||null!=t.returnValue&&!t.returnValue},e.prototype.getInnerHTML=function(t){return t.innerHTML},e.prototype.getTemplateContent=function(t){return\"content\"in t&&this.isTemplateElement(t)?t.content:null},e.prototype.getOuterHTML=function(t){return t.outerHTML},e.prototype.nodeName=function(t){return t.nodeName},e.prototype.nodeValue=function(t){return t.nodeValue},e.prototype.type=function(t){return t.type},e.prototype.content=function(t){return this.hasProperty(t,\"content\")?t.content:t},e.prototype.firstChild=function(t){return t.firstChild},e.prototype.nextSibling=function(t){return t.nextSibling},e.prototype.parentElement=function(t){return t.parentNode},e.prototype.childNodes=function(t){return t.childNodes},e.prototype.childNodesAsList=function(t){for(var e=t.childNodes,n=new Array(e.length),r=0;r<e.length;r++)n[r]=e[r];return n},e.prototype.clearNodes=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},e.prototype.appendChild=function(t,e){t.appendChild(e)},e.prototype.removeChild=function(t,e){t.removeChild(e)},e.prototype.replaceChild=function(t,e,n){t.replaceChild(e,n)},e.prototype.remove=function(t){return t.parentNode&&t.parentNode.removeChild(t),t},e.prototype.insertBefore=function(t,e,n){t.insertBefore(n,e)},e.prototype.insertAllBefore=function(t,e,n){n.forEach(function(n){return t.insertBefore(n,e)})},e.prototype.insertAfter=function(t,e,n){t.insertBefore(n,e.nextSibling)},e.prototype.setInnerHTML=function(t,e){t.innerHTML=e},e.prototype.getText=function(t){return t.textContent},e.prototype.setText=function(t,e){t.textContent=e},e.prototype.getValue=function(t){return t.value},e.prototype.setValue=function(t,e){t.value=e},e.prototype.getChecked=function(t){return t.checked},e.prototype.setChecked=function(t,e){t.checked=e},e.prototype.createComment=function(t){return this.getDefaultDocument().createComment(t)},e.prototype.createTemplate=function(t){var e=this.getDefaultDocument().createElement(\"template\");return e.innerHTML=t,e},e.prototype.createElement=function(t,e){return(e=e||this.getDefaultDocument()).createElement(t)},e.prototype.createElementNS=function(t,e,n){return(n=n||this.getDefaultDocument()).createElementNS(t,e)},e.prototype.createTextNode=function(t,e){return(e=e||this.getDefaultDocument()).createTextNode(t)},e.prototype.createScriptTag=function(t,e,n){var r=(n=n||this.getDefaultDocument()).createElement(\"SCRIPT\");return r.setAttribute(t,e),r},e.prototype.createStyleElement=function(t,e){var n=(e=e||this.getDefaultDocument()).createElement(\"style\");return this.appendChild(n,this.createTextNode(t,e)),n},e.prototype.createShadowRoot=function(t){return t.createShadowRoot()},e.prototype.getShadowRoot=function(t){return t.shadowRoot},e.prototype.getHost=function(t){return t.host},e.prototype.clone=function(t){return t.cloneNode(!0)},e.prototype.getElementsByClassName=function(t,e){return t.getElementsByClassName(e)},e.prototype.getElementsByTagName=function(t,e){return t.getElementsByTagName(e)},e.prototype.classList=function(t){return Array.prototype.slice.call(t.classList,0)},e.prototype.addClass=function(t,e){t.classList.add(e)},e.prototype.removeClass=function(t,e){t.classList.remove(e)},e.prototype.hasClass=function(t,e){return t.classList.contains(e)},e.prototype.setStyle=function(t,e,n){t.style[e]=n},e.prototype.removeStyle=function(t,e){t.style[e]=\"\"},e.prototype.getStyle=function(t,e){return t.style[e]},e.prototype.hasStyle=function(t,e,n){var r=this.getStyle(t,e)||\"\";return n?r==n:r.length>0},e.prototype.tagName=function(t){return t.tagName},e.prototype.attributeMap=function(t){for(var e=new Map,n=t.attributes,r=0;r<n.length;r++){var i=n.item(r);e.set(i.name,i.value)}return e},e.prototype.hasAttribute=function(t,e){return t.hasAttribute(e)},e.prototype.hasAttributeNS=function(t,e,n){return t.hasAttributeNS(e,n)},e.prototype.getAttribute=function(t,e){return t.getAttribute(e)},e.prototype.getAttributeNS=function(t,e,n){return t.getAttributeNS(e,n)},e.prototype.setAttribute=function(t,e,n){t.setAttribute(e,n)},e.prototype.setAttributeNS=function(t,e,n,r){t.setAttributeNS(e,n,r)},e.prototype.removeAttribute=function(t,e){t.removeAttribute(e)},e.prototype.removeAttributeNS=function(t,e,n){t.removeAttributeNS(e,n)},e.prototype.templateAwareRoot=function(t){return this.isTemplateElement(t)?this.content(t):t},e.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument(\"fakeTitle\")},e.prototype.getDefaultDocument=function(){return document},e.prototype.getBoundingClientRect=function(t){try{return t.getBoundingClientRect()}catch(e){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},e.prototype.getTitle=function(t){return t.title},e.prototype.setTitle=function(t,e){t.title=e||\"\"},e.prototype.elementMatches=function(t,e){return!!this.isElementNode(t)&&(t.matches&&t.matches(e)||t.msMatchesSelector&&t.msMatchesSelector(e)||t.webkitMatchesSelector&&t.webkitMatchesSelector(e))},e.prototype.isTemplateElement=function(t){return this.isElementNode(t)&&\"TEMPLATE\"===t.nodeName},e.prototype.isTextNode=function(t){return t.nodeType===Node.TEXT_NODE},e.prototype.isCommentNode=function(t){return t.nodeType===Node.COMMENT_NODE},e.prototype.isElementNode=function(t){return t.nodeType===Node.ELEMENT_NODE},e.prototype.hasShadowRoot=function(t){return null!=t.shadowRoot&&t instanceof HTMLElement},e.prototype.isShadowRoot=function(t){return t instanceof DocumentFragment},e.prototype.importIntoDoc=function(t){return document.importNode(this.templateAwareRoot(t),!0)},e.prototype.adoptNode=function(t){return document.adoptNode(t)},e.prototype.getHref=function(t){return t.getAttribute(\"href\")},e.prototype.getEventKey=function(t){var e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return\"Unidentified\";e.startsWith(\"U+\")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&h.hasOwnProperty(e)&&(e=h[e]))}return l[e]||e},e.prototype.getGlobalEventTarget=function(t,e){return\"window\"===e?window:\"document\"===e?t:\"body\"===e?t.body:null},e.prototype.getHistory=function(){return window.history},e.prototype.getLocation=function(){return window.location},e.prototype.getBaseHref=function(t){var e,n=p||(p=document.querySelector(\"base\"))?p.getAttribute(\"href\"):null;return null==n?null:(e=n,f||(f=document.createElement(\"a\")),f.setAttribute(\"href\",e),\"/\"===f.pathname.charAt(0)?f.pathname:\"/\"+f.pathname)},e.prototype.resetBaseElement=function(){p=null},e.prototype.getUserAgent=function(){return window.navigator.userAgent},e.prototype.setData=function(t,e,n){this.setAttribute(t,\"data-\"+e,n)},e.prototype.getData=function(t,e){return this.getAttribute(t,\"data-\"+e)},e.prototype.getComputedStyle=function(t){return getComputedStyle(t)},e.prototype.supportsWebAnimation=function(){return\"function\"==typeof Element.prototype.animate},e.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},e.prototype.supportsCookies=function(){return!0},e.prototype.getCookie=function(t){return Object(i.r)(document.cookie,t)},e.prototype.setCookie=function(t,e){document.cookie=encodeURIComponent(t)+\"=\"+encodeURIComponent(e)},e}(function(t){function e(){var e=t.call(this)||this;e._animationPrefix=null,e._transitionEnd=null;try{var n=e.createElement(\"div\",document);if(null!=e.getStyle(n,\"animationName\"))e._animationPrefix=\"\";else for(var r=[\"Webkit\",\"Moz\",\"O\",\"ms\"],i=0;i<r.length;i++)if(null!=e.getStyle(n,r[i]+\"AnimationName\")){e._animationPrefix=\"-\"+r[i].toLowerCase()+\"-\";break}var o={WebkitTransition:\"webkitTransitionEnd\",MozTransition:\"transitionend\",OTransition:\"oTransitionEnd otransitionend\",transition:\"transitionend\"};Object.keys(o).forEach(function(t){null!=e.getStyle(n,t)&&(e._transitionEnd=o[t])})}catch(a){e._animationPrefix=null,e._transitionEnd=null}return e}return Object(r.d)(e,t),e.prototype.getDistributedNodes=function(t){return t.getDistributedNodes()},e.prototype.resolveAndSetHref=function(t,e,n){t.href=null==n?e:e+\"/../\"+n},e.prototype.supportsDOMEvents=function(){return!0},e.prototype.supportsNativeShadowDOM=function(){return\"function\"==typeof document.body.createShadowRoot},e.prototype.getAnimationPrefix=function(){return this._animationPrefix?this._animationPrefix:\"\"},e.prototype.getTransitionEnd=function(){return this._transitionEnd?this._transitionEnd:\"\"},e.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},e}(function(){function t(){this.resourceLoaderType=null}return Object.defineProperty(t.prototype,\"attrToPropMap\",{get:function(){return this._attrToPropMap},set:function(t){this._attrToPropMap=t},enumerable:!0,configurable:!0}),t}())),p=null,y=i.c;function v(){return!!window.history.pushState}var m=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n._init(),n}return Object(r.d)(e,t),e.prototype._init=function(){this.location=s().getLocation(),this._history=s().getHistory()},e.prototype.getBaseHrefFromDOM=function(){return s().getBaseHref(this._doc)},e.prototype.onPopState=function(t){s().getGlobalEventTarget(this._doc,\"window\").addEventListener(\"popstate\",t,!1)},e.prototype.onHashChange=function(t){s().getGlobalEventTarget(this._doc,\"window\").addEventListener(\"hashchange\",t,!1)},Object.defineProperty(e.prototype,\"pathname\",{get:function(){return this.location.pathname},set:function(t){this.location.pathname=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"search\",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"hash\",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),e.prototype.pushState=function(t,e,n){v()?this._history.pushState(t,e,n):this.location.hash=n},e.prototype.replaceState=function(t,e,n){v()?this._history.replaceState(t,e,n):this.location.hash=n},e.prototype.forward=function(){this._history.forward()},e.prototype.back=function(){this._history.back()},Object(r.c)([Object(r.g)(0,Object(o.o)(y)),Object(r.f)(\"design:paramtypes\",[Object])],e)}(i.m),g=new o.p(\"TRANSITION_ID\"),b=[{provide:o.d,useFactory:function(t,e,n){return function(){n.get(o.e).donePromise.then(function(){var n=s();Array.prototype.slice.apply(n.querySelectorAll(e,\"style[ng-transition]\")).filter(function(e){return n.getAttribute(e,\"ng-transition\")===t}).forEach(function(t){return n.remove(t)})})}},deps:[g,y,o.q],multi:!0}],w=function(){function t(){}return t.init=function(){Object(o.Z)(new t)},t.prototype.addToWindow=function(t){o.qb.getAngularTestability=function(e,n){void 0===n&&(n=!0);var r=t.findTestabilityInTree(e,n);if(null==r)throw new Error(\"Could not find testability for element.\");return r},o.qb.getAllAngularTestabilities=function(){return t.getAllTestabilities()},o.qb.getAllAngularRootElements=function(){return t.getAllRootElements()},o.qb.frameworkStabilizers||(o.qb.frameworkStabilizers=[]),o.qb.frameworkStabilizers.push(function(t){var e=o.qb.getAllAngularTestabilities(),n=e.length,r=!1,i=function(e){r=r||e,0==--n&&t(r)};e.forEach(function(t){t.whenStable(i)})})},t.prototype.findTestabilityInTree=function(t,e,n){if(null==e)return null;var r=t.getTestability(e);return null!=r?r:n?s().isShadowRoot(e)?this.findTestabilityInTree(t,s().getHost(e),!0):this.findTestabilityInTree(t,s().parentElement(e),!0):null},t}();function _(t,e){\"undefined\"!=typeof COMPILED&&COMPILED||((o.qb.ng=o.qb.ng||{})[t]=e)}var E={ApplicationRef:o.g,NgZone:o.z},S=\"probe\",C=\"coreTokens\";function T(t){return Object(o.V)(t)}function I(t){return _(S,T),_(C,Object(r.a)({},E,(t||[]).reduce(function(t,e){return t[e.name]=e.token,t},{}))),function(){return T}}var k=new o.p(\"EventManagerPlugins\"),O=function(){function t(t,e){var n=this;this._zone=e,this._eventNameToPlugin=new Map,t.forEach(function(t){return t.manager=n}),this._plugins=t.slice().reverse()}return t.prototype.addEventListener=function(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)},t.prototype.addGlobalEventListener=function(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)},t.prototype.getZone=function(){return this._zone},t.prototype._findPluginFor=function(t){var e=this._eventNameToPlugin.get(t);if(e)return e;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(t))return this._eventNameToPlugin.set(t,i),i}throw new Error(\"No event manager plugin found for event \"+t)},t}(),N=function(){function t(t){this._doc=t}return t.prototype.addGlobalEventListener=function(t,e,n){var r=s().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(\"Unsupported event target \"+r+\" for event \"+e);return this.addEventListener(r,e,n)},t}(),A=function(){function t(){this._stylesSet=new Set}return t.prototype.addStyles=function(t){var e=this,n=new Set;t.forEach(function(t){e._stylesSet.has(t)||(e._stylesSet.add(t),n.add(t))}),this.onStylesAdded(n)},t.prototype.onStylesAdded=function(t){},t.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},t}(),D=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n._hostNodes=new Set,n._styleNodes=new Set,n._hostNodes.add(e.head),n}return Object(r.d)(e,t),e.prototype._addStylesToHost=function(t,e){var n=this;t.forEach(function(t){var r=n._doc.createElement(\"style\");r.textContent=t,n._styleNodes.add(e.appendChild(r))})},e.prototype.addHost=function(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)},e.prototype.removeHost=function(t){this._hostNodes.delete(t)},e.prototype.onStylesAdded=function(t){var e=this;this._hostNodes.forEach(function(n){return e._addStylesToHost(t,n)})},e.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(t){return s().remove(t)})},e}(A),x={svg:\"http://www.w3.org/2000/svg\",xhtml:\"http://www.w3.org/1999/xhtml\",xlink:\"http://www.w3.org/1999/xlink\",xml:\"http://www.w3.org/XML/1998/namespace\",xmlns:\"http://www.w3.org/2000/xmlns/\"},R=/%COMP%/g,P=\"_nghost-%COMP%\",M=\"_ngcontent-%COMP%\";function j(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?j(t,i,n):(i=i.replace(R,t),n.push(i))}return n}function L(t){return function(e){!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}var F=function(){function t(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new q(t)}return t.prototype.createRenderer=function(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case o.P.Emulated:var n=this.rendererByCompId.get(e.id);return n||(n=new W(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n;case o.P.Native:case o.P.ShadowDom:return new z(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){var r=j(e.id,e.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}},t.prototype.begin=function(){},t.prototype.end=function(){},t}(),q=function(){function t(t){this.eventManager=t,this.data=Object.create(null)}return t.prototype.destroy=function(){},t.prototype.createElement=function(t,e){return e?document.createElementNS(x[e],t):document.createElement(t)},t.prototype.createComment=function(t){return document.createComment(t)},t.prototype.createText=function(t){return document.createTextNode(t)},t.prototype.appendChild=function(t,e){t.appendChild(e)},t.prototype.insertBefore=function(t,e,n){t&&t.insertBefore(e,n)},t.prototype.removeChild=function(t,e){t&&t.removeChild(e)},t.prototype.selectRootElement=function(t,e){var n=\"string\"==typeof t?document.querySelector(t):t;if(!n)throw new Error('The selector \"'+t+'\" did not match any elements');return e||(n.textContent=\"\"),n},t.prototype.parentNode=function(t){return t.parentNode},t.prototype.nextSibling=function(t){return t.nextSibling},t.prototype.setAttribute=function(t,e,n,r){if(r){e=r+\":\"+e;var i=x[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)},t.prototype.removeAttribute=function(t,e,n){if(n){var r=x[n];r?t.removeAttributeNS(r,e):t.removeAttribute(n+\":\"+e)}else t.removeAttribute(e)},t.prototype.addClass=function(t,e){t.classList.add(e)},t.prototype.removeClass=function(t,e){t.classList.remove(e)},t.prototype.setStyle=function(t,e,n,r){r&o.F.DashCase?t.style.setProperty(e,n,r&o.F.Important?\"important\":\"\"):t.style[e]=n},t.prototype.removeStyle=function(t,e,n){n&o.F.DashCase?t.style.removeProperty(e):t.style[e]=\"\"},t.prototype.setProperty=function(t,e,n){V(e,\"property\"),t[e]=n},t.prototype.setValue=function(t,e){t.nodeValue=e},t.prototype.listen=function(t,e,n){return V(e,\"listener\"),\"string\"==typeof t?this.eventManager.addGlobalEventListener(t,e,L(n)):this.eventManager.addEventListener(t,e,L(n))},t}(),U=\"@\".charCodeAt(0);function V(t,e){if(t.charCodeAt(0)===U)throw new Error(\"Found the synthetic \"+e+\" \"+t+'. Please include either \"BrowserAnimationsModule\" or \"NoopAnimationsModule\" in your application.')}var B,W=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;o.component=r;var a=j(i+\"-\"+r.id,r.styles,[]);return n.addStyles(a),o.contentAttr=M.replace(R,i+\"-\"+r.id),o.hostAttr=P.replace(R,i+\"-\"+r.id),o}return Object(r.d)(e,t),e.prototype.applyToHost=function(e){t.prototype.setAttribute.call(this,e,this.hostAttr,\"\")},e.prototype.createElement=function(e,n){var r=t.prototype.createElement.call(this,e,n);return t.prototype.setAttribute.call(this,r,this.contentAttr,\"\"),r},e}(q),z=function(t){function e(e,n,r,i){var a=t.call(this,e)||this;a.sharedStylesHost=n,a.hostEl=r,a.component=i,a.shadowRoot=i.encapsulation===o.P.ShadowDom?r.attachShadow({mode:\"open\"}):r.createShadowRoot(),a.sharedStylesHost.addHost(a.shadowRoot);for(var s=j(i.id,i.styles,[]),u=0;u<s.length;u++){var c=document.createElement(\"style\");c.textContent=s[u],a.shadowRoot.appendChild(c)}return a}return Object(r.d)(e,t),e.prototype.nodeOrShadowRoot=function(t){return t===this.hostEl?this.shadowRoot:t},e.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},e.prototype.appendChild=function(e,n){return t.prototype.appendChild.call(this,this.nodeOrShadowRoot(e),n)},e.prototype.insertBefore=function(e,n,r){return t.prototype.insertBefore.call(this,this.nodeOrShadowRoot(e),n,r)},e.prototype.removeChild=function(e,n){return t.prototype.removeChild.call(this,this.nodeOrShadowRoot(e),n)},e.prototype.parentNode=function(e){return this.nodeOrShadowRoot(t.prototype.parentNode.call(this,this.nodeOrShadowRoot(e)))},e}(q),H=\"undefined\"!=typeof Zone&&Zone.__symbol__||function(t){return\"__zone_symbol__\"+t},Q=H(\"addEventListener\"),K=H(\"removeEventListener\"),G={},Y=\"__zone_symbol__propagationStopped\";\"undefined\"!=typeof Zone&&Zone[H(\"BLACK_LISTED_EVENTS\")]&&(B={});var X=function(t){return!!B&&B.hasOwnProperty(t)},J=function(t){var e=G[t.type];if(e){var n=this[e];if(n){var r=[t];if(1===n.length)return(a=n[0]).zone!==Zone.current?a.zone.run(a.handler,this,r):a.handler.apply(this,r);for(var i=n.slice(),o=0;o<i.length&&!0!==t[Y];o++){var a;(a=i[o]).zone!==Zone.current?a.zone.run(a.handler,this,r):a.handler.apply(this,r)}}}},Z=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o.ngZone=n,r&&Object(i.o)(r)||o.patchEvent(),o}return Object(r.d)(e,t),e.prototype.patchEvent=function(){if(\"undefined\"!=typeof Event&&Event&&Event.prototype&&!Event.prototype.__zone_symbol__stopImmediatePropagation){var t=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[Y]=!0),t&&t.apply(this,arguments)}}},e.prototype.supports=function(t){return!0},e.prototype.addEventListener=function(t,e,n){var r=this,i=n;if(!t[Q]||o.z.isInAngularZone()&&!X(e))t.addEventListener(e,i,!1);else{var a=G[e];a||(a=G[e]=H(\"ANGULAR\"+e+\"FALSE\"));var s=t[a],u=s&&s.length>0;s||(s=t[a]=[]);var c=X(e)?Zone.root:Zone.current;if(0===s.length)s.push({zone:c,handler:i});else{for(var l=!1,h=0;h<s.length;h++)if(s[h].handler===i){l=!0;break}l||s.push({zone:c,handler:i})}u||t[Q](e,J,!1)}return function(){return r.removeEventListener(t,e,i)}},e.prototype.removeEventListener=function(t,e,n){var r=t[K];if(!r)return t.removeEventListener.apply(t,[e,n,!1]);var i=G[e],o=i&&t[i];if(!o)return t.removeEventListener.apply(t,[e,n,!1]);for(var a=!1,s=0;s<o.length;s++)if(o[s].handler===n){a=!0,o.splice(s,1);break}a?0===o.length&&r.apply(t,[e,J,!1]):t.removeEventListener.apply(t,[e,n,!1])},e}(N),$={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},tt=new o.p(\"HammerGestureConfig\"),et=new o.p(\"HammerLoader\"),nt=function(){function t(){this.events=[],this.overrides={}}return t.prototype.buildHammer=function(t){var e=new Hammer(t,this.options);for(var n in e.get(\"pinch\").set({enable:!0}),e.get(\"rotate\").set({enable:!0}),this.overrides)e.get(n).set(this.overrides[n]);return e},t}(),rt=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o._config=n,o.console=r,o.loader=i,o}return Object(r.d)(e,t),e.prototype.supports=function(t){return!(!$.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t)||!window.Hammer&&!this.loader&&(this.console.warn('The \"'+t+'\" event cannot be bound because Hammer.JS is not loaded and no custom loader has been specified.'),1))},e.prototype.addEventListener=function(t,e,n){var r=this,i=this.manager.getZone();if(e=e.toLowerCase(),!window.Hammer&&this.loader){var o=!1,a=function(){o=!0};return this.loader().then(function(){if(!window.Hammer)return r.console.warn(\"The custom HAMMER_LOADER completed, but Hammer.JS is not present.\"),void(a=function(){});o||(a=r.addEventListener(t,e,n))}).catch(function(){r.console.warn('The \"'+e+'\" event cannot be bound because the custom Hammer.JS loader failed.'),a=function(){}}),function(){a()}}return i.runOutsideAngular(function(){var o=r._config.buildHammer(t),a=function(t){i.runGuarded(function(){n(t)})};return o.on(e,a),function(){o.off(e,a),\"function\"==typeof o.destroy&&o.destroy()}})},e.prototype.isCustomEvent=function(t){return this._config.events.indexOf(t)>-1},e}(N),it=[\"alt\",\"control\",\"meta\",\"shift\"],ot={alt:function(t){return t.altKey},control:function(t){return t.ctrlKey},meta:function(t){return t.metaKey},shift:function(t){return t.shiftKey}},at=function(t){function e(e){return t.call(this,e)||this}var n;return Object(r.d)(e,t),n=e,e.prototype.supports=function(t){return null!=n.parseEventName(t)},e.prototype.addEventListener=function(t,e,r){var i=n.parseEventName(e),o=n.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return s().onAndCancel(t,i.domEventName,o)})},e.parseEventName=function(t){var e=t.toLowerCase().split(\".\"),r=e.shift();if(0===e.length||\"keydown\"!==r&&\"keyup\"!==r)return null;var i=n._normalizeKey(e.pop()),o=\"\";if(it.forEach(function(t){var n=e.indexOf(t);n>-1&&(e.splice(n,1),o+=t+\".\")}),o+=i,0!=e.length||0===i.length)return null;var a={};return a.domEventName=r,a.fullKey=o,a},e.getEventFullKey=function(t){var e=\"\",n=s().getEventKey(t);return\" \"===(n=n.toLowerCase())?n=\"space\":\".\"===n&&(n=\"dot\"),it.forEach(function(r){r!=n&&(0,ot[r])(t)&&(e+=r+\".\")}),e+=n},e.eventCallback=function(t,e,r){return function(i){n.getEventFullKey(i)===t&&r.runGuarded(function(){return e(i)})}},e._normalizeKey=function(t){switch(t){case\"esc\":return\"escape\";default:return t}},e}(N),st=function(){return function(){}}(),ut=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n}return Object(r.d)(e,t),e.prototype.sanitize=function(t,e){if(null==e)return null;switch(t){case o.H.NONE:return e;case o.H.HTML:return e instanceof lt?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,\"HTML\"),Object(o.db)(this._doc,String(e)));case o.H.STYLE:return e instanceof ht?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,\"Style\"),Object(o.eb)(e));case o.H.SCRIPT:if(e instanceof ft)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,\"Script\"),new Error(\"unsafe value used in a script context\");case o.H.URL:return e instanceof pt||e instanceof dt?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,\"URL\"),Object(o.fb)(String(e)));case o.H.RESOURCE_URL:if(e instanceof pt)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,\"ResourceURL\"),new Error(\"unsafe value used in a resource URL context (see http://g.co/ng/security#xss)\");default:throw new Error(\"Unexpected SecurityContext \"+t+\" (see http://g.co/ng/security#xss)\")}},e.prototype.checkNotSafeValue=function(t,e){if(t instanceof ct)throw new Error(\"Required a safe \"+e+\", got a \"+t.getTypeName()+\" (see http://g.co/ng/security#xss)\")},e.prototype.bypassSecurityTrustHtml=function(t){return new lt(t)},e.prototype.bypassSecurityTrustStyle=function(t){return new ht(t)},e.prototype.bypassSecurityTrustScript=function(t){return new ft(t)},e.prototype.bypassSecurityTrustUrl=function(t){return new dt(t)},e.prototype.bypassSecurityTrustResourceUrl=function(t){return new pt(t)},e}(st),ct=function(){function t(t){this.changingThisBreaksApplicationSecurity=t}return t.prototype.toString=function(){return\"SafeValue must use [property]=binding: \"+this.changingThisBreaksApplicationSecurity+\" (see http://g.co/ng/security#xss)\"},t}(),lt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.d)(e,t),e.prototype.getTypeName=function(){return\"HTML\"},e}(ct),ht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.d)(e,t),e.prototype.getTypeName=function(){return\"Style\"},e}(ct),ft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.d)(e,t),e.prototype.getTypeName=function(){return\"Script\"},e}(ct),dt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.d)(e,t),e.prototype.getTypeName=function(){return\"URL\"},e}(ct),pt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.d)(e,t),e.prototype.getTypeName=function(){return\"ResourceURL\"},e}(ct),yt=[{provide:o.B,useValue:i.p},{provide:o.C,useValue:function(){d.makeCurrent(),w.init()},multi:!0},{provide:i.m,useClass:m,deps:[y]},{provide:y,useFactory:function(){return document},deps:[]}],vt=Object(o.R)(o.Y,\"browser\",yt);function mt(){return new o.l}var gt=function(){function t(t){if(t)throw new Error(\"BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.\")}var e;return e=t,t.withServerTransition=function(t){return{ngModule:e,providers:[{provide:o.c,useValue:t.appId},{provide:g,useExisting:o.c},b]}},t}();\"undefined\"!=typeof window&&window},\"ZZ/e\":function(t,e,n){\"use strict\";var r=n(\"mrSG\"),i=n(\"CcnG\"),o=n(\"Ip0R\"),a=n(\"ZYCi\"),s=n(\"K9Ia\"),u=n(\"bne5\"),c=n(\"26FU\"),l=n(\"VnD/\"),h=n(\"15JJ\"),f=n(\"ad02\"),d=n(\"cBjU\"),p=[[\"ion-action-sheet\",{ios:\"azzrjyyu\",md:\"uhyavx6a\"},1,[[\"animated\",1,0,1,4],[\"backdropDismiss\",1,0,\"backdrop-dismiss\",4],[\"buttons\",1],[\"config\",4,0,0,0,\"config\"],[\"cssClass\",1,0,\"css-class\",2],[\"dismiss\",32],[\"el\",64],[\"enterAnimation\",1],[\"header\",1,0,1,2],[\"keyboardClose\",1,0,\"keyboard-close\",4],[\"leaveAnimation\",1],[\"mode\",1,0,1,2],[\"onDidDismiss\",32],[\"onWillDismiss\",32],[\"overlayIndex\",1,0,\"overlay-index\",8],[\"present\",32],[\"subHeader\",1,0,\"sub-header\",2],[\"translucent\",1,0,1,4]],2,[[\"ionBackdropTap\",\"onBackdropTap\"],[\"ionActionSheetWillDismiss\",\"dispatchCancelHandler\"]]],[\"ion-action-sheet-controller\",{ios:\"azzrjyyu\",md:\"uhyavx6a\"},0,[[\"create\",32],[\"dismiss\",32],[\"doc\",4,0,0,0,\"document\"],[\"getTop\",32]]],[\"ion-alert\",{ios:\"wb4mk1b9\",md:\"devt5yhg\"},1,[[\"animated\",1,0,1,4],[\"backdropDismiss\",1,0,\"backdrop-dismiss\",4],[\"buttons\",1],[\"config\",4,0,0,0,\"config\"],[\"cssClass\",1,0,\"css-class\",2],[\"dismiss\",32],[\"el\",64],[\"enterAnimation\",1],[\"header\",1,0,1,2],[\"inputs\",2],[\"keyboardClose\",1,0,\"keyboard-close\",4],[\"leaveAnimation\",1],[\"message\",1,0,1,2],[\"mode\",1,0,1,2],[\"onDidDismiss\",32],[\"onWillDismiss\",32],[\"overlayIndex\",1,0,\"overlay-index\",8],[\"present\",32],[\"subHeader\",1,0,\"sub-header\",2],[\"translucent\",1,0,1,4]],2,[[\"ionBackdropTap\",\"onBackdropTap\"],[\"ionAlertWillDismiss\",\"dispatchCancelHandler\"]]],[\"ion-alert-controller\",{ios:\"wb4mk1b9\",md:\"devt5yhg\"},0,[[\"create\",32],[\"dismiss\",32],[\"doc\",4,0,0,0,\"document\"],[\"getTop\",32]]],[\"ion-anchor\",{ios:\"oiucdv63\",md:\"48sex9p5\"},1,[[\"color\",1,0,1,2],[\"href\",1,0,1,2],[\"routerDirection\",1,0,\"router-direction\",2],[\"win\",4,0,0,0,\"window\"]],1,[[\"click\",\"onClick\"]]],[\"ion-app\",{ios:\"5klmpbas\",md:\"ro1otaal\"},1,[[\"config\",4,0,0,0,\"config\"],[\"el\",64],[\"queue\",4,0,0,0,\"queue\"],[\"win\",4,0,0,0,\"window\"]]],[\"ion-avatar\",{ios:\"admmxern\",md:\"isuxxasv\"},1,0,1],[\"ion-back-button\",{ios:\"oiucdv63\",md:\"48sex9p5\"},1,[[\"color\",1,0,1,2],[\"config\",4,0,0,0,\"config\"],[\"defaultHref\",1,0,\"default-href\",2],[\"el\",64],[\"icon\",1,0,1,2],[\"mode\",1,0,1,2],[\"text\",1,0,1,2],[\"win\",4,0,0,0,\"window\"]],2,[[\"click\",\"onClick\"]]],[\"ion-backdrop\",{ios:\"bb7q7tld\",md:\"2i50w2lv\"},1,[[\"doc\",4,0,0,0,\"document\"],[\"stopPropagation\",1,0,\"stop-propagation\",4],[\"tappable\",1,0,1,4],[\"visible\",1,0,1,4]],1,[[\"touchstart\",\"onTouchStart\",0,0,1],[\"click\",\"onMouseDown\",0,0,1],[\"mousedown\",\"onMouseDown\",0,0,1]]],[\"ion-badge\",{ios:\"admmxern\",md:\"isuxxasv\"},1,[[\"color\",1,0,1,2],[\"mode\",1,0,1,2]],1],[\"ion-button\",{ios:\"wddurbsg\",md:\"d1xzdckz\"},1,[[\"buttonType\",2,0,\"button-type\",2],[\"color\",1,0,1,2],[\"disabled\",1,1,1,4],[\"el\",64],[\"expand\",1,1,1,2],[\"fill\",2,1,1,2],[\"href\",1,0,1,2],[\"mode\",1,0,1,2],[\"routerDirection\",1,0,\"router-direction\",2],[\"shape\",1,1,1,2],[\"size\",1,1,1,2],[\"strong\",1,0,1,4],[\"type\",1,0,1,2],[\"win\",4,0,0,0,\"window\"]],1,[[\"click\",\"onClick\"]]],[\"ion-buttons\",{ios:\"5klmpbas\",md:\"ro1otaal\"},1,0,2],[\"ion-card\",{ios:\"ak14tg4e\",md:\"b7geaofq\"},1,[[\"button\",1,0,1,4],[\"color\",1,0,1,2],[\"disabled\",1,0,1,4],[\"href\",1,0,1,2],[\"mode\",1,0,1,2],[\"routerDirection\",1,0,\"router-direction\",2],[\"type\",1,0,1,2],[\"win\",4,0,0,0,\"window\"]],2],[\"ion-card-content\",{ios:\"ak14tg4e\",md:\"b7geaofq\"},1,[[\"mode\",1,0,1,2]]],[\"ion-card-header\",{ios:\"ak14tg4e\",md:\"b7geaofq\"},1,[[\"color\",1,0,1,2],[\"mode\",1,0,1,2],[\"translucent\",1,0,1,4]],1],[\"ion-card-subtitle\",{ios:\"ak14tg4e\",md:\"b7geaofq\"},1,[[\"color\",1,0,1,2],[\"mode\",1,0,1,2]],1],[\"ion-card-title\",{ios:\"ak14tg4e\",md:\"b7geaofq\"},1,[[\"color\",1,0,1,2],[\"mode\",1,0,1,2]],1],[\"ion-checkbox\",{ios:\"senscofp\",md:\"vompwuhi\"},1,[[\"checked\",2,0,1,4],[\"color\",1,0,1,2],[\"disabled\",1,0,1,4],[\"el\",64],[\"indeterminate\",2,0,1,4],[\"mode\",1,0,1,2],[\"name\",1,0,1,2],[\"value\",1,0,1,2]],1,[[\"click\",\"onClick\"]]],[\"ion-chip\",{ios:\"i5bu78vq\",md:\"iqlhkurd\"},1,[[\"color\",1,0,1,2],[\"mode\",1,0,1,2],[\"outline\",1,0,1,4]],1],[\"ion-col\",\"rrpxfm2a\",1,[[\"el\",64],[\"offset\",1,0,1,2],[\"offsetLg\",1,0,\"offset-lg\",2],[\"offsetMd\",1,0,\"offset-md\",2],[\"offsetSm\",1,0,\"offset-sm\",2],[\"offsetXl\",1,0,\"offset-xl\",2],[\"offsetXs\",1,0,\"offset-xs\",2],[\"pull\",1,0,1,2],[\"pullLg\",1,0,\"pull-lg\",2],[\"pullMd\",1,0,\"pull-md\",2],[\"pullSm\",1,0,\"pull-sm\",2],[\"pullXl\",1,0,\"pull-xl\",2],[\"pullXs\",1,0,\"pull-xs\",2],[\"push\",1,0,1,2],[\"pushLg\",1,0,\"push-lg\",2],[\"pushMd\",1,0,\"push-md\",2],[\"pushSm\",1,0,\"push-sm\",2],[\"pushXl\",1,0,\"push-xl\",2],[\"pushXs\",1,0,\"push-xs\",2],[\"size\",1,0,1,2],[\"sizeLg\",1,0,\"size-lg\",2],[\"sizeMd\",1,0,\"size-md\",2],[\"sizeSm\",1,0,\"size-sm\",2],[\"sizeXl\",1,0,\"size-xl\",2],[\"sizeXs\",1,0,\"size-xs\",2],[\"win\",4,0,0,0,\"window\"]],1,[[\"window:resize\",\"onResize\",0,1]]],[\"ion-content\",{ios:\"5klmpbas\",md:\"ro1otaal\"},1,[[\"color\",1,0,1,2],[\"config\",4,0,0,0,\"config\"],[\"el\",64],[\"forceOverscroll\",2,0,\"force-overscroll\",4],[\"fullscreen\",1,0,1,4],[\"getScrollElement\",32],[\"queue\",4,0,0,0,\"queue\"],[\"scrollByPoint\",32],[\"scrollEvents\",1,0,\"scroll-events\",4],[\"scrollToBottom\",32],[\"scrollToPoint\",32],[\"scrollToTop\",32],[\"scrollX\",1,0,\"scroll-x\",4],[\"scrollY\",1,0,\"scroll-y\",4],[\"win\",4,0,0,0,\"window\"]],1,[[\"click\",\"onClick\",0,0,1]]],[\"ion-datetime\",{ios:\"r2tscfp8\",md:\"f5r41bls\"},1,[[\"cancelText\",1,0,\"cancel-text\",2],[\"dayNames\",1,0,\"day-names\",2],[\"dayShortNames\",1,0,\"day-short-names\",2],[\"dayValues\",1,0,\"day-values\",1],[\"disabled\",1,0,1,4],[\"displayFormat\",1,0,\"display-format\",2],[\"doneText\",1,0,\"done-text\",2],[\"el\",64],[\"hourValues\",1,0,\"hour-values\",1],[\"isExpanded\",16],[\"max\",2,0,1,2],[\"min\",2,0,1,2],[\"minuteValues\",1,0,\"minute-values\",1],[\"mode\",1,0,1,2],[\"monthNames\",1,0,\"month-names\",2],[\"monthShortNames\",1,0,\"month-short-names\",2],[\"monthValues\",1,0,\"month-values\",1],[\"name\",1,0,1,2],[\"open\",32],[\"pickerCtrl\",8,0,0,0,\"ion-picker-controller\"],[\"pickerFormat\",1,0,\"picker-format\",2],[\"pickerOptions\",1],[\"placeholder\",1,0,1,2],[\"readonly\",1,0,1,4],[\"value\",2,0,1,2],[\"yearValues\",1,0,\"year-values\",1]],1,[[\"click\",\"onClick\"]]],[\"ion-fab\",{ios:\"llyqw4no\",md:\"xajhwvib\"},1,[[\"activated\",2,0,1,4],[\"close\",32],[\"edge\",1,0,1,4],[\"el\",64],[\"horizontal\",1,0,1,2],[\"vertical\",1,0,1,2]],1,[[\"click\",\"onClick\"]]],[\"ion-fab-button\",{ios:\"llyqw4no\",md:\"xajhwvib\"},1,[[\"activated\",1,0,1,4],[\"color\",1,0,1,2],[\"disabled\",1,0,1,4],[\"el\",64],[\"href\",1,0,1,2],[\"mode\",1,0,1,2],[\"routerDirection\",1,0,\"router-direction\",2],[\"show\",1,0,1,4],[\"size\",1,0,1,2],[\"translucent\",1,0,1,4],[\"type\",1,0,1,2],[\"win\",4,0,0,0,\"window\"]],1],[\"ion-fab-list\",{ios:\"llyqw4no\",md:\"xajhwvib\"},1,[[\"activated\",1,0,1,4],[\"el\",64],[\"side\",1,0,1,2]],1],[\"ion-footer\",{ios:\"5klmpbas\",md:\"ro1otaal\"},1,[[\"mode\",1,0,1,2],[\"translucent\",1,0,1,4]]],[\"ion-grid\",\"rrpxfm2a\",1,[[\"fixed\",1,0,1,4]],1],[\"ion-header\",{ios:\"5klmpbas\",md:\"ro1otaal\"},1,[[\"mode\",1,0,1,2],[\"translucent\",1,0,1,4]]],[\"ion-icon\",{ios:\"wddurbsg\",md:\"d1xzdckz\"},1,[[\"ariaLabel\",2,1,\"aria-label\",2],[\"color\",1,0,1,2],[\"doc\",4,0,0,0,\"document\"],[\"el\",64],[\"flipRtl\",1,0,\"flip-rtl\",4],[\"icon\",1,0,1,2],[\"ios\",1,0,1,2],[\"isServer\",4,0,0,0,\"isServer\"],[\"isVisible\",16],[\"lazy\",1,0,1,4],[\"md\",1,0,1,2],[\"mode\",1,0,1,2],[\"name\",1,0,1,2],[\"resourcesUrl\",4,0,0,0,\"resourcesUrl\"],[\"size\",1,0,1,2],[\"src\",1,0,1,2],[\"svgContent\",16],[\"win\",4,0,0,0,\"window\"]],1],[\"ion-img\",\"fkzdmlip\",1,[[\"alt\",1,0,1,2],[\"el\",64],[\"loadError\",16],[\"loadSrc\",16],[\"src\",1,0,1,2]],1],[\"ion-infinite-scroll\",{ios:\"imcdx1xe\",md:\"1fcq78hk\"},1,[[\"complete\",32],[\"disabled\",1,0,1,4],[\"el\",64],[\"enableListener\",4,0,0,0,\"enableListener\"],[\"isLoading\",16],[\"position\",1,0,1,2],[\"queue\",4,0,0,0,\"queue\"],[\"threshold\",1,0,1,2]],0,[[\"scroll\",\"onScroll\",1,1]]],[\"ion-infinite-scroll-content\",{ios:\"imcdx1xe\",md:\"1fcq78hk\"},1,[[\"config\",4,0,0,0,\"config\"],[\"loadingSpinner\",2,0,\"loading-spinner\",2],[\"loadingText\",1,0,\"loading-text\",2]]],[\"ion-input\",{ios:\"mf2ayo12\",md:\"kgjnfunx\"},1,[[\"accept\",1,0,1,2],[\"autocapitalize\",1,0,1,2],[\"autocomplete\",1,0,1,2],[\"autocorrect\",1,0,1,2],[\"autofocus\",1,0,1,4],[\"clearInput\",1,0,\"clear-input\",4],[\"clearOnEdit\",2,0,\"clear-on-edit\",4],[\"color\",1,0,1,2],[\"debounce\",1,0,1,8],[\"disabled\",1,0,1,4],[\"el\",64],[\"getInputElement\",32],[\"hasFocus\",16],[\"inputmode\",1,0,1,2],[\"max\",1,0,1,2],[\"maxlength\",1,0,1,8],[\"min\",1,0,1,2],[\"minlength\",1,0,1,8],[\"mode\",1,0,1,2],[\"multiple\",1,0,1,4],[\"name\",1,0,1,2],[\"pattern\",1,0,1,2],[\"placeholder\",1,0,1,2],[\"readonly\",1,0,1,4],[\"required\",1,0,1,4],[\"setFocus\",32],[\"size\",1,0,1,8],[\"spellcheck\",1,0,1,4],[\"step\",1,0,1,2],[\"type\",1,0,1,2],[\"value\",2,0,1,2]],2],[\"ion-item\",{ios:\"ugd3sahs\",md:\"qzdsdbvt\"},1,[[\"button\",1,0,1,4],[\"color\",1,0,1,2],[\"detail\",1,0,1,4],[\"detailIcon\",1,0,\"detail-icon\",2],[\"disabled\",1,0,1,4],[\"el\",64],[\"href\",1,0,1,2],[\"lines\",1,0,1,2],[\"mode\",1,0,1,2],[\"multipleInputs\",16],[\"routerDirection\",1,0,\"router-direction\",2],[\"type\",1,0,1,2],[\"win\",4,0,0,0,\"window\"]],1,[[\"ionStyle\",\"itemStyle\"]]],[\"ion-item-divider\",{ios:\"ugd3sahs\",md:\"qzdsdbvt\"},1,[[\"color\",1,0,1,2],[\"el\",64],[\"mode\",1,0,1,2],[\"sticky\",1,0,1,4]],1],[\"ion-item-group\",{ios:\"ugd3sahs\",md:\"qzdsdbvt\"},1],[\"ion-item-option\",{ios:\"eem8jsfz\",md:\"upnvzchf\"},1,[[\"color\",1,0,1,2],[\"disabled\",1,0,1,4],[\"el\",64],[\"expandable\",1,0,1,4],[\"href\",1,0,1,2],[\"mode\",1,0,1,2]],1,[[\"click\",\"onClick\"]]],[\"ion-item-options\",{ios:\"eem8jsfz\",md:\"upnvzchf\"},1,[[\"el\",64],[\"fireSwipeEvent\",32],[\"side\",1,0,1,2],[\"win\",4,0,0,0,\"window\"]]],[\"ion-item-sliding\",{ios:\"eem8jsfz\",md:\"upnvzchf\"},1,[[\"close\",32],[\"closeOpened\",32],[\"disabled\",1,0,1,4],[\"el\",64],[\"getOpenAmount\",32],[\"getSlidingRatio\",32],[\"open\",32],[\"queue\",4,0,0,0,\"queue\"],[\"state\",16]]],[\"ion-label\",{ios:\"ugd3sahs\",md:\"qzdsdbvt\"},1,[[\"color\",1,0,1,2],[\"el\",64],[\"mode\",1,0,1,2],[\"noAnimate\",16],[\"position\",1,0,1,2]],2],[\"ion-list\",{ios:\"ugd3sahs\",md:\"qzdsdbvt\"},1,[[\"closeSlidingItems\",32],[\"el\",64],[\"inset\",1,0,1,4],[\"lines\",1,0,1,2],[\"mode\",1,0,1,2]]],[\"ion-list-header\",{ios:\"ugd3sahs\",md:\"qzdsdbvt\"},1,[[\"color\",1,0,1,2],[\"mode\",1,0,1,2]],1],[\"ion-loading\",{ios:\"3pkkvczk\",md:\"mrs0ks1r\"},1,[[\"animated\",1,0,1,4],[\"backdropDismiss\",1,0,\"backdrop-dismiss\",4],[\"config\",4,0,0,0,\"config\"],[\"cssClass\",1,0,\"css-class\",2],[\"dismiss\",32],[\"duration\",1,0,1,8],[\"el\",64],[\"enterAnimation\",1],[\"keyboardClose\",1,0,\"keyboard-close\",4],[\"leaveAnimation\",1],[\"message\",1,0,1,2],[\"mode\",1,0,1,2],[\"onDidDismiss\",32],[\"onWillDismiss\",32],[\"overlayIndex\",1,0,\"overlay-index\",8],[\"present\",32],[\"showBackdrop\",1,0,\"show-backdrop\",4],[\"spinner\",2,0,1,2],[\"translucent\",1,0,1,4]],2,[[\"ionBackdropTap\",\"onBackdropTap\"]]],[\"ion-loading-controller\",{ios:\"3pkkvczk\",md:\"mrs0ks1r\"},0,[[\"create\",32],[\"dismiss\",32],[\"doc\",4,0,0,0,\"document\"],[\"getTop\",32]]],[\"ion-menu\",{ios:\"r8g3twaz\",md:\"wpufhrqd\"},1,[[\"close\",32],[\"config\",4,0,0,0,\"config\"],[\"contentId\",1,0,\"content-id\",2],[\"disabled\",2,0,1,4],[\"doc\",4,0,0,0,\"document\"],[\"el\",64],[\"enableListener\",4,0,0,0,\"enableListener\"],[\"isActive\",32],[\"isEndSide\",16],[\"isOpen\",32],[\"isPaneVisible\",16],[\"isServer\",4,0,0,0,\"isServer\"],[\"lazyMenuCtrl\",8,0,0,0,\"ion-menu-controller\"],[\"maxEdgeStart\",1,0,\"max-edge-start\",8],[\"menuId\",1,0,\"menu-id\",2],[\"open\",32],[\"queue\",4,0,0,0,\"queue\"],[\"setOpen\",32],[\"side\",1,1,1,2],[\"swipeGesture\",1,0,\"swipe-gesture\",4],[\"toggle\",32],[\"type\",2,0,1,2],[\"win\",4,0,0,0,\"window\"]],1,[[\"body:ionSplitPaneVisible\",\"onSplitPaneChanged\"],[\"click\",\"onBackdropClick\",1,0,1]]],[\"ion-menu-button\",{ios:\"r8g3twaz\",md:\"wpufhrqd\"},1,[[\"autoHide\",1,0,\"auto-hide\",4],[\"color\",1,0,1,2],[\"config\",4,0,0,0,\"config\"],[\"menu\",1,0,1,2],[\"mode\",1,0,1,2]],1],[\"ion-menu-controller\",{ios:\"r8g3twaz\",md:\"wpufhrqd\"},1,[[\"_getInstance\",32],[\"close\",32],[\"config\",4,0,0,0,\"config\"],[\"doc\",4,0,0,0,\"document\"],[\"enable\",32],[\"get\",32],[\"getMenus\",32],[\"getOpen\",32],[\"isAnimating\",32],[\"isEnabled\",32],[\"isOpen\",32],[\"open\",32],[\"registerAnimation\",32],[\"swipeGesture\",32],[\"toggle\",32]]],[\"ion-menu-toggle\",{ios:\"r8g3twaz\",md:\"wpufhrqd\"},1,[[\"autoHide\",1,0,\"auto-hide\",4],[\"doc\",4,0,0,0,\"document\"],[\"menu\",1,0,1,2],[\"visible\",16]],1,[[\"click\",\"onClick\"],[\"body:ionMenuChange\",\"updateVisibility\"],[\"body:ionSplitPaneVisible\",\"updateVisibility\"]]],[\"ion-modal\",{ios:\"k6eoch7h\",md:\"7hlpr3fd\"},1,[[\"animated\",1,0,1,4],[\"backdropDismiss\",1,0,\"backdrop-dismiss\",4],[\"component\",1,0,1,2],[\"componentProps\",1],[\"config\",4,0,0,0,\"config\"],[\"cssClass\",1,0,\"css-class\",2],[\"delegate\",1],[\"dismiss\",32],[\"el\",64],[\"enterAnimation\",1],[\"keyboardClose\",1,0,\"keyboard-close\",4],[\"leaveAnimation\",1],[\"mode\",1,0,1,2],[\"onDidDismiss\",32],[\"onWillDismiss\",32],[\"overlayIndex\",1,0,\"overlay-index\",8],[\"present\",32],[\"showBackdrop\",1,0,\"show-backdrop\",4]],2,[[\"ionDismiss\",\"onDismiss\"],[\"ionBackdropTap\",\"onBackdropTap\"],[\"ionModalDidPresent\",\"lifecycle\"],[\"ionModalWillPresent\",\"lifecycle\"],[\"ionModalWillDismiss\",\"lifecycle\"],[\"ionModalDidDismiss\",\"lifecycle\"]]],[\"ion-modal-controller\",{ios:\"k6eoch7h\",md:\"7hlpr3fd\"},0,[[\"create\",32],[\"dismiss\",32],[\"doc\",4,0,0,0,\"document\"],[\"getTop\",32]]],[\"ion-nav\",\"pd9wflli\",1,[[\"animated\",1,0,1,4],[\"animation\",1],[\"canGoBack\",32],[\"config\",4,0,0,0,\"config\"],[\"delegate\",1],[\"el\",64],[\"getActive\",32],[\"getByIndex\",32],[\"getPrevious\",32],[\"getRouteId\",32],[\"insert\",32],[\"insertPages\",32],[\"pop\",32],[\"popTo\",32],[\"popToRoot\",32],[\"push\",32],[\"queue\",4,0,0,0,\"queue\"],[\"removeIndex\",32],[\"root\",1,0,1,2],[\"rootParams\",1],[\"setPages\",32],[\"setRoot\",32],[\"setRouteId\",32],[\"swipeGesture\",2,0,\"swipe-gesture\",4],[\"win\",4,0,0,0,\"window\"]],1],[\"ion-nav-pop\",\"pd9wflli\",0,[[\"el\",64]],0,[[\"child:click\",\"pop\"]]],[\"ion-nav-push\",\"pd9wflli\",0,[[\"component\",1,0,1,2],[\"componentProps\",1],[\"el\",64]],0,[[\"child:click\",\"push\"]]],[\"ion-nav-set-root\",\"pd9wflli\",0,[[\"component\",1,0,1,2],[\"componentProps\",1],[\"el\",64]],0,[[\"child:click\",\"push\"]]],[\"ion-note\",{ios:\"ugd3sahs\",md:\"qzdsdbvt\"},1,[[\"color\",1,0,1,2],[\"mode\",1,0,1,2]],1],[\"ion-picker\",{ios:\"r2tscfp8\",md:\"f5r41bls\"},1,[[\"animated\",1,0,1,4],[\"backdropDismiss\",1,0,\"backdrop-dismiss\",4],[\"buttons\",1],[\"columns\",1],[\"config\",4,0,0,0,\"config\"],[\"cssClass\",1,0,\"css-class\",2],[\"dismiss\",32],[\"duration\",1,0,1,8],[\"el\",64],[\"enterAnimation\",1],[\"getColumn\",32],[\"keyboardClose\",1,0,\"keyboard-close\",4],[\"leaveAnimation\",1],[\"mode\",1,0,1,2],[\"onDidDismiss\",32],[\"onWillDismiss\",32],[\"overlayIndex\",1,0,\"overlay-index\",8],[\"present\",32],[\"presented\",16],[\"showBackdrop\",1,0,\"show-backdrop\",4]],2,[[\"ionBackdropTap\",\"onBackdropTap\"]]],[\"ion-picker-column\",{ios:\"r2tscfp8\",md:\"f5r41bls\"},1,[[\"col\",1],[\"el\",64],[\"queue\",4,0,0,0,\"queue\"]]],[\"ion-picker-controller\",{ios:\"r2tscfp8\",md:\"f5r41bls\"},0,[[\"create\",32],[\"dismiss\",32],[\"doc\",4,0,0,0,\"document\"],[\"getTop\",32]]],[\"ion-popover\",{ios:\"x5xnv4jv\",md:\"r8dtlwvb\"},1,[[\"animated\",1,0,1,4],[\"backdropDismiss\",1,0,\"backdrop-dismiss\",4],[\"component\",1,0,1,2],[\"componentProps\",1],[\"config\",4,0,0,0,\"config\"],[\"cssClass\",1,0,\"css-class\",2],[\"delegate\",1],[\"dismiss\",32],[\"el\",64],[\"enterAnimation\",1],[\"event\",1,0,1,1],[\"keyboardClose\",1,0,\"keyboard-close\",4],[\"leaveAnimation\",1],[\"mode\",1,0,1,2],[\"onDidDismiss\",32],[\"onWillDismiss\",32],[\"overlayIndex\",1,0,\"overlay-index\",8],[\"present\",32],[\"showBackdrop\",1,0,\"show-backdrop\",4],[\"translucent\",1,0,1,4]],2,[[\"ionDismiss\",\"onDismiss\"],[\"ionBackdropTap\",\"onBackdropTap\"],[\"ionPopoverDidPresent\",\"lifecycle\"],[\"ionPopoverWillPresent\",\"lifecycle\"],[\"ionPopoverWillDismiss\",\"lifecycle\"],[\"ionPopoverDidDismiss\",\"lifecycle\"]]],[\"ion-popover-controller\",{ios:\"x5xnv4jv\",md:\"r8dtlwvb\"},0,[[\"create\",32],[\"dismiss\",32],[\"doc\",4,0,0,0,\"document\"],[\"getTop\",32]]],[\"ion-progress-bar\",{ios:\"tlbladaf\",md:\"6kgso7pq\"},1,[[\"buffer\",1,0,1,8],[\"color\",1,0,1,2],[\"config\",4,0,0,0,\"config\"],[\"mode\",1,0,1,2],[\"reversed\",1,0,1,4],[\"type\",1,0,1,2],[\"value\",1,0,1,8]],1],[\"ion-radio\",{ios:\"jzwyowjw\",md:\"iwgahuhw\"},1,[[\"checked\",2,0,1,4],[\"color\",1,0,1,2],[\"disabled\",1,0,1,4],[\"el\",64],[\"mode\",1,0,1,2],[\"name\",1,0,1,2],[\"value\",2,0,1,1]],1,[[\"click\",\"onClick\"]]],[\"ion-radio-group\",{ios:\"jzwyowjw\",md:\"iwgahuhw\"},0,[[\"allowEmptySelection\",1,0,\"allow-empty-selection\",4],[\"el\",64],[\"name\",1,0,1,2],[\"value\",2,0,1,1]],0,[[\"ionRadioDidLoad\",\"onRadioDidLoad\"],[\"ionRadioDidUnload\",\"onRadioDidUnload\"],[\"ionSelect\",\"onRadioSelect\"],[\"ionDeselect\",\"onRadioDeselect\"]]],[\"ion-range\",{ios:\"eghwkqif\",md:\"5zcdwzsx\"},1,[[\"color\",1,0,1,2],[\"debounce\",1,0,1,8],[\"disabled\",1,0,1,4],[\"doc\",4,0,0,0,\"document\"],[\"dualKnobs\",1,0,\"dual-knobs\",4],[\"el\",64],[\"max\",1,0,1,8],[\"min\",1,0,1,8],[\"mode\",1,0,1,2],[\"name\",1,0,1,2],[\"pin\",1,0,1,4],[\"pressedKnob\",16],[\"queue\",4,0,0,0,\"queue\"],[\"ratioA\",16],[\"ratioB\",16],[\"snaps\",1,0,1,4],[\"step\",1,0,1,8],[\"ticks\",1,0,1,4],[\"value\",2,0,1,8]],1,[[\"focusout\",\"onBlur\"],[\"focusin\",\"onFocus\"]]],[\"ion-refresher\",{ios:\"lb8tayd0\",md:\"tn7df4wj\"},1,[[\"cancel\",32],[\"closeDuration\",1,0,\"close-duration\",2],[\"complete\",32],[\"disabled\",1,0,1,4],[\"el\",64],[\"getProgress\",32],[\"pullFactor\",1,0,\"pull-factor\",8],[\"pullMax\",1,0,\"pull-max\",8],[\"pullMin\",1,0,\"pull-min\",8],[\"queue\",4,0,0,0,\"queue\"],[\"snapbackDuration\",1,0,\"snapback-duration\",2],[\"state\",16]]],[\"ion-refresher-content\",{ios:\"lb8tayd0\",md:\"tn7df4wj\"},0,[[\"config\",4,0,0,0,\"config\"],[\"pullingIcon\",2,0,\"pulling-icon\",2],[\"pullingText\",1,0,\"pulling-text\",2],[\"refreshingSpinner\",2,0,\"refreshing-spinner\",2],[\"refreshingText\",1,0,\"refreshing-text\",2]]],[\"ion-reorder\",{ios:\"mo7qeek2\",md:\"39fhulxe\"},1,0,1,[[\"click\",\"onClick\",0,0,1]]],[\"ion-reorder-group\",{ios:\"mo7qeek2\",md:\"39fhulxe\"},1,[[\"complete\",32],[\"disabled\",1,0,1,4],[\"doc\",4,0,0,0,\"document\"],[\"el\",64],[\"queue\",4,0,0,0,\"queue\"],[\"state\",16]]],[\"ion-ripple-effect\",\"rkecsmgc\",1,[[\"addRipple\",32],[\"el\",64],[\"queue\",4,0,0,0,\"queue\"],[\"type\",1,0,1,2],[\"win\",4,0,0,0,\"window\"]],1],[\"ion-route\",\"3hbcnxuc\",0,[[\"component\",1,0,1,2],[\"componentProps\",1],[\"url\",1,0,1,2]]],[\"ion-route-redirect\",\"3hbcnxuc\",0,[[\"from\",1,0,1,2],[\"to\",1,0,1,2]]],[\"ion-router\",\"3hbcnxuc\",0,[[\"back\",32],[\"config\",4,0,0,0,\"config\"],[\"el\",64],[\"navChanged\",32],[\"printDebug\",32],[\"push\",32],[\"queue\",4,0,0,0,\"queue\"],[\"root\",1,0,1,2],[\"useHash\",1,0,\"use-hash\",4],[\"win\",4,0,0,0,\"window\"]],0,[[\"window:popstate\",\"onPopState\"],[\"document:ionBackButton\",\"onBackButton\"]]],[\"ion-router-outlet\",\"3hbcnxuc\",1,[[\"animated\",1,0,1,4],[\"animation\",1],[\"commit\",32],[\"config\",4,0,0,0,\"config\"],[\"delegate\",1],[\"el\",64],[\"getRouteId\",32],[\"mode\",1,0,1,2],[\"queue\",4,0,0,0,\"queue\"],[\"setRouteId\",32],[\"swipeHandler\",1],[\"win\",4,0,0,0,\"window\"]],1],[\"ion-row\",\"rrpxfm2a\",1,0,1],[\"ion-searchbar\",{ios:\"urrnn8ys\",md:\"foblon1x\"},1,[[\"animated\",1,0,1,4],[\"autocomplete\",1,0,1,2],[\"autocorrect\",1,0,1,2],[\"cancelButtonIcon\",1,0,\"cancel-button-icon\",2],[\"cancelButtonText\",1,0,\"cancel-button-text\",2],[\"clearIcon\",1,0,\"clear-icon\",2],[\"color\",1,0,1,2],[\"config\",4,0,0,0,\"config\"],[\"debounce\",1,0,1,8],[\"disabled\",1,0,1,4],[\"doc\",4,0,0,0,\"document\"],[\"el\",64],[\"focused\",16],[\"getInputElement\",32],[\"mode\",1,0,1,2],[\"noAnimate\",16],[\"placeholder\",1,0,1,2],[\"searchIcon\",1,0,\"search-icon\",2],[\"setFocus\",32],[\"showCancelButton\",1,0,\"show-cancel-button\",1],[\"spellcheck\",1,0,1,4],[\"type\",1,0,1,2],[\"value\",2,0,1,2]],2],[\"ion-segment\",{ios:\"fmzmhk3d\",md:\"djkq5plb\"},1,[[\"color\",1,0,1,2],[\"disabled\",1,0,1,4],[\"el\",64],[\"mode\",1,0,1,2],[\"scrollable\",1,0,1,4],[\"value\",2,0,1,2]],2,[[\"ionSelect\",\"segmentClick\"]]],[\"ion-segment-button\",{ios:\"fmzmhk3d\",md:\"djkq5plb\"},1,[[\"checked\",2,0,1,4],[\"disabled\",1,0,1,4],[\"el\",64],[\"layout\",1,0,1,2],[\"mode\",1,0,1,2],[\"value\",1,0,1,2]],1,[[\"click\",\"onClick\"]]],[\"ion-select\",{ios:\"vypdotd0\",md:\"ek05jvfc\"},1,[[\"actionSheetCtrl\",8,0,0,0,\"ion-action-sheet-controller\"],[\"alertCtrl\",8,0,0,0,\"ion-alert-controller\"],[\"cancelText\",1,0,\"cancel-text\",2],[\"compareWith\",1,0,\"compare-with\",2],[\"disabled\",1,0,1,4],[\"el\",64],[\"interface\",1,0,1,2],[\"interfaceOptions\",1,0,\"interface-options\",1],[\"isExpanded\",16],[\"mode\",1,0,1,2],[\"multiple\",1,0,1,4],[\"name\",1,0,1,2],[\"okText\",1,0,\"ok-text\",2],[\"open\",32],[\"placeholder\",1,0,1,2],[\"popoverCtrl\",8,0,0,0,\"ion-popover-controller\"],[\"selectedText\",1,0,\"selected-text\",2],[\"value\",2,0,1,1]],1,[[\"ionSelectOptionDidLoad\",\"selectOptionChanged\"],[\"ionSelectOptionDidUnload\",\"selectOptionChanged\"],[\"click\",\"onClick\"]]],[\"ion-select-option\",{ios:\"vypdotd0\",md:\"ek05jvfc\"},1,[[\"disabled\",1,0,1,4],[\"el\",64],[\"selected\",1,0,1,4],[\"value\",2,0,1,1]],1],[\"ion-select-popover\",{ios:\"vypdotd0\",md:\"ek05jvfc\"},1,[[\"header\",1,0,1,2],[\"message\",1,0,1,2],[\"options\",1],[\"subHeader\",1,0,\"sub-header\",2]],2,[[\"ionSelect\",\"onSelect\"]]],[\"ion-skeleton-text\",{ios:\"ugd3sahs\",md:\"qzdsdbvt\"},1,[[\"animated\",1,0,1,4],[\"config\",4,0,0,0,\"config\"],[\"el\",64],[\"width\",1,0,1,2]],1],[\"ion-slide\",{ios:\"jyhraxns\",md:\"91yswq9n\"},1],[\"ion-slides\",{ios:\"jyhraxns\",md:\"91yswq9n\"},1,[[\"el\",64],[\"getActiveIndex\",32],[\"getPreviousIndex\",32],[\"isBeginning\",32],[\"isEnd\",32],[\"length\",32],[\"lockSwipeToNext\",32],[\"lockSwipeToPrev\",32],[\"lockSwipes\",32],[\"mode\",1,0,1,2],[\"options\",1,0,1,1],[\"pager\",1,0,1,4],[\"scrollbar\",1,0,1,4],[\"slideNext\",32],[\"slidePrev\",32],[\"slideTo\",32],[\"startAutoplay\",32],[\"stopAutoplay\",32],[\"update\",32],[\"updateAutoHeight\",32]],0,[[\"ionSlideChanged\",\"onSlideChanged\"]]],[\"ion-spinner\",\"j20d1ikn\",1,[[\"color\",1,0,1,2],[\"config\",4,0,0,0,\"config\"],[\"duration\",1,0,1,8],[\"name\",1,0,1,2],[\"paused\",1,0,1,4]],1],[\"ion-split-pane\",{ios:\"helxzsef\",md:\"mri9bdlj\"},1,[[\"contentId\",1,0,\"content-id\",2],[\"disabled\",1,0,1,4],[\"el\",64],[\"isServer\",4,0,0,0,\"isServer\"],[\"visible\",16],[\"when\",1,0,1,1],[\"win\",4,0,0,0,\"window\"]]],[\"ion-tab\",\"oc7j8k7y\",1,[[\"active\",2,0,1,4],[\"component\",1,0,1,2],[\"delegate\",1],[\"el\",64],[\"setActive\",32],[\"tab\",1,0,1,2]],1],[\"ion-tab-bar\",{ios:\"kawnb1ql\",md:\"n1gqnu4m\"},1,[[\"color\",1,0,1,2],[\"doc\",4,0,0,0,\"document\"],[\"el\",64],[\"keyboardVisible\",16],[\"mode\",1,0,1,2],[\"queue\",4,0,0,0,\"queue\"],[\"selectedTab\",1,0,\"selected-tab\",2],[\"translucent\",1,0,1,4]],1,[[\"window:keyboardWillHide\",\"onKeyboardWillHide\"],[\"window:keyboardWillShow\",\"onKeyboardWillShow\"]]],[\"ion-tab-button\",{ios:\"kawnb1ql\",md:\"n1gqnu4m\"},1,[[\"config\",4,0,0,0,\"config\"],[\"disabled\",1,0,1,4],[\"doc\",4,0,0,0,\"document\"],[\"el\",64],[\"href\",1,0,1,2],[\"layout\",2,0,1,2],[\"mode\",1,0,1,2],[\"queue\",4,0,0,0,\"queue\"],[\"selected\",2,0,1,4],[\"tab\",1,0,1,2]],1,[[\"parent:ionTabBarChanged\",\"onTabBarChanged\"],[\"click\",\"onClick\"],[\"keyup\",\"onKeyUp\"]]],[\"ion-tabs\",\"oc7j8k7y\",1,[[\"config\",4,0,0,0,\"config\"],[\"doc\",4,0,0,0,\"document\"],[\"el\",64],[\"getRouteId\",32],[\"getSelected\",32],[\"getTab\",32],[\"select\",32],[\"selectedTab\",16],[\"setRouteId\",32],[\"tabs\",16],[\"useRouter\",2,0,\"use-router\",4]],1,[[\"ionTabButtonClick\",\"onTabClicked\"]]],[\"ion-text\",\"wjdsdnuu\",1,[[\"color\",1,0,1,2],[\"mode\",1,0,1,2]],1],[\"ion-textarea\",{ios:\"n60sde1b\",md:\"bheoje2y\"},1,[[\"autoGrow\",1,0,\"auto-grow\",4],[\"autocapitalize\",1,0,1,2],[\"autofocus\",1,0,1,4],[\"clearOnEdit\",2,0,\"clear-on-edit\",4],[\"color\",1,0,1,2],[\"cols\",1,0,1,8],[\"debounce\",1,0,1,8],[\"disabled\",1,0,1,4],[\"el\",64],[\"getInputElement\",32],[\"hasFocus\",16],[\"maxlength\",1,0,1,8],[\"minlength\",1,0,1,8],[\"mode\",1,0,1,2],[\"name\",1,0,1,2],[\"placeholder\",1,0,1,2],[\"readonly\",1,0,1,4],[\"required\",1,0,1,4],[\"rows\",1,0,1,8],[\"setFocus\",32],[\"spellcheck\",1,0,1,4],[\"value\",2,0,1,2],[\"wrap\",1,0,1,2]],2],[\"ion-thumbnail\",{ios:\"admmxern\",md:\"isuxxasv\"},1,0,1],[\"ion-title\",{ios:\"5klmpbas\",md:\"ro1otaal\"},1,[[\"color\",1,0,1,2],[\"el\",64]],1],[\"ion-toast\",{ios:\"tg9wqmdk\",md:\"wwcmkxu8\"},1,[[\"animated\",1,0,1,4],[\"buttons\",1],[\"closeButtonText\",1,0,\"close-button-text\",2],[\"color\",1,0,1,2],[\"config\",4,0,0,0,\"config\"],[\"cssClass\",1,0,\"css-class\",2],[\"dismiss\",32],[\"duration\",1,0,1,8],[\"el\",64],[\"enterAnimation\",1],[\"header\",1,0,1,2],[\"keyboardClose\",1,0,\"keyboard-close\",4],[\"leaveAnimation\",1],[\"message\",1,0,1,2],[\"mode\",1,0,1,2],[\"onDidDismiss\",32],[\"onWillDismiss\",32],[\"overlayIndex\",1,0,\"overlay-index\",8],[\"position\",1,0,1,2],[\"present\",32],[\"showCloseButton\",1,0,\"show-close-button\",4],[\"translucent\",1,0,1,4]],1],[\"ion-toast-controller\",{ios:\"tg9wqmdk\",md:\"wwcmkxu8\"},0,[[\"create\",32],[\"dismiss\",32],[\"doc\",4,0,0,0,\"document\"],[\"getTop\",32]]],[\"ion-toggle\",{ios:\"b65tzyas\",md:\"wrpzmdqx\"},1,[[\"activated\",16],[\"checked\",2,0,1,4],[\"color\",1,0,1,2],[\"disabled\",1,0,1,4],[\"doc\",4,0,0,0,\"document\"],[\"el\",64],[\"mode\",1,0,1,2],[\"name\",1,0,1,2],[\"queue\",4,0,0,0,\"queue\"],[\"value\",1,0,1,2]],1,[[\"click\",\"onClick\"]]],[\"ion-toolbar\",{ios:\"5klmpbas\",md:\"ro1otaal\"},1,[[\"color\",1,0,1,2],[\"config\",4,0,0,0,\"config\"],[\"el\",64],[\"mode\",1,0,1,2]],1,[[\"ionStyle\",\"childrenStyle\"]]],[\"ion-virtual-scroll\",\"hds9xywu\",1,[[\"approxFooterHeight\",1,0,\"approx-footer-height\",8],[\"approxHeaderHeight\",1,0,\"approx-header-height\",8],[\"approxItemHeight\",1,0,\"approx-item-height\",8],[\"checkEnd\",32],[\"checkRange\",32],[\"domRender\",1],[\"el\",64],[\"enableListener\",4,0,0,0,\"enableListener\"],[\"footerFn\",1],[\"headerFn\",1],[\"itemHeight\",1],[\"items\",1],[\"nodeRender\",1],[\"positionForItem\",32],[\"queue\",4,0,0,0,\"queue\"],[\"renderFooter\",1],[\"renderHeader\",1],[\"renderItem\",1],[\"totalHeight\",16],[\"win\",4,0,0,0,\"window\"]],0,[[\"scroll\",\"onScroll\",1],[\"window:resize\",\"onResize\",0,1]]]];function y(t){requestAnimationFrame(function(){var e=t.nativeElement,n=function(t){for(var n=e.classList,r=[],i=0;i<n.length;i++){var o=n.item(i);null!==o&&\"ng-\"===o.substr(0,\"ng-\".length)&&r.push(\"ion-\"+o.substr(3))}return r}();v(e,n);var r=e.closest(\"ion-item\");r&&v(r,n)})}function v(t,e){var n=t.classList;n.remove(\"ion-valid\",\"ion-invalid\",\"ion-touched\",\"ion-untouched\",\"ion-dirty\",\"ion-pristine\"),n.add.apply(n,e)}n.d(e,\"a\",function(){return ue}),n.d(e,\"b\",function(){return ie}),n.d(e,\"c\",function(){return q}),n.d(e,\"d\",function(){return U}),n.d(e,\"e\",function(){return V}),n.d(e,\"f\",function(){return B}),n.d(e,\"g\",function(){return W}),n.d(e,\"h\",function(){return z}),n.d(e,\"i\",function(){return H}),n.d(e,\"j\",function(){return Q}),n.d(e,\"k\",function(){return K}),n.d(e,\"l\",function(){return G}),n.d(e,\"m\",function(){return Y}),n.d(e,\"n\",function(){return X}),n.d(e,\"o\",function(){return J}),n.d(e,\"p\",function(){return Z}),n.d(e,\"q\",function(){return $}),n.d(e,\"r\",function(){return tt}),n.d(e,\"s\",function(){return et}),n.d(e,\"t\",function(){return nt}),n.d(e,\"u\",function(){return rt}),n.d(e,\"v\",function(){return it}),n.d(e,\"w\",function(){return ot}),n.d(e,\"x\",function(){return at}),n.d(e,\"y\",function(){return st}),n.d(e,\"z\",function(){return ut}),n.d(e,\"A\",function(){return ct}),n.d(e,\"B\",function(){return lt}),n.d(e,\"C\",function(){return ht}),n.d(e,\"D\",function(){return ft}),n.d(e,\"E\",function(){return dt}),n.d(e,\"F\",function(){return pt}),n.d(e,\"G\",function(){return yt}),n.d(e,\"H\",function(){return vt}),n.d(e,\"I\",function(){return mt}),n.d(e,\"J\",function(){return gt}),n.d(e,\"K\",function(){return bt}),n.d(e,\"L\",function(){return wt}),n.d(e,\"M\",function(){return _t}),n.d(e,\"N\",function(){return Et}),n.d(e,\"O\",function(){return St}),n.d(e,\"P\",function(){return Ct}),n.d(e,\"Q\",function(){return Tt}),n.d(e,\"R\",function(){return It}),n.d(e,\"S\",function(){return kt}),n.d(e,\"T\",function(){return Ot}),n.d(e,\"U\",function(){return Nt}),n.d(e,\"V\",function(){return At}),n.d(e,\"W\",function(){return Dt}),n.d(e,\"X\",function(){return xt}),n.d(e,\"Y\",function(){return Rt}),n.d(e,\"Z\",function(){return Pt}),n.d(e,\"ab\",function(){return Mt}),n.d(e,\"bb\",function(){return jt}),n.d(e,\"cb\",function(){return Lt}),n.d(e,\"db\",function(){return Ft}),n.d(e,\"eb\",function(){return Ee}),n.d(e,\"fb\",function(){return qt}),n.d(e,\"gb\",function(){return Ut}),n.d(e,\"hb\",function(){return Vt}),n.d(e,\"ib\",function(){return Bt}),n.d(e,\"jb\",function(){return Wt}),n.d(e,\"kb\",function(){return zt}),n.d(e,\"lb\",function(){return Ht}),n.d(e,\"mb\",function(){return Qt}),n.d(e,\"nb\",function(){return Kt}),n.d(e,\"ob\",function(){return Gt}),n.d(e,\"pb\",function(){return Yt}),n.d(e,\"qb\",function(){return Xt}),n.d(e,\"rb\",function(){return Jt}),n.d(e,\"sb\",function(){return Ce}),n.d(e,\"tb\",function(){return Zt}),n.d(e,\"ub\",function(){return $t}),n.d(e,\"vb\",function(){return te}),n.d(e,\"wb\",function(){return ee}),n.d(e,\"xb\",function(){return ne}),n.d(e,\"yb\",function(){return re}),n.d(e,\"zb\",function(){return Ie}),n.d(e,\"Ab\",function(){return Me}),n.d(e,\"Bb\",function(){return De}),n.d(e,\"Cb\",function(){return Ne}),n.d(e,\"Db\",function(){return R}),n.d(e,\"Eb\",function(){return A}),n.d(e,\"Fb\",function(){return Ae}),n.d(e,\"Gb\",function(){return Te}),n.d(e,\"Hb\",function(){return m}),n.d(e,\"Ib\",function(){return oe}),n.d(e,\"Jb\",function(){return xe});var m=function(t){function e(e){return t.call(this,e)||this}return Object(r.d)(e,t),e.prototype._handleInputEvent=function(t){this.handleChangeEvent(t)},e}(function(){function t(t){this.el=t,this.onChange=function(){},this.onTouched=function(){}}return t.prototype.writeValue=function(t){this.el.nativeElement.value=this.lastValue=null==t?\"\":t,y(this.el)},t.prototype.handleChangeEvent=function(t){t!==this.lastValue&&(this.lastValue=t,this.onChange(t)),y(this.el)},t.prototype._handleBlurEvent=function(){this.onTouched(),y(this.el)},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this.el.nativeElement.disabled=t},t}()),g=function(t){return b(t)},b=function(t){t.Ionic=t.Ionic||{};var e=t.Ionic.platforms;return null==e&&(e=t.Ionic.platforms=w(t)).forEach(function(e){return t.document.documentElement.classList.add(\"plt-\"+e)}),e},w=function(t){return Object.keys(N).filter(function(e){return N[e](t)})},_=function(t){return k(t,/iPad/i)},E=function(t){return k(t,/android|sink/i)},S=function(t){return O(t,\"(any-pointer:coarse)\")},C=function(t){return T(t)||I(t)},T=function(t){return!!(t.cordova||t.phonegap||t.PhoneGap)},I=function(t){var e=t.Capacitor;return!(!e||!e.isNative)},k=function(t,e){return!(!t.navigator||!t.navigator.userAgent)&&e.test(t.navigator.userAgent)},O=function(t,e){return!!t.matchMedia&&t.matchMedia(e).matches},N={ipad:_,iphone:function(t){return k(t,/iPhone/i)},ios:function(t){return k(t,/iPad|iPhone|iPod/i)},android:E,phablet:function(t){var e=t.innerWidth,n=t.innerHeight,r=Math.min(e,n),i=Math.max(e,n);return r>390&&r<520&&i>620&&i<800},tablet:function(t){var e=t.innerWidth,n=t.innerHeight,r=Math.min(e,n),i=Math.max(e,n);return _(t)||function(t){return E(t)&&!k(t,/mobile/i)}(t)||r>460&&r<820&&i>780&&i<1400},cordova:T,capacitor:I,electron:function(t){return k(t,/electron/)},pwa:function(t){return!!t.matchMedia&&(t.matchMedia(\"(display-mode: standalone)\").matches||t.navigator.standalone)},mobile:S,mobileweb:function(t){return S(t)&&!C(t)},desktop:function(t){return!S(t)},hybrid:C},A=function(){function t(t){var e;this.doc=t,this.backButton=new s.a,this.pause=new s.a,this.resume=new s.a,this.resize=new s.a,this.win=t.defaultView,this.backButton.subscribeWithPriority=function(t,e){return this.subscribe(function(n){n.register(t,e)})},x(this.pause,t,\"pause\"),x(this.resume,t,\"resume\"),x(this.backButton,t,\"ionBackButton\"),x(this.resize,this.win,\"resize\"),this._readyPromise=new Promise(function(t){e=t}),this.win&&this.win.cordova?t.addEventListener(\"deviceready\",function(){e(\"cordova\")},{once:!0}):e(\"dom\")}return t.prototype.is=function(t){return e=t,g(this.win).indexOf(e)>-1;var e},t.prototype.platforms=function(){return g(this.win)},t.prototype.ready=function(){return this._readyPromise},Object.defineProperty(t.prototype,\"isRTL\",{get:function(){return\"rtl\"===this.doc.dir},enumerable:!0,configurable:!0}),t.prototype.getQueryParam=function(t){return D(this.win.location.href,t)},t.prototype.isLandscape=function(){return!this.isPortrait()},t.prototype.isPortrait=function(){return this.win.matchMedia&&this.win.matchMedia(\"(orientation: portrait)\").matches},t.prototype.testUserAgent=function(t){var e=this.win.navigator;return!!(e&&e.userAgent&&e.userAgent.indexOf(t)>=0)},t.prototype.url=function(){return this.win.location.href},t.prototype.width=function(){return this.win.innerWidth},t.prototype.height=function(){return this.win.innerHeight},t.ngInjectableDef=Object(i.S)({factory:function(){return new t(Object(i.W)(o.c))},token:t,providedIn:\"root\"}),t}(),D=function(t,e){e=e.replace(/[\\[]/,\"\\\\[\").replace(/[\\]]/,\"\\\\]\");var n=new RegExp(\"[\\\\?&]\"+e+\"=([^&#]*)\").exec(t);return n?decodeURIComponent(n[1].replace(/\\+/g,\" \")):null},x=function(t,e,n){e&&e.addEventListener(n,function(e){t.next(null!=e?e.detail:void 0)})},R=function(){function t(t,e,n,r){var i=this;this.location=e,this.serializer=n,this.router=r,this.direction=P,this.animated=M,this.guessDirection=\"forward\",this.lastNavId=-1,r&&r.events.subscribe(function(t){if(t instanceof a.d){var e=t.restoredState?t.restoredState.navigationId:t.id;i.guessDirection=e<i.lastNavId?\"back\":\"forward\",i.guessAnimation=t.restoredState?void 0:i.guessDirection,i.lastNavId=\"forward\"===i.guessDirection?t.id:e}}),t.backButton.subscribeWithPriority(0,function(){return i.pop()})}return t.prototype.navigateForward=function(t,e){return void 0===e&&(e={}),this.setDirection(\"forward\",e.animated,e.animationDirection),this.navigate(t,e)},t.prototype.navigateBack=function(t,e){return void 0===e&&(e={}),this.setDirection(\"back\",e.animated,e.animationDirection),this.navigate(t,e)},t.prototype.navigateRoot=function(t,e){return void 0===e&&(e={}),this.setDirection(\"root\",e.animated,e.animationDirection),this.navigate(t,e)},t.prototype.back=function(t){return void 0===t&&(t={animated:!0,animationDirection:\"back\"}),this.setDirection(\"back\",t.animated,t.animationDirection),this.location.back()},t.prototype.pop=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.e)(this,function(e){switch(e.label){case 0:t=this.topOutlet,e.label=1;case 1:return t?[4,t.pop()]:[3,3];case 2:return e.sent()?[3,3]:(t=t.parentOutlet,[3,1]);case 3:return[2]}})})},t.prototype.setDirection=function(t,e,n){this.direction=t,this.animated=function(t,e,n){if(!1!==e)return void 0!==n?n:\"forward\"===t||\"back\"===t?t:\"root\"===t&&!0===e?\"forward\":void 0}(t,e,n)},t.prototype.setTopOutlet=function(t){this.topOutlet=t},t.prototype.consumeTransition=function(){var t,e=\"root\";return\"auto\"===this.direction?(e=this.guessDirection,t=this.guessAnimation):(t=this.animated,e=this.direction),this.direction=P,this.animated=M,{direction:e,animation:t}},t.prototype.navigate=function(t,e){if(Array.isArray(t))return this.router.navigate(t,e);var n=this.serializer.parse(t.toString());return void 0!==e.queryParams&&(n.queryParams=Object(r.a)({},e.queryParams)),void 0!==e.fragment&&(n.fragment=e.fragment),this.router.navigateByUrl(n,e)},t.ngInjectableDef=Object(i.S)({factory:function(){return new t(Object(i.W)(A),Object(i.W)(o.f),Object(i.W)(a.s),Object(i.W)(a.m,8))},token:t,providedIn:\"root\"}),t}(),P=\"auto\",M=void 0;function j(t,e){var n=t.prototype;e.forEach(function(t){Object.defineProperty(n,t,{get:function(){return this.el[t]},set:function(e){this.el[t]=e}})})}function L(t,e){var n=t.prototype;e.forEach(function(t){n[t]=function(){var e=arguments;return this.el.componentOnReady().then(function(n){return n[t].apply(n,e)})}})}function F(t,e,n){n.forEach(function(n){return t[n]=Object(u.a)(e,n)})}var q=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}(),U=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}(),V=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();j(V,[\"color\",\"mode\",\"defaultHref\",\"icon\",\"text\"]);var B=function(){return function(t,e){t.detach(),this.el=e.nativeElement,F(this,this.el,[\"ionBackdropTap\"])}}();j(B,[\"visible\",\"tappable\",\"stopPropagation\"]);var W=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();j(W,[\"color\",\"mode\"]);var z=function(){return function(t,e){t.detach(),this.el=e.nativeElement,F(this,this.el,[\"ionFocus\",\"ionBlur\"])}}();j(z,[\"color\",\"mode\",\"buttonType\",\"disabled\",\"expand\",\"fill\",\"routerDirection\",\"href\",\"shape\",\"size\",\"strong\",\"type\"]);var H=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}(),Q=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();j(Q,[\"color\",\"mode\",\"button\",\"type\",\"disabled\",\"href\",\"routerDirection\"]);var K=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();j(K,[\"mode\"]);var G=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();j(G,[\"color\",\"mode\",\"translucent\"]);var Y=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();j(Y,[\"color\",\"mode\"]);var X=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();j(X,[\"color\",\"mode\"]);var J=function(){return function(t,e){t.detach(),this.el=e.nativeElement,F(this,this.el,[\"ionChange\",\"ionFocus\",\"ionBlur\"])}}();j(J,[\"color\",\"mode\",\"name\",\"checked\",\"indeterminate\",\"disabled\",\"value\"]);var Z=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();j(Z,[\"color\",\"mode\",\"outline\"]);var $=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();j($,[\"offset\",\"offsetXs\",\"offsetSm\",\"offsetMd\",\"offsetLg\",\"offsetXl\",\"pull\",\"pullXs\",\"pullSm\",\"pullMd\",\"pullLg\",\"pullXl\",\"push\",\"pushXs\",\"pushSm\",\"pushMd\",\"pushLg\",\"pushXl\",\"size\",\"sizeXs\",\"sizeSm\",\"sizeMd\",\"sizeLg\",\"sizeXl\"]);var tt=function(){return function(t,e){t.detach(),this.el=e.nativeElement,F(this,this.el,[\"ionScrollStart\",\"ionScroll\",\"ionScrollEnd\"])}}();L(tt,[\"getScrollElement\",\"scrollToTop\",\"scrollToBottom\",\"scrollByPoint\",\"scrollToPoint\"]),j(tt,[\"color\",\"fullscreen\",\"forceOverscroll\",\"scrollX\",\"scrollY\",\"scrollEvents\"]);var et=function(){return function(t,e){t.detach(),this.el=e.nativeElement,F(this,this.el,[\"ionCancel\",\"ionChange\",\"ionFocus\",\"ionBlur\"])}}();L(et,[\"open\"]),j(et,[\"mode\",\"name\",\"disabled\",\"readonly\",\"min\",\"max\",\"displayFormat\",\"pickerFormat\",\"cancelText\",\"doneText\",\"yearValues\",\"monthValues\",\"dayValues\",\"hourValues\",\"minuteValues\",\"monthNames\",\"monthShortNames\",\"dayNames\",\"dayShortNames\",\"pickerOptions\",\"placeholder\",\"value\"]);var nt=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();L(nt,[\"close\"]),j(nt,[\"horizontal\",\"vertical\",\"edge\",\"activated\"]);var rt=function(){return function(t,e){t.detach(),this.el=e.nativeElement,F(this,this.el,[\"ionFocus\",\"ionBlur\"])}}();j(rt,[\"mode\",\"color\",\"activated\",\"disabled\",\"href\",\"routerDirection\",\"show\",\"translucent\",\"type\",\"size\"]);var it=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();j(it,[\"activated\",\"side\"]);var ot=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();j(ot,[\"mode\",\"translucent\"]);var at=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();j(at,[\"fixed\"]);var st=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();j(st,[\"mode\",\"translucent\"]);var ut=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();j(ut,[\"ariaLabel\",\"color\",\"flipRtl\",\"icon\",\"ios\",\"lazy\",\"md\",\"mode\",\"name\",\"size\",\"src\"]);var ct=function(){return function(t,e){t.detach(),this.el=e.nativeElement,F(this,this.el,[\"ionImgWillLoad\",\"ionImgDidLoad\",\"ionError\"])}}();j(ct,[\"alt\",\"src\"]);var lt=function(){return function(t,e){t.detach(),this.el=e.nativeElement,F(this,this.el,[\"ionInfinite\"])}}();L(lt,[\"complete\"]),j(lt,[\"threshold\",\"disabled\",\"position\"]);var ht=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();j(ht,[\"loadingSpinner\",\"loadingText\"]);var ft=function(){return function(t,e){t.detach(),this.el=e.nativeElement,F(this,this.el,[\"ionInput\",\"ionChange\",\"ionBlur\",\"ionFocus\"])}}();L(ft,[\"setFocus\",\"getInputElement\"]),j(ft,[\"color\",\"mode\",\"accept\",\"autocapitalize\",\"autocomplete\",\"autocorrect\",\"autofocus\",\"clearInput\",\"clearOnEdit\",\"debounce\",\"disabled\",\"inputmode\",\"max\",\"maxlength\",\"min\",\"minlength\",\"multiple\",\"name\",\"pattern\",\"placeholder\",\"readonly\",\"required\",\"spellcheck\",\"step\",\"size\",\"type\",\"value\"]);var dt=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();j(dt,[\"color\",\"mode\",\"button\",\"detail\",\"detailIcon\",\"disabled\",\"href\",\"lines\",\"routerDirection\",\"type\"]);var pt=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();j(pt,[\"color\",\"mode\",\"sticky\"]);var yt=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}(),vt=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();j(vt,[\"color\",\"mode\",\"disabled\",\"expandable\",\"href\"]);var mt=function(){return function(t,e){t.detach(),this.el=e.nativeElement,F(this,this.el,[\"ionSwipe\"])}}();j(mt,[\"side\"]);var gt=function(){return function(t,e){t.detach(),this.el=e.nativeElement,F(this,this.el,[\"ionDrag\"])}}();L(gt,[\"getOpenAmount\",\"getSlidingRatio\",\"open\",\"close\",\"closeOpened\"]),j(gt,[\"disabled\"]);var bt=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();j(bt,[\"color\",\"mode\",\"position\"]);var wt=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();L(wt,[\"closeSlidingItems\"]),j(wt,[\"mode\",\"lines\",\"inset\"]);var _t=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();j(_t,[\"mode\",\"color\"]);var Et=function(){return function(t,e){t.detach(),this.el=e.nativeElement,F(this,this.el,[\"ionWillOpen\",\"ionWillClose\",\"ionDidOpen\",\"ionDidClose\"])}}();L(Et,[\"isOpen\",\"isActive\",\"open\",\"close\",\"toggle\",\"setOpen\"]),j(Et,[\"contentId\",\"menuId\",\"type\",\"disabled\",\"side\",\"swipeGesture\",\"maxEdgeStart\"]);var St=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();j(St,[\"color\",\"mode\",\"menu\",\"autoHide\"]);var Ct=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();j(Ct,[\"menu\",\"autoHide\"]);var Tt=function(){return function(t,e){t.detach(),this.el=e.nativeElement,F(this,this.el,[\"ionNavWillChange\",\"ionNavDidChange\"])}}();L(Tt,[\"push\",\"insert\",\"insertPages\",\"pop\",\"popTo\",\"popToRoot\",\"removeIndex\",\"setRoot\",\"setPages\",\"getActive\",\"getByIndex\",\"canGoBack\",\"getPrevious\"]),j(Tt,[\"swipeGesture\",\"animated\",\"animation\",\"rootParams\",\"root\"]);var It=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}(),kt=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();j(kt,[\"component\",\"componentProps\"]);var Ot=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();j(Ot,[\"component\",\"componentProps\"]);var Nt=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();j(Nt,[\"color\",\"mode\"]);var At=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();j(At,[\"mode\",\"type\",\"reversed\",\"value\",\"buffer\",\"color\"]);var Dt=function(){return function(t,e){t.detach(),this.el=e.nativeElement,F(this,this.el,[\"ionSelect\",\"ionFocus\",\"ionBlur\"])}}();j(Dt,[\"color\",\"mode\",\"name\",\"disabled\",\"checked\",\"value\"]);var xt=function(){return function(t,e){t.detach(),this.el=e.nativeElement,F(this,this.el,[\"ionChange\"])}}();j(xt,[\"allowEmptySelection\",\"name\",\"value\"]);var Rt=function(){return function(t,e){t.detach(),this.el=e.nativeElement,F(this,this.el,[\"ionChange\",\"ionFocus\",\"ionBlur\"])}}();j(Rt,[\"color\",\"mode\",\"debounce\",\"name\",\"dualKnobs\",\"min\",\"max\",\"pin\",\"snaps\",\"step\",\"ticks\",\"disabled\",\"value\"]);var Pt=function(){return function(t,e){t.detach(),this.el=e.nativeElement,F(this,this.el,[\"ionRefresh\",\"ionPull\",\"ionStart\"])}}();L(Pt,[\"complete\",\"cancel\",\"getProgress\"]),j(Pt,[\"pullMin\",\"pullMax\",\"closeDuration\",\"snapbackDuration\",\"pullFactor\",\"disabled\"]);var Mt=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();j(Mt,[\"pullingIcon\",\"pullingText\",\"refreshingSpinner\",\"refreshingText\"]);var jt=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}(),Lt=function(){return function(t,e){t.detach(),this.el=e.nativeElement,F(this,this.el,[\"ionItemReorder\"])}}();L(Lt,[\"complete\"]),j(Lt,[\"disabled\"]);var Ft=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();L(Ft,[\"addRipple\"]),j(Ft,[\"type\"]);var qt=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}(),Ut=function(){return function(t,e){t.detach(),this.el=e.nativeElement,F(this,this.el,[\"ionInput\",\"ionChange\",\"ionCancel\",\"ionClear\",\"ionBlur\",\"ionFocus\"])}}();L(Ut,[\"setFocus\",\"getInputElement\"]),j(Ut,[\"color\",\"mode\",\"animated\",\"autocomplete\",\"autocorrect\",\"cancelButtonIcon\",\"cancelButtonText\",\"clearIcon\",\"debounce\",\"disabled\",\"placeholder\",\"searchIcon\",\"showCancelButton\",\"spellcheck\",\"type\",\"value\"]);var Vt=function(){return function(t,e){t.detach(),this.el=e.nativeElement,F(this,this.el,[\"ionChange\",\"ionStyle\"])}}();j(Vt,[\"color\",\"mode\",\"disabled\",\"scrollable\",\"value\"]);var Bt=function(){return function(t,e){t.detach(),this.el=e.nativeElement,F(this,this.el,[\"ionSelect\"])}}();j(Bt,[\"mode\",\"checked\",\"disabled\",\"layout\",\"value\"]);var Wt=function(){return function(t,e){t.detach(),this.el=e.nativeElement,F(this,this.el,[\"ionChange\",\"ionCancel\",\"ionFocus\",\"ionBlur\"])}}();L(Wt,[\"open\"]),j(Wt,[\"mode\",\"disabled\",\"cancelText\",\"okText\",\"placeholder\",\"name\",\"selectedText\",\"multiple\",\"interface\",\"interfaceOptions\",\"compareWith\",\"value\"]);var zt=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();j(zt,[\"disabled\",\"selected\",\"value\"]);var Ht=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();j(Ht,[\"animated\",\"width\"]);var Qt=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}(),Kt=function(){return function(t,e){t.detach(),this.el=e.nativeElement,F(this,this.el,[\"ionSlidesDidLoad\",\"ionSlideTap\",\"ionSlideDoubleTap\",\"ionSlideWillChange\",\"ionSlideDidChange\",\"ionSlideNextStart\",\"ionSlidePrevStart\",\"ionSlideNextEnd\",\"ionSlidePrevEnd\",\"ionSlideTransitionStart\",\"ionSlideTransitionEnd\",\"ionSlideDrag\",\"ionSlideReachStart\",\"ionSlideReachEnd\",\"ionSlideTouchStart\",\"ionSlideTouchEnd\"])}}();L(Kt,[\"update\",\"updateAutoHeight\",\"slideTo\",\"slideNext\",\"slidePrev\",\"getActiveIndex\",\"getPreviousIndex\",\"length\",\"isEnd\",\"isBeginning\",\"startAutoplay\",\"stopAutoplay\",\"lockSwipeToNext\",\"lockSwipeToPrev\",\"lockSwipes\"]),j(Kt,[\"mode\",\"options\",\"pager\",\"scrollbar\"]);var Gt=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();j(Gt,[\"color\",\"duration\",\"name\",\"paused\"]);var Yt=function(){return function(t,e){t.detach(),this.el=e.nativeElement,F(this,this.el,[\"ionSplitPaneVisible\"])}}();j(Yt,[\"contentId\",\"disabled\",\"when\"]);var Xt=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();j(Xt,[\"mode\",\"color\",\"selectedTab\",\"translucent\"]);var Jt=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();j(Jt,[\"selected\",\"mode\",\"layout\",\"href\",\"tab\",\"disabled\"]);var Zt=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();j(Zt,[\"color\",\"mode\"]);var $t=function(){return function(t,e){t.detach(),this.el=e.nativeElement,F(this,this.el,[\"ionChange\",\"ionInput\",\"ionBlur\",\"ionFocus\"])}}();L($t,[\"setFocus\",\"getInputElement\"]),j($t,[\"mode\",\"color\",\"autocapitalize\",\"autofocus\",\"clearOnEdit\",\"debounce\",\"disabled\",\"maxlength\",\"minlength\",\"name\",\"placeholder\",\"readonly\",\"required\",\"spellcheck\",\"cols\",\"rows\",\"wrap\",\"autoGrow\",\"value\"]);var te=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}(),ee=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();j(ee,[\"color\"]);var ne=function(){return function(t,e){t.detach(),this.el=e.nativeElement,F(this,this.el,[\"ionChange\",\"ionFocus\",\"ionBlur\"])}}();j(ne,[\"mode\",\"color\",\"name\",\"checked\",\"disabled\",\"value\"]);var re=function(){return function(t,e){t.detach(),this.el=e.nativeElement}}();j(re,[\"color\",\"mode\"]);var ie=function(){function t(){}return t.prototype.get=function(t,e){var n=ae();return n?n.get(t,e):null},t.prototype.getBoolean=function(t,e){var n=ae();return!!n&&n.getBoolean(t,e)},t.prototype.getNumber=function(t,e){var n=ae();return n?n.getNumber(t,e):0},t.prototype.set=function(t,e){var n=ae();n&&n.set(t,e)},t.ngInjectableDef=Object(i.S)({factory:function(){return new t},token:t,providedIn:\"root\"}),t}(),oe=new i.p(\"USERCONFIG\");function ae(){if(\"undefined\"!=typeof window){var t=window.Ionic;if(t&&t.config)return t.config}return null}var se=function(){function t(t){void 0===t&&(t={}),this.data=t}return t.prototype.get=function(t){return this.data[t]},t}(),ue=function(){function t(t,e){this.zone=t,this.appRef=e}return t.prototype.create=function(t,e,n){return new ce(t,e,n,this.appRef,this.zone)},t}(),ce=function(){function t(t,e,n,r,i){this.resolver=t,this.injector=e,this.location=n,this.appRef=r,this.zone=i,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}return t.prototype.attachViewToDom=function(t,e,n,r){var o=this;return new Promise(function(a){o.zone.run(function(){var s=function(t,e,n,r,a,s,u,c,l,h){var f=o.resolver.resolveComponentFactory(c),d=i.q.create({providers:de(l),parent:e}),p=n?n.createComponent(f,n.length,d):f.create(d),y=p.instance,v=p.location.nativeElement;if(l&&Object.assign(y,l),h)for(var m=0,g=h;m<g.length;m++)v.classList.add(g[m]);var b=he(y,v);return u.appendChild(v),n||r.attachView(p.hostView),p.changeDetectorRef.reattach(),a.set(v,p),s.set(v,b),v}(0,o.injector,o.location,o.appRef,o.elRefMap,o.elEventsMap,t,e,n,r);a(s)})})},t.prototype.removeViewFromDom=function(t,e){var n=this;return new Promise(function(t){n.zone.run(function(){var r=n.elRefMap.get(e);if(r){r.destroy(),n.elRefMap.delete(e);var i=n.elEventsMap.get(e);i&&(i(),n.elEventsMap.delete(e))}t()})})},t}(),le=[\"ionViewWillEnter\",\"ionViewDidEnter\",\"ionViewWillLeave\",\"ionViewDidLeave\",\"ionViewWillUnload\"];function he(t,e){var n=le.map(function(n){var r=function(e){\"function\"==typeof t[n]&&t[n](e.detail)};return e.addEventListener(n,r),function(){e.removeEventListener(n,r)}});return function(){n.forEach(function(t){return t()})}}var fe=new i.p(\"NavParamsToken\");function de(t){return[{provide:fe,useValue:t},{provide:se,useFactory:pe,deps:[fe]}]}function pe(t){return new se(t)}function ye(t,e){return(t=t.filter(function(t){return t.stackId!==e.stackId})).push(e),t}function ve(t,e){var n=t.createUrlTree([\".\"],{relativeTo:e});return t.serializeUrl(n)}function me(t,e){if(t)for(var n=ge(e),r=0;r<n.length;r++){if(r>=t.length)return n[r];if(n[r]!==t[r])return}}function ge(t){return t.split(\"/\").map(function(t){return t.trim()}).filter(function(t){return\"\"!==t})}function be(t){t&&(t.ref.destroy(),t.unlistenEvents())}var we=function(){function t(t,e,n,r,i,o){this.containerEl=e,this.router=n,this.navCtrl=r,this.zone=i,this.location=o,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==t?ge(t):void 0}return t.prototype.createView=function(t,e){var n=ve(this.router,e),r=t&&t.location&&t.location.nativeElement,i=he(t.instance,r);return{id:this.nextId++,stackId:me(this.tabsPrefix,n),unlistenEvents:i,element:r,ref:t,url:n}},t.prototype.getExistingView=function(t){var e=ve(this.router,t),n=this.views.find(function(t){return t.url===e});return n&&n.ref.changeDetectorRef.reattach(),n},t.prototype.setActive=function(t){var e=this,n=this.navCtrl.consumeTransition(),i=n.direction,o=n.animation,a=this.activeView,s=function(t,e){return!e||t.stackId!==e.stackId}(t,a);s&&(i=\"back\",o=void 0);var u,c=this.views.slice(),l=this.router;l.getCurrentNavigation?u=l.getCurrentNavigation():l.navigations&&l.navigations.value&&(u=l.navigations.value),u&&u.extras&&u.extras.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);var h=this.insertView(t,i);return this.wait(function(){return Object(r.b)(e,void 0,void 0,function(){return Object(r.e)(this,function(e){switch(e.label){case 0:return[4,this.transition(t,a,o,this.canGoBack(1),!1)];case 1:return e.sent(),[4,_e(t,h,c,this.location)];case 2:return e.sent(),[2,{enteringView:t,direction:i,animation:o,tabSwitch:s}]}})})})},t.prototype.canGoBack=function(t,e){return void 0===e&&(e=this.getActiveStackId()),this.getStack(e).length>t},t.prototype.pop=function(t,e){var n=this;return void 0===e&&(e=this.getActiveStackId()),this.zone.run(function(){var r=n.getStack(e);if(r.length<=t)return Promise.resolve(!1);var i=r[r.length-t-1],o=i.url,a=i.savedData;if(a){var s=a.get(\"primary\");s&&s.route&&s.route._routerState&&s.route._routerState.snapshot&&s.route._routerState.snapshot.url&&(o=s.route._routerState.snapshot.url)}return n.navCtrl.navigateBack(o,i.savedExtras).then(function(){return!0})})},t.prototype.startBackTransition=function(){return Object(r.b)(this,void 0,void 0,function(){var t,e,n,i=this;return Object(r.e)(this,function(r){switch(r.label){case 0:return(t=this.activeView)?(e=this.getStack(t.stackId),(n=e[e.length-2]).ref.changeDetectorRef.reattach(),[4,this.wait(function(){return i.transition(n,t,\"back\",!0,!0)})]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.endBackTransition=function(t){t&&(this.skipTransition=!0,this.pop(1))},t.prototype.getLastUrl=function(t){var e=this.getStack(t);return e.length>0?e[e.length-1]:void 0},t.prototype.getActiveStackId=function(){return this.activeView?this.activeView.stackId:void 0},t.prototype.destroy=function(){this.containerEl=void 0,this.views.forEach(be),this.activeView=void 0,this.views=[]},t.prototype.getStack=function(t){return this.views.filter(function(e){return e.stackId===t})},t.prototype.insertView=function(t,e){return this.activeView=t,this.views=function(t,e,n){return\"root\"===n?ye(t,e):\"forward\"===n?function(t,e){return t.indexOf(e)>=0?t=t.filter(function(t){return t.stackId!==e.stackId||t.id<=e.id}):t.push(e),t}(t,e):function(t,e){return t.indexOf(e)>=0?t.filter(function(t){return t.stackId!==e.stackId||t.id<=e.id}):ye(t,e)}(t,e)}(this.views,t,e),this.views.slice()},t.prototype.transition=function(t,e,n,i,o){return Object(r.b)(this,void 0,void 0,function(){var a,s,u;return Object(r.e)(this,function(r){switch(r.label){case 0:return this.skipTransition?(this.skipTransition=!1,[2]):(s=e?e.element:void 0,u=this.containerEl,(a=t?t.element:void 0)&&a!==s?(a.classList.add(\"ion-page\",\"ion-page-invisible\"),a.parentElement!==u&&u.appendChild(a),[4,u.componentOnReady()]):[3,3]);case 1:return r.sent(),[4,u.commit(a,s,{deepWait:!0,duration:void 0===n?0:void 0,direction:n,showGoBack:i,progressAnimation:o})];case 2:r.sent(),r.label=3;case 3:return[2]}})})},t.prototype.wait=function(t){return Object(r.b)(this,void 0,void 0,function(){return Object(r.e)(this,function(e){switch(e.label){case 0:return void 0===this.runningTask?[3,2]:[4,this.runningTask];case 1:e.sent(),this.runningTask=void 0,e.label=2;case 2:return[2,this.runningTask=t()]}})})},t}();function _e(t,e,n,r){return new Promise(function(i){requestAnimationFrame(function(){!function(t,e,n,r){n.filter(function(t){return!e.includes(t)}).forEach(be),e.forEach(function(e){var n=r.path().split(\"?\")[0].split(\"#\")[0];if(e!==t&&e.url!==n){var i=e.element;i.setAttribute(\"aria-hidden\",\"true\"),i.classList.add(\"ion-page-hidden\"),e.ref.changeDetectorRef.detach()}})}(t,e,n,r),i()})})}var Ee=function(){function t(t,e,n,r,o,s,u,l,h,f,d,p,y,v){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=s,this.config=u,this.navCtrl=l,this.parentOutlet=v,this.activated=null,this.activatedView=null,this._activatedRoute=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new c.a(null),this.stackEvents=new i.m,this.activateEvents=new i.m,this.deactivateEvents=new i.m,this.nativeEl=f.nativeElement,this.name=r||a.f,this.tabsPrefix=\"true\"===o?ve(d,y):void 0,this.stackCtrl=new we(this.tabsPrefix,this.nativeEl,d,l,p,h),t.onChildOutletCreated(this.name,this)}return Object.defineProperty(t.prototype,\"animated\",{set:function(t){this.nativeEl.animated=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"swipeGesture\",{set:function(t){var e=this;this._swipeGesture=t,this.nativeEl.swipeHandler=t?{canStart:function(){return e.stackCtrl.canGoBack(1)},onStart:function(){return e.stackCtrl.startBackTransition()},onEnd:function(t){return e.stackCtrl.endBackTransition(t)}}:void 0},enumerable:!0,configurable:!0}),t.prototype.ngOnDestroy=function(){this.stackCtrl.destroy()},t.prototype.getContext=function(){return this.parentContexts.getContext(this.name)},t.prototype.ngOnInit=function(){var t=this;if(!this.activated){var e=this.getContext();e&&e.route&&this.activateWith(e.route,e.resolver||null)}this.nativeEl.componentOnReady&&this.nativeEl.componentOnReady().then(function(){void 0===t._swipeGesture&&(t.swipeGesture=t.config.getBoolean(\"swipeBackEnabled\",\"ios\"===t.nativeEl.mode))})},Object.defineProperty(t.prototype,\"isActivated\",{get:function(){return!!this.activated},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"component\",{get:function(){if(!this.activated)throw new Error(\"Outlet is not activated\");return this.activated.instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"activatedRoute\",{get:function(){if(!this.activated)throw new Error(\"Outlet is not activated\");return this._activatedRoute},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"activatedRouteData\",{get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}},enumerable:!0,configurable:!0}),t.prototype.detach=function(){throw new Error(\"incompatible reuse strategy\")},t.prototype.attach=function(t,e){throw new Error(\"incompatible reuse strategy\")},t.prototype.deactivate=function(){if(this.activated){if(this.activatedView){this.activatedView.savedData=new Map(this.getContext().children.contexts),this.activatedView.savedExtras={};var t=this.getContext();if(t.route){var e=t.route.snapshot;this.activatedView.savedExtras.queryParams=e.queryParams,this.activatedView.savedExtras.fragment=e.fragment}}var n=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}},t.prototype.activateWith=function(t,e){var n,r=this;if(this.isActivated)throw new Error(\"Cannot activate an already activated outlet\");this._activatedRoute=t;var i=this.stackCtrl.getExistingView(t);if(i){n=this.activated=i.ref;var o=i.savedData;o&&(this.getContext().children.contexts=o),this.updateActivatedRouteProxy(n.instance,t)}else{var a=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),s=this.parentContexts.getOrCreateContext(this.name).children,u=new c.a(null),l=this.createActivatedRouteProxy(u,t),h=new Se(l,s,this.location.injector);n=this.activated=this.location.createComponent(a,this.location.length,h),u.next(n.instance),i=this.stackCtrl.createView(this.activated,t),this.proxyMap.set(n.instance,l),this.currentActivatedRoute$.next({component:n.instance,activatedRoute:t}),this.changeDetector.markForCheck()}this.activatedView=i,this.stackCtrl.setActive(i).then(function(t){r.navCtrl.setTopOutlet(r),r.activateEvents.emit(n.instance),r.stackEvents.emit(t)})},t.prototype.canGoBack=function(t,e){return void 0===t&&(t=1),this.stackCtrl.canGoBack(t,e)},t.prototype.pop=function(t,e){return void 0===t&&(t=1),this.stackCtrl.pop(t,e)},t.prototype.getLastUrl=function(t){var e=this.stackCtrl.getLastUrl(t);return e?e.url:void 0},t.prototype.getActiveStackId=function(){return this.stackCtrl.getActiveStackId()},t.prototype.createActivatedRouteProxy=function(t,e){var n=new a.a;return n._futureSnapshot=e._futureSnapshot,n._routerState=e._routerState,n.snapshot=e.snapshot,n.outlet=e.outlet,n.component=e.component,n._paramMap=this.proxyObservable(t,\"paramMap\"),n._queryParamMap=this.proxyObservable(t,\"queryParamMap\"),n.url=this.proxyObservable(t,\"url\"),n.params=this.proxyObservable(t,\"params\"),n.queryParams=this.proxyObservable(t,\"queryParams\"),n.fragment=this.proxyObservable(t,\"fragment\"),n.data=this.proxyObservable(t,\"data\"),n},t.prototype.proxyObservable=function(t,e){var n=this;return t.pipe(Object(l.a)(function(t){return!!t}),Object(h.a)(function(t){return n.currentActivatedRoute$.pipe(Object(l.a)(function(e){return null!==e&&e.component===t}),Object(h.a)(function(t){return t&&t.activatedRoute[e]}),Object(f.a)())}))},t.prototype.updateActivatedRouteProxy=function(t,e){var n=this.proxyMap.get(t);if(!n)throw new Error(\"Could not find activated route proxy for view\");n._futureSnapshot=e._futureSnapshot,n._routerState=e._routerState,n.snapshot=e.snapshot,n.outlet=e.outlet,n.component=e.component,this.currentActivatedRoute$.next({component:t,activatedRoute:e})},t}(),Se=function(){function t(t,e,n){this.route=t,this.childContexts=e,this.parent=n}return t.prototype.get=function(t,e){return t===a.a?this.route:t===a.b?this.childContexts:this.parent.get(t,e)},t}(),Ce=function(){function t(t){this.navCtrl=t,this.ionTabsWillChange=new i.m,this.ionTabsDidChange=new i.m}return t.prototype.onPageSelected=function(t){var e=t.enteringView.stackId;t.tabSwitch&&void 0!==e&&(this.tabBar&&(this.tabBar.selectedTab=e),this.ionTabsWillChange.emit({tab:e}),this.ionTabsDidChange.emit({tab:e}))},t.prototype.select=function(t){var e=this.outlet.getActiveStackId()===t,n=this.outlet.tabsPrefix+\"/\"+t,r=e?n:this.outlet.getLastUrl(t)||n;return this.navCtrl.navigateRoot(r,{animated:!0,animationDirection:\"back\"})},t.prototype.getSelected=function(){return this.outlet.getActiveStackId()},t}(),Te=function(){function t(t,e,n,r,i){this.locationStrategy=t,this.navCtrl=e,this.elementRef=n,this.router=r,this.routerLink=i,this.routerDirection=\"forward\"}return t.prototype.ngOnInit=function(){this.updateTargetUrlAndHref()},t.prototype.ngOnChanges=function(){this.updateTargetUrlAndHref()},t.prototype.ngOnDestroy=function(){this.subscription&&this.subscription.unsubscribe()},t.prototype.updateTargetUrlAndHref=function(){if(this.routerLink){var t=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=t}},t.prototype.onClick=function(t){this.navCtrl.setDirection(this.routerDirection),t.preventDefault()},t}(),Ie=function(){function t(t,e,n){this.zone=t,this.iterableDiffers=e,this.refMap=new WeakMap,this.el=n.nativeElement,this.el.nodeRender=this.nodeRender.bind(this)}return t.prototype.ngOnChanges=function(t){if(this.trackBy&&\"items\"in t){var e=t.items.currentValue;if(void 0===this.differ&&null!=e)try{this.differ=this.iterableDiffers.find(e).create(this.trackBy)}catch(n){throw new Error(\"Cannot find a differ supporting object '\"+e+\"'. VirtualScroll only supports binding to Iterables such as Arrays.\")}}},t.prototype.ngDoCheck=function(){null!==(void 0!==this.differ&&this.items?this.differ.diff(this.items):null)&&this.checkRange(0)},t.prototype.nodeRender=function(t,e,n){var r=this;return this.zone.run(function(){var i;if(t){var o=(i=r.refMap.get(t)).context;o.$implicit=e.value,o.index=e.index}else i=r.itmTmp.viewContainer.createEmbeddedView(r.getComponent(e.type),{$implicit:e.value,index:n},n),t=function(t){for(var e=i.rootNodes,n=0;n<e.length;n++)if(1===e[n].nodeType)return e[n];throw new Error(\"virtual element was not created\")}(),r.refMap.set(t,i);return i.detectChanges(),t})},t.prototype.getComponent=function(t){switch(t){case\"item\":return this.itmTmp.templateRef;case\"header\":return this.hdrTmp.templateRef;case\"footer\":return this.ftrTmp.templateRef}throw new Error(\"template for virtual item was not provided\")},t}();function ke(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=function(t,e){var n=e.querySelector(t);return n||(n=e.createElement(t),e.body.appendChild(n)),n}(t,e);return o.componentOnReady().then(function(){return o[n].apply(o,r)})}j(Ie,[\"approxItemHeight\",\"approxHeaderHeight\",\"approxFooterHeight\",\"headerFn\",\"footerFn\",\"items\",\"itemHeight\"]),L(Ie,[\"checkEnd\",\"checkRange\",\"positionForItem\"]);var Oe=function(){function t(t,e){this.ctrl=t,this.doc=e}return t.prototype.create=function(t){return ke(this.ctrl,this.doc,\"create\",t)},t.prototype.dismiss=function(t,e,n){return ke(this.ctrl,this.doc,\"dismiss\",t,e,n)},t.prototype.getTop=function(){return ke(this.ctrl,this.doc,\"getTop\")},t}(),Ne=function(t){function e(e,n,r,i){var o=t.call(this,\"ion-modal-controller\",i)||this;return o.angularDelegate=e,o.resolver=n,o.injector=r,o}return Object(r.d)(e,t),e.prototype.create=function(e){return t.prototype.create.call(this,Object(r.a)({},e,{delegate:this.angularDelegate.create(this.resolver,this.injector)}))},e}(Oe),Ae=function(t){function e(e,n,r,i){var o=t.call(this,\"ion-popover-controller\",i)||this;return o.angularDelegate=e,o.resolver=n,o.injector=r,o}return Object(r.d)(e,t),e.prototype.create=function(e){return t.prototype.create.call(this,Object(r.a)({},e,{delegate:this.angularDelegate.create(this.resolver,this.injector)}))},e}(Oe),De=function(){function t(){}return t.prototype.shouldDetach=function(t){return!1},t.prototype.shouldAttach=function(t){return!1},t.prototype.store=function(t,e){},t.prototype.retrieve=function(t){return null},t.prototype.shouldReuseRoute=function(t,e){if(t.routeConfig!==e.routeConfig)return!1;if(t.component!==e.component)return!1;var n=t.params,r=e.params,i=Object.keys(n),o=Object.keys(r);if(i.length!==o.length)return!1;for(var a=0,s=i;a<s.length;a++){var u=s[a];if(r[u]!==n[u])return!1}return!0},t}();function xe(t,e){return function(){var n=e.defaultView;if(n){var r=n.Ionic=n.Ionic||{};return r.config=t,r.asyncQueue=!1,r.ael=function(t,e,n,r){t.__zone_symbol__addEventListener&&Pe(e)?t.__zone_symbol__addEventListener(e,n,r):t.addEventListener(e,n,r)},r.rel=function(t,e,n,r){t.__zone_symbol__removeEventListener&&Pe(e)?t.__zone_symbol__removeEventListener(e,n,r):t.removeEventListener(e,n,r)},function(t,e){return Object(d.a)(t,p,{exclude:[\"ion-tabs\",\"ion-tab\"]})}(n)}}}var Re=[\"scroll\",\"resize\",\"touchstart\",\"touchmove\",\"touchend\",\"mousedown\",\"mousemove\",\"mouseup\",\"ionStyle\"];function Pe(t){return Re.indexOf(t)>=0}var Me=function(){function t(){}return t.forRoot=function(e){return{ngModule:t,providers:[{provide:oe,useValue:e},{provide:i.d,useFactory:xe,multi:!0,deps:[oe,o.c]}]}},t}()},Zn8D:function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return o});var r=n(\"psW0\"),i=n(\"mChF\");function o(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),Object(r.a)(i.a,t)}},a3Cf:function(t,e,n){\"use strict\";var r=n(\"HPGL\"),i=n(\"Lq6m\");n.d(e,\"IonicNativePlugin\",function(){return i.a}),n(\"KOl+\");var o=n(\"xSm1\");n.d(e,\"cordova\",function(){return o.a}),n(\"hKQe\"),n(\"Rt+L\");var a=n(\"pxS/\");n.d(e,\"cordovaPropertyGet\",function(){return a.a}),n.d(e,\"cordovaPropertySet\",function(){return a.b}),n(\"Ji5e\"),n(\"4pTB\"),Object(r.a)()},ad02:function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return o});var r=n(\"mrSG\"),i=n(\"FFOo\");function o(t,e){return function(n){return n.lift(new a(t,e))}}var a=function(){function t(t,e){this.compare=t,this.keySelector=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.compare,this.keySelector))},t}(),s=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.keySelector=r,i.hasKey=!1,\"function\"==typeof n&&(i.compare=n),i}return r.d(e,t),e.prototype.compare=function(t,e){return t===e},e.prototype._next=function(t){var e;try{var n=this.keySelector;e=n?n(t):t}catch(i){return this.destination.error(i)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,e)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=e,this.destination.next(t))},e}(i.a)},bne5:function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return s});var r=n(\"6blF\"),i=n(\"isby\"),o=n(\"2Bdj\"),a=n(\"67Y/\");function s(t,e,n,u){return Object(o.a)(n)&&(u=n,n=void 0),u?s(t,e,n).pipe(Object(a.a)(function(t){return Object(i.a)(t)?u.apply(void 0,t):u(t)})):new r.a(function(r){!function t(e,n,r,i,o){var a;if(function(t){return t&&\"function\"==typeof t.addEventListener&&\"function\"==typeof t.removeEventListener}(e)){var s=e;e.addEventListener(n,r,o),a=function(){return s.removeEventListener(n,r,o)}}else if(function(t){return t&&\"function\"==typeof t.on&&\"function\"==typeof t.off}(e)){var u=e;e.on(n,r),a=function(){return u.off(n,r)}}else if(function(t){return t&&\"function\"==typeof t.addListener&&\"function\"==typeof t.removeListener}(e)){var c=e;e.addListener(n,r),a=function(){return c.removeListener(n,r)}}else{if(!e||!e.length)throw new TypeError(\"Invalid event target\");for(var l=0,h=e.length;l<h;l++)t(e[l],n,r,i,o)}i.add(a)}(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}},cBjU:function(t,e,n){\"use strict\";function r(t,e){return\"sc-\"+t.t+(e&&e!==s?\"-\"+e:\"\")}function i(t,e){return t+(e?\"-h\":\"-s\")}function o(t,e){for(var n,r,i=null,o=!1,a=!1,s=arguments.length;s-- >2;)C.push(arguments[s]);for(;C.length>0;){var u=C.pop();if(u&&void 0!==u.pop)for(s=u.length;s--;)C.push(u[s]);else\"boolean\"==typeof u&&(u=null),(a=\"function\"!=typeof t)&&(null==u?u=\"\":\"number\"==typeof u?u=String(u):\"string\"!=typeof u&&(a=!1)),a&&o?i[i.length-1].vtext+=u:null===i?i=[a?{vtext:u}:u]:i.push(a?{vtext:u}:u),o=a}if(null!=e){if(e.className&&(e.class=e.className),\"object\"==typeof e.class){for(s in e.class)e.class[s]&&C.push(s);e.class=C.join(\" \"),C.length=0}null!=e.key&&(n=e.key),null!=e.name&&(r=e.name)}return\"function\"==typeof t?t(e,i||[],T):{vtag:t,vchildren:i,vtext:void 0,vattrs:e,vkey:n,vname:r,i:void 0,o:!1}}function a(t,e,r){void 0===r&&(r={});var i=Array.isArray(e)?e:[e],o=t.document,a=r.hydratedCssClass||\"hydrated\",s=r.exclude;s&&(i=i.filter(function(t){return-1===s.indexOf(t[0])}));var u=i.map(function(t){return t[0]});if(u.length>0){var c=o.createElement(\"style\");c.innerHTML=u.join()+\"{visibility:hidden}.\"+a+\"{visibility:inherit}\",c.setAttribute(\"data-styles\",\"\"),o.head.insertBefore(c,o.head.firstChild)}var l=r.namespace||\"Ionic\";return B||(B=!0,function(t,e,n){(t[\"s-apps\"]=t[\"s-apps\"]||[]).push(e),n.componentOnReady||(n.componentOnReady=function(){function e(e){if(n.nodeName.indexOf(\"-\")>0){for(var r=t[\"s-apps\"],i=0,o=0;o<r.length;o++)if(t[r[o]].componentOnReady){if(t[r[o]].componentOnReady(n,e))return;i++}if(i<r.length)return void(t[\"s-cr\"]=t[\"s-cr\"]||[]).push([n,e])}e(null)}var n=this;return t.Promise?new t.Promise(e):{then:e}})}(t,l,t.HTMLElement.prototype)),function(t){t.k=function(){function e(){var t=setTimeout;return function(){return t(n,1)}}function n(){for(var t=0;t<g;t+=2)(0,O[t])(O[t+1]),O[t]=void 0,O[t+1]=void 0;g=0}function r(t,e){var n=this,r=new this.constructor(o);void 0===r[A]&&y(r);var i=n.A;if(i){var a=arguments[i-1];_(function(){return p(i,r,a,n.C)})}else f(n,r,t,e);return r}function i(t){if(t&&\"object\"==typeof t&&t.constructor===this)return t;var e=new this(o);return u(e,t),e}function o(){}function a(t){try{return t.then}catch(t){return P.error=t,P}}function s(t,e,n){e.constructor===t.constructor&&n===r&&e.constructor.resolve===i?function(t,e){e.A===x?l(t,e.C):e.A===R?h(t,e.C):f(e,void 0,function(e){return u(t,e)},function(e){return h(t,e)})}(t,e):n===P?(h(t,P.error),P.error=null):void 0===n?l(t,e):\"function\"==typeof n?function(t,e,n){_(function(t){var r=!1,i=function(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}(n,e,function(n){r||(r=!0,e!==n?u(t,n):l(t,n))},function(e){r||(r=!0,h(t,e))});!r&&i&&(r=!0,h(t,i))},t)}(t,e,n):l(t,e)}function u(t,e){if(t===e)h(t,new TypeError(\"cannot resolve promise w/ itself\"));else{var n=typeof e;null===e||\"object\"!==n&&\"function\"!==n?l(t,e):s(t,e,a(e))}}function c(t){t.S&&t.S(t.C),d(t)}function l(t,e){t.A===D&&(t.C=e,t.A=x,0!==t._.length&&_(d,t))}function h(t,e){t.A===D&&(t.A=R,t.C=e,_(c,t))}function f(t,e,n,r){var i=t._,o=i.length;t.S=null,i[o]=e,i[o+x]=n,i[o+R]=r,0===o&&t.A&&_(d,t)}function d(t){var e=t._,n=t.A;if(0!==e.length){for(var r,i,o=t.C,a=0;a<e.length;a+=3)i=e[a+n],(r=e[a])?p(n,r,i,o):i(o);t._.length=0}}function p(t,e,n,r){var i=\"function\"==typeof n,o=void 0,a=void 0,s=void 0,c=void 0;if(i){try{o=n(r)}catch(t){P.error=t,o=P}if(o===P?(c=!0,a=o.error,o.error=null):s=!0,e===o)return void h(e,new TypeError(\"Cannot return same promise\"))}else o=r,s=!0;e.A===D&&(i&&s?u(e,o):c?h(e,a):t===x?l(e,o):t===R&&h(e,o))}function y(t){t[A]=M++,t.A=void 0,t.C=void 0,t._=[]}var v,m=Array.isArray?Array.isArray:function(t){return\"[object Array]\"===Object.prototype.toString.call(t)},g=0,b=void 0,w=void 0,_=function(t,e){O[g]=t,O[g+1]=e,2===(g+=2)&&(w?w(n):N())},E=(v=void 0!==t?t:void 0)||{},S=E.MutationObserver||E.WebKitMutationObserver;E=\"undefined\"==typeof self;var C,T,I,k=\"undefined\"!=typeof Uint8ClampedArray&&\"undefined\"!=typeof importScripts&&\"undefined\"!=typeof MessageChannel,O=Array(1e3),N=void 0;N=S?(C=0,T=new S(n),I=document.createTextNode(\"\"),T.observe(I,{characterData:!0}),function(){I.data=C=++C%2}):k?function(){var t=new MessageChannel;return t.port1.onmessage=n,function(){return t.port2.postMessage(0)}}():void 0===v?function(){try{var t=Function(\"return this\")().P(\"vertx\");return void 0!==(b=t.T||t.W)?function(){b(n)}:e()}catch(t){return e()}}():e();var A=Math.random().toString(36).substring(2),D=void 0,x=1,R=2,P={error:null},M=0,j=function(){function t(t,e){this.N=t,this.R=new t(o),this.R[A]||y(this.R),m(e)?(this.L=this.length=e.length,this.C=Array(this.length),0===this.length?l(this.R,this.C):(this.length=this.length||0,this.D(e),0===this.L&&l(this.R,this.C))):h(this.R,Error(\"Array Methods must be provided an Array\"))}return t.prototype.D=function(t){for(var e=0;this.A===D&&e<t.length;e++)this.F(t[e],e)},t.prototype.F=function(t,e){var n=this.N,u=n.resolve;u===i?(u=a(t))===r&&t.A!==D?this.H(t.A,e,t.C):\"function\"!=typeof u?(this.L--,this.C[e]=t):n===L?(s(n=new n(o),t,u),this.q(n,e)):this.q(new n(function(e){return e(t)}),e):this.q(u(t),e)},t.prototype.H=function(t,e,n){var r=this.R;r.A===D&&(this.L--,t===R?h(r,n):this.C[e]=n),0===this.L&&l(r,this.C)},t.prototype.q=function(t,e){var n=this;f(t,void 0,function(t){return n.H(x,e,t)},function(t){return n.H(R,e,t)})},t}(),L=function(){function t(e){if(this[A]=M++,this.C=this.A=void 0,this._=[],o!==e){if(\"function\"!=typeof e)throw new TypeError(\"Must pass a resolver fn as 1st arg\");if(!(this instanceof t))throw new TypeError(\"Failed to construct 'Promise': Use the 'new' operator.\");!function(t,e){try{e(function(e){u(t,e)},function(e){h(t,e)})}catch(e){h(t,e)}}(this,e)}}return t.prototype.catch=function(t){return this.then(null,t)},t.prototype.finally=function(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){throw n})})},t}();return L.prototype.then=r,L.all=function(t){return new j(this,t).R},L.race=function(t){var e=this;return m(t)?new e(function(n,r){for(var i=t.length,o=0;o<i;o++)e.resolve(t[o]).then(n,r)}):new e(function(t,e){return e(new TypeError(\"Must pass array to race\"))})},L.resolve=i,L.reject=function(t){var e=new this(o);return h(e,t),e},L.U=function(t){w=t},L.B=function(t){_=t},L.I=_,L.G=function(){var t=void 0;if(\"undefined\"!=typeof global)t=global;else if(\"undefined\"!=typeof self)t=self;else try{t=Function(\"return this\")()}catch(t){throw Error(\"polyfill failed\")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if(\"[object Promise]\"===n&&!e.cast)return}t.Promise=L},L.Promise=L,L.G(),L}();var e=[];return t.customElements&&(!t.Element||t.Element.prototype.closest&&t.Element.prototype.matches&&t.Element.prototype.remove)||e.push(n.e(175).then(n.bind(null,\"POma\"))),\"function\"==typeof Object.assign&&Object.entries||e.push(n.e(177).then(n.bind(null,\"9iCY\"))),Array.prototype.find&&Array.prototype.includes||e.push(n.e(173).then(n.bind(null,\"CAJ8\"))),String.prototype.startsWith&&String.prototype.endsWith||e.push(n.e(178).then(n.bind(null,\"PBQ9\"))),t.fetch||e.push(n.e(176).then(n.bind(null,\"RxuH\"))),\"undefined\"!=typeof WeakMap&&t.CSS&&t.CSS.supports&&t.CSS.supports(\"color\",\"var(--c)\")||e.push(n.e(174).then(n.bind(null,\"KEMf\"))),function(){try{var t=new URL(\"b\",\"http://a\");return t.pathname=\"c%20d\",\"http://a/c%20d\"===t.href&&t.searchParams}catch(t){return!1}}||e.push(n.e(179).then(n.bind(null,\"YJhb\"))),Promise.all(e).then(function(e){e.forEach(function(e){try{e.applyPolyfill(t,t.document)}catch(t){console.error(t)}})})}(t).then(function(){function e(){i.forEach(function(e){var r;!function(t){return/\\{\\s*\\[native code\\]\\s*\\}/.test(\"\"+t)}(t.customElements.define)?(r=function(e){return t.HTMLElement.call(this,e)}).prototype=Object.create(t.HTMLElement.prototype,{constructor:{value:r,configurable:!0}}):r=new Function(\"w\",\"return class extends w.HTMLElement{}\")(t),V[l].u(function(t){var e=I(t),r=e.s,i=d(t[0]);return e.s=function(t){return function(t,e,r){return n(\"nFGs\")(\"./\"+t+(e?\".sc\":\"\")+\".entry.js\").then(function(t){return t[r]})}(\"string\"==typeof r?r:r[t.mode],t.scoped,i)},e}(e),r)})}if(!V[l]){var s={},u=r.resourcesUrl||\"./\";(function(t,e){var n=function(t,e){return function(t){return r(t)}(t).indexOf(e)>-1},r=function(t){t.Ionic=t.Ionic||{};var e=t.Ionic.platforms;return null==e&&(e=t.Ionic.platforms=i(t)).forEach(function(e){return t.document.documentElement.classList.add(\"plt-\"+e)}),e},i=function(t){return Object.keys(d).filter(function(e){return d[e](t)})},o=function(t){return h(t,/iPad/i)},a=function(t){return h(t,/android|sink/i)},s=function(t){return f(t,\"(any-pointer:coarse)\")},u=function(t){return c(t)||l(t)},c=function(t){return!!(t.cordova||t.phonegap||t.PhoneGap)},l=function(t){var e=t.Capacitor;return!(!e||!e.isNative)},h=function(t,e){return!(!t.navigator||!t.navigator.userAgent)&&e.test(t.navigator.userAgent)},f=function(t,e){return!!t.matchMedia&&t.matchMedia(e).matches},d={ipad:o,iphone:function(t){return h(t,/iPhone/i)},ios:function(t){return h(t,/iPad|iPhone|iPod/i)},android:a,phablet:function(t){var e=t.innerWidth,n=t.innerHeight,r=Math.min(e,n),i=Math.max(e,n);return r>390&&r<520&&i>620&&i<800},tablet:function(t){var e=t.innerWidth,n=t.innerHeight,r=Math.min(e,n),i=Math.max(e,n);return o(t)||function(t){return a(t)&&!h(t,/mobile/i)}(t)||r>460&&r<820&&i>780&&i<1400},cordova:c,capacitor:l,electron:function(t){return h(t,/electron/)},pwa:function(t){return!!t.matchMedia&&(t.matchMedia(\"(display-mode: standalone)\").matches||t.navigator.standalone)},mobile:s,mobileweb:function(t){return s(t)&&!u(t)},desktop:function(t){return!s(t)},hybrid:u},p=function(){function t(t){this.m=new Map(Object.entries(t))}return t.prototype.get=function(t,e){var n=this.m.get(t);return void 0!==n?n:e},t.prototype.getBoolean=function(t,e){void 0===e&&(e=!1);var n=this.m.get(t);return void 0===n?e:\"string\"==typeof n?\"true\"===n:!!n},t.prototype.getNumber=function(t,e){var n=parseFloat(this.m.get(t));return isNaN(n)?void 0!==e?e:NaN:n},t.prototype.set=function(t,e){this.m.set(t,e)},t}(),y=\"undefined\"!=typeof window?window:{},v=y.Ionic=y.Ionic||{};Object.defineProperty(v,\"queue\",{get:function(){return t.queue}}),r(y),t.isPlatform=n;var m,g=Object.assign({},function(t){try{var e=t.sessionStorage.getItem(\"ionic-persist-config\");return null!==e?JSON.parse(e):{}}catch(t){return{}}}(y),{persistConfig:!1},v.config,(m={},y.location.search.slice(1).split(\"&\").map(function(t){return t.split(\"=\")}).map(function(t){var e=t[1];return[decodeURIComponent(t[0]),decodeURIComponent(e)]}).filter(function(t){return function(t,e){return t.substr(0,e.length)===e}(t[0],\"ionic:\")}).map(function(t){var e=t[1];return[t[0].slice(\"ionic:\".length),e]}).forEach(function(t){m[t[0]]=t[1]}),m)),b=v.config=t.config=new p(g);b.getBoolean(\"persistConfig\")&&function(t,e){try{t.sessionStorage.setItem(\"ionic-persist-config\",JSON.stringify(e))}catch(t){return}}(y,g);var w=y.document?y.document.documentElement:null,_=b.get(\"mode\",w&&w.getAttribute(\"mode\")||(n(y,\"ios\")?\"ios\":\"md\"));v.mode=t.mode=_,b.set(\"mode\",_),w&&(w.setAttribute(\"mode\",_),w.classList.add(_)),b.getBoolean(\"_testing\")&&b.set(\"animated\",!1)})(s),V[l]=U(l,s,t,o,u,a,i)}if(window.customStyleShim)return V[l].l=window.customStyleShim,V[l].l.initShim().then(e);e()})}n.d(e,\"a\",function(){return a}),n.d(e,\"b\",function(){return o});var s=\"$\",u={},c={enter:13,escape:27,space:32,tab:9,left:37,up:38,right:39,down:40},l=function(t,e,n,i){var o=n.t+i.mode,a=n[o];if((2===n.Y||1===n.Y&&!t.J.Z)&&(i[\"s-sc\"]=a?r(n,i.mode):r(n)),a||(a=n[o=n.t+s]),a){var u=e.K.head;if(e.Z)if(1===n.Y)u=i.shadowRoot;else{var c=i.getRootNode();c.host&&(u=c)}var l=t.V.get(u);if(l||t.V.set(u,l={}),!l[o]){var h=void 0;if(t.l?h=t.l.createHostStyle(i,o,a):((h=e.X(\"style\")).innerHTML=a,l[o]=!0),h){var f=u.querySelectorAll(\"[data-styles]\");e.nn(u,h,f.length&&f[f.length-1].nextSibling||u.firstChild)}}}},h=function(t){return null!=t},f=function(t){return t.toLowerCase()},d=function(t){return f(t).split(\"-\").map(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}).join(\"\")},p=function(){},y=function(t,e,n,r,i){void 0===r&&(r=\"boolean\"==typeof n),i=e!==(e=e.replace(/^xlink\\:?/,\"\")),null==n||r&&(!n||\"false\"===n)?i?t.removeAttributeNS(v,f(e)):t.removeAttribute(e):\"function\"!=typeof n&&(n=r?\"\":n.toString(),i?t.setAttributeNS(v,f(e),n):t.setAttribute(e,n))},v=\"http://www.w3.org/1999/xlink\",m=function(t,e,n,r,i,o,a){if(\"class\"!==n||o)if(\"style\"===n){for(var s in r)i&&null!=i[s]||(/-/.test(s)?e.style.removeProperty(s):e.style[s]=\"\");for(var s in i)r&&i[s]===r[s]||(/-/.test(s)?e.style.setProperty(s,i[s]):e.style[s]=i[s])}else if(\"o\"!==n[0]||\"n\"!==n[1]||!/[A-Z]/.test(n[2])||n in e)if(\"list\"!==n&&\"type\"!==n&&!o&&(n in e||-1!==[\"object\",\"function\"].indexOf(typeof i)&&null!==i)){var u=t.tn(e);u&&u.en&&u.en[n]?(b(e,n,i),a&&u.en[n].rn&&y(e,u.en[n].in,i,4===u.en[n].on)):\"ref\"!==n&&(b(e,n,null==i?\"\":i),null!=i&&!1!==i||t.J.un(e,n))}else null!=i&&\"key\"!==n?y(e,n,i):(o||t.J.fn(e,n)&&(null==i||!1===i))&&t.J.un(e,n);else n=f(n)in e?f(n.substring(2)):f(n[2])+n.substring(3),i?i!==r&&t.J.cn(e,n,i,0):t.J.an(e,n,0);else if(r!==i){var c=g(r),l=g(i),h=c.filter(function(t){return!l.includes(t)}),d=g(e.className).filter(function(t){return!h.includes(t)}),p=l.filter(function(t){return!c.includes(t)&&!d.includes(t)});d.push.apply(d,p),e.className=d.join(\" \")}},g=function(t){return null==t||\"\"===t?[]:t.trim().split(/\\s+/)},b=function(t,e,n){try{t[e]=n}catch(t){}},w=function(t,e,n,r,i){var o=11===n.i.nodeType&&n.i.host?n.i.host:n.i,a=e&&e.vattrs||u,s=n.vattrs||u;for(i in a)s&&null!=s[i]||null==a[i]||m(t,o,i,a[i],void 0,r,n.o);for(i in s)i in a&&s[i]===(\"value\"===i||\"checked\"===i?o[i]:a[i])||m(t,o,i,a[i],s[i],r,n.o)},_=!1,E=function(t,e){t&&(t.vattrs&&t.vattrs.ref&&t.vattrs.ref(e?null:t.i),t.vchildren&&t.vchildren.forEach(function(t){E(t,e)}))},S=function(t,e){var n=0,r=!1,i=function(){return e.performance.now()},o=!1!==t.asyncQueue,a=Promise.resolve(),s=[],u=[],c=[],l=[],h=function(e){return function(n){e.push(n),r||(r=!0,t.raf(p))}},f=function(t){for(var e=0;e<t.length;e++)try{t[e](i())}catch(t){console.error(t)}t.length=0},d=function(t,e){for(var n,r=0;r<t.length&&(n=i())<e;)try{t[r++](n)}catch(t){console.error(t)}r===t.length?t.length=0:0!==r&&t.splice(0,r)},p=function(){n++,f(u);var e=o?i()+7*Math.ceil(n*(1/22)):1/0;d(c,e),d(l,e),c.length>0&&(l.push.apply(l,c),c.length=0),(r=u.length+c.length+l.length>0)?t.raf(p):n=0};return t.raf||(t.raf=e.requestAnimationFrame.bind(e)),{tick:function(t){s.push(t),1===s.length&&a.then(function(){return f(s)})},read:h(u),write:h(c)}},C=[],T={forEach:function(t,e){return t.forEach(e)},map:function(t,e){return t.map(e)}},I=function(t,e,n){var r=t[0],i=t[1],o=t[3],a=t[4],s=t[5],u={color:{in:\"color\"}};if(o)for(e=0;e<o.length;e++)u[(n=o[e])[0]]={sn:n[1],rn:!!n[2],in:\"string\"==typeof n[3]?n[3]:n[3]?n[0]:0,on:n[4]};return{t:r,s:i,en:Object.assign({},u),Y:a,ln:s?s.map(k):void 0}},k=function(t){return{vn:t[0],pn:t[1],dn:!!t[2],hn:!!t[3],yn:!!t[4]}},O=function(t,e){return h(e)&&\"object\"!=typeof e&&\"function\"!=typeof e?t===Boolean||4===t?\"false\"!==e&&(\"\"===e||!!e):t===Number||8===t?parseFloat(e):t===String||2===t?e.toString():e:e},N=function(t,e,n){t.bn.add(e),t.wn.has(e)||(t.wn.set(e,!0),t.mn?t.queue.write(function(){return A(t,e,n)}):t.queue.tick(function(){return A(t,e,n)}))},A=function(t,e,n,r,a,s){return function(t,e,n,r){return new(n||(n=Promise))(function(t,e){function i(t){try{a(r.next(t))}catch(t){e(t)}}function o(t){try{a(r.throw(t))}catch(t){e(t)}}function a(e){e.done?t(e.value):new n(function(t){t(e.value)}).then(i,o)}a((r=r.apply(void 0,[])).next())})}(0,0,void 0,function(){var r,u;return function(t,e){function n(n){return function(a){return function(n){if(r)throw new TypeError(\"Generator is already executing.\");for(;s;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,i=n[1],n=[0];continue;case 7:n=s.g.pop(),s.M.pop();continue;default:if(!(o=(o=s.M).length>0&&o[o.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){s.label=n[1];break}if(6===n[0]&&s.label<o[1]){s.label=o[1],o=n;break}if(o&&s.label<o[2]){s.label=o[2],s.g.push(n);break}o[2]&&s.g.pop(),s.M.pop();continue}n=e.call(t,s)}catch(t){n=[6,t],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}var r,i,o,a,s={label:0,j:function(){if(1&o[0])throw o[1];return o[1]},M:[],g:[]};return a={next:n(0),throw:n(1),return:n(2)},\"function\"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a}(this,function(c){switch(c.label){case 0:if(t.wn.delete(e),t.gn.has(e))return[3,12];if(a=t.Mn.get(e))return[3,6];if((s=t.jn.get(e))&&!s[\"s-rn\"])return(s[\"s-rc\"]=s[\"s-rc\"]||[]).push(function(){A(t,e,n)}),[2];if(!(a=M(t,e,t.kn.get(e),n)))return[3,5];c.label=1;case 1:return c.M.push([1,4,,5]),a.componentWillLoad?[4,a.componentWillLoad()]:[3,3];case 2:c.j(),c.label=3;case 3:return[3,5];case 4:return r=c.j(),t.$n(r,3,e),[3,5];case 5:return[3,11];case 6:if(!a)return[3,11];c.label=7;case 7:return c.M.push([7,10,,11]),a.componentWillUpdate?[4,a.componentWillUpdate()]:[3,9];case 8:c.j(),c.label=9;case 9:return[3,11];case 10:return u=c.j(),t.$n(u,5,e),[3,11];case 11:(function(t,e,n,r){try{var a,s=e.An.host,u=e.An.encapsulation,c=\"shadow\"===u&&t.J.Z,l=n;if(a=function(t,e,n){return t&&Object.keys(t).forEach(function(r){t[r].reflectToAttr&&((n=n||{})[r]=e[r])}),n}(e.An.properties,r),c&&(l=n.shadowRoot),!n[\"s-rn\"]){t.En(t,t.J,e,n);var h=n[\"s-sc\"];h&&(t.J.Cn(n,i(h,!0)),\"scoped\"===u&&t.J.Cn(n,i(h)))}if(r.render||r.hostData||s||a){t.On=!0;var f=r.render&&r.render(),d=void 0;d=r.hostData&&r.hostData(),a&&(d=d?Object.assign(d,a):a),t.On=!1;var p=o(null,d,f),y=t.Sn.get(n)||{};y.i=l,p.o=!0,t.Sn.set(n,t.render(n,y,p,c,u))}t.l&&t.l.updateHost(n),n[\"s-rn\"]=!0,n[\"s-rc\"]&&(n[\"s-rc\"].forEach(function(t){return t()}),n[\"s-rc\"]=null)}catch(v){t.On=!1,t.$n(v,8,n,!0)}})(t,t.tn(e),e,a),e[\"s-init\"](),c.label=12;case 12:return[2]}})})},D=function(t,e,n,r,i,o,a){(a=t._n.get(e))||t._n.set(e,a={});var s=a[n];if(r!==s&&(a[n]=r,o=t.Mn.get(e))){var u=a[P+n];if(u)for(var c=0;c<u.length;c++)try{o[u[c]].call(o,r,s,n)}catch(t){console.error(t)}!t.On&&e[\"s-rn\"]&&N(t,e,i)}},x=function(t,e,n){Object.defineProperty(t,e,{configurable:!0,value:n})},R=function(t,e,n,r){Object.defineProperty(t,e,{configurable:!0,get:n,set:r})},P=\"wc-\",M=function(t,e,n,r,i,o,a,s){try{i=new(o=t.tn(e).An),function(t,e,n,r,i,o){t.Pn.set(r,n),t._n.has(n)||t._n.set(n,{}),Object.entries(Object.assign({color:{type:String}},e.properties,{mode:{type:String}})).forEach(function(e){!function(t,e,n,r,i,o,a,s,u){if(e.type||e.state){var c=t._n.get(n);e.state||(!e.attr||void 0!==c[i]&&\"\"!==c[i]||(s=o&&o.Tn)&&h(u=s[e.attr])&&(c[i]=O(e.type,u)),n.hasOwnProperty(i)&&(void 0===c[i]&&(c[i]=O(e.type,n[i])),\"mode\"!==i&&delete n[i])),r.hasOwnProperty(i)&&void 0===c[i]&&(c[i]=r[i]),e.watchCallbacks&&(c[P+i]=e.watchCallbacks.slice()),R(r,i,function(e){return(e=t._n.get(t.Pn.get(this)))&&e[i]},function(n,r){(r=t.Pn.get(this))&&(e.state||e.mutable)&&D(t,r,i,n,a)})}else if(e.elementRef)x(r,i,n);else if(e.method)x(n,i,r[i].bind(r));else if(e.context){var l=t.Wn(e.context);void 0!==l&&x(r,i,l.getContext&&l.getContext(n)||l)}else e.connect&&x(r,i,t.xn(e.connect))}(t,e[1],n,r,e[0],i,o)})}(t,o,e,i,n,r),function(t,e,n){if(e){var r=t.Pn.get(n);e.forEach(function(e){n[e.method]={emit:function(n){return t.Nn(r,e.name,{bubbles:e.bubbles,composed:e.composed,cancelable:e.cancelable,detail:n})}}})}}(t,o.events,i);try{if(a=t.Rn.get(e)){for(s=0;s<a.length;s+=2)i[a[s]](a[s+1]);t.Rn.delete(e)}}catch(n){t.$n(n,2,e)}}catch(n){i={},t.$n(n,7,e,!0)}return t.Mn.set(e,i),i},j=function(t,e){for(var n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType){if(t.tn(r)&&!t.Ln.has(r))return!1;if(!j(t,r))return!1}}return!0},L=function(t,e,n,r,i,o){if(t.bn.delete(e),(i=t.jn.get(e))&&((r=i[\"s-ld\"])&&((n=r.indexOf(e))>-1&&r.splice(n,1),r.length||i[\"s-init\"]&&i[\"s-init\"]()),t.jn.delete(e)),t.Dn.length&&!t.bn.size)for(;o=t.Dn.shift();)o()},F=function(t,e,n,r){return function(){var i=arguments;return q(t,e,n).then(function(t){return t[r].apply(t,i)})}},q=function(t,e,n,r,i){return r=e[n],(i=t.K.body)?(r||(r=i.querySelector(n)),r||(r=e[n]=t.X(n),t.Fn(i,r)),r.componentOnReady()):Promise.resolve()},U=function(t,e,n,r,i,a){var u=n.performance,d={html:{}},y={},v=n[t]=n[t]||{},m=function(t,e,n){var r=new WeakMap,i={K:n,Z:!!n.documentElement.attachShadow,Hn:!1,qn:function(t){return t.nodeType},X:function(t){return n.createElement(t)},Un:function(t,e){return n.createElementNS(t,e)},Bn:function(t){return n.createTextNode(t)},In:function(t){return n.createComment(t)},nn:function(t,e,n){return t.insertBefore(e,n)},Gn:function(t){return t.remove()},Fn:function(t,e){return t.appendChild(e)},Cn:function(t,e){if(t.classList)t.classList.add(e);else if(\"svg\"===t.nodeName.toLowerCase()){var n=t.getAttribute(\"class\")||\"\";n.split(\" \").includes(e)||(n+=\" \"+e),t.setAttribute(\"class\",n.trim())}},Qn:function(t){return t.childNodes},Yn:function(t){return t.parentNode},Zn:function(t){return t.nextSibling},zn:function(t){return t.previousSibling},Jn:function(t){return f(t.nodeName)},Kn:function(t){return t.textContent},Vn:function(t,e){return t.textContent=e},Xn:function(t,e){return t.getAttribute(e)},nt:function(t,e,n){return t.setAttribute(e,n)},un:function(t,e){return t.removeAttribute(e)},fn:function(t,e){return t.hasAttribute(e)},tt:function(e){return e.getAttribute(\"mode\")||(t.Context||{}).mode},et:function(t,r){return\"child\"===r?t.firstElementChild:\"parent\"===r?i.rt(t):\"body\"===r?n.body:\"document\"===r?n:\"window\"===r?e:t},cn:function(e,n,o,a,s,u,l,h,f,d){var p=e,y=o,v=r.get(e);d=n+a,v&&v[d]&&v[d](),\"string\"==typeof l?p=i.et(e,l):\"object\"==typeof l?p=l:(f=n.split(\":\")).length>1&&(p=i.et(e,f[0]),n=f[1]),p&&((f=n.split(\".\")).length>1&&(n=f[0],y=function(t){t.keyCode===c[f[1]]&&o(t)}),t.ael(p,n,y,h=i.Hn?{capture:!!s,passive:!!u}:!!s),v||r.set(e,v={}),v[d]=function(){p&&t.rel(p,n,y,h),v[d]=null})},an:function(t,e,n,i){(i=r.get(t))&&(e?i[e+n]&&i[e+n]():Object.keys(i).forEach(function(t){i[t]&&i[t]()}))},it:function(t,n,r,i){return i=new e.CustomEvent(n,r),t&&t.dispatchEvent(i),i},rt:function(t,e){return(e=i.Yn(t))&&11===i.qn(e)?e.host:e},ot:function(t,e,n,r){return t.setAttributeNS(e,n,r)},ut:function(t,e){return t.attachShadow(e)}};\"function\"!=typeof e.CustomEvent&&(e.CustomEvent=function(t,e,r){return e=e||{},(r=n.createEvent(\"CustomEvent\")).initCustomEvent(t,e.bubbles,e.cancelable,e.detail),r},e.CustomEvent.prototype=e.Event.prototype),t.ael||(t.ael=function(t,e,n,r){return t.addEventListener(e,n,r)},t.rel=function(t,e,n,r){return t.removeEventListener(e,n,r)});try{e.addEventListener(\"e\",null,Object.defineProperty({},\"passive\",{get:function(){return i.Hn=!0}}))}catch(t){}return i}(v,n,r),g=m.K.documentElement,b=n[\"s-defined\"]=n[\"s-defined\"]||{},C={J:m,u:function(t,e){n.customElements.get(t.t)||(function(t,e,n,r,i){if(n.connectedCallback=function(){!function(t,e,n){t.ft.has(n)||(t.ft.set(n,!0),function(t,e){var n=t.tn(e);n.ln&&n.ln.forEach(function(n){n.dn||t.J.cn(e,n.vn,function(t,e,n,r){return function(i){(r=t.Mn.get(e))?r[n](i):((r=t.Rn.get(e)||[]).push(n,i),t.Rn.set(e,r))}}(t,e,n.pn),1,n.yn,n.hn)})}(t,n)),t.gn.delete(n),t.Ln.has(n)||(t.ct=!0,t.bn.add(n),t.Ln.set(n,!0),function(t,e,n){for(n=e;n=t.J.rt(n);)if(t.at(n)){t.st.has(e)||(t.jn.set(e,n),(n[\"s-ld\"]=n[\"s-ld\"]||[]).push(e));break}}(t,n),t.queue.tick(function(){t.kn.set(n,function(t,e,n,r,i){if(n.mode||(n.mode=t.tt(n)),n[\"s-cr\"]||t.Xn(n,\"ssrv\")||t.Z&&1===e.Y||(n[\"s-cr\"]=t.Bn(\"\"),n[\"s-cr\"][\"s-cn\"]=!0,t.nn(n,n[\"s-cr\"],t.Qn(n)[0])),!t.Z&&1===e.Y)try{!window.HTMLElement||\"shadowRoot\"in window.HTMLElement.prototype||(n.shadowRoot=n)}catch(t){}return 1===e.Y&&t.Z&&!n.shadowRoot&&t.ut(n,{mode:\"open\"}),r={Tn:{}},e.en&&Object.keys(e.en).forEach(function(o){(i=e.en[o].in)&&(r.Tn[i]=t.Xn(n,i))}),r}(t.J,e,n)),t.lt(e,n)}))}(t,e,this)},n.disconnectedCallback=function(){!function(t,e){if(!t.vt&&function(t,e){for(;e;){if(!t.Yn(e))return 9!==t.qn(e);e=t.Yn(e)}}(t.J,e)){t.gn.set(e,!0),L(t,e),E(t.Sn.get(e),!0);var n=t.Mn.get(e);n&&n.componentDidUnload&&n.componentDidUnload(),t.J.an(e),t.ft.delete(e),t.l&&t.l.removeHost(e),[t.jn,t.pt,t.kn].forEach(function(t){return t.delete(e)})}}(t,this)},n[\"s-init\"]=function(){!function(t,e,n,r,i,o,a){if(j(t,e)&&(i=t.Mn.get(e))&&!t.gn.has(e)&&(!e[\"s-ld\"]||!e[\"s-ld\"].length)){t.st.set(e,!0),(a=t.dt.has(e))||(t.dt.set(e,!0),e[\"s-ld\"]=void 0,t.J.Cn(e,n));try{E(t.Sn.get(e)),(o=t.pt.get(e))&&(o.forEach(function(t){return t(e)}),t.pt.delete(e)),!a&&i.componentDidLoad?i.componentDidLoad():a&&i.componentDidUpdate&&i.componentDidUpdate()}catch(n){t.$n(n,4,e)}L(t,e)}}(t,this,r)},n.forceUpdate=function(){N(t,this,i)},e.en){var o=Object.entries(e.en),a={};o.forEach(function(t){var e=t[1].in;e&&(a[e]=t[0])}),a=Object.assign({},a),n.attributeChangedCallback=function(t,e,n){!function(t,e,n,r){var i=a[f(n)];i&&(e[i]=(null!==r||\"boolean\"!=typeof e[i])&&r)}(0,this,t,n)},function(t,e,n,r){o.forEach(function(e){var i=e[0],o=e[1],a=o.sn;3&a?R(n,i,function(){return(t._n.get(this)||{})[i]},function(e){D(t,this,i,O(o.on,e),r)}):32===a&&x(n,i,p)})}(t,0,n,i)}}(C,d[t.t]=t,e.prototype,a,u),e.observedAttributes=Object.values(t.en).map(function(t){return t.in}).filter(function(t){return!!t}),n.customElements.define(t.t,e))},tn:function(t){return d[m.Jn(t)]},Wn:function(t){return e[t]},isClient:!0,at:function(t){return!(!b[m.Jn(t)]&&!C.tn(t))},$n:function(t,e,n){return console.error(t,e,n&&n.tagName)},queue:e.queue=S(v,n),lt:function(t,e){t.s({mode:e.mode,scoped:!m.Z}).then(function(n){try{t.An=n,function(t,e,n,r,i){if(r){var o=e.t+(i||s);e[o]||(e[o]=r)}}(0,t,0,n.style,n.styleMode)}catch(e){console.error(e),t.An=function(){}}N(C,e,u)})},On:!1,mn:!1,vt:!1,En:l,jn:new WeakMap,V:new WeakMap,Ln:new WeakMap,ft:new WeakMap,dt:new WeakMap,st:new WeakMap,Pn:new WeakMap,kn:new WeakMap,Mn:new WeakMap,gn:new WeakMap,wn:new WeakMap,pt:new WeakMap,Rn:new WeakMap,Sn:new WeakMap,_n:new WeakMap,bn:new Set,Dn:[]};return e.isServer=e.isPrerender=!(e.isClient=!0),e.window=n,e.location=n.location,e.document=r,e.resourcesUrl=e.publicPath=i,e.enableListener=function(t,e,n,r,i){return function(t,e,n,r,i,o){if(e){var a=t.Pn.get(e),s=t.tn(a);if(s&&s.ln)if(r){var u=s.ln.find(function(t){return t.vn===n});u&&t.J.cn(a,n,function(t){return e[u.pn](t)},1,u.yn,void 0===o?u.hn:!!o,i)}else t.J.an(a,n,1)}}(C,t,e,n,r,i)},C.Nn=e.emit=function(t,n,r){return m.it(t,e.eventNameFn?e.eventNameFn(n):n,r)},C.xn=function(t){return function(t,e,n){return{create:F(t,e,n,\"create\"),componentOnReady:F(t,e,n,\"componentOnReady\")}}(m,y,t)},v.h=o,v.Context=e,v.onReady=function(){return new Promise(function(t){return C.queue.write(function(){return C.bn.size?C.Dn.push(t):t()})})},C.render=function(t,e){var n,r,i,o,a,s,u,c=function(i,f,d,p,y,v,m,g,b){if(g=f.vchildren[d],n||(o=!0,\"slot\"===g.vtag&&(r&&e.Cn(p,r+\"-s\"),g.vchildren?g.ht=!0:g.yt=!0)),h(g.vtext))g.i=e.Bn(g.vtext);else if(g.yt)g.i=e.Bn(\"\");else{if(v=g.i=_||\"svg\"===g.vtag?e.Un(\"http://www.w3.org/2000/svg\",g.vtag):e.X(g.ht?\"slot-fb\":g.vtag),t.at(v)&&t.st.delete(u),w(t,null,g,_=\"svg\"===g.vtag||\"foreignObject\"!==g.vtag&&_),h(r)&&v[\"s-si\"]!==r&&e.Cn(v,v[\"s-si\"]=r),g.vchildren)for(y=0;y<g.vchildren.length;++y)(m=c(i,g,y,v))&&e.Fn(v,m);\"svg\"===g.vtag&&(_=!1)}return g.i[\"s-hn\"]=s,(g.ht||g.yt)&&(g.i[\"s-sr\"]=!0,g.i[\"s-cr\"]=a,g.i[\"s-sn\"]=g.vname||\"\",(b=i&&i.vchildren&&i.vchildren[d])&&b.vtag===g.vtag&&i.i&&l(i.i)),g.i},l=function(n,r,i,a){t.vt=!0;var u=e.Qn(n);for(i=u.length-1;i>=0;i--)(a=u[i])[\"s-hn\"]!==s&&a[\"s-ol\"]&&(e.Gn(a),e.nn(v(a),a,y(a)),e.Gn(a[\"s-ol\"]),a[\"s-ol\"]=null,o=!0),r&&l(a,r);t.vt=!1},f=function(t,n,r,i,o,a,u,l){var f=t[\"s-cr\"];for((u=f&&e.Yn(f)||t).shadowRoot&&e.Jn(u)===s&&(u=u.shadowRoot);o<=a;++o)i[o]&&(l=h(i[o].vtext)?e.Bn(i[o].vtext):c(null,r,o,t))&&(i[o].i=l,e.nn(u,l,y(n)))},d=function(t,n,r,o){for(;n<=r;++n)h(t[n])&&(i=!0,(o=t[n].i)[\"s-ol\"]?e.Gn(o[\"s-ol\"]):l(o,!0),e.Gn(o))},p=function(t,e){return t.vtag===e.vtag&&t.vkey===e.vkey&&(\"slot\"!==t.vtag||t.vname===e.vname)},y=function(t){return t&&t[\"s-ol\"]?t[\"s-ol\"]:t},v=function(t){return e.Yn(t[\"s-ol\"]?t[\"s-ol\"]:t)},m=function(n,r,i){var o=r.i=n.i,a=n.vchildren,s=r.vchildren;_=r.i&&h(e.rt(r.i))&&void 0!==r.i.ownerSVGElement,_=\"svg\"===r.vtag||\"foreignObject\"!==r.vtag&&_,h(r.vtext)?(i=o[\"s-cr\"])?e.Vn(e.Yn(i),r.vtext):n.vtext!==r.vtext&&e.Vn(o,r.vtext):(\"slot\"!==r.vtag&&w(t,n,r,_),h(a)&&h(s)?function(t,n,r,i,o,a,s,u){for(var g=0,b=0,w=n.length-1,_=n[0],E=n[w],S=i.length-1,C=i[0],T=i[S];g<=w&&b<=S;)if(null==_)_=n[++g];else if(null==E)E=n[--w];else if(null==C)C=i[++b];else if(null==T)T=i[--S];else if(p(_,C))m(_,C),_=n[++g],C=i[++b];else if(p(E,T))m(E,T),E=n[--w],T=i[--S];else if(p(_,T))\"slot\"!==_.vtag&&\"slot\"!==T.vtag||l(e.Yn(_.i)),m(_,T),e.nn(t,_.i,e.Zn(E.i)),_=n[++g],T=i[--S];else if(p(E,C))\"slot\"!==_.vtag&&\"slot\"!==T.vtag||l(e.Yn(E.i)),m(E,C),e.nn(t,E.i,_.i),E=n[--w],C=i[++b];else{for(o=null,a=g;a<=w;++a)if(n[a]&&h(n[a].vkey)&&n[a].vkey===C.vkey){o=a;break}h(o)?((u=n[o]).vtag!==C.vtag?s=c(n&&n[b],r,o,t):(m(u,C),n[o]=void 0,s=u.i),C=i[++b]):(s=c(n&&n[b],r,b,t),C=i[++b]),s&&e.nn(v(_.i),s,y(_.i))}g>w?f(t,null==i[S+1]?null:i[S+1].i,r,i,b,S):b>S&&d(n,g,w)}(o,a,r,s):h(s)?(h(n.vtext)&&e.Vn(o,\"\"),f(o,null,r,s,0,s.length-1)):h(a)&&d(a,0,a.length-1)),_&&\"svg\"===r.vtag&&(_=!1)},g=function(t,n,r,i,o,a,s,u){for(i=0,o=(r=e.Qn(t)).length;i<o;i++)if(1===e.qn(n=r[i])){if(n[\"s-sr\"])for(s=n[\"s-sn\"],n.hidden=!1,a=0;a<o;a++)if(r[a][\"s-hn\"]!==n[\"s-hn\"])if(u=e.qn(r[a]),\"\"!==s){if(1===u&&s===e.Xn(r[a],\"slot\")){n.hidden=!0;break}}else if(1===u||3===u&&\"\"!==e.Kn(r[a]).trim()){n.hidden=!0;break}g(n)}},b=[],E=function(t,n,r,o,a,s,u,c,l,h){for(a=0,s=(n=e.Qn(t)).length;a<s;a++){if((r=n[a])[\"s-sr\"]&&(o=r[\"s-cr\"]))for(c=e.Qn(e.Yn(o)),l=r[\"s-sn\"],u=c.length-1;u>=0;u--)(o=c[u])[\"s-cn\"]||o[\"s-nr\"]||o[\"s-hn\"]===r[\"s-hn\"]||((3===(h=e.qn(o))||8===h)&&\"\"===l||1===h&&null===e.Xn(o,\"slot\")&&\"\"===l||1===h&&e.Xn(o,\"slot\")===l)&&(b.some(function(t){return t.bt===o})||(i=!0,o[\"s-sn\"]=l,b.push({wt:r,bt:o})));1===e.qn(r)&&E(r)}};return function(c,l,h,f,d,p,y,v,w,_,S,C){if(s=e.Jn(u=c),a=u[\"s-cr\"],n=f,r=u[\"s-sc\"],o=i=!1,m(l,h),o){for(E(h.i),y=0;y<b.length;y++)(v=b[y]).bt[\"s-ol\"]||((w=e.Bn(\"\"))[\"s-nr\"]=v.bt,e.nn(e.Yn(v.bt),v.bt[\"s-ol\"]=w,v.bt));for(t.vt=!0,y=0;y<b.length;y++){for(S=e.Yn((v=b[y]).wt),C=e.Zn(v.wt),w=v.bt[\"s-ol\"];w=e.zn(w);)if((_=w[\"s-nr\"])&&_&&_[\"s-sn\"]===v.bt[\"s-sn\"]&&S===e.Yn(_)&&(_=e.Zn(_))&&_&&!_[\"s-nr\"]){C=_;break}(!C&&S!==e.Yn(v.bt)||e.Zn(v.bt)!==C)&&v.bt!==C&&(e.Gn(v.bt),e.nn(S,v.bt,C))}t.vt=!1}return i&&g(h.i),b.length=0,h}}(C,m),g[\"s-ld\"]=[],g[\"s-rn\"]=!0,g[\"s-init\"]=function(){C.st.set(g,v.loaded=C.mn=!0),m.it(n,\"appload\",{detail:{namespace:t}})},function(t,e,n,r,i,o){if(e.componentOnReady=function(e,n){if(!e.nodeName.includes(\"-\"))return n(null),!1;var r=t.tn(e);if(r)if(t.st.has(e))n(e);else{var i=t.pt.get(e)||[];i.push(n),t.pt.set(e,i)}return!!r},i){for(o=i.length-1;o>=0;o--)e.componentOnReady(i[o][0],i[o][1])&&i.splice(o,1);for(o=0;o<r.length;o++)if(!n[r[o]].componentOnReady)return;for(o=0;o<i.length;o++)i[o][1](null);i.length=0}}(C,v,n,n[\"s-apps\"],n[\"s-cr\"]),v.initialized=!0,C},V={},B=!1},crnd:function(t,e,n){var r={\"./home/home.module.ngfactory\":[\"L6id\",10,0,15],\"./play/play.module.ngfactory\":[\"5kYI\",10,0,16]};function i(t){var e=r[t];return e?Promise.all(e.slice(1).map(n.e)).then(function(){return n(e[0])}):Promise.resolve().then(function(){var e=new Error(\"Cannot find module '\"+t+\"'\");throw e.code=\"MODULE_NOT_FOUND\",e})}i.keys=function(){return Object.keys(r)},i.id=\"crnd\",t.exports=i},dC0D:function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return o});var r=n(\"mrSG\"),i=n(\"FFOo\");function o(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new a(t,e,n))}}var a=function(){function t(t,e,n){void 0===n&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.accumulator,this.seed,this.hasSeed))},t}(),s=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.accumulator=n,o._seed=r,o.hasSeed=i,o.index=0,o}return r.d(e,t),Object.defineProperty(e.prototype,\"seed\",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(r){this.destination.error(r)}this.seed=e,this.destination.next(e)},e}(i.a)},fvl4:function(t,e,n){\"use strict\";n(\"mrSG\");var r=n(\"CcnG\"),i=n(\"0/uQ\"),o=n(\"F/XL\"),a=n(\"6blF\"),s=n(\"S1nX\"),u=n(\"67Y/\");function c(t){return function(t){return new a.a(function(e){return{unsubscribe:t.onSnapshot(e)}})}(t).pipe(Object(s.a)())}function l(t){return c(t).pipe(Object(u.a)(function(t){return{payload:t,type:\"query\"}}))}var h=n(\"VnD/\"),f=n(\"dC0D\");function d(t){return l(t).pipe(Object(u.a)(function(t){return t.payload.docChanges().map(function(t){return{type:t.type,payload:t}})}))}function p(t,e){return l(t).pipe(Object(u.a)(function(t){return t.payload.docChanges()}),Object(f.a)(function(t,n){return function(t,e,n){return e.forEach(function(e){n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case\"added\":t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)||t.splice(e.newIndex,0,e);break;case\"modified\":(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))&&(e.oldIndex!==e.newIndex?(t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e)):t.splice(e.newIndex,1,e));break;case\"removed\":t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref)&&t.splice(e.oldIndex,1)}return t}(t,e))}),t}(t,n,e)},[]),Object(u.a)(function(t){return t.map(function(t){return{type:t.type,payload:t}})}))}var y=n(\"NKHs\"),v=function(){return(v=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function m(t){return t&&0!==t.length||(t=[\"added\",\"removed\",\"modified\"]),t}var g=function(){function t(t,e,n){this.ref=t,this.query=e,this.afs=n}return t.prototype.stateChanges=function(t){return t&&0!==t.length?this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(d(this.query))).pipe(Object(u.a)(function(e){return e.filter(function(e){return t.indexOf(e.type)>-1})}),Object(h.a)(function(t){return t.length>0})):this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(d(this.query)))},t.prototype.auditTrail=function(t){return this.stateChanges(t).pipe(Object(f.a)(function(t,e){return t.concat(e)},[]))},t.prototype.snapshotChanges=function(t){var e=m(t),n=p(this.query,e),r=this.afs.scheduler.runOutsideAngular(n);return this.afs.scheduler.keepUnstableUntilFirst(r)},t.prototype.valueChanges=function(t){void 0===t&&(t={});var e=l(this.query),n=this.afs.scheduler.runOutsideAngular(e);return this.afs.scheduler.keepUnstableUntilFirst(n).pipe(Object(u.a)(function(e){return e.payload.docs.map(function(e){var n;return t.idField?v({},e.data(),((n={})[t.idField]=e.id,n)):e.data()})}))},t.prototype.get=function(t){return Object(i.a)(this.query.get(t)).pipe(Object(y.c)(this.afs.scheduler.zone))},t.prototype.add=function(t){return this.ref.add(t)},t.prototype.doc=function(t){return new b(this.ref.doc(t),this.afs)},t}(),b=function(){function t(t,e){this.ref=t,this.afs=e}return t.prototype.set=function(t,e){return this.ref.set(t,e)},t.prototype.update=function(t){return this.ref.update(t)},t.prototype.delete=function(){return this.ref.delete()},t.prototype.collection=function(t,e){var n=A(this.ref.collection(t),e);return new g(n.ref,n.query,this.afs)},t.prototype.snapshotChanges=function(){var t=c(this.ref).pipe(Object(u.a)(function(t){return{payload:t,type:\"value\"}})),e=this.afs.scheduler.runOutsideAngular(t);return this.afs.scheduler.keepUnstableUntilFirst(e)},t.prototype.valueChanges=function(){return this.snapshotChanges().pipe(Object(u.a)(function(t){return t.payload.data()}))},t.prototype.get=function(t){return Object(i.a)(this.ref.get(t)).pipe(Object(y.c)(this.afs.scheduler.zone))},t}(),w=function(){function t(t,e){this.query=t,this.afs=e}return t.prototype.stateChanges=function(t){return t&&0!==t.length?this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(d(this.query))).pipe(Object(u.a)(function(e){return e.filter(function(e){return t.indexOf(e.type)>-1})}),Object(h.a)(function(t){return t.length>0})):this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(d(this.query)))},t.prototype.auditTrail=function(t){return this.stateChanges(t).pipe(Object(f.a)(function(t,e){return t.concat(e)},[]))},t.prototype.snapshotChanges=function(t){var e=m(t),n=p(this.query,e),r=this.afs.scheduler.runOutsideAngular(n);return this.afs.scheduler.keepUnstableUntilFirst(r)},t.prototype.valueChanges=function(){var t=l(this.query),e=this.afs.scheduler.runOutsideAngular(t);return this.afs.scheduler.keepUnstableUntilFirst(e).pipe(Object(u.a)(function(t){return t.payload.docs.map(function(t){return t.data()})}))},t.prototype.get=function(t){return Object(i.a)(this.query.get(t)).pipe(Object(y.c)(this.afs.scheduler.zone))},t}(),_=n(\"hDTV\"),E=n(\"Ip0R\"),S=n(\"Wcq6\"),C=n.n(S);n.d(e,\"b\",function(){return T}),n.d(e,\"d\",function(){return I}),n.d(e,\"c\",function(){return k}),n.d(e,\"e\",function(){return A}),n.d(e,\"a\",function(){return D});var T=new r.p(\"angularfire2.enableFirestorePersistence\"),I=new r.p(\"angularfire2.firestore.persistenceSettings\"),k=new r.p(\"angularfire2.firestore.settings\"),O=parseInt(C.a.SDK_VERSION.split(\".\")[0]),N=O<5||5==O&&parseInt(C.a.SDK_VERSION.split(\".\")[1])<8?{timestampsInSnapshots:!0}:{};function A(t,e){return void 0===e&&(e=function(t){return t}),{query:e(t),ref:t}}var D=function(){function t(t,e,n,r,a,s,u){var c=this;this.scheduler=new y.a(s,a),this.firestore=s.runOutsideAngular(function(){var n=Object(_.e)(t,e).firestore();return n.settings(r||N),n}),this.persistenceEnabled$=n&&!Object(E.o)(a)?s.runOutsideAngular(function(){try{return Object(i.a)(c.firestore.enablePersistence(u||void 0).then(function(){return!0},function(){return!1}))}catch(t){return Object(o.a)(!1)}}):Object(o.a)(!1)}return t.prototype.collection=function(t,e){var n=A(\"string\"==typeof t?this.firestore.collection(t):t,e);return new g(n.ref,n.query,this)},t.prototype.collectionGroup=function(t,e){if(O<6)throw\"collection group queries require Firebase JS SDK >= 6.0\";var n=e||function(t){return t},r=this.firestore.collectionGroup(t);return new w(n(r),this)},t.prototype.doc=function(t){var e;return e=\"string\"==typeof t?this.firestore.doc(t):t,new b(e,this)},t.prototype.createId=function(){return this.firestore.collection(\"_\").doc().id},t}()},h9Dq:function(t,e,n){\"use strict\";var r=n(\"mrSG\"),i=function(t){function e(e,n){return t.call(this)||this}return r.d(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(n(\"pugT\").a);n.d(e,\"a\",function(){return o});var o=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return r.d(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error(\"executing a cancelled action\");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(i)},hDTV:function(t,e,n){\"use strict\";n.d(e,\"d\",function(){return a}),n.d(e,\"c\",function(){return s}),n.d(e,\"b\",function(){return u}),n.d(e,\"e\",function(){return c}),n.d(e,\"a\",function(){return l}),n(\"mrSG\");var r=n(\"CcnG\"),i=n(\"Wcq6\"),o=n.n(i),a=new r.p(\"angularfire2.app.options\"),s=new r.p(\"angularfire2.app.nameOrConfig\"),u=function(){return function(){}}();function c(t,e){var n=\"object\"==typeof e&&e||{};return n.name=n.name||\"string\"==typeof e&&e||\"[DEFAULT]\",o.a.apps.filter(function(t){return t&&t.name===n.name})[0]||o.a.initializeApp(t,n)}var l=function(){function t(){}var e;return e=t,t.initializeApp=function(t,n){return{ngModule:e,providers:[{provide:a,useValue:t},{provide:s,useValue:n}]}},t}()},hKQe:function(t,e,n){\"use strict\";n(\"6blF\"),n(\"KOl+\")},iLxQ:function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return i});var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},isby:function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return r});var r=Array.isArray||function(t){return t&&\"number\"==typeof t.length}},mAIw:function(t,e,n){\"use strict\";n.r(e),n.d(e,\"__extends\",function(){return i}),n.d(e,\"__assign\",function(){return o}),n.d(e,\"__rest\",function(){return a}),n.d(e,\"__decorate\",function(){return s}),n.d(e,\"__param\",function(){return u}),n.d(e,\"__metadata\",function(){return c}),n.d(e,\"__awaiter\",function(){return l}),n.d(e,\"__generator\",function(){return h}),n.d(e,\"__exportStar\",function(){return f}),n.d(e,\"__values\",function(){return d}),n.d(e,\"__read\",function(){return p}),n.d(e,\"__spread\",function(){return y}),n.d(e,\"__await\",function(){return v}),n.d(e,\"__asyncGenerator\",function(){return m}),n.d(e,\"__asyncDelegator\",function(){return g}),n.d(e,\"__asyncValues\",function(){return b}),n.d(e,\"__makeTemplateObject\",function(){return w}),n.d(e,\"__importStar\",function(){return _}),n.d(e,\"__importDefault\",function(){return E});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&\"function\"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function u(t,e){return function(n,r){e(n,r,t)}}function c(t,e){if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})}function h(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function f(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function d(t){var e=\"function\"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function p(t,e){var n=\"function\"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}function v(t){return this instanceof v?(this.v=t,this):new v(t)}function m(t,e,n){if(!Symbol.asyncIterator)throw new TypeError(\"Symbol.asyncIterator is not defined.\");var r,i=n.apply(t,e||[]),o=[];return r={},a(\"next\"),a(\"throw\"),a(\"return\"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||s(t,e)})})}function s(t,e){try{(n=i[t](e)).value instanceof v?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function u(t){s(\"next\",t)}function c(t){s(\"throw\",t)}function l(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}}function g(t){var e,n;return e={},r(\"next\"),r(\"throw\",function(t){throw t}),r(\"return\"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:v(t[r](e)),done:\"return\"===r}:i?i(e):e}:i}}function b(t){if(!Symbol.asyncIterator)throw new TypeError(\"Symbol.asyncIterator is not defined.\");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=d(t),e={},r(\"next\"),r(\"throw\"),r(\"return\"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise(function(r,i){!function(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)}(r,i,(e=t[n](e)).done,e.value)})}}}function w(t,e){return Object.defineProperty?Object.defineProperty(t,\"raw\",{value:e}):t.raw=e,t}function _(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function E(t){return t&&t.__esModule?t:{default:t}}},mChF:function(t,e,n){\"use strict\";function r(t){return t}n.d(e,\"a\",function(){return r})},mrSG:function(t,e,n){\"use strict\";n.d(e,\"d\",function(){return i}),n.d(e,\"a\",function(){return o}),n.d(e,\"c\",function(){return a}),n.d(e,\"g\",function(){return s}),n.d(e,\"f\",function(){return u}),n.d(e,\"b\",function(){return c}),n.d(e,\"e\",function(){return l}),n.d(e,\"j\",function(){return h}),n.d(e,\"h\",function(){return f}),n.d(e,\"i\",function(){return d});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function s(t,e){return function(n,r){e(n,r,t)}}function u(t,e){if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})}function l(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function h(t){var e=\"function\"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function f(t,e){var n=\"function\"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function d(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(f(arguments[e]));return t}},nFGs:function(t,e,n){var r={\"./1fcq78hk.entry.js\":[\"ug01\",0,17],\"./1fcq78hk.sc.entry.js\":[\"kVc2\",0,18],\"./2i50w2lv.entry.js\":[\"e8z1\",0,19],\"./2i50w2lv.sc.entry.js\":[\"Vh+z\",0,20],\"./39fhulxe.entry.js\":[\"RzBT\",0,21],\"./39fhulxe.sc.entry.js\":[\"fbrU\",0,22],\"./3hbcnxuc.entry.js\":[\"Q2Qd\",0,23],\"./3hbcnxuc.sc.entry.js\":[\"ktSt\",0,24],\"./3pkkvczk.entry.js\":[\"m70B\",0,25],\"./3pkkvczk.sc.entry.js\":[\"4dS2\",0,26],\"./48sex9p5.entry.js\":[\"lggV\",0,27],\"./48sex9p5.sc.entry.js\":[\"dOGn\",0,28],\"./5klmpbas.entry.js\":[\"7SPx\",0,29],\"./5klmpbas.sc.entry.js\":[\"J3iV\",0,30],\"./5zcdwzsx.entry.js\":[\"pehP\",0,31],\"./5zcdwzsx.sc.entry.js\":[\"bDk6\",0,32],\"./6kgso7pq.entry.js\":[\"GL81\",0,33],\"./6kgso7pq.sc.entry.js\":[\"+SaA\",0,34],\"./7hlpr3fd.entry.js\":[\"iywp\",0,35],\"./7hlpr3fd.sc.entry.js\":[\"Tfrm\",0,36],\"./91yswq9n.entry.js\":[\"/xo/\",0,37],\"./91yswq9n.sc.entry.js\":[\"gS5+\",0,38],\"./admmxern.entry.js\":[\"mp9W\",0,39],\"./admmxern.sc.entry.js\":[\"Y5tm\",0,40],\"./ak14tg4e.entry.js\":[\"WSBA\",0,41],\"./ak14tg4e.sc.entry.js\":[\"hLJm\",0,42],\"./azzrjyyu.entry.js\":[\"MTGU\",0,43],\"./azzrjyyu.sc.entry.js\":[\"FXQz\",0,44],\"./b65tzyas.entry.js\":[\"C8fh\",0,45],\"./b65tzyas.sc.entry.js\":[\"O4gY\",0,46],\"./b7geaofq.entry.js\":[\"MK+P\",0,47],\"./b7geaofq.sc.entry.js\":[\"7h6Y\",0,48],\"./bb7q7tld.entry.js\":[\"689S\",0,49],\"./bb7q7tld.sc.entry.js\":[\"+exn\",0,50],\"./bheoje2y.entry.js\":[\"SXh/\",0,51],\"./bheoje2y.sc.entry.js\":[\"79YL\",0,52],\"./d1xzdckz.entry.js\":[\"j2Pk\",0,55],\"./d1xzdckz.sc.entry.js\":[\"fLHG\",0,56],\"./devt5yhg.entry.js\":[\"2cSx\",0,57],\"./devt5yhg.sc.entry.js\":[\"I5jw\",0,58],\"./djkq5plb.entry.js\":[\"wdVW\",0,59],\"./djkq5plb.sc.entry.js\":[\"xfwX\",0,60],\"./eem8jsfz.entry.js\":[\"Xclb\",0,61],\"./eem8jsfz.sc.entry.js\":[\"naPa\",0,62],\"./eghwkqif.entry.js\":[\"TTeN\",0,63],\"./eghwkqif.sc.entry.js\":[\"q6g7\",0,64],\"./ek05jvfc.entry.js\":[\"0EqK\",0,65],\"./ek05jvfc.sc.entry.js\":[\"DOS7\",0,66],\"./f5r41bls.entry.js\":[\"1oSZ\",0,67],\"./f5r41bls.sc.entry.js\":[\"1kqV\",0,68],\"./fkzdmlip.entry.js\":[\"rJMx\",69],\"./fkzdmlip.sc.entry.js\":[\"0djX\",70],\"./fmzmhk3d.entry.js\":[\"Ib2a\",0,71],\"./fmzmhk3d.sc.entry.js\":[\"qsQg\",0,72],\"./foblon1x.entry.js\":[\"nyHC\",0,73],\"./foblon1x.sc.entry.js\":[\"M9Qc\",0,74],\"./hds9xywu.entry.js\":[\"mxy9\",0,75],\"./hds9xywu.sc.entry.js\":[\"Kpq4\",0,76],\"./helxzsef.entry.js\":[\"99R9\",77],\"./helxzsef.sc.entry.js\":[\"GK8t\",78],\"./i5bu78vq.entry.js\":[\"qNIT\",0,79],\"./i5bu78vq.sc.entry.js\":[\"XCM0\",0,80],\"./imcdx1xe.entry.js\":[\"dGsy\",0,81],\"./imcdx1xe.sc.entry.js\":[\"vA+A\",0,82],\"./iqlhkurd.entry.js\":[\"XNUz\",0,83],\"./iqlhkurd.sc.entry.js\":[\"Uls2\",0,84],\"./isuxxasv.entry.js\":[\"NY5t\",0,85],\"./isuxxasv.sc.entry.js\":[\"38Ds\",0,86],\"./iwgahuhw.entry.js\":[\"tFNl\",0,87],\"./iwgahuhw.sc.entry.js\":[\"oDbt\",0,88],\"./j20d1ikn.entry.js\":[\"Z/Mg\",0,89],\"./j20d1ikn.sc.entry.js\":[\"Kmzl\",0,90],\"./jyhraxns.entry.js\":[\"uHDx\",0,91],\"./jyhraxns.sc.entry.js\":[\"TJ6r\",0,92],\"./jzwyowjw.entry.js\":[\"hAik\",0,93],\"./jzwyowjw.sc.entry.js\":[\"RBLv\",0,94],\"./k6eoch7h.entry.js\":[\"faSd\",0,95],\"./k6eoch7h.sc.entry.js\":[\"lkLI\",0,96],\"./kawnb1ql.entry.js\":[\"LbRg\",0,97],\"./kawnb1ql.sc.entry.js\":[\"ZGvF\",0,98],\"./kgjnfunx.entry.js\":[\"fKVI\",0,99],\"./kgjnfunx.sc.entry.js\":[\"I3kv\",0,100],\"./lb8tayd0.entry.js\":[\"dzOt\",0,101],\"./lb8tayd0.sc.entry.js\":[\"8WXY\",0,102],\"./llyqw4no.entry.js\":[\"55Ol\",0,103],\"./llyqw4no.sc.entry.js\":[\"9VJ4\",0,104],\"./mf2ayo12.entry.js\":[\"iSEr\",0,105],\"./mf2ayo12.sc.entry.js\":[\"2AjP\",0,106],\"./mo7qeek2.entry.js\":[\"H+Tw\",0,107],\"./mo7qeek2.sc.entry.js\":[\"Arbf\",0,108],\"./mri9bdlj.entry.js\":[\"qYnb\",109],\"./mri9bdlj.sc.entry.js\":[\"mk6G\",110],\"./mrs0ks1r.entry.js\":[\"oqvA\",0,111],\"./mrs0ks1r.sc.entry.js\":[\"PFyr\",0,112],\"./n1gqnu4m.entry.js\":[\"72dY\",0,113],\"./n1gqnu4m.sc.entry.js\":[\"e/IG\",0,114],\"./n60sde1b.entry.js\":[\"rxXV\",0,115],\"./n60sde1b.sc.entry.js\":[\"LUii\",0,116],\"./oc7j8k7y.entry.js\":[\"HFl3\",0,117],\"./oc7j8k7y.sc.entry.js\":[\"7PxF\",0,118],\"./oiucdv63.entry.js\":[\"WjOD\",0,119],\"./oiucdv63.sc.entry.js\":[\"dBwf\",0,120],\"./pd9wflli.entry.js\":[\"PBZr\",0,121],\"./pd9wflli.sc.entry.js\":[\"BgYr\",0,122],\"./qzdsdbvt.entry.js\":[\"cPbs\",0,123],\"./qzdsdbvt.sc.entry.js\":[\"/6Db\",0,124],\"./r2tscfp8.entry.js\":[\"XuMY\",0,125],\"./r2tscfp8.sc.entry.js\":[\"5r8Y\",0,126],\"./r8dtlwvb.entry.js\":[\"8hH6\",0,127],\"./r8dtlwvb.sc.entry.js\":[\"Pcr6\",0,128],\"./r8g3twaz.entry.js\":[\"3g9k\",0,129],\"./r8g3twaz.sc.entry.js\":[\"xKOE\",0,130],\"./rkecsmgc.entry.js\":[\"cre6\",0,131],\"./rkecsmgc.sc.entry.js\":[\"XGKV\",0,132],\"./ro1otaal.entry.js\":[\"7Kh0\",0,133],\"./ro1otaal.sc.entry.js\":[\"kbEy\",0,134],\"./rrpxfm2a.entry.js\":[\"iVea\",135],\"./rrpxfm2a.sc.entry.js\":[\"v6Ak\",136],\"./senscofp.entry.js\":[\"d3d/\",0,137],\"./senscofp.sc.entry.js\":[\"zIp8\",0,138],\"./tg9wqmdk.entry.js\":[\"wMmm\",0,139],\"./tg9wqmdk.sc.entry.js\":[\"0XZO\",0,140],\"./tlbladaf.entry.js\":[\"aUan\",0,141],\"./tlbladaf.sc.entry.js\":[\"l3Lh\",0,142],\"./tn7df4wj.entry.js\":[\"vIP9\",0,143],\"./tn7df4wj.sc.entry.js\":[\"5v4X\",0,144],\"./ugd3sahs.entry.js\":[\"IAsz\",0,145],\"./ugd3sahs.sc.entry.js\":[\"jwjT\",0,146],\"./uhyavx6a.entry.js\":[\"XPFZ\",0,147],\"./uhyavx6a.sc.entry.js\":[\"D3VN\",0,148],\"./upnvzchf.entry.js\":[\"m0Ba\",0,149],\"./upnvzchf.sc.entry.js\":[\"c6gO\",0,150],\"./urrnn8ys.entry.js\":[\"hqDm\",0,151],\"./urrnn8ys.sc.entry.js\":[\"QO6I\",0,152],\"./vompwuhi.entry.js\":[\"Jjen\",0,153],\"./vompwuhi.sc.entry.js\":[\"lPwR\",0,154],\"./vypdotd0.entry.js\":[\"PNfg\",0,155],\"./vypdotd0.sc.entry.js\":[\"tLnV\",0,156],\"./wb4mk1b9.entry.js\":[\"a4A4\",0,157],\"./wb4mk1b9.sc.entry.js\":[\"seNf\",0,158],\"./wddurbsg.entry.js\":[\"VIY9\",0,159],\"./wddurbsg.sc.entry.js\":[\"7KVZ\",0,160],\"./wjdsdnuu.entry.js\":[\"OVHo\",0,161],\"./wjdsdnuu.sc.entry.js\":[\"BGQ+\",0,162],\"./wpufhrqd.entry.js\":[\"H7cr\",0,163],\"./wpufhrqd.sc.entry.js\":[\"p4xx\",0,164],\"./wrpzmdqx.entry.js\":[\"/Icf\",0,165],\"./wrpzmdqx.sc.entry.js\":[\"OfCA\",0,166],\"./wwcmkxu8.entry.js\":[\"fCCe\",0,167],\"./wwcmkxu8.sc.entry.js\":[\"zxb9\",0,168],\"./x5xnv4jv.entry.js\":[\"b0p7\",0,169],\"./x5xnv4jv.sc.entry.js\":[\"7sEN\",0,170],\"./xajhwvib.entry.js\":[\"TZsW\",0,171],\"./xajhwvib.sc.entry.js\":[\"5ftD\",0,172]};function i(t){var e=r[t];return e?Promise.all(e.slice(1).map(n.e)).then(function(){return n(e[0])}):Promise.resolve().then(function(){var e=new Error(\"Cannot find module '\"+t+\"'\");throw e.code=\"MODULE_NOT_FOUND\",e})}i.keys=function(){return Object.keys(r)},i.id=\"nFGs\",t.exports=i},nkY7:function(t,e,n){\"use strict\";function r(t){return t&&\"function\"==typeof t.schedule}n.d(e,\"a\",function(){return r})},oBZk:function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return i}),n.d(e,\"o\",function(){return o}),n.d(e,\"b\",function(){return a}),n.d(e,\"p\",function(){return s}),n.d(e,\"c\",function(){return u}),n.d(e,\"t\",function(){return c}),n.d(e,\"d\",function(){return l}),n.d(e,\"q\",function(){return h}),n.d(e,\"e\",function(){return f}),n.d(e,\"r\",function(){return d}),n.d(e,\"f\",function(){return p}),n.d(e,\"s\",function(){return y}),n.d(e,\"g\",function(){return v}),n.d(e,\"u\",function(){return m}),n.d(e,\"h\",function(){return g}),n.d(e,\"v\",function(){return b}),n.d(e,\"i\",function(){return w}),n.d(e,\"w\",function(){return _}),n.d(e,\"j\",function(){return E}),n.d(e,\"x\",function(){return S}),n.d(e,\"k\",function(){return C}),n.d(e,\"y\",function(){return T}),n.d(e,\"l\",function(){return I}),n.d(e,\"z\",function(){return k}),n.d(e,\"m\",function(){return O}),n.d(e,\"A\",function(){return N}),n.d(e,\"n\",function(){return A}),n.d(e,\"B\",function(){return D});var r=n(\"CcnG\");n(\"ZZ/e\"),n(\"Ip0R\"),n(\"ZYCi\");var i=r.nb({encapsulation:2,styles:[],data:{}});function o(t){return r.Db(2,[r.xb(null,0)],null,null)}var a=r.nb({encapsulation:2,styles:[],data:{}});function s(t){return r.Db(2,[r.xb(null,0)],null,null)}var u=r.nb({encapsulation:2,styles:[],data:{}});function c(t){return r.Db(2,[r.xb(null,0)],null,null)}var l=r.nb({encapsulation:2,styles:[],data:{}});function h(t){return r.Db(2,[r.xb(null,0)],null,null)}var f=r.nb({encapsulation:2,styles:[],data:{}});function d(t){return r.Db(2,[r.xb(null,0)],null,null)}var p=r.nb({encapsulation:2,styles:[],data:{}});function y(t){return r.Db(2,[r.xb(null,0)],null,null)}var v=r.nb({encapsulation:2,styles:[],data:{}});function m(t){return r.Db(2,[r.xb(null,0)],null,null)}var g=r.nb({encapsulation:2,styles:[],data:{}});function b(t){return r.Db(2,[r.xb(null,0)],null,null)}var w=r.nb({encapsulation:2,styles:[],data:{}});function _(t){return r.Db(2,[r.xb(null,0)],null,null)}var E=r.nb({encapsulation:2,styles:[],data:{}});function S(t){return r.Db(2,[r.xb(null,0)],null,null)}var C=r.nb({encapsulation:2,styles:[],data:{}});function T(t){return r.Db(2,[r.xb(null,0)],null,null)}var I=r.nb({encapsulation:2,styles:[],data:{}});function k(t){return r.Db(2,[r.xb(null,0)],null,null)}var O=r.nb({encapsulation:2,styles:[],data:{}});function N(t){return r.Db(2,[r.xb(null,0)],null,null)}var A=r.nb({encapsulation:2,styles:[],data:{}});function D(t){return r.Db(2,[r.xb(null,0)],null,null)}},os0x:function(t,e,n){\"use strict\";n.r(e),n.d(e,\"__extends\",function(){return i}),n.d(e,\"__assign\",function(){return o}),n.d(e,\"__rest\",function(){return a}),n.d(e,\"__decorate\",function(){return s}),n.d(e,\"__param\",function(){return u}),n.d(e,\"__metadata\",function(){return c}),n.d(e,\"__awaiter\",function(){return l}),n.d(e,\"__generator\",function(){return h}),n.d(e,\"__exportStar\",function(){return f}),n.d(e,\"__values\",function(){return d}),n.d(e,\"__read\",function(){return p}),n.d(e,\"__spread\",function(){return y}),n.d(e,\"__await\",function(){return v}),n.d(e,\"__asyncGenerator\",function(){return m}),n.d(e,\"__asyncDelegator\",function(){return g}),n.d(e,\"__asyncValues\",function(){return b}),n.d(e,\"__makeTemplateObject\",function(){return w}),n.d(e,\"__importStar\",function(){return _}),n.d(e,\"__importDefault\",function(){return E});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&\"function\"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function u(t,e){return function(n,r){e(n,r,t)}}function c(t,e){if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})}function h(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function f(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function d(t){var e=\"function\"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function p(t,e){var n=\"function\"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}function v(t){return this instanceof v?(this.v=t,this):new v(t)}function m(t,e,n){if(!Symbol.asyncIterator)throw new TypeError(\"Symbol.asyncIterator is not defined.\");var r,i=n.apply(t,e||[]),o=[];return r={},a(\"next\"),a(\"throw\"),a(\"return\"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||s(t,e)})})}function s(t,e){try{(n=i[t](e)).value instanceof v?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function u(t){s(\"next\",t)}function c(t){s(\"throw\",t)}function l(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}}function g(t){var e,n;return e={},r(\"next\"),r(\"throw\",function(t){throw t}),r(\"return\"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:v(t[r](e)),done:\"return\"===r}:i?i(e):e}:i}}function b(t){if(!Symbol.asyncIterator)throw new TypeError(\"Symbol.asyncIterator is not defined.\");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=d(t),e={},r(\"next\"),r(\"throw\"),r(\"return\"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise(function(r,i){!function(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)}(r,i,(e=t[n](e)).done,e.value)})}}}function w(t,e){return Object.defineProperty?Object.defineProperty(t,\"raw\",{value:e}):t.raw=e,t}function _(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function E(t){return t&&t.__esModule?t:{default:t}}},p0ib:function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return s});var r=n(\"6blF\"),i=n(\"nkY7\"),o=n(\"Zn8D\"),a=n(\"IUTb\");function s(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,s=null,u=t[t.length-1];return Object(i.a)(u)?(s=t.pop(),t.length>1&&\"number\"==typeof t[t.length-1]&&(n=t.pop())):\"number\"==typeof u&&(n=t.pop()),null===s&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(n)(Object(a.a)(t,s))}},pMnS:function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return u});var r=n(\"CcnG\"),i=n(\"ZYCi\"),o=r.nb({encapsulation:2,styles:[],data:{}});function a(t){return r.Db(0,[(t()(),r.pb(0,16777216,null,null,1,\"router-outlet\",[],null,null,null,null,null)),r.ob(1,212992,null,0,i.p,[i.b,r.O,r.j,[8,null],r.h],null,null)],function(t,e){t(e,1,0)},null)}function s(t){return r.Db(0,[(t()(),r.pb(0,0,null,null,1,\"ng-component\",[],null,null,null,a,o)),r.ob(1,49152,null,0,i.t,[],null,null)],null,null)}var u=r.lb(\"ng-component\",i.t,s,{},{},[])},psW0:function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return c});var r=n(\"mrSG\"),i=n(\"zotm\"),o=n(\"MGBS\"),a=n(\"rPjj\"),s=n(\"67Y/\"),u=n(\"0/uQ\");function c(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),\"function\"==typeof e?function(r){return r.pipe(c(function(n,r){return Object(u.a)(t(n,r)).pipe(Object(s.a)(function(t,i){return e(n,t,r,i)}))},n))}:(\"number\"==typeof e&&(n=e),function(e){return e.lift(new l(t,n))})}var l=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.project,this.concurrent))},t}(),h=function(t){function e(e,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=t.call(this,e)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return r.d(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=new a.a(this,void 0,void 0);this.destination.add(r),Object(i.a)(this,t,e,n,r)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(o.a)},pugT:function(t,e,n){\"use strict\";var r=n(\"isby\"),i=n(\"McSo\"),o=n(\"2Bdj\");function a(t){return Error.call(this),this.message=t?t.length+\" errors occurred during unsubscription:\\n\"+t.map(function(t,e){return e+1+\") \"+t.toString()}).join(\"\\n  \"):\"\",this.name=\"UnsubscriptionError\",this.errors=t,this}a.prototype=Object.create(Error.prototype);var s=a;n.d(e,\"a\",function(){return u});var u=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var e;if(!this.closed){var n=this._parentOrParents,a=this._unsubscribe,u=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(var l=0;l<n.length;++l)n[l].remove(this);if(Object(o.a)(a))try{a.call(this)}catch(d){e=d instanceof s?c(d.errors):[d]}if(Object(r.a)(u)){l=-1;for(var h=u.length;++l<h;){var f=u[l];if(Object(i.a)(f))try{f.unsubscribe()}catch(d){e=e||[],d instanceof s?e=e.concat(c(d.errors)):e.push(d)}}}if(e)throw new s(e)}},t.prototype.add=function(e){var n=e;if(!e)return t.EMPTY;switch(typeof e){case\"function\":n=new t(e);case\"object\":if(n===this||n.closed||\"function\"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error(\"unrecognized teardown \"+e+\" added to Subscription.\")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof t){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.EMPTY=((e=new t).closed=!0,e),t}();function c(t){return t.reduce(function(t,e){return t.concat(e instanceof s?e.errors:e)},[])}},\"pxS/\":function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return i}),n.d(e,\"b\",function(){return o});var r=n(\"KOl+\");function i(t,e){return!0===Object(r.a)(t,e)?Object(r.b)(t.constructor.getPluginRef())[e]:null}function o(t,e,n){!0===Object(r.a)(t,e)&&(Object(r.b)(t.constructor.getPluginRef())[e]=n)}},\"q/0M\":function(t,e,n){\"use strict\";n.r(e),n.d(e,\"LogLevel\",function(){return i}),n.d(e,\"Logger\",function(){return s}),n.d(e,\"setLogLevel\",function(){return u});var r=[],i=function(t){return t[t.DEBUG=0]=\"DEBUG\",t[t.VERBOSE=1]=\"VERBOSE\",t[t.INFO=2]=\"INFO\",t[t.WARN=3]=\"WARN\",t[t.ERROR=4]=\"ERROR\",t[t.SILENT=5]=\"SILENT\",t}({}),o=i.INFO,a=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var o=(new Date).toISOString();switch(e){case i.DEBUG:case i.VERBOSE:console.log.apply(console,[\"[\"+o+\"]  \"+t.name+\":\"].concat(n));break;case i.INFO:console.info.apply(console,[\"[\"+o+\"]  \"+t.name+\":\"].concat(n));break;case i.WARN:console.warn.apply(console,[\"[\"+o+\"]  \"+t.name+\":\"].concat(n));break;case i.ERROR:console.error.apply(console,[\"[\"+o+\"]  \"+t.name+\":\"].concat(n));break;default:throw new Error(\"Attempted to log a message with an invalid logType (value: \"+e+\")\")}}},s=function(){function t(t){this.name=t,this._logLevel=o,this._logHandler=a,r.push(this)}return Object.defineProperty(t.prototype,\"logLevel\",{get:function(){return this._logLevel},set:function(t){if(!(t in i))throw new TypeError(\"Invalid value assigned to `logLevel`\");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"logHandler\",{get:function(){return this._logHandler},set:function(t){if(\"function\"!=typeof t)throw new TypeError(\"Value assigned to `logHandler` must be a function\");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.DEBUG].concat(t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.VERBOSE].concat(t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.INFO].concat(t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.WARN].concat(t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.ERROR].concat(t))},t}();function u(t){r.forEach(function(e){e.logLevel=t})}},rPjj:function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return i});var r=n(\"mrSG\"),i=function(t){function e(e,n,r){var i=t.call(this)||this;return i.parent=e,i.outerValue=n,i.outerIndex=r,i.index=0,i}return r.d(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(n(\"FFOo\").a)},wj3C:function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r,i=n(\"30Go\"),o=n(\"zVF4\"),a=n(\"q/0M\"),s=((r={})[\"no-app\"]=\"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()\",r[\"bad-app-name\"]=\"Illegal App name: '{$name}\",r[\"duplicate-app\"]=\"Firebase App named '{$name}' already exists\",r[\"app-deleted\"]=\"Firebase App named '{$name}' already deleted\",r[\"duplicate-service\"]=\"Firebase service named '{$name}' already registered\",r[\"invalid-app-argument\"]=\"firebase.{$name}() takes either no argument or a Firebase App instance.\",r),u=new o.ErrorFactory(\"app\",\"Firebase\",s),c=\"[DEFAULT]\",l=[],h=function(){function t(t,e,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=o.deepCopy(t),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(t){l.push(t),setTimeout(function(){return t(null)},0)},removeAuthTokenListener:function(t){l=l.filter(function(e){return e!==t})}}}return Object.defineProperty(t.prototype,\"automaticDataCollectionEnabled\",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"name\",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"options\",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){t.firebase_.INTERNAL.removeApp(t.name_);for(var e=[],n=0,r=Object.keys(t.services_);n<r.length;n++)for(var i=r[n],o=0,a=Object.keys(t.services_[i]);o<a.length;o++)e.push(t.services_[i][a[o]]);return Promise.all(e.filter(function(t){return\"INTERNAL\"in t}).map(function(t){return t.INTERNAL.delete()}))}).then(function(){t.isDeleted_=!0,t.services_={}})},t.prototype._getService=function(t,e){if(void 0===e&&(e=c),this.checkDestroyed_(),this.services_[t]||(this.services_[t]={}),!this.services_[t][e]){var n=e!==c?e:void 0,r=this.firebase_.INTERNAL.factories[t](this,this.extendApp.bind(this),n);this.services_[t][e]=r}return this.services_[t][e]},t.prototype.extendApp=function(t){var e=this;o.deepExtend(this,t),t.INTERNAL&&t.INTERNAL.addAuthTokenListener&&(l.forEach(function(t){e.INTERNAL.addAuthTokenListener(t)}),l=[])},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw u.create(\"app-deleted\",{name:this.name_})},t}();h.prototype.name&&h.prototype.options||h.prototype.delete||console.log(\"dc\");var f=new a.Logger(\"@firebase/app\");if(o.isBrowser()&&void 0!==self.firebase){f.warn(\"\\n    Warning: Firebase is already defined in the global scope. Please make sure\\n    Firebase library is only loaded once.\\n  \");var d=self.firebase.SDK_VERSION;d&&d.indexOf(\"LITE\")>=0&&f.warn(\"\\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\\n    \")}var p=function t(){var e=function(t){var e={},n={},r={},i={__esModule:!0,initializeApp:function(n,r){void 0===r&&(r={}),(\"object\"!=typeof r||null===r)&&(r={name:r});var a=r;void 0===a.name&&(a.name=c);var s=a.name;if(\"string\"!=typeof s||!s)throw u.create(\"bad-app-name\",{name:String(s)});if(o.contains(e,s))throw u.create(\"duplicate-app\",{name:s});var h=new t(n,a,i);return e[s]=h,l(h,\"create\"),h},app:a,apps:null,SDK_VERSION:\"6.2.3\",INTERNAL:{registerService:function(e,c,l,h,f){if(void 0===f&&(f=!1),n[e])throw u.create(\"duplicate-service\",{name:e});function d(t){if(void 0===t&&(t=a()),\"function\"!=typeof t[e])throw u.create(\"invalid-app-argument\",{name:e});return t[e]()}return n[e]=c,h&&(r[e]=h,s().forEach(function(t){h(\"create\",t)})),void 0!==l&&o.deepExtend(d,l),i[e]=d,t.prototype[e]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this._getService.bind(this,e).apply(this,f?t:[])},d},removeApp:function(t){l(e[t],\"delete\"),delete e[t]},factories:n,useAsService:h}};function a(t){if(!o.contains(e,t=t||c))throw u.create(\"no-app\",{name:t});return e[t]}function s(){return Object.keys(e).map(function(t){return e[t]})}function l(t,e){for(var i=0,o=Object.keys(n);i<o.length;i++){var a=h(0,o[i]);if(null===a)return;r[a]&&r[a](e,t)}}function h(t,e){return\"serverAuth\"===e?null:e}return i.default=i,Object.defineProperty(i,\"apps\",{get:s}),a.App=t,i}(h);return e.INTERNAL=i.__assign({},e.INTERNAL,{createFirebaseNamespace:t,extendNamespace:function(t){o.deepExtend(e,t)},createSubscribe:o.createSubscribe,ErrorFactory:o.ErrorFactory,deepExtend:o.deepExtend}),e}(),y=p.initializeApp;p.initializeApp=function(){return o.isNode()&&f.warn('\\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\\n      run in a Node environment.  If running in a Node environment, make sure you\\n      are using the bundle specified by the \"main\" field in package.json.\\n      \\n      If you are using Webpack, you can specify \"main\" as the first item in\\n      \"resolve.mainFields\":\\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\\n      \\n      If using Rollup, use the rollup-plugin-node-resolve plugin and set \"module\"\\n      to false and \"main\" to true:\\n      https://github.com/rollup/rollup-plugin-node-resolve\\n      '),y.apply(void 0,arguments)};var v=p;e.default=v,e.firebase=v},x7I3:function(t,e,n){\"use strict\";n.r(e),n.d(e,\"ErrorCode\",function(){return sr}),n.d(e,\"EventType\",function(){return ur}),n.d(e,\"WebChannel\",function(){return cr}),n.d(e,\"XhrIo\",function(){return lr}),n.d(e,\"createWebChannelTransport\",function(){return ar});var r,i=\"undefined\"!=typeof globalThis?globalThis:\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:{},o=o||{},a=i;function s(t){return\"string\"==typeof t}function u(t){return\"number\"==typeof t}function c(t,e){t=t.split(\".\"),e=e||a;for(var n=0;n<t.length;n++)if(null==(e=e[t[n]]))return null;return e}function l(){}function h(t){var e=typeof t;if(\"object\"==e){if(!t)return\"null\";if(t instanceof Array)return\"array\";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if(\"[object Window]\"==n)return\"object\";if(\"[object Array]\"==n||\"number\"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable(\"splice\"))return\"array\";if(\"[object Function]\"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable(\"call\"))return\"function\"}else if(\"function\"==e&&void 0===t.call)return\"object\";return e}function f(t){return\"array\"==h(t)}function d(t){var e=h(t);return\"array\"==e||\"object\"==e&&\"number\"==typeof t.length}function p(t){var e=typeof t;return\"object\"==e&&null!=t||\"function\"==e}var y=\"closure_uid_\"+(1e9*Math.random()>>>0),v=0;function m(t,e,n){return t.call.apply(t.bind,arguments)}function g(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf(\"native code\")?m:g).apply(null,arguments)}function w(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var _=Date.now||function(){return+new Date};function E(t,e){function n(){}n.prototype=e.prototype,t.N=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.yb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function S(){this.j=this.j,this.i=this.i}S.prototype.j=!1,S.prototype.la=function(){!this.j&&(this.j=!0,this.G(),0)&&(this[y]||(this[y]=++v))},S.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var C=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(s(t))return s(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},T=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=s(t)?t.split(\"\"):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function I(t){return Array.prototype.concat.apply([],arguments)}function k(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function O(t){return/^[\\s\\xa0]*$/.test(t)}var N,A=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\\s\\xa0]*([\\s\\S]*?)[\\s\\xa0]*$/.exec(t)[1]};function D(t,e){return-1!=t.indexOf(e)}function x(t,e){return t<e?-1:t>e?1:0}t:{var R=a.navigator;if(R){var P=R.userAgent;if(P){N=P;break t}}N=\"\"}function M(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function j(t){var e,n={};for(e in t)n[e]=t[e];return n}var L=\"constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf\".split(\" \");function F(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<L.length;o++)n=L[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function q(t){return q[\" \"](t),t}q[\" \"]=l;var U,V,B=D(N,\"Opera\"),W=D(N,\"Trident\")||D(N,\"MSIE\"),z=D(N,\"Edge\"),H=z||W,Q=D(N,\"Gecko\")&&!(D(N.toLowerCase(),\"webkit\")&&!D(N,\"Edge\"))&&!(D(N,\"Trident\")||D(N,\"MSIE\"))&&!D(N,\"Edge\"),K=D(N.toLowerCase(),\"webkit\")&&!D(N,\"Edge\");function G(){var t=a.document;return t?t.documentMode:void 0}t:{var Y=\"\",X=(V=N,Q?/rv:([^\\);]+)(\\)|;)/.exec(V):z?/Edge\\/([\\d\\.]+)/.exec(V):W?/\\b(?:MSIE|rv)[: ]([^\\);]+)(\\)|;)/.exec(V):K?/WebKit\\/(\\S+)/.exec(V):B?/(?:Version)[ \\/]?(\\S+)/.exec(V):void 0);if(X&&(Y=X?X[1]:\"\"),W){var J=G();if(null!=J&&J>parseFloat(Y)){U=String(J);break t}}U=Y}var Z,$={};function tt(t){return function(t,e){var n=$;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=A(String(U)).split(\".\"),r=A(String(t)).split(\".\"),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||\"\",s=r[o]||\"\";do{if(a=/(\\d*)(\\D*)(.*)/.exec(a)||[\"\",\"\",\"\",\"\"],s=/(\\d*)(\\D*)(.*)/.exec(s)||[\"\",\"\",\"\",\"\"],0==a[0].length&&0==s[0].length)break;e=x(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||x(0==a[2].length,0==s[2].length)||x(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e})}var et=a.document;Z=et&&W?G()||(\"CSS1Compat\"==et.compatMode?parseInt(U,10):5):void 0;var nt=!W||9<=Number(Z),rt=W&&!tt(\"9\"),it=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},\"passive\",{get:function(){t=!0}});try{a.addEventListener(\"test\",l,e),a.removeEventListener(\"test\",l,e)}catch(n){}return t}();function ot(t,e){this.type=t,this.a=this.target=e,this.Ja=!0}function at(t,e){if(ot.call(this,t?t.type:\"\"),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key=\"\",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType=\"\",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Q){t:{try{q(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else\"mouseover\"==n?e=t.fromElement:\"mouseout\"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||\"\",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=s(t.pointerType)?t.pointerType:st[t.pointerType]||\"\",this.c=t,t.defaultPrevented&&this.b()}}ot.prototype.b=function(){this.Ja=!1},E(at,ot);var st={2:\"touch\",3:\"pen\",4:\"mouse\"};at.prototype.b=function(){at.N.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,rt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var ut=\"closure_listenable_\"+(1e6*Math.random()|0),ct=0;function lt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.da=i,this.key=++ct,this.X=this.Z=!1}function ht(t){t.X=!0,t.listener=null,t.proxy=null,t.src=null,t.da=null}function ft(t){this.src=t,this.a={},this.b=0}function dt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=C(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ht(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function pt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.X&&o.listener==e&&o.capture==!!n&&o.da==r)return i}return-1}ft.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=pt(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):((e=new lt(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var yt=\"closure_lm_\"+(1e6*Math.random()|0),vt={};function mt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(f(n)){for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);return null}return r=Ct(r),e&&e[ut]?e.Ba(n,r,p(i)?!!i.capture:!!i,o):gt(e,n,r,!0,i,o)}(t,e,n,r,i);if(f(e)){for(var o=0;o<e.length;o++)mt(t,e[o],n,r,i);return null}return n=Ct(n),t&&t[ut]?t.Aa(e,n,p(r)?!!r.capture:!!r,i):gt(t,e,n,!1,r,i)}function gt(t,e,n,r,i,o){if(!e)throw Error(\"Invalid event type\");var a=p(i)?!!i.capture:!!i;if(a&&!nt)return null;var s=Et(t);if(s||(t[yt]=s=new ft(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=_t,e=nt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)it||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(wt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error(\"addEventListener and attachEvent are unavailable.\");t.addListener(r)}return n}function bt(t){if(!u(t)&&t&&!t.X){var e=t.src;if(e&&e[ut])dt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(wt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Et(e))?(dt(n,t),0==n.b&&(n.src=null,e[yt]=null)):ht(t)}}}function wt(t){return t in vt?vt[t]:vt[t]=\"on\"+t}function _t(t,e){return!!t.X||function(t,e){var n=t.listener,r=t.da||t.src;return t.Z&&bt(t),n.call(r,e)}(t,nt?new at(e,this):e=new at(e||c(\"window.event\"),this))}function Et(t){return(t=t[yt])instanceof ft?t:null}var St=\"__closure_events_fn_\"+(1e9*Math.random()>>>0);function Ct(t){return\"function\"==h(t)?t:(t[St]||(t[St]=function(e){return t.handleEvent(e)}),t[St])}function Tt(){S.call(this),this.c=new ft(this),this.J=this,this.B=null}function It(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.X&&a.capture==n){var s=a.listener,u=a.da||a.src;a.Z&&dt(t.c,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Ja}E(Tt,S),Tt.prototype[ut]=!0,(r=Tt.prototype).addEventListener=function(t,e,n,r){mt(this,t,e,n,r)},r.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(f(n))for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);else i=p(i)?!!i.capture:!!i,r=Ct(r),e&&e[ut]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=pt(a=e.a[n],r,i,o))&&(ht(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete e.a[n],e.b--))):e&&(e=Et(e))&&(n=e.a[n.toString()],e=-1,n&&(e=pt(n,r,i,o)),(r=-1<e?n[e]:null)&&bt(r))}(this,t,e,n,r)},r.dispatchEvent=function(t){var e,n=this.B;if(n)for(e=[];n;n=n.B)e.push(n);n=this.J;var r=t.type||t;if(s(t))t=new ot(t,n);else if(t instanceof ot)t.target=t.target||n;else{var i=t;F(t=new ot(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.a=e[o];i=It(a,r,!0,t)&&i}if(i=It(a=t.a=n,r,!0,t)&&i,i=It(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=It(a=t.a=e[o],r,!1,t)&&i;return i},r.G=function(){if(Tt.N.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ht(n[r]);delete e.a[t],e.b--}}this.B=null},r.Aa=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},r.Ba=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var kt=a.JSON.stringify;function Ot(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function Nt(){this.b=this.a=null}Ot.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var At,Dt=new Ot(function(){return new Rt},function(t){t.reset()});function xt(){var t=Lt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Rt(){this.next=this.b=this.a=null}function Pt(t){a.setTimeout(function(){throw t},0)}function Mt(t,e){At||function(){var t=a.Promise.resolve(void 0);At=function(){t.then(Ft)}}(),jt||(At(),jt=!0),Lt.add(t,e)}Nt.prototype.add=function(t,e){var n=Dt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Rt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Rt.prototype.reset=function(){this.next=this.b=this.a=null};var jt=!1,Lt=new Nt;function Ft(){for(var t;t=xt();){try{t.a.call(t.b)}catch(n){Pt(n)}var e=Dt;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}jt=!1}function qt(t,e){Tt.call(this),this.b=t||1,this.a=e||a,this.f=b(this.gb,this),this.g=_()}function Ut(t){t.ba=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function Vt(t,e,n){if(\"function\"==h(t))n&&(t=b(t,n));else{if(!t||\"function\"!=typeof t.handleEvent)throw Error(\"Invalid listener argument\");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function Bt(t,e,n){S.call(this),this.f=null!=n?b(t,n):t,this.c=e,this.b=b(this.ab,this),this.a=[]}function Wt(t){t.U=Vt(t.b,t.c),t.f.apply(null,t.a)}function zt(t){S.call(this),this.b=t,this.a={}}E(qt,Tt),(r=qt.prototype).ba=!1,r.L=null,r.gb=function(){if(this.ba){var t=_()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent(\"tick\"),this.ba&&(Ut(this),this.start()))}},r.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=_())},r.G=function(){qt.N.G.call(this),Ut(this),delete this.a},E(Bt,S),(r=Bt.prototype).ea=!1,r.U=null,r.Ua=function(t){this.a=arguments,this.U?this.ea=!0:Wt(this)},r.G=function(){Bt.N.G.call(this),this.U&&(a.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},r.ab=function(){this.U=null,this.ea&&(this.ea=!1,Wt(this))},E(zt,S);var Ht=[];function Qt(t,e,n,r){f(n)||(n&&(Ht[0]=n.toString()),n=Ht);for(var i=0;i<n.length;i++){var o=mt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Kt(t){M(t.a,function(t,e){this.a.hasOwnProperty(e)&&bt(t)},t),t.a={}}function Gt(){}zt.prototype.G=function(){zt.N.G.call(this),Kt(this)},zt.prototype.handleEvent=function(){throw Error(\"EventHandler.handleEvent not implemented\")};var Yt=new Tt;function Xt(t){ot.call(this,\"serverreachability\",t)}function Jt(t){Yt.dispatchEvent(new Xt(Yt,t))}function Zt(t){ot.call(this,\"statevent\",t)}function $t(t){Yt.dispatchEvent(new Zt(Yt,t))}function te(t){ot.call(this,\"timingevent\",t)}function ee(t,e){if(\"function\"!=h(t))throw Error(\"Fn must not be null and must be a function\");return a.setTimeout(function(){t()},e)}E(Xt,ot),E(Zt,ot),E(te,ot);var ne={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,Ma:7,TIMEOUT:8,sb:9},re={jb:\"complete\",wb:\"success\",Na:\"error\",Ma:\"abort\",ub:\"ready\",vb:\"readystatechange\",TIMEOUT:\"timeout\",qb:\"incrementaldata\",tb:\"progress\",lb:\"downloadprogress\",xb:\"uploadprogress\"};function ie(){}function oe(){}ie.prototype.a=null;var ae,se={OPEN:\"a\",ib:\"b\",Na:\"c\",rb:\"d\"};function ue(){ot.call(this,\"d\")}function ce(){ot.call(this,\"c\")}function le(){}function he(t,e,n){this.g=t,this.W=e,this.V=n||1,this.I=new zt(this),this.O=fe,this.P=new qt(t=H?125:void 0),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}E(ue,ot),E(ce,ot),E(le,ie),ae=new le;var fe=45e3,de={},pe={};function ye(t,e,n){t.F=1,t.f=Ue(Re(e)),t.l=n,t.H=!0,me(t,null)}function ve(t,e,n,r){t.F=1,t.f=Ue(Re(e)),t.l=null,t.H=n,me(t,r)}function me(t,e){t.v=_(),we(t),t.D=Re(t.f),qe(t.D,\"t\",t.V),t.A=0,t.a=t.g.$(t.g.Y()?e:null),0<t.J&&(t.B=new Bt(b(t.Ka,t,t.a),t.J)),Qt(t.I,t.a,\"readystatechange\",t.eb),e=t.h?j(t.h):{},t.l?(t.w||(t.w=\"POST\"),e[\"Content-Type\"]=\"application/x-www-form-urlencoded\",t.a.ca(t.D,t.w,t.l,e)):(t.w=\"GET\",t.a.ca(t.D,t.w,null,e)),Jt(1)}function ge(t,e,n){for(var r=!0;!t.m&&t.A<n.length;){var i=be(t,n);if(i==pe){4==e&&(t.c=4,$t(14),r=!1);break}if(i==de){t.c=4,$t(15),r=!1;break}Te(t,i)}4==e&&0==n.length&&(t.c=1,$t(16),r=!1),t.b=t.b&&r,r||(Ce(t),Se(t))}function be(t,e){var n=t.A,r=e.indexOf(\"\\n\",n);return-1==r?pe:(n=Number(e.substring(n,r)),isNaN(n)?de:(r+=1)+n>e.length?pe:(e=e.substr(r,n),t.A=r+n,e))}function we(t){t.R=_()+t.O,_e(t,t.O)}function _e(t,e){if(null!=t.i)throw Error(\"WatchDog timer not null\");t.i=ee(b(t.bb,t),e)}function Ee(t){t.i&&(a.clearTimeout(t.i),t.i=null)}function Se(t){t.g.Da()||t.m||t.g.na(t)}function Ce(t){Ee(t);var e=t.B;e&&\"function\"==typeof e.la&&e.la(),t.B=null,Ut(t.P),Kt(t.I),t.a&&(e=t.a,t.a=null,e.abort(),e.la())}function Te(t,e){try{t.g.Ga(t,e),Jt(4)}catch(n){}}function Ie(t,e){if(t.forEach&&\"function\"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||s(t))T(t,e,void 0);else{if(t.K&&\"function\"==typeof t.K)var n=t.K();else if(t.C&&\"function\"==typeof t.C)n=void 0;else if(d(t)||s(t)){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.C&&\"function\"==typeof t.C)return t.C();if(s(t))return t.split(\"\");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function ke(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error(\"Uneven number of arguments\");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof ke)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Oe(t,e){Ae(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ne(t))}function Ne(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ae(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Ae(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Ae(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(r=he.prototype).setTimeout=function(t){this.O=t},r.eb=function(t){t=t.target;var e=this.B;e&&3==Rn(t)?e.Ua():this.Ka(t)},r.Ka=function(t){try{if(t==this.a)t:{var e=Rn(this.a),n=this.a.ya(),r=this.a.T();if(!(3>e||3==e&&!H&&!this.a.aa())){this.m||4!=e||7==n||Jt(8==n||0>=r?3:2),Ee(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){e:{if(this.a){var a=Pn(this.a,\"X-HTTP-Initial-Response\");if(a&&!O(a)){var s=a;break e}}s=null}if(!s){this.b=!1,this.c=3,$t(12),Ce(this),Se(this);break t}this.s=!0,Te(this,s)}this.H?(ge(this,e,o),H&&this.b&&3==e&&(Qt(this.I,this.P,\"tick\",this.cb),this.P.start())):Te(this,o),4==e&&Ce(this),this.b&&!this.m&&(4==e?this.g.na(this):(this.b=!1,we(this)))}else 400==i&&0<o.indexOf(\"Unknown SID\")?(this.c=3,$t(12)):(this.c=0,$t(13)),Ce(this),Se(this)}}}catch(u){}},r.cb=function(){if(this.a){var t=Rn(this.a),e=this.a.aa();this.A<e.length&&(Ee(this),ge(this,t,e),this.b&&4!=t&&we(this))}},r.cancel=function(){this.m=!0,Ce(this)},r.bb=function(){this.i=null;var t=_();0<=t-this.R?(2!=this.F&&(Jt(3),$t(17)),Ce(this),this.c=2,Se(this)):_e(this,this.R-t)},(r=ke.prototype).C=function(){Ne(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},r.K=function(){return Ne(this),this.a.concat()},r.get=function(t,e){return Ae(this.b,t)?this.b[t]:e},r.set=function(t,e){Ae(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},r.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var De=/^(?:([^:\\/?#.]+):)?(?:\\/\\/(?:([^\\/?#]*)@)?([^\\/#?]*?)(?::([0-9]+))?(?=[\\/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$/;function xe(t,e){var n;this.b=this.j=this.f=\"\",this.i=null,this.g=this.a=\"\",this.h=!1,t instanceof xe?(this.h=void 0!==e?e:t.h,Pe(this,t.f),this.j=t.j,Me(this,t.b),je(this,t.i),this.a=t.a,Le(this,tn(t.c)),this.g=t.g):t&&(n=String(t).match(De))?(this.h=!!e,Pe(this,n[1]||\"\",!0),this.j=Ve(n[2]||\"\"),Me(this,n[3]||\"\",!0),je(this,n[4]),this.a=Ve(n[5]||\"\",!0),Le(this,n[6]||\"\",!0),this.g=Ve(n[7]||\"\")):(this.h=!!e,this.c=new Ye(null,this.h))}function Re(t){return new xe(t)}function Pe(t,e,n){t.f=n?Ve(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,\"\"))}function Me(t,e,n){t.b=n?Ve(e,!0):e}function je(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error(\"Bad port number \"+e);t.i=e}else t.i=null}function Le(t,e,n){e instanceof Ye?(t.c=e,function(t,e){e&&!t.f&&(Xe(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Je(this,e),$e(this,n,t))},t)),t.f=e}(t.c,t.h)):(n||(e=Be(e,Ke)),t.c=new Ye(e,t.h))}function Fe(t,e,n){t.c.set(e,n)}function qe(t,e,n){f(n)||(n=[String(n)]),$e(t.c,e,n)}function Ue(t){return Fe(t,\"zx\",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^_()).toString(36)),t}function Ve(t,e){return t?e?decodeURI(t.replace(/%25/g,\"%2525\")):decodeURIComponent(t):\"\"}function Be(t,e,n){return s(t)?(t=encodeURI(t).replace(e,We),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,\"%$1\")),t):null}function We(t){return\"%\"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}xe.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Be(e,ze,!0),\":\");var n=this.b;return(n||\"file\"==e)&&(t.push(\"//\"),(e=this.j)&&t.push(Be(e,ze,!0),\"@\"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,\"%$1\")),null!=(n=this.i)&&t.push(\":\",String(n))),(n=this.a)&&(this.b&&\"/\"!=n.charAt(0)&&t.push(\"/\"),t.push(Be(n,\"/\"==n.charAt(0)?Qe:He,!0))),(n=this.c.toString())&&t.push(\"?\",n),(n=this.g)&&t.push(\"#\",Be(n,Ge)),t.join(\"\")},xe.prototype.resolve=function(t){var e=Re(this),n=!!t.f;n?Pe(e,t.f):n=!!t.j,n?e.j=t.j:n=!!t.b,n?Me(e,t.b):n=null!=t.i;var r=t.a;if(n)je(e,t.i);else if(n=!!t.a){if(\"/\"!=r.charAt(0))if(this.b&&!this.a)r=\"/\"+r;else{var i=e.a.lastIndexOf(\"/\");-1!=i&&(r=e.a.substr(0,i+1)+r)}if(\"..\"==(i=r)||\".\"==i)r=\"\";else if(D(i,\"./\")||D(i,\"/.\")){r=0==i.lastIndexOf(\"/\",0),i=i.split(\"/\");for(var o=[],a=0;a<i.length;){var s=i[a++];\".\"==s?r&&a==i.length&&o.push(\"\"):\"..\"==s?((1<o.length||1==o.length&&\"\"!=o[0])&&o.pop(),r&&a==i.length&&o.push(\"\")):(o.push(s),r=!0)}r=o.join(\"/\")}else r=i}return n?e.a=r:n=\"\"!==t.c.toString(),n?Le(e,tn(t.c)):n=!!t.g,n&&(e.g=t.g),e};var ze=/[#\\/\\?@]/g,He=/[#\\?:]/g,Qe=/[#\\?]/g,Ke=/[#\\?@]/g,Ge=/#/g;function Ye(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Xe(t){t.a||(t.a=new ke,t.b=0,t.c&&function(t,e){if(t){t=t.split(\"&\");for(var n=0;n<t.length;n++){var r=t[n].indexOf(\"=\"),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\\+/g,\" \")):\"\")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\\+/g,\" \")),n)}))}function Je(t,e){Xe(t),e=en(t,e),Ae(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Oe(t.a,e))}function Ze(t,e){return Xe(t),e=en(t,e),Ae(t.a.b,e)}function $e(t,e,n){Je(t,e),0<n.length&&(t.c=null,t.a.set(en(t,e),k(n)),t.b+=n.length)}function tn(t){var e=new Ye;return e.c=t.c,t.a&&(e.a=new ke(t.a),e.b=t.b),e}function en(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function nn(t){this.a=t,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function rn(t){var e=t.a.F.a;if(null!=e)$t(4),e?($t(10),Qn(t.a,t,!1)):($t(11),Qn(t.a,t,!0));else{t.b=new he(t,void 0,void 0),t.b.h=t.h,e=Jn(e=t.a,e.Y()?t.f:null,t.i),$t(4),qe(e,\"TYPE\",\"xmlhttp\");var n=t.a.j,r=t.a.I;n&&r&&Fe(e,n,r),ve(t.b,e,!1,t.f)}}function on(){this.a=this.b=null}function an(){this.a=new ke}function sn(t){var e=typeof t;return\"object\"==e&&t||\"function\"==e?\"o\"+(t[y]||(t[y]=++v)):e.charAt(0)+t}function un(t,e){this.b=t,this.a=e}function cn(t){this.g=t||ln,t=a.PerformanceNavigationTiming?0<(t=a.performance.getEntriesByType(\"navigation\")).length&&(\"hq\"==t[0].nextHopProtocol||\"h2\"==t[0].nextHopProtocol):!!(a.ka&&a.ka.Ea&&a.ka.Ea()&&a.ka.Ea().zb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new an),this.b=null,this.c=[]}(r=Ye.prototype).add=function(t,e){Xe(this),this.c=null,t=en(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},r.forEach=function(t,e){Xe(this),this.a.forEach(function(n,r){T(n,function(n){t.call(e,n,r,this)},this)},this)},r.K=function(){Xe(this);for(var t=this.a.C(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},r.C=function(t){Xe(this);var e=[];if(s(t))Ze(this,t)&&(e=I(e,this.a.get(en(this,t))));else{t=this.a.C();for(var n=0;n<t.length;n++)e=I(e,t[n])}return e},r.set=function(t,e){return Xe(this),this.c=null,Ze(this,t=en(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},r.get=function(t,e){return t&&0<(t=this.C(t)).length?String(t[0]):e},r.toString=function(){if(this.c)return this.c;if(!this.a)return\"\";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var a=i;\"\"!==r[o]&&(a+=\"=\"+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join(\"&\")},E(function(){},function(){}),(r=nn.prototype).M=null,r.$=function(t){return this.a.$(t)},r.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},r.Da=function(){return!1},r.Ga=function(t,e){if(this.c=t.o,0==this.M){if(!this.a.o&&(t=t.a)){var n=Pn(t,\"X-Client-Wire-Protocol\");this.l=n||null,this.a.j&&(t=Pn(t,\"X-HTTP-Session-Id\"))&&(this.a.I=t)}if(e){try{var r=this.a.ja.a.parse(e)}catch(i){return(e=this.a).m=this.c,void Yn(e,2)}this.f=r[0]}else(e=this.a).m=this.c,Yn(e,2)}else 1==this.M&&(this.g?$t(6):\"11111\"==e?($t(5),this.g=!0,(!W||10<=Number(Z))&&(this.c=200,this.b.cancel(),$t(11),Qn(this.a,this,!0))):($t(7),this.g=!1))},r.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,rn(this)):1==this.M&&(this.g?($t(11),Qn(this.a,this,!0)):($t(10),Qn(this.a,this,!1)));else{0==this.M?$t(8):1==this.M&&$t(9);var t=this.a;t.m=this.c,Yn(t,2)}},r.Y=function(){return this.a.Y()},r.ma=function(){return this.a.ma()},an.prototype.add=function(t){this.a.set(sn(t),t)},an.prototype.C=function(){return this.a.C()};var ln=10;function hn(t,e){!t.a&&(D(e,\"spdy\")||D(e,\"quic\")||D(e,\"h2\"))&&(t.f=t.g,t.a=new an,t.b&&(yn(t,t.b),t.b=null))}function fn(t){return!!t.b||!!t.a&&t.a.a.c>=t.f}function dn(t){return t.b?1:t.a?t.a.a.c:0}function pn(t,e){return t.b?t=t.b==e:t.a?(e=sn(e),t=Ae(t.a.a.b,e)):t=!1,t}function yn(t,e){t.a?t.a.add(e):t.b=e}function vn(t,e){var n;t.b&&t.b==e?t.b=null:((n=t.a)&&(n=sn(e),n=Ae(t.a.a.b,n)),n&&Oe(t.a.a,sn(e)))}function mn(t){if(null!=t.b)return t.c.concat(t.b.j);if(null!=t.a&&0!=t.a.a.c){var e=t.c;return T(t.a.C(),function(t){e=e.concat(t.j)}),e}return k(t.c)}function gn(){}function bn(){this.a=new gn}function wn(t,e,n){var r=n||\"\";try{Ie(t,function(t,n){var i=t;p(t)&&(i=kt(t)),e.push(r+n+\"=\"+encodeURIComponent(i))})}catch(i){throw e.push(r+\"type=\"+encodeURIComponent(\"_badmap\")),i}}function _n(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}cn.prototype.cancel=function(){var t;this.c=mn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(T(this.a.C(),function(t){t.cancel()}),(t=this.a.a).b={},t.a.length=0,t.c=0)},gn.prototype.stringify=function(t){return a.JSON.stringify(t,void 0)},gn.prototype.parse=function(t){return a.JSON.parse(t,void 0)};var En=a.JSON.parse;function Sn(t){Tt.call(this),this.headers=new ke,this.H=t||null,this.b=!1,this.s=this.a=null,this.A=\"\",this.h=0,this.f=\"\",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=Cn,this.D=this.F=!1}E(Sn,Tt);var Cn=\"\",Tn=/^https?$/i,In=[\"POST\",\"PUT\"];function kn(t){return\"content-type\"==t.toLowerCase()}function On(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Nn(t),Dn(t)}function Nn(t){t.v||(t.v=!0,t.dispatchEvent(\"complete\"),t.dispatchEvent(\"error\"))}function An(t){if(t.b&&void 0!==o&&(!t.s[1]||4!=Rn(t)||2!=t.T()))if(t.l&&4==Rn(t))Vt(t.Fa,0,t);else if(t.dispatchEvent(\"readystatechange\"),4==Rn(t)){t.b=!1;try{var e,n=t.T();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var s=String(t.A).match(De)[1]||null;if(!s&&a.self&&a.self.location){var u=a.self.location.protocol;s=u.substr(0,u.length-1)}i=!Tn.test(s?s.toLowerCase():\"\")}e=i}e?(t.dispatchEvent(\"complete\"),t.dispatchEvent(\"success\")):(t.h=6,t.f=t.za()+\" [\"+t.T()+\"]\",Nn(t))}finally{Dn(t)}}}function Dn(t,e){if(t.a){xn(t);var n=t.a,r=t.s[0]?l:null;t.a=null,t.s=null,e||t.dispatchEvent(\"ready\");try{n.onreadystatechange=r}catch(i){}}}function xn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(a.clearTimeout(t.m),t.m=null)}function Rn(t){return t.a?t.a.readyState:0}function Pn(t,e){return t.a?t.a.getResponseHeader(e):null}function Mn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}if(r)return t;if(n=function(t){var e=\"\";return M(n,function(t,n){e+=n,e+=\":\",e+=t,e+=\"\\r\\n\"}),e}(),s(t)){if(e=encodeURIComponent(String(e)),e+=n=null!=n?\"=\"+encodeURIComponent(String(n)):\"\"){if(0>(n=t.indexOf(\"#\"))&&(n=t.length),0>(r=t.indexOf(\"?\"))||r>n){r=n;var i=\"\"}else i=t.substring(r+1,n);n=(t=[t.substr(0,r),i,t.substr(n)])[1],t[1]=e?n?n+\"&\"+e:e:n,t=t[0]+(t[1]?\"?\"+t[1]:\"\")+t[2]}return t}return Fe(t,e,n),t}function jn(t){this.f=[],this.F=new on,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Ra=this.P=0,this.Pa=!!c(\"internalChannelParams.failFast\",t),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Oa=c(\"internalChannelParams.baseRetryDelayMs\",t)||5e3,this.Sa=c(\"internalChannelParams.retryDelaySeedMs\",t)||1e4,this.Qa=c(\"internalChannelParams.forwardChannelMaxRetries\",t)||2,this.qa=c(\"internalChannelParams.forwardChannelRequestTimeoutMs\",t)||2e4,this.La=t&&t.Ab||void 0,this.D=void 0,this.R=t&&t.supportsCrossDomainXhr||!1,this.H=\"\",this.b=new cn(t&&t.concurrentRequestLimit),this.ja=new bn,this.o=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,(this.W=t&&t.fastHandshake||!1)&&!this.o&&(this.o=!0),t&&t.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Ln(t){if(Fn(t),3==t.u){var e=t.P++,n=Re(t.B);Fe(n,\"SID\",t.H),Fe(n,\"RID\",e),Fe(n,\"TYPE\",\"terminate\"),Bn(t,n),(e=new he(t,e,void 0)).F=2,e.f=Ue(Re(n)),n=!1,a.navigator&&a.navigator.sendBeacon&&(n=a.navigator.sendBeacon(e.f.toString(),\"\")),!n&&a.Image&&((new Image).src=e.f,n=!0),n||(e.a=e.g.$(null),e.a.ca(e.f)),e.v=_(),we(e)}Xn(t)}function Fn(t){t.w&&(t.w.abort(),t.w=null),t.a&&(t.a.cancel(),t.a=null),t.l&&(a.clearTimeout(t.l),t.l=null),Kn(t),t.b.cancel(),t.h&&(u(t.h)&&a.clearTimeout(t.h),t.h=null)}function qn(t,e){t.f.push(new un(t.Ra++,e)),3==t.u&&Un(t)}function Un(t){fn(t.b)||t.h||(t.h=!0,Mt(t.Ia,t),t.A=0)}function Vn(t,e){var n;n=e?e.W:t.P++;var r=Re(t.B);Fe(r,\"SID\",t.H),Fe(r,\"RID\",n),Fe(r,\"AID\",t.O),Bn(t,r),t.g&&t.i&&Mn(r,t.g,t.i),n=new he(t,n,t.A+1),null===t.g&&(n.h=t.i),e&&(t.f=e.j.concat(t.f)),e=Wn(t,n,1e3),n.setTimeout(Math.round(.5*t.qa)+Math.round(.5*t.qa*Math.random())),yn(t.b,n),ye(n,r,e)}function Bn(t,e){t.c&&Ie({},function(t,n){Fe(e,n,t)})}function Wn(t,e,n){n=Math.min(t.f.length,n);var r=t.c?b(t.c.Ta,t.c,t):null;t:for(var i=t.f,o=-1;;){var a=[\"count=\"+n];-1==o?0<n?a.push(\"ofs=\"+(o=i[0].b)):o=0:a.push(\"ofs=\"+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{wn(l,a,\"req\"+c+\"_\")}catch(h){r&&r(l)}}if(s){r=a.join(\"&\");break t}}return t=t.f.splice(0,n),e.j=t,r}function zn(t){t.a||t.l||(t.S=1,Mt(t.Ha,t),t.v=0)}function Hn(t){return!(t.a||t.l||3<=t.v||(t.S++,t.l=ee(b(t.Ha,t),Gn(t,t.v)),t.v++,0))}function Qn(t,e,n){var r=e.l;r&&hn(t.b,r),t.ia=t.oa&&n,t.m=e.c,t.B=Jn(t,null,t.ha),Un(t)}function Kn(t){null!=t.s&&(a.clearTimeout(t.s),t.s=null)}function Gn(t,e){var n=t.Oa+Math.floor(Math.random()*t.Sa);return t.ma()||(n*=2),n*e}function Yn(t,e){if(2==e){var n=null;t.c&&(n=null);var r=b(t.fb,t);n||(n=new xe(\"//www.google.com/images/cleardot.gif\"),a.location&&\"http\"==a.location.protocol||Pe(n,\"https\"),Ue(n)),function(t,e){var n=new Gt;if(a.Image){var r=new Image;r.onload=w(_n,n,r,\"TestLoadImage: loaded\",!0,e),r.onerror=w(_n,n,r,\"TestLoadImage: error\",!1,e),r.onabort=w(_n,n,r,\"TestLoadImage: abort\",!1,e),r.ontimeout=w(_n,n,r,\"TestLoadImage: timeout\",!1,e),a.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else $t(2);t.u=0,t.c&&t.c.ta(e),Xn(t),Fn(t)}function Xn(t){t.u=0,t.m=-1,t.c&&(0==mn(t.b).length&&0==t.f.length||(t.b.c.length=0,k(t.f),t.f.length=0),t.c.sa())}function Jn(t,e,n){var r=function(t){return t instanceof xe?Re(t):new xe(t,void 0)}(n);if(\"\"!=r.b)e&&Me(r,e+\".\"+r.b),je(r,r.i);else{var i=a.location;r=function(t,e,n,r){var i=new xe(null,void 0);return t&&Pe(i,t),e&&Me(i,e),n&&je(i,n),r&&(i.a=r),i}(i.protocol,e?e+\".\"+i.hostname:i.hostname,+i.port,n)}return t.V&&M(t.V,function(t,e){Fe(r,e,t)}),n=t.I,(e=t.j)&&n&&Fe(r,e,n),Fe(r,\"VER\",t.wa),Bn(t,r),r}function Zn(){}function $n(){if(W&&!(10<=Number(Z)))throw Error(\"Environmental error: no available transport.\")}function tr(t,e){Tt.call(this),this.a=new jn(e),this.g=t,this.m=e&&e.testUrl?e.testUrl:function(t){for(var e=arguments[0],n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf(\"/\",0)?e=i:((r=\"\"==e)||(r=0<=(r=e.length-1)&&e.indexOf(\"/\",r)==r),e+=r?i:\"/\"+i)}return e}(this.g,\"test\"),this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t[\"X-Client-Protocol\"]=\"webchannel\":t={\"X-Client-Protocol\":\"webchannel\"}),this.a.i=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t[\"X-WebChannel-Content-Type\"]=e.messageContentType:t={\"X-WebChannel-Content-Type\":e.messageContentType}),e&&e.xa&&(t?t[\"X-WebChannel-Client-Profile\"]=e.xa:t={\"X-WebChannel-Client-Profile\":e.xa}),this.a.J=t,(t=e&&e.httpHeadersOverwriteParam)&&!O(t)&&(this.a.g=t),this.l=e&&e.supportsCrossDomainXhr||!1,this.h=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!O(e)&&(this.a.j=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new rr(this)}function er(t){ue.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function nr(){ce.call(this),this.status=1}function rr(t){this.a=t}(r=Sn.prototype).ca=function(t,e,n,r){if(this.a)throw Error(\"[goog.net.XhrIo] Object is active with another request=\"+this.A+\"; newUri=\"+t);e=e?e.toUpperCase():\"GET\",this.A=t,this.f=\"\",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:ae),this.a.onreadystatechange=b(this.Fa,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(o){return void On(this,o)}t=n||\"\";var i=new ke(this.headers);r&&Ie(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=kn,n=t.length,r=s(t)?t.split(\"\"):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:s(t)?t.charAt(e):t[e]}(i.K()),n=a.FormData&&t instanceof a.FormData,!(0<=C(In,e))||r||n||i.set(\"Content-Type\",\"application/x-www-form-urlencoded;charset=utf-8\"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),\"withCredentials\"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{xn(this),0<this.o&&((this.D=function(t){return W&&tt(9)&&u(t.timeout)&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=b(this.Ca,this)):this.m=Vt(this.Ca,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){On(this,o)}},r.Ca=function(){void 0!==o&&this.a&&(this.f=\"Timed out after \"+this.o+\"ms, aborting\",this.h=8,this.dispatchEvent(\"timeout\"),this.abort(8))},r.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent(\"complete\"),this.dispatchEvent(\"abort\"),Dn(this))},r.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Dn(this,!0)),Sn.N.G.call(this)},r.Fa=function(){this.j||(this.w||this.l||this.g?An(this):this.$a())},r.$a=function(){An(this)},r.T=function(){try{return 2<Rn(this)?this.a.status:-1}catch(V){return-1}},r.za=function(){try{return 2<Rn(this)?this.a.statusText:\"\"}catch(V){return\"\"}},r.aa=function(){try{return this.a?this.a.responseText:\"\"}catch(V){return\"\"}},r.Va=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),En(e)}},r.ya=function(){return this.h},r.Ya=function(){return s(this.f)?this.f:String(this.f)},(r=jn.prototype).wa=8,r.u=1,r.Da=function(){return 0==this.u},r.Ia=function(t){if(this.h)if(this.h=null,1==this.u){if(!t){this.P=Math.floor(1e5*Math.random());var e,n=new he(this,t=this.P++,void 0),r=this.i;if(this.J&&(r?F(r=j(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)t:{for(var i=e=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o=\"__data__\"in o.a&&s(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Wn(this,n,e),Fe(i=Re(this.B),\"RID\",t),Fe(i,\"CVER\",22),this.o&&this.j&&Fe(i,\"X-HTTP-Session-Id\",this.j),Bn(this,i),this.g&&r&&Mn(i,this.g,r),yn(this.b,n),this.W?(Fe(i,\"$req\",e),Fe(i,\"SID\",\"null\"),n.S=!0,ye(n,i,null)):ye(n,i,e),this.u=2}}else 3==this.u&&(t?Vn(this,t):0==this.f.length||fn(this.b)||Vn(this))},r.Ha=function(){this.l=null,this.a=new he(this,\"rpc\",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var t=Re(this.pa);Fe(t,\"RID\",\"rpc\"),Fe(t,\"SID\",this.H),Fe(t,\"CI\",this.ia?\"0\":\"1\"),Fe(t,\"AID\",this.O),Bn(this,t),Fe(t,\"TYPE\",\"xmlhttp\"),this.g&&this.i&&Mn(t,this.g,this.i),this.D&&this.a.setTimeout(this.D),ve(this.a,t,!0,this.ga)},r.Ga=function(t,e){if(0!=this.u&&(this.a==t||pn(this.b,t)))if(this.m=t.o,!t.s&&pn(this.b,t)&&3==this.u){try{var n=this.ja.a.parse(e)}catch(o){n=null}if(f(n)&&3==n.length){if(0==(e=n)[0]){t:if(!this.l){if(this.a){if(!(this.a.v+3e3<t.v))break t;Kn(this),this.a.cancel(),this.a=null}Hn(this),$t(18)}}else this.ra=e[1],0<this.ra-this.O&&37500>e[2]&&this.ia&&0==this.v&&!this.s&&(this.s=ee(b(this.Za,this),6e3));if(1>=dn(this.b)&&this.fa){try{this.fa()}catch(o){}this.fa=void 0}}else Yn(this,11)}else if((t.s||this.a==t)&&Kn(this),!O(e))for(e=n=this.ja.a.parse(e),n=0;n<e.length;n++){var r=e[n];if(this.O=r[0],r=r[1],2==this.u)if(\"c\"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&u(r)&&0<r&&(this.D=1.5*r),this.o&&(r=t.a)&&((i=Pn(r,\"X-Client-Wire-Protocol\"))&&hn(this.b,i),this.j&&(r=Pn(r,\"X-HTTP-Session-Id\")))&&(this.I=r,Fe(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=t,this.pa=Jn(this,this.Y()?this.ga:null,this.ha),r.s?(vn(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(Ee(r),we(r)),this.a=r):zn(this),0<this.f.length&&Un(this)}else\"stop\"!=r[0]&&\"close\"!=r[0]||Yn(this,7);else 3==this.u&&(\"stop\"==r[0]||\"close\"==r[0]?\"stop\"==r[0]?Yn(this,7):Ln(this):\"noop\"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},r.Za=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Hn(this),$t(19))},r.na=function(t){var e=null;if(this.a==t){Kn(this),this.a=null;var n=2}else{if(!pn(this.b,t))return;e=t.j,vn(this.b,t),n=1}if(this.m=t.o,0!=this.u)if(t.b)1==n?(e=_()-t.v,Yt.dispatchEvent(new te(Yt,t.l?t.l.length:0,e,this.A)),Un(this)):zn(this);else{var r=t.c;if(3==r||0==r&&0<this.m||!(1==n&&function(t,e){return!(dn(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.f=e.j.concat(t.f),0):1==t.u||2==t.u||t.A>=(t.Pa?0:t.Qa)||(t.h=ee(b(t.Ia,t,e),Gn(t,t.A)),t.A++,0)))}(this,t)||2==n&&Hn(this)))switch(e&&0<e.length&&(t=this.b,t.c=t.c.concat(e)),r){case 1:Yn(this,5);break;case 4:Yn(this,10);break;case 3:Yn(this,6);break;default:Yn(this,2)}}},r.fb=function(t){$t(t?2:1)},r.$=function(t){if(t&&!this.R)throw Error(\"Can't create secondary domain capable XhrIo object.\");return(t=new Sn(this.La)).F=this.R,t},r.ma=function(){return!!this.c&&!0},r.Y=function(){return this.R},(r=Zn.prototype).va=function(){},r.ua=function(){},r.ta=function(){},r.sa=function(){},r.Ta=function(){},$n.prototype.a=function(t,e){return new tr(t,e)},E(tr,Tt),(r=tr.prototype).addEventListener=function(t,e,n,r){tr.N.addEventListener.call(this,t,e,n,r)},r.removeEventListener=function(t,e,n,r){tr.N.removeEventListener.call(this,t,e,n,r)},r.Wa=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var t=this.a,e=this.m,n=this.g,r=this.b||void 0;$t(0),t.ha=n,t.V=r||{},t.o&&(t.F.b=[],t.F.a=!1),t.w=new nn(t),null===t.g&&(t.w.h=t.i),n=e,t.g&&t.i&&(n=Mn(e,t.g,t.i)),(t=t.w).i=n,e=Jn(t.a,null,t.i),$t(3),null!=(n=t.a.F.b)?(t.f=n[0],t.M=1,rn(t)):(qe(e,\"MODE\",\"init\"),!t.a.o&&t.a.j&&qe(e,\"X-HTTP-Session-Id\",t.a.j),t.b=new he(t,void 0,void 0),t.b.h=t.h,ve(t.b,e,!1,null),t.M=0)},r.close=function(){Ln(this.a)},r.Xa=function(t){if(s(t)){var e={};e.__data__=t,qn(this.a,e)}else this.h?((e={}).__data__=kt(t),qn(this.a,e)):qn(this.a,t)},r.G=function(){this.a.c=null,delete this.f,Ln(this.a),delete this.a,tr.N.G.call(this)},E(er,ue),E(nr,ce),E(rr,Zn),rr.prototype.va=function(){this.a.dispatchEvent(\"a\")},rr.prototype.ua=function(t){this.a.dispatchEvent(new er(t))},rr.prototype.ta=function(t){this.a.dispatchEvent(new nr(t))},rr.prototype.sa=function(){this.a.dispatchEvent(\"b\")};var ir=w(function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r},$n);$n.prototype.createWebChannel=$n.prototype.a,tr.prototype.send=tr.prototype.Xa,tr.prototype.open=tr.prototype.Wa,tr.prototype.close=tr.prototype.close,ne.NO_ERROR=0,ne.TIMEOUT=8,ne.HTTP_ERROR=6,re.COMPLETE=\"complete\",oe.EventType=se,se.OPEN=\"a\",se.CLOSE=\"b\",se.ERROR=\"c\",se.MESSAGE=\"d\",Tt.prototype.listen=Tt.prototype.Aa,Sn.prototype.listenOnce=Sn.prototype.Ba,Sn.prototype.getLastError=Sn.prototype.Ya,Sn.prototype.getLastErrorCode=Sn.prototype.ya,Sn.prototype.getStatus=Sn.prototype.T,Sn.prototype.getStatusText=Sn.prototype.za,Sn.prototype.getResponseJson=Sn.prototype.Va,Sn.prototype.getResponseText=Sn.prototype.aa,Sn.prototype.send=Sn.prototype.ca;var or={createWebChannelTransport:ir,ErrorCode:ne,EventType:re,WebChannel:oe,XhrIo:Sn},ar=or.createWebChannelTransport,sr=or.ErrorCode,ur=or.EventType,cr=or.WebChannel,lr=or.XhrIo;e.default=or},xSm1:function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return i});var r=n(\"KOl+\");function i(t,e,n,i){return Object(r.c)(t,e,n).apply(this,i)}},xTla:function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return r});var r=\"function\"==typeof Symbol&&Symbol.observable||\"@@observable\"},y3By:function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return i}),n.d(e,\"b\",function(){return o});var r=n(\"+umK\");function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o(t)}function o(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:r.a}},zUnb:function(t,e,n){\"use strict\";n.r(e);var r=n(\"CcnG\"),i=function(){return function(){}}(),o=n(\"ZZ/e\"),a=n(\"mrSG\"),s=n(\"a3Cf\"),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a.d)(e,t),e.prototype.show=function(){return Object(s.cordova)(this,\"show\",{sync:!0},arguments)},e.prototype.hide=function(){return Object(s.cordova)(this,\"hide\",{sync:!0},arguments)},e.pluginName=\"SplashScreen\",e.plugin=\"cordova-plugin-splashscreen\",e.pluginRef=\"navigator.splashscreen\",e.repo=\"https://github.com/apache/cordova-plugin-splashscreen\",e.platforms=[\"Amazon Fire OS\",\"Android\",\"iOS\",\"Windows\"],e}(s.IonicNativePlugin),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a.d)(e,t),e.prototype.overlaysWebView=function(t){return Object(s.cordova)(this,\"overlaysWebView\",{sync:!0},arguments)},e.prototype.styleDefault=function(){return Object(s.cordova)(this,\"styleDefault\",{sync:!0},arguments)},e.prototype.styleLightContent=function(){return Object(s.cordova)(this,\"styleLightContent\",{sync:!0},arguments)},e.prototype.styleBlackTranslucent=function(){return Object(s.cordova)(this,\"styleBlackTranslucent\",{sync:!0},arguments)},e.prototype.styleBlackOpaque=function(){return Object(s.cordova)(this,\"styleBlackOpaque\",{sync:!0},arguments)},e.prototype.backgroundColorByName=function(t){return Object(s.cordova)(this,\"backgroundColorByName\",{sync:!0},arguments)},e.prototype.backgroundColorByHexString=function(t){return Object(s.cordova)(this,\"backgroundColorByHexString\",{sync:!0},arguments)},e.prototype.hide=function(){return Object(s.cordova)(this,\"hide\",{sync:!0},arguments)},e.prototype.show=function(){return Object(s.cordova)(this,\"show\",{sync:!0},arguments)},Object.defineProperty(e.prototype,\"isVisible\",{get:function(){return Object(s.cordovaPropertyGet)(this,\"isVisible\")},set:function(t){Object(s.cordovaPropertySet)(this,\"isVisible\",t)},enumerable:!0,configurable:!0}),e.pluginName=\"StatusBar\",e.plugin=\"cordova-plugin-statusbar\",e.pluginRef=\"StatusBar\",e.repo=\"https://github.com/apache/cordova-plugin-statusbar\",e.platforms=[\"Android\",\"iOS\",\"Windows\"],e}(s.IonicNativePlugin),l=function(){function t(t,e,n){this.platform=t,this.splashScreen=e,this.statusBar=n,this.initializeApp()}return t.prototype.initializeApp=function(){var t=this;this.platform.ready().then(function(){t.statusBar.styleDefault(),t.splashScreen.hide()})},t}(),h=n(\"pMnS\"),f=n(\"oBZk\"),d=n(\"ZYCi\"),p=n(\"Ip0R\"),y=r.nb({encapsulation:2,styles:[],data:{}});function v(t){return r.Db(0,[(t()(),r.pb(0,0,null,null,3,\"ion-app\",[],null,null,null,f.o,f.a)),r.ob(1,49152,null,0,o.c,[r.h,r.k],null,null),(t()(),r.pb(2,16777216,null,0,1,\"ion-router-outlet\",[],null,null,null,null,null)),r.ob(3,212992,null,0,o.eb,[d.b,r.O,r.j,[8,null],[8,null],r.h,o.b,o.Db,p.f,r.k,d.m,r.z,d.a,[3,o.eb]],null,null)],function(t,e){t(e,3,0)},null)}function m(t){return r.Db(0,[(t()(),r.pb(0,0,null,null,1,\"app-root\",[],null,null,null,v,y)),r.ob(1,49152,null,0,l,[o.Eb,u,c],null,null)],null,null)}var g=r.lb(\"app-root\",l,m,{},{},[]),b=n(\"ZYjt\"),w=n(\"hDTV\"),_=n(\"NKHs\"),E=n(\"ZBkt\"),S=n(\"wj3C\"),C=n.n(S);(function(){var t,e=\"function\"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},n=\"undefined\"!=typeof window&&window===this?this:\"undefined\"!=typeof global&&null!=global?global:this;function r(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function i(t){var e=\"undefined\"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:r(t)}}!function(t,r){if(r){var i=n;t=t.split(\".\");for(var o=0;o<t.length-1;o++){var a=t[o];a in i||(i[a]={}),i=i[a]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}(\"Promise\",function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function r(){this.a=null}function o(t){return t instanceof e?t:new e(function(e){e(t)})}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c(function(){e.g()})}this.a.push(t)};var a=n.setTimeout;r.prototype.c=function(t){a(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.f(r)}}}this.a=null},r.prototype.f=function(t){this.c(function(){throw t})},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.o),reject:t(this.g)}},e.prototype.o=function(t){if(t===this)this.g(new TypeError(\"A Promise cannot resolve to itself\"));else if(t instanceof e)this.u(t);else{t:switch(typeof t){case\"object\":var n=null!=t;break t;case\"function\":n=!0;break t;default:n=!1}n?this.l(t):this.h(t)}},e.prototype.l=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}\"function\"==typeof e?this.v(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error(\"Cannot settle(\"+t+\", \"+e+\"): Promise already settled in state\"+this.b);this.b=t,this.c=e,this.m()},e.prototype.m=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new r;return e.prototype.u=function(t){var e=this.f();t.Ja(e.resolve,e.reject)},e.prototype.v=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return\"function\"==typeof t?function(e){try{i(t(e))}catch(n){o(n)}}:e}var i,o,a=new e(function(t,e){i=t,o=e});return this.Ja(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ja=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error(\"Unexpected state: \"+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e(function(e,n){n(t)})},e.race=function(t){return new e(function(e,n){for(var r=i(t),a=r.next();!a.done;a=r.next())o(a.value).Ja(e,n)})},e.all=function(t){var n=i(t),r=n.next();return r.done?o([]):new e(function(t,e){function i(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,o(r.value).Ja(i(a.length-1),e),r=n.next()}while(!r.done)})},e});var o=o||{},a=this;function s(t){return\"string\"==typeof t}function u(t){return\"boolean\"==typeof t}var c=/^[\\w+\\/_-]+[=]{0,2}$/,l=null;function h(){}function f(t){var e=typeof t;if(\"object\"==e){if(!t)return\"null\";if(t instanceof Array)return\"array\";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if(\"[object Window]\"==n)return\"object\";if(\"[object Array]\"==n||\"number\"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable(\"splice\"))return\"array\";if(\"[object Function]\"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable(\"call\"))return\"function\"}else if(\"function\"==e&&void 0===t.call)return\"object\";return e}function d(t){return null===t}function p(t){return\"array\"==f(t)}function y(t){var e=f(t);return\"array\"==e||\"object\"==e&&\"number\"==typeof t.length}function v(t){return\"function\"==f(t)}function m(t){var e=typeof t;return\"object\"==e&&null!=t||\"function\"==e}var g=\"closure_uid_\"+(1e9*Math.random()>>>0),b=0;function w(t,e,n){return t.call.apply(t.bind,arguments)}function _(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function E(t,e,n){return(E=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf(\"native code\")?w:_).apply(null,arguments)}function S(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var T=Date.now||function(){return+new Date};function I(t,e){function n(){}n.prototype=e.prototype,t.qb=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.cd=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function k(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function O(t){if(Error.captureStackTrace)Error.captureStackTrace(this,O);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function N(t,e){for(var n=\"\",r=(t=t.split(\"%s\")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:\"%s\");O.call(this,n+t[r])}function A(t,e){throw new N(\"Failure\"+(t?\": \"+t:\"\"),Array.prototype.slice.call(arguments,1))}function D(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function x(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function R(){this.b=this.a=null}I(O,Error),O.prototype.name=\"CustomError\",I(N,O),N.prototype.name=\"AssertionError\",D.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var P=new D(function(){return new j},function(t){t.reset()});function M(){var t=gt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function j(){this.next=this.b=this.a=null}R.prototype.add=function(t,e){var n=P.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},j.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},j.prototype.reset=function(){this.next=this.b=this.a=null};var L=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(s(t))return s(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},F=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=s(t)?t.split(\"\"):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},q=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i=s(t)?t.split(\"\"):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},U=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=s(t)?t.split(\"\"):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function V(t,e){return 0<=L(t,e)}function B(t,e){var n;return(n=0<=(e=L(t,e)))&&Array.prototype.splice.call(t,e,1),n}function W(t,e){!function(t,e){for(var n=s(t)?t.split(\"\"):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1)})}function z(t){return Array.prototype.concat.apply([],arguments)}function H(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Q,K=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\\s\\xa0]*([\\s\\S]*?)[\\s\\xa0]*$/.exec(t)[1]},G=/&/g,Y=/</g,X=/>/g,J=/\"/g,Z=/'/g,$=/\\x00/g,tt=/[\\x00&<>\"']/;function et(t,e){return-1!=t.indexOf(e)}function nt(t,e){return t<e?-1:t>e?1:0}t:{var rt=a.navigator;if(rt){var it=rt.userAgent;if(it){Q=it;break t}}Q=\"\"}function ot(t){return et(Q,t)}function at(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function st(t){for(var e in t)return!1;return!0}function ut(t){var e,n={};for(e in t)n[e]=t[e];return n}var ct,lt,ht=\"constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf\".split(\" \");function ft(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ht.length;o++)n=ht[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function dt(t,e){for(var n=t.split(\"%s\"),r=\"\",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join(\"%s\")}function pt(t){return tt.test(t)&&(-1!=t.indexOf(\"&\")&&(t=t.replace(G,\"&amp;\")),-1!=t.indexOf(\"<\")&&(t=t.replace(Y,\"&lt;\")),-1!=t.indexOf(\">\")&&(t=t.replace(X,\"&gt;\")),-1!=t.indexOf('\"')&&(t=t.replace(J,\"&quot;\")),-1!=t.indexOf(\"'\")&&(t=t.replace(Z,\"&#39;\")),-1!=t.indexOf(\"\\0\")&&(t=t.replace($,\"&#0;\"))),t}function yt(t){a.setTimeout(function(){throw t},0)}function vt(t,e){lt||function(){if(a.Promise&&a.Promise.resolve){var t=a.Promise.resolve(void 0);lt=function(){t.then(bt)}}else lt=function(){var t=bt;!v(a.setImmediate)||a.Window&&a.Window.prototype&&!ot(\"Edge\")&&a.Window.prototype.setImmediate==a.setImmediate?(ct||(ct=function(){var t=a.MessageChannel;if(void 0===t&&\"undefined\"!=typeof window&&window.postMessage&&window.addEventListener&&!ot(\"Presto\")&&(t=function(){var t=document.createElement(\"IFRAME\");t.style.display=\"none\",t.src=\"\",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(\"\"),t.close();var n=\"callImmediate\"+Math.random(),r=\"file:\"==e.location.protocol?\"*\":e.location.protocol+\"//\"+e.location.host;t=E(function(t){\"*\"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener(\"message\",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ot(\"Trident\")&&!ot(\"MSIE\")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).yb;n.yb=null,t()}},function(t){r.next={yb:t},r=r.next,e.port2.postMessage(0)}}return\"undefined\"!=typeof document&&\"onreadystatechange\"in document.createElement(\"SCRIPT\")?function(t){var e=document.createElement(\"SCRIPT\");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){a.setTimeout(t,0)}}()),ct(t)):a.setImmediate(t)}}(),mt||(lt(),mt=!0),gt.add(t,e)}var mt=!1,gt=new R;function bt(){for(var t;t=M();){try{t.a.call(t.b)}catch(e){yt(e)}x(P,t)}mt=!1}function wt(t,e){if(this.a=_t,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=h)try{var n=this;t.call(e,function(t){Rt(n,Et,t)},function(t){if(!(t instanceof Ut))try{if(t instanceof Error)throw t;throw Error(\"Promise rejected.\")}catch(e){}Rt(n,St,t)})}catch(r){Rt(this,St,r)}}var _t=0,Et=2,St=3;function Ct(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ct.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Tt=new D(function(){return new Ct},function(t){t.reset()});function It(t,e,n){var r=Tt.get();return r.g=t,r.b=e,r.f=n,r}function kt(t){if(t instanceof wt)return t;var e=new wt(h);return Rt(e,Et,t),e}function Ot(t){return new wt(function(e,n){n(t)})}function Nt(t,e,n){Pt(t,e,n,null)||vt(S(e,t))}function At(t){return new wt(function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Eb:!0,value:o}:{Eb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Nt(t[o],S(i,o,!0),S(i,o,!1));else e(r)})}function Dt(t,e){t.b||t.a!=Et&&t.a!=St||Mt(t),t.f?t.f.next=e:t.b=e,t.f=e}function xt(t,e,n,r){var i=It(null,null,null);return i.a=new wt(function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(a){o(a)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Ut?o(e):t(i)}catch(a){o(a)}}:o}),i.a.c=t,Dt(t,i),i.a}function Rt(t,e,n){t.a==_t&&(t===n&&(e=St,n=new TypeError(\"Promise cannot resolve to itself\")),t.a=1,Pt(n,t.Lc,t.Mc,t)||(t.i=n,t.a=e,t.c=null,Mt(t),e!=St||n instanceof Ut||function(t,e){t.g=!0,vt(function(){t.g&&qt.call(null,e)})}(t,n)))}function Pt(t,e,n,r){if(t instanceof wt)return Dt(t,It(e||h,n||null,r)),!0;if(k(t))return t.then(e,n,r),!0;if(m(t))try{var i=t.then;if(v(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,function(t){a||(a=!0,n.call(i,t))},o)}catch(s){o(s)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function Mt(t){t.h||(t.h=!0,vt(t.Xb,t))}function jt(t){var e=null;return t.b&&(t.b=(e=t.b).next,e.next=null),t.b||(t.f=null),e}function Lt(t,e,n,r){if(n==St&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ft(e,n,r);else try{e.c?e.g.call(e.f):Ft(e,n,r)}catch(i){qt.call(null,i)}x(Tt,e)}function Ft(t,e,n){e==Et?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}wt.prototype.then=function(t,e,n){return xt(this,v(t)?t:null,v(e)?e:null,n)},wt.prototype.$goog_Thenable=!0,(t=wt.prototype).ia=function(t,e){return(t=It(t,t,e)).c=!0,Dt(this,t),this},t.s=function(t,e){return xt(this,null,t,e)},t.cancel=function(t){this.a==_t&&vt(function(){!function t(e,n){if(e.a==_t)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,s.a==e&&(o=s),!(o&&1<i)));s=s.next)o||(a=s);o&&(r.a==_t&&1==i?t(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):jt(r),Lt(r,o,St,n)))}e.c=null}else Rt(e,St,n)}(this,new Ut(t))},this)},t.Lc=function(t){this.a=_t,Rt(this,Et,t)},t.Mc=function(t){this.a=_t,Rt(this,St,t)},t.Xb=function(){for(var t;t=jt(this);)Lt(this,t,this.a,this.i);this.h=!1};var qt=yt;function Ut(t){O.call(this,t)}function Vt(){0!=Bt&&(Wt[this[g]||(this[g]=++b)]=this),this.qa=this.qa,this.ja=this.ja}I(Ut,O),Ut.prototype.name=\"cancel\";var Bt=0,Wt={};function zt(t){if(!t.qa&&(t.qa=!0,t.va(),0!=Bt)){var e=t[g]||(t[g]=++b);if(0!=Bt&&t.ja&&0<t.ja.length)throw Error(t+\" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.\");delete Wt[e]}}function Ht(t){return Ht[\" \"](t),t}Vt.prototype.qa=!1,Vt.prototype.va=function(){if(this.ja)for(;this.ja.length;)this.ja.shift()()},Ht[\" \"]=h;var Qt,Kt,Gt=ot(\"Opera\"),Yt=ot(\"Trident\")||ot(\"MSIE\"),Xt=ot(\"Edge\"),Jt=Xt||Yt,Zt=ot(\"Gecko\")&&!(et(Q.toLowerCase(),\"webkit\")&&!ot(\"Edge\"))&&!(ot(\"Trident\")||ot(\"MSIE\"))&&!ot(\"Edge\"),$t=et(Q.toLowerCase(),\"webkit\")&&!ot(\"Edge\");function te(){var t=a.document;return t?t.documentMode:void 0}t:{var ee=\"\",ne=(Kt=Q,Zt?/rv:([^\\);]+)(\\)|;)/.exec(Kt):Xt?/Edge\\/([\\d\\.]+)/.exec(Kt):Yt?/\\b(?:MSIE|rv)[: ]([^\\);]+)(\\)|;)/.exec(Kt):$t?/WebKit\\/(\\S+)/.exec(Kt):Gt?/(?:Version)[ \\/]?(\\S+)/.exec(Kt):void 0);if(ne&&(ee=ne?ne[1]:\"\"),Yt){var re=te();if(null!=re&&re>parseFloat(ee)){Qt=String(re);break t}}Qt=ee}var ie,oe={};function ae(t){return function(t,e){var n=oe;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=K(String(Qt)).split(\".\"),r=K(String(t)).split(\".\"),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||\"\",s=r[o]||\"\";do{if(a=/(\\d*)(\\D*)(.*)/.exec(a)||[\"\",\"\",\"\",\"\"],s=/(\\d*)(\\D*)(.*)/.exec(s)||[\"\",\"\",\"\",\"\"],0==a[0].length&&0==s[0].length)break;e=nt(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||nt(0==a[2].length,0==s[2].length)||nt(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e})}var se=a.document;ie=se&&Yt?te()||(\"CSS1Compat\"==se.compatMode?parseInt(Qt,10):5):void 0;var ue=Object.freeze||function(t){return t},ce=!Yt||9<=Number(ie),le=Yt&&!ae(\"9\"),he=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},\"passive\",{get:function(){t=!0}});try{a.addEventListener(\"test\",h,e),a.removeEventListener(\"test\",h,e)}catch(n){}return t}();function fe(t,e){this.type=t,this.b=this.target=e,this.Kb=!0}function de(t,e){if(fe.call(this,t?t.type:\"\"),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key=\"\",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType=\"\",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Zt){t:{try{Ht(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else\"mouseover\"==n?e=t.fromElement:\"mouseout\"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||\"\",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=s(t.pointerType)?t.pointerType:pe[t.pointerType]||\"\",this.a=t,t.defaultPrevented&&this.preventDefault()}}fe.prototype.preventDefault=function(){this.Kb=!1},I(de,fe);var pe=ue({2:\"touch\",3:\"pen\",4:\"mouse\"});de.prototype.preventDefault=function(){de.qb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,le)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},de.prototype.f=function(){return this.a};var ye=\"closure_listenable_\"+(1e6*Math.random()|0),ve=0;function me(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Na=i,this.key=++ve,this.oa=this.Ia=!1}function ge(t){t.oa=!0,t.listener=null,t.proxy=null,t.src=null,t.Na=null}function be(t){this.src=t,this.a={},this.b=0}function we(t,e){var n=e.type;n in t.a&&B(t.a[n],e)&&(ge(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function _e(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.oa&&o.listener==e&&o.capture==!!n&&o.Na==r)return i}return-1}be.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=_e(t,e,r,i);return-1<a?(e=t[a],n||(e.Ia=!1)):((e=new me(e,this.src,o,!!r,i)).Ia=n,t.push(e)),e};var Ee=\"closure_lm_\"+(1e6*Math.random()|0),Se={};function Ce(t,e,n,r,i){if(r&&r.once)Ie(t,e,n,r,i);else if(p(e))for(var o=0;o<e.length;o++)Ce(t,e[o],n,r,i);else n=Me(n),t&&t[ye]?Le(t,e,n,m(r)?!!r.capture:!!r,i):Te(t,e,n,!1,r,i)}function Te(t,e,n,r,i,o){if(!e)throw Error(\"Invalid event type\");var a=m(i)?!!i.capture:!!i,s=Re(t);if(s||(t[Ee]=s=new be(t)),!(n=s.add(e,n,r,a,o)).proxy)if(r=function(){var t=xe,e=ce?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)he||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Ne(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error(\"addEventListener and attachEvent are unavailable.\");t.addListener(r)}}function Ie(t,e,n,r,i){if(p(e))for(var o=0;o<e.length;o++)Ie(t,e[o],n,r,i);else n=Me(n),t&&t[ye]?Fe(t,e,n,m(r)?!!r.capture:!!r,i):Te(t,e,n,!0,r,i)}function ke(t,e,n,r,i){if(p(e))for(var o=0;o<e.length;o++)ke(t,e[o],n,r,i);else r=m(r)?!!r.capture:!!r,n=Me(n),t&&t[ye]?(t=t.m,(e=String(e).toString())in t.a&&-1<(n=_e(o=t.a[e],n,r,i))&&(ge(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Re(t))&&(e=t.a[e.toString()],t=-1,e&&(t=_e(e,n,r,i)),(n=-1<t?e[t]:null)&&Oe(n))}function Oe(t){if(\"number\"!=typeof t&&t&&!t.oa){var e=t.src;if(e&&e[ye])we(e.m,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Ne(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Re(e))?(we(n,t),0==n.b&&(n.src=null,e[Ee]=null)):ge(t)}}}function Ne(t){return t in Se?Se[t]:Se[t]=\"on\"+t}function Ae(t,e,n,r){var i=!0;if((t=Re(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.oa&&(o=De(o,r),i=i&&!1!==o)}return i}function De(t,e){var n=t.listener,r=t.Na||t.src;return t.Ia&&Oe(t),n.call(r,e)}function xe(t,e){if(t.oa)return!0;if(!ce){if(!e)t:{e=[\"window\",\"event\"];for(var n=a,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new de(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(s){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=Ae(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=Ae(r[i],t,!1,e),n=n&&o}return n}return De(t,new de(e,this))}function Re(t){return(t=t[Ee])instanceof be?t:null}var Pe=\"__closure_events_fn_\"+(1e9*Math.random()>>>0);function Me(t){return v(t)?t:(t[Pe]||(t[Pe]=function(e){return t.handleEvent(e)}),t[Pe])}function je(){Vt.call(this),this.m=new be(this),this.Qb=this,this.Va=null}function Le(t,e,n,r,i){t.m.add(String(e),n,!1,r,i)}function Fe(t,e,n,r,i){t.m.add(String(e),n,!0,r,i)}function qe(t,e,n,r){if(!(e=t.m.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.oa&&a.capture==n){var s=a.listener,u=a.Na||a.src;a.Ia&&we(t.m,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Kb}function Ue(t,e,n){if(v(t))n&&(t=E(t,n));else{if(!t||\"function\"!=typeof t.handleEvent)throw Error(\"Invalid listener argument\");t=E(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function Ve(t){var e=null;return new wt(function(n,r){-1==(e=Ue(function(){n(void 0)},t))&&r(Error(\"Failed to schedule timer.\"))}).s(function(t){throw a.clearTimeout(e),t})}function Be(t){if(t.S&&\"function\"==typeof t.S)return t.S();if(s(t))return t.split(\"\");if(y(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function We(t){if(t.U&&\"function\"==typeof t.U)return t.U();if(!t.S||\"function\"!=typeof t.S){if(y(t)||s(t)){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function ze(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error(\"Uneven number of arguments\");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof ze)for(n=t.U(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function He(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Qe(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Qe(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Qe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}I(je,Vt),je.prototype[ye]=!0,je.prototype.addEventListener=function(t,e,n,r){Ce(this,t,e,n,r)},je.prototype.removeEventListener=function(t,e,n,r){ke(this,t,e,n,r)},je.prototype.dispatchEvent=function(t){var e,n=this.Va;if(n)for(e=[];n;n=n.Va)e.push(n);n=this.Qb;var r=t.type||t;if(s(t))t=new fe(t,n);else if(t instanceof fe)t.target=t.target||n;else{var i=t;ft(t=new fe(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=qe(a,r,!0,t)&&i}if(i=qe(a=t.b=n,r,!0,t)&&i,i=qe(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=qe(a=t.b=e[o],r,!1,t)&&i;return i},je.prototype.va=function(){if(je.qb.va.call(this),this.m){var t,e=this.m;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ge(n[r]);delete e.a[t],e.b--}}this.Va=null},(t=ze.prototype).S=function(){He(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.U=function(){return He(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Qe(this.b,t)?this.b[t]:e},t.set=function(t,e){Qe(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.U(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ke=/^(?:([^:\\/?#.]+):)?(?:\\/\\/(?:([^\\/?#]*)@)?([^\\/#?]*?)(?::([0-9]+))?(?=[\\/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$/;function Ge(t,e){var n;this.b=this.i=this.f=\"\",this.m=null,this.g=this.c=\"\",this.h=!1,t instanceof Ge?(this.h=void 0!==e?e:t.h,Ye(this,t.f),this.i=t.i,this.b=t.b,Xe(this,t.m),this.c=t.c,Je(this,mn(t.a)),this.g=t.g):t&&(n=String(t).match(Ke))?(this.h=!!e,Ye(this,n[1]||\"\",!0),this.i=nn(n[2]||\"\"),this.b=nn(n[3]||\"\",!0),Xe(this,n[4]),this.c=nn(n[5]||\"\",!0),Je(this,n[6]||\"\",!0),this.g=nn(n[7]||\"\")):(this.h=!!e,this.a=new hn(null,this.h))}function Ye(t,e,n){t.f=n?nn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,\"\"))}function Xe(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error(\"Bad port number \"+e);t.m=e}else t.m=null}function Je(t,e,n){e instanceof hn?(t.a=e,function(t,e){e&&!t.f&&(fn(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(pn(this,e),vn(this,n,t))},t)),t.f=e}(t.a,t.h)):(n||(e=rn(e,cn)),t.a=new hn(e,t.h))}function Ze(t,e,n){t.a.set(e,n)}function $e(t,e){return t.a.get(e)}function tn(t){return t instanceof Ge?new Ge(t):new Ge(t,void 0)}function en(t,e){var n=new Ge(null,void 0);return Ye(n,\"https\"),t&&(n.b=t),e&&(n.c=e),n}function nn(t,e){return t?e?decodeURI(t.replace(/%25/g,\"%2525\")):decodeURIComponent(t):\"\"}function rn(t,e,n){return s(t)?(t=encodeURI(t).replace(e,on),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,\"%$1\")),t):null}function on(t){return\"%\"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ge.prototype.toString=function(){var t=[],e=this.f;e&&t.push(rn(e,an,!0),\":\");var n=this.b;return(n||\"file\"==e)&&(t.push(\"//\"),(e=this.i)&&t.push(rn(e,an,!0),\"@\"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,\"%$1\")),null!=(n=this.m)&&t.push(\":\",String(n))),(n=this.c)&&(this.b&&\"/\"!=n.charAt(0)&&t.push(\"/\"),t.push(rn(n,\"/\"==n.charAt(0)?un:sn,!0))),(n=this.a.toString())&&t.push(\"?\",n),(n=this.g)&&t.push(\"#\",rn(n,ln)),t.join(\"\")},Ge.prototype.resolve=function(t){var e=new Ge(this),n=!!t.f;n?Ye(e,t.f):n=!!t.i,n?e.i=t.i:n=!!t.b,n?e.b=t.b:n=null!=t.m;var r=t.c;if(n)Xe(e,t.m);else if(n=!!t.c){if(\"/\"!=r.charAt(0))if(this.b&&!this.c)r=\"/\"+r;else{var i=e.c.lastIndexOf(\"/\");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(\"..\"==(i=r)||\".\"==i)r=\"\";else if(et(i,\"./\")||et(i,\"/.\")){r=0==i.lastIndexOf(\"/\",0),i=i.split(\"/\");for(var o=[],a=0;a<i.length;){var s=i[a++];\".\"==s?r&&a==i.length&&o.push(\"\"):\"..\"==s?((1<o.length||1==o.length&&\"\"!=o[0])&&o.pop(),r&&a==i.length&&o.push(\"\")):(o.push(s),r=!0)}r=o.join(\"/\")}else r=i}return n?e.c=r:n=\"\"!==t.a.toString(),n?Je(e,mn(t.a)):n=!!t.g,n&&(e.g=t.g),e};var an=/[#\\/\\?@]/g,sn=/[#\\?:]/g,un=/[#\\?]/g,cn=/[#\\?@]/g,ln=/#/g;function hn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function fn(t){t.a||(t.a=new ze,t.b=0,t.c&&function(t,e){if(t){t=t.split(\"&\");for(var n=0;n<t.length;n++){var r=t[n].indexOf(\"=\"),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\\+/g,\" \")):\"\")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\\+/g,\" \")),n)}))}function dn(t){var e=We(t);if(void 0===e)throw Error(\"Keys are undefined\");var n=new hn(null,void 0);t=Be(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];p(o)?vn(n,i,o):n.add(i,o)}return n}function pn(t,e){fn(t),e=gn(t,e),Qe(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Qe((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&He(t)))}function yn(t,e){return fn(t),e=gn(t,e),Qe(t.a.b,e)}function vn(t,e,n){pn(t,e),0<n.length&&(t.c=null,t.a.set(gn(t,e),H(n)),t.b+=n.length)}function mn(t){var e=new hn;return e.c=t.c,t.a&&(e.a=new ze(t.a),e.b=t.b),e}function gn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(t=hn.prototype).add=function(t,e){fn(this),this.c=null,t=gn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){fn(this),this.a.forEach(function(n,r){F(n,function(n){t.call(e,n,r,this)},this)},this)},t.U=function(){fn(this);for(var t=this.a.S(),e=this.a.U(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.S=function(t){fn(this);var e=[];if(s(t))yn(this,t)&&(e=z(e,this.a.get(gn(this,t))));else{t=this.a.S();for(var n=0;n<t.length;n++)e=z(e,t[n])}return e},t.set=function(t,e){return fn(this),this.c=null,yn(this,t=gn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.S(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return\"\";for(var t=[],e=this.a.U(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.S(r);for(var o=0;o<r.length;o++){var a=i;\"\"!==r[o]&&(a+=\"=\"+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join(\"&\")};var bn=!Yt||9<=Number(ie);function wn(t,e){this.a=t===Sn&&e||\"\",this.b=En}function _n(t){return t instanceof wn&&t.constructor===wn&&t.b===En?t.a:(A(\"expected object of type Const, got '\"+t+\"'\"),\"type_error:Const\")}wn.prototype.na=!0,wn.prototype.ma=function(){return this.a},wn.prototype.toString=function(){return\"Const{\"+this.a+\"}\"};var En={},Sn={};function Cn(){this.a=\"\",this.b=Nn}function Tn(t){return t instanceof Cn&&t.constructor===Cn&&t.b===Nn?t.a:(A(\"expected object of type TrustedResourceUrl, got '\"+t+\"' of type \"+f(t)),\"type_error:TrustedResourceUrl\")}function In(t,e){var n=_n(t);if(!On.test(n))throw Error(\"Invalid TrustedResourceUrl format: \"+n);return function(t){var e=new Cn;return e.a=t,e}(t=n.replace(kn,function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, \"'+r+'\", in format string, \"'+n+'\", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof wn?_n(t):encodeURIComponent(String(t))}))}Cn.prototype.na=!0,Cn.prototype.ma=function(){return this.a.toString()},Cn.prototype.toString=function(){return\"TrustedResourceUrl{\"+this.a+\"}\"};var kn=/%{(\\w+)}/g,On=/^((https:)?\\/\\/[0-9a-z.:[\\]-]+\\/|\\/[^\\/\\\\]|[^:\\/\\\\%]+\\/|[^:\\/\\\\%]*[?#]|about:blank#)/i,Nn={};function An(){this.a=\"\",this.b=Pn}function Dn(t){return t instanceof An&&t.constructor===An&&t.b===Pn?t.a:(A(\"expected object of type SafeUrl, got '\"+t+\"' of type \"+f(t)),\"type_error:SafeUrl\")}An.prototype.na=!0,An.prototype.ma=function(){return this.a.toString()},An.prototype.toString=function(){return\"SafeUrl{\"+this.a+\"}\"};var xn=/^(?:(?:https?|mailto|ftp):|[^:\\/?#]*(?:[\\/?#]|$))/i;function Rn(t){return t instanceof An?t:(t=\"object\"==typeof t&&t.na?t.ma():String(t),xn.test(t)||(t=\"about:invalid#zClosurez\"),Mn(t))}var Pn={};function Mn(t){var e=new An;return e.a=t,e}function jn(){this.a=\"\",this.b=Ln}Mn(\"about:blank\"),jn.prototype.na=!0,jn.prototype.ma=function(){return this.a.toString()},jn.prototype.toString=function(){return\"SafeHtml{\"+this.a+\"}\"};var Ln={};function Fn(t){var e=new jn;return e.a=t,e}function qn(t){var e=document;return s(t)?e.getElementById(t):t}function Un(t,e){at(e,function(e,n){e&&\"object\"==typeof e&&e.na&&(e=e.ma()),\"style\"==n?t.style.cssText=e:\"class\"==n?t.className=e:\"for\"==n?t.htmlFor=e:Vn.hasOwnProperty(n)?t.setAttribute(Vn[n],e):0==n.lastIndexOf(\"aria-\",0)||0==n.lastIndexOf(\"data-\",0)?t.setAttribute(n,e):t[n]=e})}Fn(\"<!DOCTYPE html>\"),Fn(\"\"),Fn(\"<br>\");var Vn={cellpadding:\"cellPadding\",cellspacing:\"cellSpacing\",colspan:\"colSpan\",frameborder:\"frameBorder\",height:\"height\",maxlength:\"maxLength\",nonce:\"nonce\",role:\"role\",rowspan:\"rowSpan\",type:\"type\",usemap:\"useMap\",valign:\"vAlign\",width:\"width\"};function Bn(t){if(t&&\"number\"==typeof t.length){if(m(t))return\"function\"==typeof t.item||\"string\"==typeof t.item;if(v(t))return\"function\"==typeof t.item}return!1}function Wn(t){var e=[];return function t(e,n,r){if(null==n)r.push(\"null\");else{if(\"object\"==typeof n){if(p(n)){var i=n;n=i.length,r.push(\"[\");for(var o=\"\",a=0;a<n;a++)r.push(o),t(e,i[a],r),o=\",\";return void r.push(\"]\")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push(\"{\"),o=\"\",n)Object.prototype.hasOwnProperty.call(n,i)&&\"function\"!=typeof(a=n[i])&&(r.push(o),Kn(i,r),r.push(\":\"),t(e,a,r),o=\",\");return void r.push(\"}\")}n=n.valueOf()}switch(typeof n){case\"string\":Kn(n,r);break;case\"number\":r.push(isFinite(n)&&!isNaN(n)?String(n):\"null\");break;case\"boolean\":r.push(String(n));break;case\"function\":r.push(\"null\");break;default:throw Error(\"Unknown type: \"+typeof n)}}}(new zn,t,e),e.join(\"\")}function zn(){}var Hn={'\"':'\\\\\"',\"\\\\\":\"\\\\\\\\\",\"/\":\"\\\\/\",\"\\b\":\"\\\\b\",\"\\f\":\"\\\\f\",\"\\n\":\"\\\\n\",\"\\r\":\"\\\\r\",\"\\t\":\"\\\\t\",\"\\v\":\"\\\\u000b\"},Qn=/\\uffff/.test(\"\\uffff\")?/[\\\\\"\\x00-\\x1f\\x7f-\\uffff]/g:/[\\\\\"\\x00-\\x1f\\x7f-\\xff]/g;function Kn(t,e){e.push('\"',t.replace(Qn,function(t){var e=Hn[t];return e||(e=\"\\\\u\"+(65536|t.charCodeAt(0)).toString(16).substr(1),Hn[t]=e),e}),'\"')}function Gn(){var t=dr();return Yt&&!!ie&&11==ie||/Edge\\/\\d+/.test(t)}function Yn(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||\"\"}function Xn(t,e){e=e||a.window;var n=\"about:blank\";t&&(n=Dn(Rn(t)).toString()),e.location.href=n}function Jn(t){return!!((t=(t||dr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function Zn(t){t=t||a.window;try{t.close()}catch(e){}}function $n(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=dr().toLowerCase(),r&&(e.target=r,et(n,\"crios/\")&&(e.target=\"_blank\")),lr(dr())==ur&&(t=t||\"http://localhost\",e.scrollbars=!0),n=t||\"\",(t=e)||(t={}),r=window,e=n instanceof An?n:Rn(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(a){case\"width\":case\"height\":case\"top\":case\"left\":i.push(a+\"=\"+t[a]);break;case\"target\":case\"noopener\":case\"noreferrer\":break;default:i.push(a+\"=\"+(t[a]?1:0))}var a=i.join(\",\");if((ot(\"iPhone\")&&!ot(\"iPod\")&&!ot(\"iPad\")||ot(\"iPad\")||ot(\"iPod\"))&&r.navigator&&r.navigator.standalone&&n&&\"_self\"!=n?(a=r.document.createElement(\"A\"),e instanceof An||e instanceof An||(e=\"object\"==typeof e&&e.na?e.ma():String(e),xn.test(e)||(e=\"about:invalid#zClosurez\"),e=Mn(e)),a.href=Dn(e),a.setAttribute(\"target\",n),t.noreferrer&&a.setAttribute(\"rel\",\"noreferrer\"),(t=document.createEvent(\"MouseEvent\")).initMouseEvent(\"click\",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=r.open(\"\",n,a),t=Dn(e).toString(),a&&(Jt&&et(t,\";\")&&(t=\"'\"+t.replace(/'/g,\"%27\")+\"'\"),a.opener=null,t=Fn('<meta name=\"referrer\" content=\"no-referrer\"><meta http-equiv=\"refresh\" content=\"0; url='+pt(t)+'\">'),a.document.write(function(t){return t instanceof jn&&t.constructor===jn&&t.b===Ln?t.a:(A(\"expected object of type SafeHtml, got '\"+t+\"' of type \"+f(t)),\"type_error:SafeHtml\")}(t)),a.document.close())):(a=r.open(Dn(e).toString(),n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(s){}return a}var tr=/^\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}$/,er=/^[^@]+@[^@]+$/;function nr(){var t=null;return new wt(function(e){\"complete\"==a.document.readyState?e():(t=function(){e()},Ie(window,\"load\",t))}).s(function(e){throw ke(window,\"load\",t),e})}function rr(t){return t=t||dr(),!(\"file:\"!==gr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function ir(){var t=a.window;try{return!(!t||t==t.top)}catch(e){return!1}}function or(){return void 0!==a.WorkerGlobalScope&&\"function\"==typeof a.importScripts}function ar(){return C.a.INTERNAL.hasOwnProperty(\"reactNative\")?\"ReactNative\":C.a.INTERNAL.hasOwnProperty(\"node\")?\"Node\":or()?\"Worker\":\"Browser\"}function sr(){var t=ar();return\"ReactNative\"===t||\"Node\"===t}var ur=\"Firefox\",cr=\"Chrome\";function lr(t){var e=t.toLowerCase();return et(e,\"opera/\")||et(e,\"opr/\")||et(e,\"opios/\")?\"Opera\":et(e,\"iemobile\")?\"IEMobile\":et(e,\"msie\")||et(e,\"trident/\")?\"IE\":et(e,\"edge/\")?\"Edge\":et(e,\"firefox/\")?ur:et(e,\"silk/\")?\"Silk\":et(e,\"blackberry\")?\"Blackberry\":et(e,\"webos\")?\"Webos\":!et(e,\"safari/\")||et(e,\"chrome/\")||et(e,\"crios/\")||et(e,\"android\")?!et(e,\"chrome/\")&&!et(e,\"crios/\")||et(e,\"edge/\")?et(e,\"android\")?\"Android\":(t=t.match(/([a-zA-Z\\d\\.]+)\\/[a-zA-Z\\d\\.]*$/))&&2==t.length?t[1]:\"Other\":cr:\"Safari\"}var hr={Sc:\"FirebaseCore-web\",Uc:\"FirebaseUI-web\"};function fr(t,e){e=e||[];var n,r=[],i={};for(n in hr)i[hr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=[\"FirebaseCore-web\"]),\"Browser\"===(r=ar())?r=lr(i=dr()):\"Worker\"===r&&(r=lr(i=dr())+\"-\"+r),r+\"/JsCore/\"+t+\"/\"+e.join(\",\")}function dr(){return a.navigator&&a.navigator.userAgent||\"\"}function pr(t,e){t=t.split(\".\"),e=e||a;for(var n=0;n<t.length&&\"object\"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function yr(){try{var t=a.localStorage,e=Sr();if(t)return t.setItem(e,\"1\"),t.removeItem(e),!Gn()||!!a.indexedDB}catch(n){return or()&&!!a.indexedDB}return!1}function vr(){return(mr()||\"chrome-extension:\"===gr()||rr())&&!sr()&&yr()&&!or()}function mr(){return\"http:\"===gr()||\"https:\"===gr()}function gr(){return a.location&&a.location.protocol||null}function br(t){return!Jn(t=t||dr())&&lr(t)!=ur}function wr(t){return void 0===t?null:Wn(t)}function _r(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!=t[e]&&(n[e]=t[e]);return n}function Er(t){if(null!==t)return JSON.parse(t)}function Sr(t){return t||Math.floor(1e9*Math.random()).toString()}function Cr(t){return\"Safari\"!=lr(t=t||dr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Tr(){var t=a.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Ir(t,e){if(t>e)throw Error(\"Short delay should be less than long delay!\");this.a=t,this.c=e,t=dr(),e=ar(),this.b=Jn(t)||\"ReactNative\"===e}function kr(){var t=a.document;return!t||void 0===t.visibilityState||\"visible\"==t.visibilityState}function Or(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Nr(){return!(!pr(\"fireauth.oauthhelper\",a)&&!pr(\"fireauth.iframe\",a))}Ir.prototype.get=function(){var t=a.navigator;return!t||\"boolean\"!=typeof t.onLine||!mr()&&\"chrome-extension:\"!==gr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Ar,Dr={};function xr(t){Dr[t]||(Dr[t]=!0,\"undefined\"!=typeof console&&\"function\"==typeof console.warn&&console.warn(t))}try{var Rr={};Object.defineProperty(Rr,\"abcd\",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Rr,\"abcd\",{configurable:!0,enumerable:!0,value:2}),Ar=2==Rr.abcd}catch(Kt){Ar=!1}function Pr(t,e,n){Ar?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Mr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Pr(t,n,e[n])}function jr(t){var e={};return Mr(e,t),e}function Lr(t){var e=t;if(\"object\"==typeof t&&null!=t)for(var n in e=\"length\"in t?[]:{},t)Pr(e,n,Lr(t[n]));return e}function Fr(t){var e={},n=t[Ur],r=t[Vr];if(!(t=t[Br])||t!=qr&&!n)throw Error(\"Invalid provider user info!\");e[zr]=r||null,e[Wr]=n||null,Pr(this,Qr,t),Pr(this,Hr,Lr(e))}var qr=\"EMAIL_SIGNIN\",Ur=\"email\",Vr=\"newEmail\",Br=\"requestType\",Wr=\"email\",zr=\"fromEmail\",Hr=\"data\",Qr=\"operation\";function Kr(t,e){this.code=Yr+t,this.message=e||Xr[t]||\"\"}function Gr(t){var e=t&&t.code;return e?new Kr(e.substring(Yr.length),t.message):null}I(Kr,Error),Kr.prototype.w=function(){return{code:this.code,message:this.message}},Kr.prototype.toJSON=function(){return this.w()};var Yr=\"auth/\",Xr={\"admin-restricted-operation\":\"This operation is restricted to administrators only.\",\"argument-error\":\"\",\"app-not-authorized\":\"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.\",\"app-not-installed\":\"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.\",\"captcha-check-failed\":\"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.\",\"code-expired\":\"The SMS code has expired. Please re-send the verification code to try again.\",\"cordova-not-ready\":\"Cordova framework is not ready.\",\"cors-unsupported\":\"This browser is not supported.\",\"credential-already-in-use\":\"This credential is already associated with a different user account.\",\"custom-token-mismatch\":\"The custom token corresponds to a different audience.\",\"requires-recent-login\":\"This operation is sensitive and requires recent authentication. Log in again before retrying this request.\",\"dynamic-link-not-activated\":\"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.\",\"email-already-in-use\":\"The email address is already in use by another account.\",\"expired-action-code\":\"The action code has expired. \",\"cancelled-popup-request\":\"This operation has been cancelled due to another conflicting popup being opened.\",\"internal-error\":\"An internal error has occurred.\",\"invalid-app-credential\":\"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.\",\"invalid-app-id\":\"The mobile app identifier is not registed for the current project.\",\"invalid-user-token\":\"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.\",\"invalid-auth-event\":\"An internal error has occurred.\",\"invalid-verification-code\":\"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.\",\"invalid-continue-uri\":\"The continue URL provided in the request is invalid.\",\"invalid-cordova-configuration\":\"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.\",\"invalid-custom-token\":\"The custom token format is incorrect. Please check the documentation.\",\"invalid-dynamic-link-domain\":\"The provided dynamic link domain is not configured or authorized for the current project.\",\"invalid-email\":\"The email address is badly formatted.\",\"invalid-api-key\":\"Your API key is invalid, please check you have copied it correctly.\",\"invalid-cert-hash\":\"The SHA-1 certificate hash provided is invalid.\",\"invalid-credential\":\"The supplied auth credential is malformed or has expired.\",\"invalid-message-payload\":\"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.\",\"invalid-oauth-provider\":\"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.\",\"invalid-oauth-client-id\":\"The OAuth client ID provided is either invalid or does not match the specified API key.\",\"unauthorized-domain\":\"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.\",\"invalid-action-code\":\"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.\",\"wrong-password\":\"The password is invalid or the user does not have a password.\",\"invalid-persistence-type\":\"The specified persistence type is invalid. It can only be local, session or none.\",\"invalid-phone-number\":\"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].\",\"invalid-provider-id\":\"The specified provider ID is invalid.\",\"invalid-recipient-email\":\"The email corresponding to this action failed to send as the provided recipient email address is invalid.\",\"invalid-sender\":\"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.\",\"invalid-verification-id\":\"The verification ID used to create the phone auth credential is invalid.\",\"missing-android-pkg-name\":\"An Android Package Name must be provided if the Android App is required to be installed.\",\"auth-domain-config-required\":\"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.\",\"missing-app-credential\":\"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.\",\"missing-verification-code\":\"The phone auth credential was created with an empty SMS verification code.\",\"missing-continue-uri\":\"A continue URL must be provided in the request.\",\"missing-iframe-start\":\"An internal error has occurred.\",\"missing-ios-bundle-id\":\"An iOS Bundle ID must be provided if an App Store ID is provided.\",\"missing-or-invalid-nonce\":\"The OIDC ID token requires a valid unhashed nonce.\",\"missing-phone-number\":\"To send verification codes, provide a phone number for the recipient.\",\"missing-verification-id\":\"The phone auth credential was created with an empty verification ID.\",\"app-deleted\":\"This instance of FirebaseApp has been deleted.\",\"account-exists-with-different-credential\":\"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.\",\"network-request-failed\":\"A network error (such as timeout, interrupted connection or unreachable host) has occurred.\",\"no-auth-event\":\"An internal error has occurred.\",\"no-such-provider\":\"User was not linked to an account with the given provider.\",\"null-user\":\"A null user object was provided as the argument for an operation which requires a non-null user object.\",\"operation-not-allowed\":\"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.\",\"operation-not-supported-in-this-environment\":'This operation is not supported in the environment this application is running on. \"location.protocol\" must be http, https or chrome-extension and web storage must be enabled.',\"popup-blocked\":\"Unable to establish a connection with the popup. It may have been blocked by the browser.\",\"popup-closed-by-user\":\"The popup has been closed by the user before finalizing the operation.\",\"provider-already-linked\":\"User can only be linked to one identity for the given provider.\",\"quota-exceeded\":\"The project's quota for this operation has been exceeded.\",\"redirect-cancelled-by-user\":\"The redirect operation has been cancelled by the user before finalizing.\",\"redirect-operation-pending\":\"A redirect sign-in operation is already pending.\",\"rejected-credential\":\"The request contains malformed or mismatching credentials.\",timeout:\"The operation has timed out.\",\"user-token-expired\":\"The user's credential is no longer valid. The user must sign in again.\",\"too-many-requests\":\"We have blocked all requests from this device due to unusual activity. Try again later.\",\"unauthorized-continue-uri\":\"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.\",\"unsupported-persistence-type\":\"The current environment does not support the specified persistence type.\",\"user-cancelled\":\"User did not grant your application the permissions it requested.\",\"user-not-found\":\"There is no user record corresponding to this identifier. The user may have been deleted.\",\"user-disabled\":\"The user account has been disabled by an administrator.\",\"user-mismatch\":\"The supplied credentials do not correspond to the previously signed in user.\",\"user-signed-out\":\"\",\"weak-password\":\"The password must be 6 characters long or more.\",\"web-storage-unsupported\":\"This browser is not supported or 3rd party cookies and data may be disabled.\"};function Jr(t){var e=t[ni];if(void 0===e)throw new Kr(\"missing-continue-uri\");if(\"string\"!=typeof e||\"string\"==typeof e&&!e.length)throw new Kr(\"invalid-continue-uri\");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Zr];if(n&&\"object\"==typeof n){e=n[oi];var r=n[ri];if(n=n[ii],\"string\"==typeof e&&e.length){if(this.a=e,void 0!==r&&\"boolean\"!=typeof r)throw new Kr(\"argument-error\",ri+\" property must be a boolean when specified.\");if(this.g=!!r,void 0!==n&&(\"string\"!=typeof n||\"string\"==typeof n&&!n.length))throw new Kr(\"argument-error\",ii+\" property must be a non empty string when specified.\");this.b=n||null}else{if(void 0!==e)throw new Kr(\"argument-error\",oi+\" property must be a non empty string when specified.\");if(void 0!==r||void 0!==n)throw new Kr(\"missing-android-pkg-name\")}}else if(void 0!==n)throw new Kr(\"argument-error\",Zr+\" property must be a non null object when specified.\");if(this.f=null,(e=t[ei])&&\"object\"==typeof e){if(\"string\"==typeof(e=e[ai])&&e.length)this.f=e;else if(void 0!==e)throw new Kr(\"argument-error\",ai+\" property must be a non empty string when specified.\")}else if(void 0!==e)throw new Kr(\"argument-error\",ei+\" property must be a non null object when specified.\");if(void 0!==(e=t[ti])&&\"boolean\"!=typeof e)throw new Kr(\"argument-error\",ti+\" property must be a boolean when specified.\");if(this.c=!!e,void 0!==(t=t[$r])&&(\"string\"!=typeof t||\"string\"==typeof t&&!t.length))throw new Kr(\"argument-error\",$r+\" property must be a non empty string when specified.\");this.i=t||null}var Zr=\"android\",$r=\"dynamicLinkDomain\",ti=\"handleCodeInApp\",ei=\"iOS\",ni=\"url\",ri=\"installApp\",ii=\"minimumVersion\",oi=\"packageName\",ai=\"bundleId\";function si(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var ui=null,ci=null;function li(t){this.c=t.sub,T(),this.a=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.b=!!t.is_anonymous||\"anonymous\"==this.a}function hi(t){return(t=fi(t))&&t.sub&&t.iss&&t.aud&&t.exp?new li(t):null}function fi(t){if(!t)return null;if(3!=(t=t.split(\".\")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=\".\";try{return JSON.parse(function(t){var e=\"\";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=ci[n];if(null!=i)return i;if(!/^[\\s\\xa0]*$/.test(n))throw Error(\"Unknown base64 encoding at char: \"+n)}return e}!function(){if(!ui){ui={},ci={};for(var t=0;65>t;t++)ui[t]=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\".charAt(t),ci[ui[t]]=t,62<=t&&(ci[\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.\".charAt(t)]=t)}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,function(t){e+=String.fromCharCode(t)}),e}(t))}catch(r){}return null}li.prototype.f=function(){return this.b};var di,pi={Yc:{ab:\"https://www.googleapis.com/identitytoolkit/v3/relyingparty/\",ib:\"https://securetoken.googleapis.com/v1/token\",id:\"p\"},$c:{ab:\"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/\",ib:\"https://staging-securetoken.sandbox.googleapis.com/v1/token\",id:\"s\"},ad:{ab:\"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/\",ib:\"https://test-securetoken.sandbox.googleapis.com/v1/token\",id:\"t\"}};function yi(t){for(var e in pi)if(pi[e].id===t)return{firebaseEndpoint:(t=pi[e]).ab,secureTokenEndpoint:t.ib};return null}di=yi(\"__EID__\")?\"__EID__\":void 0;var vi=\"oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version\".split(\" \"),mi=[\"client_id\",\"response_type\",\"scope\",\"redirect_uri\",\"state\"],gi={Tc:{Oa:\"locale\",Ba:500,Aa:600,Pa:\"facebook.com\",hb:mi},Vc:{Oa:null,Ba:500,Aa:620,Pa:\"github.com\",hb:mi},Wc:{Oa:\"hl\",Ba:515,Aa:680,Pa:\"google.com\",hb:mi},bd:{Oa:\"lang\",Ba:485,Aa:705,Pa:\"twitter.com\",hb:vi}};function bi(t){for(var e in gi)if(gi[e].Pa==t)return gi[e];return null}function wi(t){var e={};e[\"facebook.com\"]=Ti,e[\"google.com\"]=ki,e[\"github.com\"]=Ii,e[\"twitter.com\"]=Oi;var n=t&&t[Ei];try{if(n)return e[n]?new e[n](t):new Ci(t);if(void 0!==t[_i])return new Si(t)}catch(r){}return null}var _i=\"idToken\",Ei=\"providerId\";function Si(t){var e=t[Ei];if(!e&&t[_i]){var n=hi(t[_i]);n&&n.a&&(e=n.a)}if(!e)throw Error(\"Invalid additional user info!\");\"anonymous\"!=e&&\"custom\"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:\"identitytoolkit#SignupNewUserResponse\"===t.kind&&(n=!0),Pr(this,\"providerId\",e),Pr(this,\"isNewUser\",n)}function Ci(t){Si.call(this,t),Pr(this,\"profile\",Lr((t=Er(t.rawUserInfo||\"{}\"))||{}))}function Ti(t){if(Ci.call(this,t),\"facebook.com\"!=this.providerId)throw Error(\"Invalid provider ID!\")}function Ii(t){if(Ci.call(this,t),\"github.com\"!=this.providerId)throw Error(\"Invalid provider ID!\");Pr(this,\"username\",this.profile&&this.profile.login||null)}function ki(t){if(Ci.call(this,t),\"google.com\"!=this.providerId)throw Error(\"Invalid provider ID!\")}function Oi(t){if(Ci.call(this,t),\"twitter.com\"!=this.providerId)throw Error(\"Invalid provider ID!\");Pr(this,\"username\",t.screenName||null)}function Ni(t){this.a=tn(t)}function Ai(t){var e=tn(t),n=$e(e,\"link\"),r=$e(tn(n),\"link\");return e=$e(e,\"deep_link_id\"),$e(tn(e),\"link\")||e||r||n||t}function Di(){}function xi(t,e){return t.then(function(t){if(t[ga]){var n=hi(t[ga]);if(!n||e!=n.c)throw new Kr(\"user-mismatch\");return t}throw new Kr(\"user-mismatch\")}).s(function(t){throw t&&t.code&&t.code==Yr+\"user-not-found\"?new Kr(\"user-mismatch\"):t})}function Ri(t,e){if(!e)throw new Kr(\"internal-error\",\"failed to construct a credential\");this.a=e,Pr(this,\"providerId\",t),Pr(this,\"signInMethod\",t)}function Pi(t){return{pendingToken:t.a,requestUri:\"http://localhost\"}}function Mi(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf(\"saml.\")&&t.pendingToken)try{return new Ri(t.providerId,t.pendingToken)}catch(e){}return null}function ji(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Pr(this,\"idToken\",e.idToken),e.accessToken&&Pr(this,\"accessToken\",e.accessToken),e.nonce&&!e.pendingToken&&Pr(this,\"nonce\",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new Kr(\"internal-error\",\"failed to construct a credential\");Pr(this,\"accessToken\",e.oauthToken),Pr(this,\"secret\",e.oauthTokenSecret)}Pr(this,\"providerId\",t),Pr(this,\"signInMethod\",n)}function Li(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:dn(e).toString(),requestUri:\"http://localhost\"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function Fi(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new ji(t.providerId,e,t.signInMethod)}catch(n){}}return null}function qi(t,e){this.Dc=e||[],Mr(this,{providerId:t,isOAuthProvider:!0}),this.zb={},this.cb=(bi(t)||{}).Oa||null,this.$a=null}function Ui(t){if(\"string\"!=typeof t||0!=t.indexOf(\"saml.\"))throw new Kr(\"argument-error\",'SAML provider IDs must be prefixed with \"saml.\"');qi.call(this,t,[])}function Vi(t){qi.call(this,t,mi),this.a=[]}function Bi(){Vi.call(this,\"facebook.com\")}function Wi(t){if(!t)throw new Kr(\"argument-error\",\"credential failed: expected 1 argument (the OAuth access token).\");var e=t;return m(t)&&(e=t.accessToken),(new Bi).credential({accessToken:e})}function zi(){Vi.call(this,\"github.com\")}function Hi(t){if(!t)throw new Kr(\"argument-error\",\"credential failed: expected 1 argument (the OAuth access token).\");var e=t;return m(t)&&(e=t.accessToken),(new zi).credential({accessToken:e})}function Qi(){Vi.call(this,\"google.com\"),this.ua(\"profile\")}function Ki(t,e){var n=t;return m(t)&&(n=t.idToken,e=t.accessToken),(new Qi).credential({idToken:n,accessToken:e})}function Gi(){qi.call(this,\"twitter.com\",vi)}function Yi(t,e){var n=t;if(m(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new Kr(\"argument-error\",\"credential failed: expected 2 arguments (the OAuth access token and secret).\");return new ji(\"twitter.com\",n,\"twitter.com\")}function Xi(t,e,n){this.a=t,this.c=e,Pr(this,\"providerId\",\"password\"),Pr(this,\"signInMethod\",n===Zi.EMAIL_LINK_SIGN_IN_METHOD?Zi.EMAIL_LINK_SIGN_IN_METHOD:Zi.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Ji(t){return t&&t.email&&t.password?new Xi(t.email,t.password,t.signInMethod):null}function Zi(){Mr(this,{providerId:\"password\",isOAuthProvider:!1})}function $i(t,e){if(!(e=to(e)))throw new Kr(\"argument-error\",\"Invalid email link!\");return new Xi(t,e,Zi.EMAIL_LINK_SIGN_IN_METHOD)}function to(t){var e=$e((t=new Ni(t=Ai(t))).a,\"oobCode\")||null;return\"signIn\"===($e(t.a,\"mode\")||null)&&e?e:null}function eo(t){if(!(t.Ta&&t.Sa||t.Fa&&t.$))throw new Kr(\"internal-error\");this.a=t,Pr(this,\"providerId\",\"phone\"),Pr(this,\"signInMethod\",\"phone\")}function no(t){if(t&&\"phone\"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return F([\"verificationId\",\"verificationCode\",\"temporaryProof\",\"phoneNumber\"],function(n){t[n]&&(e[n]=t[n])}),new eo(e)}return null}function ro(t){return t.a.Fa&&t.a.$?{temporaryProof:t.a.Fa,phoneNumber:t.a.$}:{sessionInfo:t.a.Ta,code:t.a.Sa}}function io(t){try{this.a=t||C.a.auth()}catch(e){throw new Kr(\"argument-error\",\"Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().\")}Mr(this,{providerId:\"phone\",isOAuthProvider:!1})}function oo(t,e){if(!t)throw new Kr(\"missing-verification-id\");if(!e)throw new Kr(\"missing-verification-code\");return new eo({Ta:t,Sa:e})}function ao(t){if(t.temporaryProof&&t.phoneNumber)return new eo({Fa:t.temporaryProof,$:t.phoneNumber});var e=t&&t.providerId;if(!e||\"password\"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case\"google.com\":return Ki(o,n);case\"facebook.com\":return Wi(n);case\"github.com\":return Hi(n);case\"twitter.com\":return Yi(n,r);default:return n||r||o||a?a?0==e.indexOf(\"saml.\")?new Ri(e,a):new ji(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new Vi(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(s){return null}}function so(t){if(!t.isOAuthProvider)throw new Kr(\"invalid-oauth-provider\")}function uo(t,e,n,r,i,o){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.h=o||null,this.a=i||null,!this.g&&!this.a)throw new Kr(\"invalid-auth-event\");if(this.g&&this.a)throw new Kr(\"invalid-auth-event\");if(this.g&&!this.f)throw new Kr(\"invalid-auth-event\")}function co(t){return(t=t||{}).type?new uo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&Gr(t.error),t.postBody):null}function lo(){this.b=null,this.a=[]}I(Ci,Si),I(Ti,Ci),I(Ii,Ci),I(ki,Ci),I(Oi,Ci),Ri.prototype.la=function(t){return ja(t,Pi(this))},Ri.prototype.b=function(t,e){var n=Pi(this);return n.idToken=e,La(t,n)},Ri.prototype.f=function(t,e){return xi(Fa(t,Pi(this)),e)},Ri.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},ji.prototype.la=function(t){return ja(t,Li(this))},ji.prototype.b=function(t,e){var n=Li(this);return n.idToken=e,La(t,n)},ji.prototype.f=function(t,e){return xi(Fa(t,Li(this)),e)},ji.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},qi.prototype.Da=function(t){return this.zb=ut(t),this},I(Ui,qi),I(Vi,qi),Vi.prototype.ua=function(t){return V(this.a,t)||this.a.push(t),this},Vi.prototype.Fb=function(){return H(this.a)},Vi.prototype.credential=function(t,e){var n;if(!(n=m(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new Kr(\"argument-error\",\"credential failed: must provide the ID token and/or the access token.\");return new ji(this.providerId,n,this.providerId)},I(Bi,Vi),Pr(Bi,\"PROVIDER_ID\",\"facebook.com\"),Pr(Bi,\"FACEBOOK_SIGN_IN_METHOD\",\"facebook.com\"),I(zi,Vi),Pr(zi,\"PROVIDER_ID\",\"github.com\"),Pr(zi,\"GITHUB_SIGN_IN_METHOD\",\"github.com\"),I(Qi,Vi),Pr(Qi,\"PROVIDER_ID\",\"google.com\"),Pr(Qi,\"GOOGLE_SIGN_IN_METHOD\",\"google.com\"),I(Gi,qi),Pr(Gi,\"PROVIDER_ID\",\"twitter.com\"),Pr(Gi,\"TWITTER_SIGN_IN_METHOD\",\"twitter.com\"),Xi.prototype.la=function(t){return this.signInMethod==Zi.EMAIL_LINK_SIGN_IN_METHOD?ds(t,Qa,{email:this.a,oobCode:this.c}):ds(t,cs,{email:this.a,password:this.c})},Xi.prototype.b=function(t,e){return this.signInMethod==Zi.EMAIL_LINK_SIGN_IN_METHOD?ds(t,Ka,{idToken:e,email:this.a,oobCode:this.c}):ds(t,rs,{idToken:e,email:this.a,password:this.c})},Xi.prototype.f=function(t,e){return xi(this.la(t),e)},Xi.prototype.w=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},Mr(Zi,{PROVIDER_ID:\"password\"}),Mr(Zi,{EMAIL_LINK_SIGN_IN_METHOD:\"emailLink\"}),Mr(Zi,{EMAIL_PASSWORD_SIGN_IN_METHOD:\"password\"}),eo.prototype.la=function(t){return t.Ua(ro(this))},eo.prototype.b=function(t,e){var n=ro(this);return n.idToken=e,ds(t,hs,n)},eo.prototype.f=function(t,e){var n=ro(this);return n.operation=\"REAUTH\",xi(t=ds(t,fs,n),e)},eo.prototype.w=function(){var t={providerId:\"phone\"};return this.a.Ta&&(t.verificationId=this.a.Ta),this.a.Sa&&(t.verificationCode=this.a.Sa),this.a.Fa&&(t.temporaryProof=this.a.Fa),this.a.$&&(t.phoneNumber=this.a.$),t},io.prototype.Ua=function(t,e){var n=this.a.c;return kt(e.verify()).then(function(r){if(!s(r))throw new Kr(\"argument-error\",\"An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.\");switch(e.type){case\"recaptcha\":return function(t,e){return ds(n,es,e)}(0,{phoneNumber:t,recaptchaToken:r}).then(function(t){return\"function\"==typeof e.reset&&e.reset(),t},function(t){throw\"function\"==typeof e.reset&&e.reset(),t});default:throw new Kr(\"argument-error\",'Only firebase.auth.ApplicationVerifiers with type=\"recaptcha\" are currently supported.')}})},Mr(io,{PROVIDER_ID:\"phone\"}),Mr(io,{PHONE_SIGN_IN_METHOD:\"phone\"}),uo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.i&&t.push(this.i),t.join(\"-\")},uo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.h,error:this.a&&this.a.w()}};var ho,fo=null;function po(t){var e=\"unauthorized-domain\",n=void 0,r=tn(t);t=r.b,\"chrome-extension\"==(r=r.f)?n=dt(\"This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.\",t):\"http\"==r||\"https\"==r?n=dt(\"This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.\",t):e=\"operation-not-supported-in-this-environment\",Kr.call(this,e,n)}function yo(t,e,n){Kr.call(this,t,n),(t=e||{}).Ab&&Pr(this,\"email\",t.Ab),t.$&&Pr(this,\"phoneNumber\",t.$),t.credential&&Pr(this,\"credential\",t.credential)}function vo(t){if(t.code){var e=t.code||\"\";0==e.indexOf(Yr)&&(e=e.substring(Yr.length));var n={credential:ao(t)};if(t.email)n.Ab=t.email;else if(t.phoneNumber)n.$=t.phoneNumber;else if(!n.credential)return new Kr(e,t.message||void 0);return new yo(e,n,t.message)}return null}function mo(){}function go(){}function bo(t){if(!t.f&&\"undefined\"==typeof XMLHttpRequest&&\"undefined\"!=typeof ActiveXObject){for(var e=[\"MSXML2.XMLHTTP.6.0\",\"MSXML2.XMLHTTP.3.0\",\"MSXML2.XMLHTTP\",\"Microsoft.XMLHTTP\"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(i){}}throw Error(\"Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed\")}return t.f}function wo(){}function _o(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response=\"\",this.status=-1,this.statusText=\"\",this.a.onload=E(this.dc,this),this.a.onerror=E(this.Gb,this),this.a.onprogress=E(this.ec,this),this.a.ontimeout=E(this.ic,this)}function Eo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function So(t,e,n){this.reset(t,e,n,void 0,void 0)}function Co(t){this.f=t,this.b=this.c=this.a=null}function To(t,e){this.name=t,this.value=e}lo.prototype.subscribe=function(t){var e=this;this.a.push(t),this.b||(this.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},\"function\"==typeof(t=pr(\"universalLinks.subscribe\",a))&&t(null,this.b))},lo.prototype.unsubscribe=function(t){W(this.a,function(e){return e==t})},I(po,Kr),I(yo,Kr),yo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber);var e=this.credential&&this.credential.w();return e&&ft(t,e),t},yo.prototype.toJSON=function(){return this.w()},mo.prototype.c=null,I(go,mo),go.prototype.a=function(){var t=bo(this);return t?new ActiveXObject(t):new XMLHttpRequest},go.prototype.b=function(){var t={};return bo(this)&&(t[0]=!0,t[1]=!0),t},ho=new go,I(wo,mo),wo.prototype.a=function(){var t=new XMLHttpRequest;if(\"withCredentials\"in t)return t;if(\"undefined\"!=typeof XDomainRequest)return new _o;throw Error(\"Unsupported browser\")},wo.prototype.b=function(){return{}},(t=_o.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error(\"Only async requests are supported.\");this.a.open(t,e)},t.send=function(t){if(t){if(\"string\"!=typeof t)throw Error(\"Only string data is supported\");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return\"content-type\"==t.toLowerCase()?this.a.contentType:\"\"},t.dc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Eo(this,4)},t.Gb=function(){this.status=500,this.response=this.responseText=\"\",Eo(this,4)},t.ic=function(){this.Gb()},t.ec=function(){this.status=200,Eo(this,1)},t.getAllResponseHeaders=function(){return\"content-type: \"+this.a.contentType},So.prototype.a=null,So.prototype.reset=function(t,e,n,r,i){r||T(),delete this.a},To.prototype.toString=function(){return this.name};var Io=new To(\"SEVERE\",1e3),ko=new To(\"WARNING\",900),Oo=new To(\"CONFIG\",700),No=new To(\"FINE\",500);Co.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(A(\"Root logger has no level set.\"),null)}(this).value)for(v(e)&&(e=e()),t=new So(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Ao={},Do=null;function xo(t){var e;if(Do||(Do=new Co(\"\"),Ao[\"\"]=Do,Do.c=Oo),!(e=Ao[t])){e=new Co(t);var n=t.lastIndexOf(\".\"),r=t.substr(n+1);(n=xo(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,Ao[t]=e}return e}function Ro(t,e){t&&t.log(No,e,void 0)}function Po(t){this.f=t}function Mo(t){je.call(this),this.u=t,this.readyState=jo,this.status=0,this.responseType=this.responseText=this.response=this.statusText=\"\",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.o=\"GET\",this.g=\"\",this.a=!1,this.h=xo(\"goog.net.FetchXmlHttp\"),this.l=this.c=this.f=null}I(Po,mo),Po.prototype.a=function(){return new Mo(this.f)},Po.prototype.b=function(t){return function(){return t}}({}),I(Mo,je);var jo=0;function Lo(t){t.c.read().then(t.cc.bind(t)).catch(t.Ma.bind(t))}function Fo(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,qo(t)}function qo(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Uo(t){je.call(this),this.headers=new ze,this.D=t||null,this.c=!1,this.A=this.a=null,this.h=this.N=this.l=\"\",this.f=this.I=this.i=this.G=!1,this.g=0,this.u=null,this.o=Vo,this.v=this.O=!1}(t=Mo.prototype).open=function(t,e){if(this.readyState!=jo)throw this.abort(),Error(\"Error reopening a connection\");this.o=t,this.g=e,this.readyState=1,qo(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error(\"need to call open() first. \");this.a=!0;var e={headers:this.i,method:this.o,credentials:void 0,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.g,e)).then(this.hc.bind(this),this.Ma.bind(this))},t.abort=function(){this.response=this.responseText=\"\",this.i=new Headers,this.status=0,this.c&&this.c.cancel(\"Request was aborted.\"),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Fo(this,!1)),this.readyState=jo},t.hc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,qo(this)),this.a&&(this.readyState=3,qo(this),this.a&&(\"arraybuffer\"===this.responseType?t.arrayBuffer().then(this.fc.bind(this),this.Ma.bind(this)):void 0!==a.ReadableStream&&\"body\"in t?(this.response=this.responseText=\"\",this.c=t.body.getReader(),this.l=new TextDecoder,Lo(this)):t.text().then(this.gc.bind(this),this.Ma.bind(this)))))},t.cc=function(t){if(this.a){var e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?Fo(this,!0):qo(this),3==this.readyState&&Lo(this)}},t.gc=function(t){this.a&&(this.response=this.responseText=t,Fo(this,!0))},t.fc=function(t){this.a&&(this.response=t,Fo(this,!0))},t.Ma=function(t){var e=this.h;e&&e.log(ko,\"Failed to fetch url \"+this.g,t instanceof Error?t:Error(t)),this.a&&Fo(this,!0)},t.setRequestHeader=function(t,e){this.i.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||\"\":((t=this.h)&&t.log(ko,\"Attempting to get response header but no headers have been received for url: \"+this.g,void 0),\"\")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(ko,\"Attempting to get all response headers but no headers have been received for url: \"+this.g,void 0),\"\"}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+\": \"+n[1]),n=e.next();return t.join(\"\\r\\n\")},I(Uo,je);var Vo=\"\";Uo.prototype.b=xo(\"goog.net.XhrIo\");var Bo=/^https?$/i,Wo=[\"POST\",\"PUT\"];function zo(t){return\"content-type\"==t.toLowerCase()}function Ho(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Qo(t),Go(t)}function Qo(t){t.G||(t.G=!0,t.dispatchEvent(\"complete\"),t.dispatchEvent(\"error\"))}function Ko(t){if(t.c&&void 0!==o)if(t.A[1]&&4==Xo(t)&&2==Jo(t))Ro(t.b,Zo(t,\"Local request error detected and ignored\"));else if(t.i&&4==Xo(t))Ue(t.Jb,0,t);else if(t.dispatchEvent(\"readystatechange\"),4==Xo(t)){Ro(t.b,Zo(t,\"Request complete\")),t.c=!1;try{var e,n=Jo(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var s=String(t.l).match(Ke)[1]||null;if(!s&&a.self&&a.self.location){var u=a.self.location.protocol;s=u.substr(0,u.length-1)}i=!Bo.test(s?s.toLowerCase():\"\")}e=i}if(e)t.dispatchEvent(\"complete\"),t.dispatchEvent(\"success\");else{try{var c=2<Xo(t)?t.a.statusText:\"\"}catch(l){Ro(t.b,\"Can not get status: \"+l.message),c=\"\"}t.h=c+\" [\"+Jo(t)+\"]\",Qo(t)}}finally{Go(t)}}}function Go(t,e){if(t.a){Yo(t);var n=t.a,r=t.A[0]?h:null;t.a=null,t.A=null,e||t.dispatchEvent(\"ready\");try{n.onreadystatechange=r}catch(i){(t=t.b)&&t.log(Io,\"Problem encountered resetting onreadystatechange: \"+i.message,void 0)}}}function Yo(t){t.a&&t.v&&(t.a.ontimeout=null),t.u&&(a.clearTimeout(t.u),t.u=null)}function Xo(t){return t.a?t.a.readyState:0}function Jo(t){try{return 2<Xo(t)?t.a.status:-1}catch(e){return-1}}function Zo(t,e){return e+\" [\"+t.N+\" \"+t.l+\" \"+Jo(t)+\"]\"}function $o(t){var e=la;this.g=[],this.v=e,this.u=t||null,this.f=this.a=!1,this.c=void 0,this.l=this.A=this.i=!1,this.h=0,this.b=null,this.m=0}function ta(t,e,n){t.a=!0,t.c=n,t.f=!e,ia(t)}function ea(t){if(t.a){if(!t.l)throw new oa(t);t.l=!1}}function na(t,e,n,r){t.g.push([e,n,r]),t.a&&ia(t)}function ra(t){return U(t.g,function(t){return v(t[1])})}function ia(t){if(t.h&&t.a&&ra(t)){var e=t.h,n=ua[e];n&&(a.clearTimeout(n.a),delete ua[e]),t.h=0}t.b&&(t.b.m--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var u=o.call(i||t.u,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(k(e)||\"function\"==typeof a.Promise&&e instanceof a.Promise)&&(r=!0,t.i=!0)}catch(c){e=c,t.f=!0,ra(t)||(n=!0)}}t.c=e,r&&(u=E(t.o,t,!0),r=E(t.o,t,!1),e instanceof $o?(na(e,u,r),e.A=!0):e.then(u,r)),n&&(e=new sa(e),ua[e.a]=e,t.h=e.a)}function oa(){O.call(this)}function aa(){O.call(this)}function sa(t){this.a=a.setTimeout(E(this.c,this),0),this.b=t}(t=Uo.prototype).Ga=function(){void 0!==o&&this.a&&(this.h=\"Timed out after \"+this.g+\"ms, aborting\",Ro(this.b,Zo(this,this.h)),this.dispatchEvent(\"timeout\"),this.abort(8))},t.abort=function(){this.a&&this.c&&(Ro(this.b,Zo(this,\"Aborting\")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent(\"complete\"),this.dispatchEvent(\"abort\"),Go(this))},t.va=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Go(this,!0)),Uo.qb.va.call(this)},t.Jb=function(){this.qa||(this.I||this.i||this.f?Ko(this):this.wc())},t.wc=function(){Ko(this)},t.getResponse=function(){try{if(!this.a)return null;if(\"response\"in this.a)return this.a.response;switch(this.o){case Vo:case\"text\":return this.a.responseText;case\"arraybuffer\":if(\"mozResponseArrayBuffer\"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Io,\"Response type \"+this.o+\" is not supported on this browser\",void 0),null}catch(e){return Ro(this.b,\"Can not get response: \"+e.message),null}},$o.prototype.cancel=function(t){if(this.a)this.c instanceof $o&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.m--,0>=e.m&&e.cancel())}this.v?this.v.call(this.u,this):this.l=!0,this.a||(t=new aa(this),ea(this),ta(this,!1,t))}},$o.prototype.o=function(t,e){this.i=!1,ta(this,t,e)},$o.prototype.then=function(t,e,n){var r,i,o=new wt(function(t,e){r=t,i=e});return na(this,r,function(t){t instanceof aa?o.cancel():i(t)}),o.then(t,e,n)},$o.prototype.$goog_Thenable=!0,I(oa,O),oa.prototype.message=\"Deferred has already fired\",oa.prototype.name=\"AlreadyCalledError\",I(aa,O),aa.prototype.message=\"Deferred was canceled\",aa.prototype.name=\"CanceledError\",sa.prototype.c=function(){throw delete ua[this.a],this.b};var ua={};function ca(t){var e={},n=e.document||document,r=Tn(t).toString(),i=document.createElement(\"SCRIPT\"),o={Lb:i,Ga:void 0},s=new $o(o),u=null,h=null!=e.timeout?e.timeout:5e3;return 0<h&&(u=window.setTimeout(function(){ha(i,!0);var t=new pa(da,\"Timeout reached for loading script \"+r);ea(s),ta(s,!1,t)},h),o.Ga=u),i.onload=i.onreadystatechange=function(){i.readyState&&\"loaded\"!=i.readyState&&\"complete\"!=i.readyState||(ha(i,e.dd||!1,u),ea(s),ta(s,!0,null))},i.onerror=function(){ha(i,!0,u);var t=new pa(fa,\"Error while loading script \"+r);ea(s),ta(s,!1,t)},ft(o=e.attributes||{},{type:\"text/javascript\",charset:\"UTF-8\"}),Un(i,o),function(t,e){t.src=Tn(e),null===l&&(l=(e=(e=a.document).querySelector&&e.querySelector(\"script[nonce]\"))&&(e=e.nonce||e.getAttribute(\"nonce\"))&&c.test(e)?e:\"\"),(e=l)&&t.setAttribute(\"nonce\",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName(\"HEAD\"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function la(){if(this&&this.Lb){var t=this.Lb;t&&\"SCRIPT\"==t.tagName&&ha(t,!0,this.Ga)}}function ha(t,e,n){null!=n&&a.clearTimeout(n),t.onload=h,t.onerror=h,t.onreadystatechange=h,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var fa=0,da=1;function pa(t,e){var n=\"Jsloader error (code #\"+t+\")\";e&&(n+=\": \"+e),O.call(this,n),this.code=t}function ya(t){this.f=t}function va(t,e,n){if(this.b=t,this.i=(t=e||{}).secureTokenEndpoint||\"https://securetoken.googleapis.com/v1/token\",this.m=t.secureTokenTimeout||ba,this.f=ut(t.secureTokenHeaders||wa),this.g=t.firebaseEndpoint||\"https://www.googleapis.com/identitytoolkit/v3/relyingparty/\",this.h=t.firebaseTimeout||_a,this.a=ut(t.firebaseHeaders||Ea),n&&(this.a[\"X-Client-Version\"]=n,this.f[\"X-Client-Version\"]=n),n=\"Node\"==ar(),!(n=a.XMLHttpRequest||n&&C.a.INTERNAL.node&&C.a.INTERNAL.node.XMLHttpRequest)&&!or())throw new Kr(\"internal-error\",\"The XMLHttpRequest compatibility library was not found.\");this.c=void 0,this.c=or()?new Po(self):sr()?new ya(n):new wo}I(pa,O),I(ya,mo),ya.prototype.a=function(){return new this.f},ya.prototype.b=function(){return{}};var ma,ga=\"idToken\",ba=new Ir(3e4,6e4),wa={\"Content-Type\":\"application/x-www-form-urlencoded\"},_a=new Ir(3e4,6e4),Ea={\"Content-Type\":\"application/json\"};function Sa(t,e){e?t.a[\"X-Firebase-Locale\"]=e:delete t.a[\"X-Firebase-Locale\"]}function Ca(t,e){e?(t.a[\"X-Client-Version\"]=e,t.f[\"X-Client-Version\"]=e):(delete t.a[\"X-Client-Version\"],delete t.f[\"X-Client-Version\"])}function Ta(t,e,n,r,i,o,s){(function(){var t=dr();return!((t=lr(t)!=cr?null:(t=t.match(/\\sChrome\\/(\\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Yt&&ie&&!(9<ie))})()||or()?t=E(t.o,t):(ma||(ma=new wt(function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{a[ka]=function(){((window.gapi||{}).client||{}).request?t():e(Error(\"CORS_UNSUPPORTED\"))};var n=In(Ia,{onload:ka});!function(t,e){na(ca(n),null,e,void 0)}(0,function(){e(Error(\"CORS_UNSUPPORTED\"))})}}(t,e)})),t=E(t.l,t)),t(e,n,r,i,o,s)}va.prototype.o=function(t,e,n,r,i,o){if(or()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new Kr(\"operation-not-supported-in-this-environment\",\"fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.\");var u=new Uo(this.c);if(o){u.g=Math.max(0,o);var c=setTimeout(function(){u.dispatchEvent(\"timeout\")},o)}Le(u,\"complete\",function(){c&&clearTimeout(c);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:\"\"}catch(e){return Ro(t.b,\"Can not get responseText: \"+e.message),\"\"}}(this))||null}catch(n){t=null}e&&e(t)}),Fe(u,\"ready\",function(){c&&clearTimeout(c),zt(this)}),Fe(u,\"timeout\",function(){c&&clearTimeout(c),zt(this),e&&e(null)}),function(t,e,n,r,i){if(t.a)throw Error(\"[goog.net.XhrIo] Object is active with another request=\"+t.l+\"; newUri=\"+e);n=n?n.toUpperCase():\"GET\",t.l=e,t.h=\"\",t.N=n,t.G=!1,t.c=!0,t.a=t.D?t.D.a():ho.a(),t.A=function(t){return t.c||(t.c=t.b())}(t.D?t.D:ho),t.a.onreadystatechange=E(t.Jb,t);try{Ro(t.b,Zo(t,\"Opening Xhr\")),t.I=!0,t.a.open(n,String(e),!0),t.I=!1}catch(u){return Ro(t.b,Zo(t,\"Error opening Xhr: \"+u.message)),void Ho(t,u)}e=r||\"\";var o=new ze(t.headers);i&&function(t,e){if(t.forEach&&\"function\"==typeof t.forEach)t.forEach(e,void 0);else if(y(t)||s(t))F(t,e,void 0);else for(var n=We(t),r=Be(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){o.set(e,t)}),i=function(t){t:{for(var e=zo,n=t.length,r=s(t)?t.split(\"\"):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:s(t)?t.charAt(e):t[e]}(o.U()),r=a.FormData&&e instanceof a.FormData,!V(Wo,n)||i||r||o.set(\"Content-Type\",\"application/x-www-form-urlencoded;charset=utf-8\"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.o&&(t.a.responseType=t.o),\"withCredentials\"in t.a&&t.a.withCredentials!==t.O&&(t.a.withCredentials=t.O);try{Yo(t),0<t.g&&(t.v=function(t){return Yt&&ae(9)&&\"number\"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),Ro(t.b,Zo(t,\"Will abort after \"+t.g+\"ms if incomplete, xhr2 \"+t.v)),t.v?(t.a.timeout=t.g,t.a.ontimeout=E(t.Ga,t)):t.u=Ue(t.Ga,t.g,t)),Ro(t.b,Zo(t,\"Sending request\")),t.i=!0,t.a.send(e),t.i=!1}catch(u){Ro(t.b,Zo(t,\"Send error: \"+u.message)),Ho(t,u)}}(u,t,n,r,i)};var Ia=new wn(Sn,\"https://apis.google.com/js/client.js?onload=%{onload}\"),ka=\"__fcb\"+Math.floor(1e6*Math.random()).toString();function Oa(t){if(!s(t=t.email)||!er.test(t))throw new Kr(\"invalid-email\")}function Na(t){\"email\"in t&&Oa(t)}function Aa(t){if(!t[ga])throw new Kr(\"internal-error\")}function Da(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new Kr(\"internal-error\")}else{if(!t.sessionInfo)throw new Kr(\"missing-verification-id\");if(!t.code)throw new Kr(\"missing-verification-code\")}}va.prototype.l=function(t,e,n,r,i){var o=this;ma.then(function(){window.gapi.client.setApiKey(o.b);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:\"none\",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})}).s(function(t){e&&e({error:{message:t&&t.message||\"CORS_UNSUPPORTED\"}})})},va.prototype.ob=function(){return ds(this,is,{})},va.prototype.rb=function(t,e){return ds(this,ns,{idToken:t,email:e})},va.prototype.sb=function(t,e){return ds(this,rs,{idToken:t,password:e})};var xa={displayName:\"DISPLAY_NAME\",photoUrl:\"PHOTO_URL\"};function Ra(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new Kr(\"internal-error\")}function Pa(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf(\"oidc.\")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&yn(t=new hn(t.postBody),\"nonce\")&&(e.nonce=t.get(\"nonce\"))),e}function Ma(t){var e=null;if(t.needConfirmation?(t.code=\"account-exists-with-different-credential\",e=vo(t)):\"FEDERATED_USER_ID_ALREADY_LINKED\"==t.errorMessage?(t.code=\"credential-already-in-use\",e=vo(t)):\"EMAIL_EXISTS\"==t.errorMessage?(t.code=\"email-already-in-use\",e=vo(t)):t.errorMessage&&(e=ps(t.errorMessage)),e)throw e;if(!t[ga])throw new Kr(\"internal-error\")}function ja(t,e){return e.returnIdpCredential=!0,ds(t,os,e)}function La(t,e){return e.returnIdpCredential=!0,ds(t,ss,e)}function Fa(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,ds(t,as,e)}function qa(t){if(!t.oobCode)throw new Kr(\"invalid-action-code\")}(t=va.prototype).tb=function(t,e){var n={idToken:t},r=[];return at(xa,function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),ds(this,ns,n)},t.kb=function(t,e){return ft(t={requestType:\"PASSWORD_RESET\",email:t},e),ds(this,Ja,t)},t.lb=function(t,e){return ft(t={requestType:\"EMAIL_SIGNIN\",email:t},e),ds(this,Ya,t)},t.jb=function(t,e){return ft(t={requestType:\"VERIFY_EMAIL\",idToken:t},e),ds(this,Xa,t)},t.Ua=function(t){return ds(this,ls,t)},t.Za=function(t,e){return ds(this,ts,{oobCode:t,newPassword:e})},t.Ka=function(t){return ds(this,Va,{oobCode:t})},t.Wa=function(t){return ds(this,Ua,{oobCode:t})};var Ua={endpoint:\"setAccountInfo\",C:qa,da:\"email\"},Va={endpoint:\"resetPassword\",C:qa,J:function(t){var e=t.requestType;if(!e||!t.email&&\"EMAIL_SIGNIN\"!=e)throw new Kr(\"internal-error\")}},Ba={endpoint:\"signupNewUser\",C:function(t){if(Oa(t),!t.password)throw new Kr(\"weak-password\")},J:Aa,R:!0},Wa={endpoint:\"createAuthUri\"},za={endpoint:\"deleteAccount\",T:[\"idToken\"]},Ha={endpoint:\"setAccountInfo\",T:[\"idToken\",\"deleteProvider\"],C:function(t){if(!p(t.deleteProvider))throw new Kr(\"internal-error\")}},Qa={endpoint:\"emailLinkSignin\",T:[\"email\",\"oobCode\"],C:Oa,J:Aa,R:!0},Ka={endpoint:\"emailLinkSignin\",T:[\"idToken\",\"email\",\"oobCode\"],C:Oa,J:Aa,R:!0},Ga={endpoint:\"getAccountInfo\"},Ya={endpoint:\"getOobConfirmationCode\",T:[\"requestType\"],C:function(t){if(\"EMAIL_SIGNIN\"!=t.requestType)throw new Kr(\"internal-error\");Oa(t)},da:\"email\"},Xa={endpoint:\"getOobConfirmationCode\",T:[\"idToken\",\"requestType\"],C:function(t){if(\"VERIFY_EMAIL\"!=t.requestType)throw new Kr(\"internal-error\")},da:\"email\"},Ja={endpoint:\"getOobConfirmationCode\",T:[\"requestType\"],C:function(t){if(\"PASSWORD_RESET\"!=t.requestType)throw new Kr(\"internal-error\");Oa(t)},da:\"email\"},Za={wb:!0,endpoint:\"getProjectConfig\",Ib:\"GET\"},$a={wb:!0,endpoint:\"getRecaptchaParam\",Ib:\"GET\",J:function(t){if(!t.recaptchaSiteKey)throw new Kr(\"internal-error\")}},ts={endpoint:\"resetPassword\",C:qa,da:\"email\"},es={endpoint:\"sendVerificationCode\",T:[\"phoneNumber\",\"recaptchaToken\"],da:\"sessionInfo\"},ns={endpoint:\"setAccountInfo\",T:[\"idToken\"],C:Na,R:!0},rs={endpoint:\"setAccountInfo\",T:[\"idToken\"],C:function(t){if(Na(t),!t.password)throw new Kr(\"weak-password\")},J:Aa,R:!0},is={endpoint:\"signupNewUser\",J:Aa,R:!0},os={endpoint:\"verifyAssertion\",C:Ra,Qa:Pa,J:Ma,R:!0},as={endpoint:\"verifyAssertion\",C:Ra,Qa:Pa,J:function(t){if(t.errorMessage&&\"USER_NOT_FOUND\"==t.errorMessage)throw new Kr(\"user-not-found\");if(t.errorMessage)throw ps(t.errorMessage);if(!t[ga])throw new Kr(\"internal-error\")},R:!0},ss={endpoint:\"verifyAssertion\",C:function(t){if(Ra(t),!t.idToken)throw new Kr(\"internal-error\")},Qa:Pa,J:Ma,R:!0},us={endpoint:\"verifyCustomToken\",C:function(t){if(!t.token)throw new Kr(\"invalid-custom-token\")},J:Aa,R:!0},cs={endpoint:\"verifyPassword\",C:function(t){if(Oa(t),!t.password)throw new Kr(\"wrong-password\")},J:Aa,R:!0},ls={endpoint:\"verifyPhoneNumber\",C:Da,J:Aa},hs={endpoint:\"verifyPhoneNumber\",C:function(t){if(!t.idToken)throw new Kr(\"internal-error\");Da(t)},J:function(t){if(t.temporaryProof)throw t.code=\"credential-already-in-use\",vo(t);Aa(t)}},fs={Wb:{USER_NOT_FOUND:\"user-not-found\"},endpoint:\"verifyPhoneNumber\",C:Da,J:Aa};function ds(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||\"\"===r)return!1}return!0}(n,e.T))return Ot(new Kr(\"internal-error\"));var r,i=e.Ib||\"POST\";return kt(n).then(e.C).then(function(){return e.R&&(n.returnSecureToken=!0),function(t,e,n,r,i,o){var a=tn(t.g+e);Ze(a,\"key\",t.b),o&&Ze(a,\"cb\",T().toString());var s=\"GET\"==n;if(s)for(var u in r)r.hasOwnProperty(u)&&Ze(a,u,r[u]);return new wt(function(e,o){Ta(t,a.toString(),function(t){t?t.error?o(ys(t,i||{})):e(t):o(new Kr(\"network-request-failed\"))},n,s?void 0:Wn(_r(r)),t.a,t.h.get())})}(t,e.endpoint,i,n,e.Wb,e.wb||!1)}).then(function(t){return r=t,e.Qa?e.Qa(n,r):r}).then(e.J).then(function(){if(!e.da)return r;if(!(e.da in r))throw new Kr(\"internal-error\");return r[e.da]})}function ps(t){return ys({error:{errors:[{message:t}],code:400,message:t}})}function ys(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||\"\",r={keyInvalid:\"invalid-api-key\",ipRefererBlocked:\"app-not-authorized\"};if(n=r[n]?new Kr(r[n]):null)return n;for(var i in n=t.error&&t.error.message||\"\",ft(r={INVALID_CUSTOM_TOKEN:\"invalid-custom-token\",CREDENTIAL_MISMATCH:\"custom-token-mismatch\",MISSING_CUSTOM_TOKEN:\"internal-error\",INVALID_IDENTIFIER:\"invalid-email\",MISSING_CONTINUE_URI:\"internal-error\",INVALID_EMAIL:\"invalid-email\",INVALID_PASSWORD:\"wrong-password\",USER_DISABLED:\"user-disabled\",MISSING_PASSWORD:\"internal-error\",EMAIL_EXISTS:\"email-already-in-use\",PASSWORD_LOGIN_DISABLED:\"operation-not-allowed\",INVALID_IDP_RESPONSE:\"invalid-credential\",INVALID_PENDING_TOKEN:\"invalid-credential\",FEDERATED_USER_ID_ALREADY_LINKED:\"credential-already-in-use\",MISSING_OR_INVALID_NONCE:\"missing-or-invalid-nonce\",INVALID_MESSAGE_PAYLOAD:\"invalid-message-payload\",INVALID_RECIPIENT_EMAIL:\"invalid-recipient-email\",INVALID_SENDER:\"invalid-sender\",EMAIL_NOT_FOUND:\"user-not-found\",RESET_PASSWORD_EXCEED_LIMIT:\"too-many-requests\",EXPIRED_OOB_CODE:\"expired-action-code\",INVALID_OOB_CODE:\"invalid-action-code\",MISSING_OOB_CODE:\"internal-error\",INVALID_PROVIDER_ID:\"invalid-provider-id\",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:\"requires-recent-login\",INVALID_ID_TOKEN:\"invalid-user-token\",TOKEN_EXPIRED:\"user-token-expired\",USER_NOT_FOUND:\"user-token-expired\",CORS_UNSUPPORTED:\"cors-unsupported\",DYNAMIC_LINK_NOT_ACTIVATED:\"dynamic-link-not-activated\",INVALID_APP_ID:\"invalid-app-id\",TOO_MANY_ATTEMPTS_TRY_LATER:\"too-many-requests\",WEAK_PASSWORD:\"weak-password\",OPERATION_NOT_ALLOWED:\"operation-not-allowed\",USER_CANCELLED:\"user-cancelled\",CAPTCHA_CHECK_FAILED:\"captcha-check-failed\",INVALID_APP_CREDENTIAL:\"invalid-app-credential\",INVALID_CODE:\"invalid-verification-code\",INVALID_PHONE_NUMBER:\"invalid-phone-number\",INVALID_SESSION_INFO:\"invalid-verification-id\",INVALID_TEMPORARY_PROOF:\"invalid-credential\",MISSING_APP_CREDENTIAL:\"missing-app-credential\",MISSING_CODE:\"missing-verification-code\",MISSING_PHONE_NUMBER:\"missing-phone-number\",MISSING_SESSION_INFO:\"missing-verification-id\",QUOTA_EXCEEDED:\"quota-exceeded\",SESSION_EXPIRED:\"code-expired\",REJECTED_CREDENTIAL:\"rejected-credential\",INVALID_CONTINUE_URI:\"invalid-continue-uri\",MISSING_ANDROID_PACKAGE_NAME:\"missing-android-pkg-name\",MISSING_IOS_BUNDLE_ID:\"missing-ios-bundle-id\",UNAUTHORIZED_DOMAIN:\"unauthorized-continue-uri\",INVALID_DYNAMIC_LINK_DOMAIN:\"invalid-dynamic-link-domain\",INVALID_OAUTH_CLIENT_ID:\"invalid-oauth-client-id\",INVALID_CERT_HASH:\"invalid-cert-hash\",ADMIN_ONLY_OPERATION:\"admin-restricted-operation\"},e||{}),e=(e=n.match(/^[^\\s]+\\s*:\\s*(.*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new Kr(r[i],e);return!e&&t&&(e=wr(t)),new Kr(\"internal-error\",e)}function vs(t){this.b=t,this.a=null,this.fb=function(t){return(ws||(ws=new wt(function(t,e){function n(){Tr(),pr(\"gapi.load\")(\"gapi.iframes\",{callback:t,ontimeout:function(){Tr(),e(Error(\"Network Error\"))},timeout:gs.get()})}if(pr(\"gapi.iframes.Iframe\"))t();else if(pr(\"gapi.load\"))n();else{var r=\"__iframefcb\"+Math.floor(1e6*Math.random()).toString();a[r]=function(){pr(\"gapi.load\")?n():e(Error(\"Network Error\"))},kt(ca(r=In(ms,{onload:r}))).s(function(){e(Error(\"Network Error\"))})}}).s(function(t){throw ws=null,t}))).then(function(){return new wt(function(e,n){pr(\"gapi.iframes.getContext\")().open({where:document.body,url:t.b,messageHandlersFilter:pr(\"gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER\"),attributes:{style:{position:\"absolute\",top:\"-100px\",width:\"1px\",height:\"1px\"}},dontclear:!0},function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error(\"Network Error\"))},bs.get());r.ping(i).then(i,function(){n(Error(\"Network Error\"))})})})})}(this)}var ms=new wn(Sn,\"https://apis.google.com/js/api.js?onload=%{onload}\"),gs=new Ir(3e4,6e4),bs=new Ir(5e3,15e3),ws=null;function _s(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=en(this.i,\"/__/auth/iframe\"),Ze(this.a,\"apiKey\",this.g),Ze(this.a,\"appName\",this.h),this.b=null,this.c=[]}function Es(t,e,n,r,i){this.o=t,this.l=e,this.c=n,this.m=r,this.h=this.g=this.i=null,this.a=i,this.f=null}function Ss(t){try{return C.a.app(t).auth().ya()}catch(e){return[]}}function Cs(t,e,n,r,i){this.l=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.o=this.u=this.v=null,this.g=[],this.m=this.a=null}function Ts(t){var e=Yn();return function(t){return ds(t,Za,{}).then(function(t){return t.authorizedDomains||[]})}(t).then(function(t){t:{var n=tn(e),r=n.f;n=n.b;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf(\"chrome-extension://\")?a=tn(o).b==a&&\"chrome-extension\"==s:\"http\"!=s&&\"https\"!=s?a=!1:tr.test(o)?a=a==o:(o=o.split(\".\").join(\"\\\\.\"),a=new RegExp(\"^(.+\\\\.\"+o+\"|\"+o+\")$\",\"i\").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new po(Yn())})}function Is(t){return t.m?t.m:(t.m=nr().then(function(){if(!t.u){var e=t.c,n=t.h,r=Ss(t.b),i=new _s(t.l,t.f,t.b);i.f=e,i.b=n,i.c=H(r||[]),t.u=i.toString()}t.i=new vs(t.u),function(t){if(!t.i)throw Error(\"IfcHandler must be initialized!\");!function(t,e){t.fb.then(function(){t.a.register(\"authEvent\",e,pr(\"gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER\"))})}(t.i,function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=co(e.authEvent),n=0;n<t.g.length;n++)r=t.g[n](e)||r;return(n={}).status=r?\"ACK\":\"ERROR\",kt(n)}return n.status=\"ERROR\",kt(n)})}(t)}),t.m)}function ks(t){return t.o||(t.v=t.c?fr(t.c,Ss(t.b)):null,t.o=new va(t.f,yi(t.h),t.v)),t.o}function Os(t,e,n,r,i,o,a,s,u,c){return(t=new Es(t,e,n,r,i)).i=o,t.g=a,t.h=s,t.b=ut(u||null),t.f=c,t.toString()}function Ns(t){if(this.a=t||C.a.INTERNAL.reactNative&&C.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Kr(\"internal-error\",\"The React Native compatibility library was not found.\");this.type=\"asyncStorage\"}function As(t){this.b=t,this.a={},this.c=E(this.f,this)}_s.prototype.toString=function(){return this.f?Ze(this.a,\"v\",this.f):pn(this.a.a,\"v\"),this.b?Ze(this.a,\"eid\",this.b):pn(this.a.a,\"eid\"),this.c.length?Ze(this.a,\"fw\",this.c.join(\",\")):pn(this.a.a,\"fw\"),this.a.toString()},Es.prototype.toString=function(){var t=en(this.o,\"/__/auth/handler\");if(Ze(t,\"apiKey\",this.l),Ze(t,\"appName\",this.c),Ze(t,\"authType\",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=C.a.app(this.c).auth().ea()}catch(s){n=null}for(var r in e.$a=n,Ze(t,\"providerId\",this.a.providerId),n=_r((e=this.a).zb))n[r]=n[r].toString();r=e.Dc,n=ut(n);for(var i=0;i<r.length;i++){var o=r[i];o in n&&delete n[o]}e.cb&&e.$a&&!n[e.cb]&&(n[e.cb]=e.$a),st(n)||Ze(t,\"customParameters\",wr(n))}if(\"function\"==typeof this.a.Fb&&(e=this.a.Fb()).length&&Ze(t,\"scopes\",e.join(\",\")),this.i?Ze(t,\"redirectUrl\",this.i):pn(t.a,\"redirectUrl\"),this.g?Ze(t,\"eventId\",this.g):pn(t.a,\"eventId\"),this.h?Ze(t,\"v\",this.h):pn(t.a,\"v\"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!$e(t,a)&&Ze(t,a,this.b[a]);return this.f?Ze(t,\"eid\",this.f):pn(t.a,\"eid\"),(a=Ss(this.c)).length&&Ze(t,\"fw\",a.join(\",\")),t.toString()},(t=Cs.prototype).Ea=function(t,e,n){var r=new Kr(\"popup-closed-by-user\"),i=new Kr(\"web-storage-unsupported\"),o=this,a=!1;return this.ga().then(function(){(function(t){var e={type:\"webStorageSupport\"};return Is(t).then(function(){return function(t,e){return t.fb.then(function(){return new wt(function(n){t.a.send(e.type,e,n,pr(\"gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER\"))})})}(t.i,e)}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})})(o).then(function(n){n||(t&&Zn(t),e(i),a=!0)})}).s(function(){}).then(function(){if(!a)return function(t){return new wt(function(e){return function n(){Ve(2e3).then(function(){if(t&&!t.closed)return n();e()})}()})}(t)}).then(function(){if(!a)return Ve(n).then(function(){e(r)})})},t.Mb=function(){var t=dr();return!br(t)&&!Cr(t)},t.Hb=function(){return!1},t.Db=function(t,e,n,r,i,o,a){if(!t)return Ot(new Kr(\"popup-blocked\"));if(a&&!br())return this.ga().s(function(e){Zn(t),i(e)}),r(),kt();this.a||(this.a=Ts(ks(this)));var s=this;return this.a.then(function(){var e=s.ga().s(function(e){throw Zn(t),i(e),e});return r(),e}).then(function(){so(n),a||Xn(Os(s.l,s.f,s.b,e,n,null,o,s.c,void 0,s.h),t)}).s(function(t){throw\"auth/network-request-failed\"==t.code&&(s.a=null),t})},t.Ca=function(t,e,n){this.a||(this.a=Ts(ks(this)));var r=this;return this.a.then(function(){so(e),Xn(Os(r.l,r.f,r.b,t,e,Yn(),n,r.c,void 0,r.h))}).s(function(t){throw\"auth/network-request-failed\"==t.code&&(r.a=null),t})},t.ga=function(){var t=this;return Is(this).then(function(){return t.i.fb}).s(function(){throw t.a=null,new Kr(\"network-request-failed\")})},t.Pb=function(){return!0},t.wa=function(t){this.g.push(t)},t.La=function(t){W(this.g,function(e){return e==t})},(t=Ns.prototype).get=function(t){return kt(this.a.getItem(t)).then(function(t){return t&&Er(t)})},t.set=function(t,e){return kt(this.a.setItem(t,wr(e)))},t.P=function(t){return kt(this.a.removeItem(t))},t.Y=function(){},t.ca=function(){};var Ds,xs=[];function Rs(t){this.a=t}function Ps(t){this.c=t,this.b=!1,this.a=[]}function Ms(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return Ot(Error(\"connection_unavailable\"));var l=r?800:50,h=\"undefined\"!=typeof MessageChannel?new MessageChannel:null;return new wt(function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout(function(){r(Error(\"unsupported_event\"))},l),t.a.push(c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&(\"ack\"===t.data.status?(clearTimeout(a),s=setTimeout(function(){r(Error(\"timeout\"))},3e3)):\"done\"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):r(Error(\"unknown_error\"))):(clearTimeout(a),clearTimeout(s),r(Error(\"invalid_response\"))))}}),h.port1.addEventListener(\"message\",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error(\"connection_unavailable\"))}).then(function(e){return js(t,c),e}).s(function(e){throw js(t,c),e})}function js(t,e){if(e){var n=e.messageChannel;n&&(n.port1.removeEventListener(\"message\",e.onMessage),n.port1.close()),W(t.a,function(t){return t==e})}}function Ls(){if(!qs())throw new Kr(\"web-storage-unsupported\");this.c={},this.a=[],this.b=0,this.l=a.indexedDB,this.type=\"indexedDB\",this.g=this.m=this.f=this.i=null,this.u=!1,this.h=null;var t=this;or()&&self?(this.m=function(){var t=or()?self:null;if(F(xs,function(n){n.b==t&&(e=n)}),!e){var e=new As(t);xs.push(e)}return e}(),this.m.subscribe(\"keyChanged\",function(e,n){return zs(t).then(function(e){return 0<e.length&&F(t.a,function(t){t(e)}),{keyProcessed:V(e,n.key)}})}),this.m.subscribe(\"ping\",function(){return kt([\"keyChanged\"])})):function(){var t=a.navigator;return t&&t.serviceWorker?kt().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).s(function(){return null}):kt(null)}().then(function(e){(t.h=e)&&(t.g=new Ps(new Rs(e)),Ms(t.g,\"ping\",null,!0).then(function(e){e[0].fulfilled&&V(e[0].value,\"keyChanged\")&&(t.u=!0)}).s(function(){}))})}function Fs(t){return t.o||(t.o=function t(e){return new wt(function(n,r){var i=e.l.open(\"firebaseLocalStorageDb\",1);i.onerror=function(t){try{t.preventDefault()}catch(e){}r(Error(t.target.error))},i.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore(\"firebaseLocalStorage\",{keyPath:\"fbase_key\"})}catch(e){r(e)}},i.onsuccess=function(i){(i=i.target.result).objectStoreNames.contains(\"firebaseLocalStorage\")?n(i):function(t){return new wt(function(e,n){var r=t.l.deleteDatabase(\"firebaseLocalStorageDb\");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}})}(e).then(function(){return t(e)}).then(function(t){n(t)}).s(function(t){r(t)})}})}(t)),t.o}function qs(){try{return!!a.indexedDB}catch(Kt){return!1}}function Us(t){return t.objectStore(\"firebaseLocalStorage\")}function Vs(t,e){return t.transaction([\"firebaseLocalStorage\"],e?\"readwrite\":\"readonly\")}function Bs(t){return new wt(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Ws(t,e){return t.g&&t.h&&function(){var t=a.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Ms(t.g,\"keyChanged\",{key:e},t.u).then(function(){}).s(function(){}):kt()}function zs(t){return Fs(t).then(function(t){var e=Us(Vs(t,!1));return e.getAll?Bs(e.getAll()):new wt(function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}})}).then(function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=function t(e,n){var r,i=[];for(r in e)r in n?typeof e[r]!=typeof n[r]?i.push(r):\"object\"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(t.c,n),t.c=n}return r})}function Hs(t){t.i&&t.i.cancel(\"STOP_EVENT\"),t.f&&(clearTimeout(t.f),t.f=null)}function Qs(t){var e=this,n=null;this.a=[],this.type=\"indexedDB\",this.c=t,this.b=kt().then(function(){if(qs()){var t=Sr(),r=\"__sak\"+t;return Ds||(Ds=new Ls),(n=Ds).set(r,t).then(function(){return n.get(r)}).then(function(e){if(e!==t)throw Error(\"indexedDB not supported!\");return n.P(r)}).then(function(){return n}).s(function(){return e.c})}return e.c}).then(function(t){return e.type=t.type,t.Y(function(t){F(e.a,function(e){e(t)})}),t})}function Ks(){this.a={},this.type=\"inMemory\"}function Gs(){if(!function(){var t=\"Node\"==ar();if(!(t=Ys()||t&&C.a.INTERNAL.node&&C.a.INTERNAL.node.localStorage))return!1;try{return t.setItem(\"__sak\",\"1\"),t.removeItem(\"__sak\"),!0}catch(e){return!1}}()){if(\"Node\"==ar())throw new Kr(\"internal-error\",\"The LocalStorage compatibility library was not found.\");throw new Kr(\"web-storage-unsupported\")}this.a=Ys()||C.a.INTERNAL.node.localStorage,this.type=\"localStorage\"}function Ys(){try{var t=a.localStorage,e=Sr();return t&&(t.setItem(e,\"1\"),t.removeItem(e)),t}catch(n){return null}}function Xs(){this.type=\"nullStorage\"}function Js(){if(!function(){var t=\"Node\"==ar();if(!(t=Zs()||t&&C.a.INTERNAL.node&&C.a.INTERNAL.node.sessionStorage))return!1;try{return t.setItem(\"__sak\",\"1\"),t.removeItem(\"__sak\"),!0}catch(e){return!1}}()){if(\"Node\"==ar())throw new Kr(\"internal-error\",\"The SessionStorage compatibility library was not found.\");throw new Kr(\"web-storage-unsupported\")}this.a=Zs()||C.a.INTERNAL.node.sessionStorage,this.type=\"sessionStorage\"}function Zs(){try{var t=a.sessionStorage,e=Sr();return t&&(t.setItem(e,\"1\"),t.removeItem(e)),t}catch(n){return null}}function $s(){var t={};t.Browser=nu,t.Node=ru,t.ReactNative=iu,t.Worker=ou,this.a=t[ar()]}As.prototype.f=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:\"ack\",eventId:n,eventType:e,response:null});var i=[];F(r,function(e){i.push(kt().then(function(){return e(t.origin,t.data.data)}))}),At(i).then(function(r){var i=[];F(r,function(t){i.push({fulfilled:t.Eb,value:t.value,reason:t.reason?t.reason.message:void 0})}),F(i,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),t.ports[0].postMessage({status:\"done\",eventId:n,eventType:e,response:i})})}},As.prototype.subscribe=function(t,e){st(this.a)&&this.b.addEventListener(\"message\",this.c),void 0===this.a[t]&&(this.a[t]=[]),this.a[t].push(e)},As.prototype.unsubscribe=function(t,e){void 0!==this.a[t]&&e?(W(this.a[t],function(t){return t==e}),0==this.a[t].length&&delete this.a[t]):e||delete this.a[t],st(this.a)&&this.b.removeEventListener(\"message\",this.c)},Rs.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Ps.prototype.close=function(){for(;0<this.a.length;)js(this,this.a[0]);this.b=!0},(t=Ls.prototype).set=function(t,e){var n,r=!1,i=this;return Fs(this).then(function(e){return Bs((e=Us(Vs(n=e,!0))).get(t))}).then(function(o){var a=Us(Vs(n,!0));return o?(o.value=e,Bs(a.put(o))):(i.b++,r=!0,(o={}).fbase_key=t,o.value=e,Bs(a.add(o)))}).then(function(){return i.c[t]=e,Ws(i,t)}).ia(function(){r&&i.b--})},t.get=function(t){return Fs(this).then(function(e){return Bs(Us(Vs(e,!1)).get(t))}).then(function(t){return t&&t.value})},t.P=function(t){var e=!1,n=this;return Fs(this).then(function(r){return e=!0,n.b++,Bs(Us(Vs(r,!0)).delete(t))}).then(function(){return delete n.c[t],Ws(n,t)}).ia(function(){e&&n.b--})},t.Y=function(t){0==this.a.length&&function(t){Hs(t),function e(){t.f=setTimeout(function(){t.i=zs(t).then(function(e){0<e.length&&F(t.a,function(t){t(e)})}).then(function(){e()}).s(function(t){\"STOP_EVENT\"!=t.message&&e()})},800)}()}(this),this.a.push(t)},t.ca=function(t){W(this.a,function(e){return e==t}),0==this.a.length&&Hs(this)},(t=Qs.prototype).get=function(t){return this.b.then(function(e){return e.get(t)})},t.set=function(t,e){return this.b.then(function(n){return n.set(t,e)})},t.P=function(t){return this.b.then(function(e){return e.P(t)})},t.Y=function(t){this.a.push(t)},t.ca=function(t){W(this.a,function(e){return e==t})},(t=Ks.prototype).get=function(t){return kt(this.a[t])},t.set=function(t,e){return this.a[t]=e,kt()},t.P=function(t){return delete this.a[t],kt()},t.Y=function(){},t.ca=function(){},(t=Gs.prototype).get=function(t){var e=this;return kt().then(function(){return Er(e.a.getItem(t))})},t.set=function(t,e){var n=this;return kt().then(function(){var r=wr(e);null===r?n.P(t):n.a.setItem(t,r)})},t.P=function(t){var e=this;return kt().then(function(){e.a.removeItem(t)})},t.Y=function(t){a.window&&Ce(a.window,\"storage\",t)},t.ca=function(t){a.window&&ke(a.window,\"storage\",t)},(t=Xs.prototype).get=function(){return kt(null)},t.set=function(){return kt()},t.P=function(){return kt()},t.Y=function(){},t.ca=function(){},(t=Js.prototype).get=function(t){var e=this;return kt().then(function(){return Er(e.a.getItem(t))})},t.set=function(t,e){var n=this;return kt().then(function(){var r=wr(e);null===r?n.P(t):n.a.setItem(t,r)})},t.P=function(t){var e=this;return kt().then(function(){e.a.removeItem(t)})},t.Y=function(){},t.ca=function(){};var tu,eu,nu={B:Gs,Ra:Js},ru={B:Gs,Ra:Js},iu={B:Ns,Ra:Xs},ou={B:Gs,Ra:Xs},au={Xc:\"local\",NONE:\"none\",Zc:\"session\"};function su(){var t=!(Cr(dr())||!ir()),e=br(),n=yr();this.o=t,this.h=e,this.m=n,this.a={},tu||(tu=new $s),t=tu;try{this.g=!Gn()&&Nr()||!a.indexedDB?new t.a.B:new Qs(or()?new Ks:new t.a.B)}catch(r){this.g=new Ks,this.h=!0}try{this.i=new t.a.Ra}catch(r){this.i=new Ks}this.l=new Ks,this.f=E(this.Ob,this),this.b={}}function uu(){return eu||(eu=new su),eu}function cu(t,e){switch(e){case\"session\":return t.i;case\"none\":return t.l;default:return t.g}}function lu(t,e){return\"firebase:\"+t.name+(e?\":\"+e:\"\")}function hu(t,e,n){return n=lu(e,n),\"local\"==e.B&&(t.b[n]=null),cu(t,e.B).P(n)}function fu(t){t.c&&(clearInterval(t.c),t.c=null)}function du(t){this.a=t,this.b=uu()}(t=su.prototype).get=function(t,e){return cu(this,t.B).get(lu(t,e))},t.set=function(t,e,n){var r=lu(t,n),i=this,o=cu(this,t.B);return o.set(r,e).then(function(){return o.get(r)}).then(function(e){\"local\"==t.B&&(i.b[r]=e)})},t.addListener=function(t,e,n){t=lu(t,e),this.m&&(this.b[t]=a.localStorage.getItem(t)),st(this.a)&&(cu(this,\"local\").Y(this.f),this.h||(Gn()||!Nr())&&a.indexedDB||!this.m||function(t){fu(t),t.c=setInterval(function(){for(var e in t.a){var n=a.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new de({type:\"storage\",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Ob(n))}},1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=lu(t,e),this.a[t]&&(W(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),st(this.a)&&(cu(this,\"local\").ca(this.f),fu(this))},t.Ob=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=a.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.Xa(n))}else if(0==e.indexOf(\"firebase:\")&&this.a[e]){if(void 0!==t.a.a?cu(this,\"local\").ca(this.f):fu(this),this.o)if(n=a.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?a.localStorage.setItem(e,r):a.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===a.localStorage.getItem(e)||(o.b[e]=a.localStorage.getItem(e),o.Xa(e))},Yt&&ie&&10==ie&&a.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else F(t,E(this.Xa,this))},t.Xa=function(t){this.a[t]&&F(this.a[t],function(t){t()})};var pu,yu={name:\"authEvent\",B:\"local\"};function vu(){this.a=uu()}function mu(t,e){this.b=gu,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.m=a.Int32Array?new Int32Array(64):Array(64),void 0!==pu||(pu=a.Int32Array?new Int32Array(Tu):Tu),this.reset()}I(mu,function(){this.b=-1});for(var gu=64,bu=gu-1,wu=[],_u=0;_u<bu;_u++)wu[_u]=0;var Eu=z(128,wu);function Su(t){for(var e=t.f,n=t.m,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){var o=(0|n[e-16])+(((i=0|n[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+(((r=0|n[e-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|pu[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function Cu(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if(s(e))for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(Su(t),i=0);else{if(!y(e))throw Error(\"message must be string or array\");for(;r<n;){var o=e[r++];if(!(\"number\"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error(\"message must be a byte array\");t.f[i++]=o,i==t.b&&(Su(t),i=0)}}t.c=i,t.g+=n}mu.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):H(this.h)};var Tu=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Iu(){mu.call(this,8,ku)}I(Iu,mu);var ku=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Ou(t,e,n,r,i){this.l=t,this.i=e,this.m=n,this.o=r||null,this.u=i||null,this.h=e+\":\"+n,this.v=new vu,this.g=new du(this.h),this.f=null,this.b=[],this.a=this.c=null}function Nu(t){return new Kr(\"invalid-cordova-configuration\",t)}function Au(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function Du(t){return t.f||(t.f=t.ga().then(function(){return new wt(function(e){t.wa(function n(r){return e(r),t.La(n),!1}),function(t){function e(e){r=!0,i&&i.cancel(),xu(t).then(function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=Ai(e.url)).indexOf(\"/__/auth/callback\")&&(o=(o=\"object\"==typeof(o=Er($e(o=tn(i),\"firebaseError\")||null))?Gr(o):null)?new uo(r.c,r.b,null,null,o):new uo(r.c,r.b,i,r.f)),i=o||n}Au(t,i)})}var n=new uo(\"unknown\",null,null,null,new Kr(\"no-auth-event\")),r=!1,i=Ve(500).then(function(){return xu(t).then(function(){r||Au(t,n)})}),o=a.handleOpenURL;a.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(pr(\"BuildInfo.packageName\",a).toLowerCase()+\"://\")&&e({url:t}),\"function\"==typeof o)try{o(t)}catch(n){console.error(n)}},fo||(fo=new lo),fo.subscribe(e)}(t)})})),t.f}function xu(t){var e=null;return function(t){return t.b.get(yu,t.a).then(function(t){return co(t)})}(t.g).then(function(n){return e=n,hu((n=t.g).b,yu,n.a)}).then(function(){return e})}function Ru(t){this.a=t,this.b=uu()}(t=Ou.prototype).ga=function(){return this.za?this.za:this.za=(rr(void 0)?nr().then(function(){return new wt(function(t,e){var n=a.document,r=setTimeout(function(){e(Error(\"Cordova framework is not ready.\"))},1e3);n.addEventListener(\"deviceready\",function(){clearTimeout(r),t()},!1)})}):Ot(Error(\"Cordova must run in an Android or iOS file scheme.\"))).then(function(){if(\"function\"!=typeof pr(\"universalLinks.subscribe\",a))throw Nu(\"cordova-universal-links-plugin-fix is not installed\");if(void 0===pr(\"BuildInfo.packageName\",a))throw Nu(\"cordova-plugin-buildinfo is not installed\");if(\"function\"!=typeof pr(\"cordova.plugins.browsertab.openUrl\",a))throw Nu(\"cordova-plugin-browsertab is not installed\");if(\"function\"!=typeof pr(\"cordova.InAppBrowser.open\",a))throw Nu(\"cordova-plugin-inappbrowser is not installed\")},function(){throw new Kr(\"cordova-not-ready\")})},t.Ea=function(t,e){return e(new Kr(\"operation-not-supported-in-this-environment\")),kt()},t.Db=function(){return Ot(new Kr(\"operation-not-supported-in-this-environment\"))},t.Pb=function(){return!1},t.Mb=function(){return!0},t.Hb=function(){return!0},t.Ca=function(t,e,n){if(this.c)return Ot(new Kr(\"redirect-operation-pending\"));var r=this,i=a.document,o=null,s=null,u=null,c=null;return this.c=kt().then(function(){return so(e),Du(r)}).then(function(){return function(t,e,n,r){var i=function(){for(var t=20,e=[];0<t;)e.push(\"1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\".charAt(Math.floor(62*Math.random()))),t--;return e.join(\"\")}(),o=new uo(e,r,null,i,new Kr(\"no-auth-event\")),s=pr(\"BuildInfo.packageName\",a);if(\"string\"!=typeof s)throw new Kr(\"invalid-cordova-configuration\");var u=pr(\"BuildInfo.displayName\",a),c={};if(dr().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=s;else{if(!dr().toLowerCase().match(/android/))return Ot(new Kr(\"operation-not-supported-in-this-environment\"));c.apn=s}u&&(c.appDisplayName=u),i=function(t){var e=new Iu;Cu(e,t),t=[];var n=8*e.g;Cu(e,Eu,56>e.c?56-e.c:e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(Su(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return q(t,function(t){return 1<(t=t.toString(16)).length?t:\"0\"+t}).join(\"\")}(t)}(i),c.sessionId=i;var l=Os(t.l,t.i,t.m,e,n,null,r,t.o,c,t.u);return t.ga().then(function(){var e=t.h;return t.v.a.set(yu,o.w(),e)}).then(function(){var e=pr(\"cordova.plugins.browsertab.isAvailable\",a);if(\"function\"!=typeof e)throw new Kr(\"invalid-cordova-configuration\");var n=null;e(function(e){if(e){if(\"function\"!=typeof(n=pr(\"cordova.plugins.browsertab.openUrl\",a)))throw new Kr(\"invalid-cordova-configuration\");n(l)}else{if(\"function\"!=typeof(n=pr(\"cordova.InAppBrowser.open\",a)))throw new Kr(\"invalid-cordova-configuration\");e=dr(),t.a=n(l,e.match(/(iPad|iPhone|iPod).*OS 7_\\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\\d/i)?\"_blank\":\"_system\",\"location=yes\")}})})}(r,t,e,n)}).then(function(){return new wt(function(t,e){s=function(){var e=pr(\"cordova.plugins.browsertab.close\",a);return t(),\"function\"==typeof e&&e(),r.a&&\"function\"==typeof r.a.close&&(r.a.close(),r.a=null),!1},r.wa(s),c=function(){kr()&&u()},i.addEventListener(\"resume\",u=function(){o||(o=Ve(2e3).then(function(){e(new Kr(\"redirect-cancelled-by-user\"))}))},!1),dr().toLowerCase().match(/android/)||i.addEventListener(\"visibilitychange\",c,!1)}).s(function(t){return xu(r).then(function(){throw t})})}).ia(function(){u&&i.removeEventListener(\"resume\",u,!1),c&&i.removeEventListener(\"visibilitychange\",c,!1),o&&o.cancel(),s&&r.La(s),r.c=null})},t.wa=function(t){this.b.push(t),Du(this).s(function(e){\"auth/invalid-cordova-configuration\"===e.code&&(e=new uo(\"unknown\",null,null,null,new Kr(\"no-auth-event\")),t(e))})},t.La=function(t){W(this.b,function(e){return e==t})};var Pu={name:\"pendingRedirect\",B:\"session\"};function Mu(t){return hu(t.b,Pu,t.a)}function ju(t,e,n){this.i={},this.u=0,this.A=t,this.l=e,this.o=n,this.h=[],this.f=!1,this.m=E(this.bb,this),this.b=new Qu,this.v=new Xu,this.g=new Ru(this.l+\":\"+this.o),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.v,this.c.linkViaPopup=this.v,this.c.reauthViaPopup=this.v,this.a=Lu(this.A,this.l,this.o,di)}function Lu(t,e,n,r){var i=C.a.SDK_VERSION||null;return rr()?new Ou(t,e,n,i,r):new Cs(t,e,n,i,r)}function Fu(t){t.f||(t.f=!0,t.a.wa(t.m));var e=t.a;return t.a.ga().s(function(n){throw t.a==e&&t.reset(),n})}function qu(t){t.a.Mb()&&Fu(t).s(function(e){var n=new uo(\"unknown\",null,null,null,new Kr(\"operation-not-supported-in-this-environment\"));Wu(e)&&t.bb(n)}),t.a.Hb()||Ku(t.b)}(t=ju.prototype).reset=function(){this.f=!1,this.a.La(this.m),this.a=Lu(this.A,this.l,this.o),this.i={}},t.Ya=function(){this.b.Ya()},t.subscribe=function(t){if(V(this.h,t)||this.h.push(t),!this.f){var e=this;(function(t){return t.b.get(Pu,t.a).then(function(t){return\"pending\"==t})})(this.g).then(function(t){t?Mu(e.g).then(function(){Fu(e).s(function(t){var n=new uo(\"unknown\",null,null,null,new Kr(\"operation-not-supported-in-this-environment\"));Wu(t)&&e.bb(n)})}):qu(e)}).s(function(){qu(e)})}},t.unsubscribe=function(t){W(this.h,function(e){return e==t})},t.bb=function(t){if(!t)throw new Kr(\"invalid-auth-event\");if(6e5<=T()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.xb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=T())),e=!0;break}}return Ku(this.b),e};var Uu=new Ir(2e3,1e4),Vu=new Ir(3e4,6e4);function Bu(t,e,n,r,i,o){return t.a.Db(e,n,r,function(){t.f||(t.f=!0,t.a.wa(t.m))},function(){t.reset()},i,o)}function Wu(t){return!(!t||\"auth/cordova-not-ready\"!=t.code)}ju.prototype.fa=function(){return this.b.fa()},ju.prototype.Ca=function(t,e,n){var r,i=this;return function(t){return t.b.set(Pu,\"pending\",t.a)}(this.g).then(function(){return i.a.Ca(t,e,n).s(function(t){if(Wu(t))throw new Kr(\"operation-not-supported-in-this-environment\");return r=t,Mu(i.g).then(function(){throw r})}).then(function(){return i.a.Pb()?new wt(function(){}):Mu(i.g).then(function(){return i.fa()}).then(function(){}).s(function(){})})})},ju.prototype.Ea=function(t,e,n,r){return this.a.Ea(n,function(n){t.ha(e,null,n,r)},Uu.get())};var zu={};function Hu(t,e,n){var r=e+\":\"+n;return zu[r]||(zu[r]=new ju(t,e,n)),zu[r]}function Qu(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Ku(t){t.g||(t.g=!0,Yu(t,!1,null,null))}function Gu(t,e){if(t.b=function(){return kt(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Yu(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Ot(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Gu(t,n):Gu(t,{user:null}),t.f=[],t.c=[]}function Xu(){}function Ju(){this.ub=!1,Object.defineProperty(this,\"appVerificationDisabled\",{get:function(){return this.ub},set:function(t){this.ub=t},enumerable:!1})}function Zu(t,e){this.a=e,Pr(this,\"verificationId\",t)}function $u(t,e,n,r){return new io(t).Ua(e,n).then(function(t){return new Zu(t,r)})}function tc(t){var e=fi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new Kr(\"internal-error\",\"An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.\");Mr(this,{token:t,expirationTime:Or(1e3*e.exp),authTime:Or(1e3*e.auth_time),issuedAtTime:Or(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,claims:e})}function ec(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error(\"Proactive refresh lower bound greater than upper bound!\")}function nc(t){this.f=t,this.b=this.a=null,this.c=0}function rc(t,e){var n=e[ga],r=e.refreshToken;e=ic(e.expiresIn),t.b=n,t.c=e,t.a=r}function ic(t){return T()+1e3*parseInt(t,10)}function oc(t,e){this.a=t||null,this.b=e||null,Mr(this,{lastSignInTime:Or(e||null),creationTime:Or(t||null)})}function ac(t,e,n,r,i,o){Mr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function sc(t,e){for(var n in fe.call(this,t),e)this[n]=e[n]}function uc(t,e,n){this.G=[],this.l=t.apiKey,this.o=t.appName,this.u=t.authDomain||null,t=C.a.SDK_VERSION?fr(C.a.SDK_VERSION):null,this.c=new va(this.l,yi(di),t),this.h=new nc(this.c),yc(this,e[ga]),rc(this.h,e),Pr(this,\"refreshToken\",this.h.a),gc(this,n||{}),je.call(this),this.I=!1,this.u&&vr()&&(this.a=Hu(this.u,this.l,this.o)),this.N=[],this.i=null,this.A=function(t){return new ec(function(){return t.F(!0)},function(t){return!(!t||\"auth/network-request-failed\"!=t.code)},function(){var e=t.h.c-T()-3e5;return 0<e?e:0})}(this),this.V=E(this.Ha,this);var r=this;this.ka=null,this.ta=function(t){r.pa(t.g)},this.X=null,this.O=[],this.sa=function(t){lc(r,t.c)},this.W=null}function cc(t,e){t.X&&ke(t.X,\"languageCodeChanged\",t.ta),(t.X=e)&&Ce(e,\"languageCodeChanged\",t.ta)}function lc(t,e){t.O=e,Ca(t.c,C.a.SDK_VERSION?fr(C.a.SDK_VERSION,t.O):null)}function hc(t,e){t.W&&ke(t.W,\"frameworkChanged\",t.sa),(t.W=e)&&Ce(e,\"frameworkChanged\",t.sa)}function fc(t){try{return C.a.app(t.o).auth()}catch(e){throw new Kr(\"internal-error\",\"No firebase.auth.Auth instance is available for the Firebase App '\"+t.o+\"'!\")}}function dc(t){t.D||t.A.b||(t.A.start(),ke(t,\"tokenChanged\",t.V),Ce(t,\"tokenChanged\",t.V))}function pc(t){ke(t,\"tokenChanged\",t.V),t.A.stop()}function yc(t,e){t.ra=e,Pr(t,\"_lat\",e)}function vc(t){for(var e=[],n=0;n<t.N.length;n++)e.push(t.N[n](t));return At(e).then(function(){return t})}function mc(t){t.a&&!t.I&&(t.I=!0,t.a.subscribe(t))}function gc(t,e){Mr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,metadata:new oc(e.createdAt,e.lastLoginAt),providerData:[]})}function bc(){}function wc(t){return kt().then(function(){if(t.D)throw new Kr(\"app-deleted\")})}function _c(t){return q(t.providerData,function(t){return t.providerId})}function Ec(t,e){e&&(Sc(t,e.providerId),t.providerData.push(e))}function Sc(t,e){W(t.providerData,function(t){return t.providerId==e})}function Cc(t,e,n){(\"uid\"!=e||n)&&t.hasOwnProperty(e)&&Pr(t,e,n)}function Tc(t,e){t!=e&&(Mr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,providerData:[]}),Pr(t,\"metadata\",e.metadata?function(t){return new oc(t.a,t.b)}(e.metadata):new oc),F(e.providerData,function(e){Ec(t,e)}),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.h,e.h),Pr(t,\"refreshToken\",t.h.a))}function Ic(t){return t.F().then(function(e){var n=t.isAnonymous;return function(t,e){return ds(t.c,Ga,{idToken:e}).then(E(t.xc,t))}(t,e).then(function(){return n||Cc(t,\"isAnonymous\",!1),e})})}function kc(t,e){e[ga]&&t.ra!=e[ga]&&(rc(t.h,e),t.dispatchEvent(new sc(\"tokenChanged\")),yc(t,e[ga]),Cc(t,\"refreshToken\",t.h.a))}function Oc(t,e){return Ic(t).then(function(){if(V(_c(t),e))return vc(t).then(function(){throw new Kr(\"provider-already-linked\")})})}function Nc(t,e,n){return jr({user:t,credential:ao(e),additionalUserInfo:e=wi(e),operationType:n})}function Ac(t,e){return kc(t,e),t.reload().then(function(){return t})}function Dc(t,e,n,r,i){if(!vr())return Ot(new Kr(\"operation-not-supported-in-this-environment\"));if(t.i&&!i)return Ot(t.i);var o=bi(n.providerId),a=Sr(t.uid+\":::\"),s=null;(!br()||ir())&&t.u&&n.isOAuthProvider&&(s=Os(t.u,t.l,t.o,e,n,null,a,C.a.SDK_VERSION||null));var u=$n(s,o&&o.Ba,o&&o.Aa);return r=r().then(function(){if(Rc(t),!i)return t.F().then(function(){})}).then(function(){return Bu(t.a,u,e,n,a,!!s)}).then(function(){return new wt(function(n,r){t.ha(e,null,new Kr(\"cancelled-popup-request\"),t.g||null),t.f=n,t.v=r,t.g=a,t.b=t.a.Ea(t,e,u,a)})}).then(function(t){return u&&Zn(u),t?jr(t):null}).s(function(t){throw u&&Zn(u),t}),Pc(t,r,i)}function xc(t,e,n,r,i){if(!vr())return Ot(new Kr(\"operation-not-supported-in-this-environment\"));if(t.i&&!i)return Ot(t.i);var o=null,a=Sr(t.uid+\":::\");return r=r().then(function(){if(Rc(t),!i)return t.F().then(function(){})}).then(function(){return t.aa=a,vc(t)}).then(function(e){return t.ba&&(e=(e=t.ba).b.set(Lc,t.w(),e.a)),e}).then(function(){return t.a.Ca(e,n,a)}).s(function(e){if(o=e,t.ba)return Fc(t.ba);throw o}).then(function(){if(o)throw o}),Pc(t,r,i)}function Rc(t){if(!t.a||!t.I){if(t.a&&!t.I)throw new Kr(\"internal-error\");throw new Kr(\"auth-domain-config-required\")}}function Pc(t,e,n){var r=function(t,e,n){return t.i&&!n?(e.cancel(),Ot(t.i)):e.s(function(e){throw!e||\"auth/user-disabled\"!=e.code&&\"auth/user-token-expired\"!=e.code||(t.i||t.dispatchEvent(new sc(\"userInvalidated\")),t.i=e),e})}(t,e,n);return t.G.push(r),r.ia(function(){B(t.G,r)}),r}function Mc(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!(t.stsTokenManager&&t.stsTokenManager.accessToken&&t.stsTokenManager.expirationTime))return null;n[ga]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null,n.expiresIn=(t.stsTokenManager.expirationTime-T())/1e3;var r=new uc(e,n,t);return t.providerData&&F(t.providerData,function(t){t&&Ec(r,jr(t))}),t.redirectEventId&&(r.aa=t.redirectEventId),r}function jc(t){this.a=t,this.b=uu()}Qu.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Qu.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&\"auth/web-storage-unsupported\"==t.a.code,o=t.a&&\"auth/operation-not-supported-in-this-environment\"==t.a.code;this.i=!(!i&&!o),\"unknown\"!=n||i||o?t.a?(Yu(this,!0,null,t.a),kt()):e.xa(n,r)?function(t,e,n){n=n.xa(e.c,e.b);var r=e.g,i=e.f,o=e.h,a=!!e.c.match(/Redirect$/);n(r,i,o).then(function(e){Yu(t,a,e,null)}).s(function(e){Yu(t,a,null,e)})}(this,t,e):Ot(new Kr(\"invalid-auth-event\")):(Yu(this,!1,null,null),kt())}else Ot(new Kr(\"invalid-auth-event\"))},Qu.prototype.Ya=function(){this.g&&!this.i&&Yu(this,!1,null,null)},Qu.prototype.fa=function(){var t=this;return new wt(function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new Kr(\"timeout\");t.a&&t.a.cancel(),t.a=Ve(Vu.get()).then(function(){t.b||(t.g=!0,Yu(t,!0,null,e))})}(t))})},Xu.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.ha(t.c,null,t.a,t.b),kt()):e.xa(n,r)?function(t,e){var n=t.b,r=t.c;e.xa(r,n)(t.g,t.f,t.h).then(function(t){e.ha(r,t,null,n)}).s(function(t){e.ha(r,null,t,n)})}(t,e):Ot(new Kr(\"invalid-auth-event\"))}else Ot(new Kr(\"invalid-auth-event\"))},Zu.prototype.confirm=function(t){return t=oo(this.verificationId,t),this.a(t)},ec.prototype.start=function(){this.a=this.c,function t(e,n){e.stop(),e.b=Ve(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,n)).then(function(){return t=a.document,e=null,kr()||!t?kt():new wt(function(n){e=function(){kr()&&(t.removeEventListener(\"visibilitychange\",e,!1),n())},t.addEventListener(\"visibilitychange\",e,!1)}).s(function(n){throw t.removeEventListener(\"visibilitychange\",e,!1),n});var t,e}).then(function(){return e.h()}).then(function(){t(e,!0)}).s(function(n){e.i(n)&&t(e,!1)})}(this,!0)},ec.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},nc.prototype.w=function(){return{apiKey:this.f.b,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},nc.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Ot(new Kr(\"user-token-expired\")):t||!this.b||T()>this.c-3e4?this.a?function(t,e){return function(t,e){return new wt(function(n,r){\"refresh_token\"==e.grant_type&&e.refresh_token||\"authorization_code\"==e.grant_type&&e.code?Ta(t,t.i+\"?key=\"+encodeURIComponent(t.b),function(t){t?t.error?r(ys(t)):t.access_token&&t.refresh_token?n(t):r(new Kr(\"internal-error\")):r(new Kr(\"network-request-failed\"))},\"POST\",dn(e).toString(),t.f,t.m.get()):r(new Kr(\"internal-error\"))})}(t.f,e).then(function(e){return t.b=e.access_token,t.c=ic(e.expires_in),t.a=e.refresh_token,{accessToken:t.b,expirationTime:t.c,refreshToken:t.a}}).s(function(e){throw\"auth/user-token-expired\"==e.code&&(t.a=null),e})}(this,{grant_type:\"refresh_token\",refresh_token:this.a}):kt(null):kt({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},oc.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},I(sc,fe),I(uc,je),uc.prototype.pa=function(t){this.ka=t,Sa(this.c,t)},uc.prototype.ea=function(){return this.ka},uc.prototype.ya=function(){return H(this.O)},uc.prototype.Ha=function(){this.A.b&&(this.A.stop(),this.A.start())},Pr(uc.prototype,\"providerId\",\"firebase\"),(t=uc.prototype).reload=function(){var t=this;return Pc(this,wc(this).then(function(){return Ic(t).then(function(){return vc(t)}).then(bc)}))},t.bc=function(t){return this.F(t).then(function(t){return new tc(t)})},t.F=function(t){var e=this;return Pc(this,wc(this).then(function(){return e.h.getToken(t)}).then(function(t){if(!t)throw new Kr(\"internal-error\");return t.accessToken!=e.ra&&(yc(e,t.accessToken),e.dispatchEvent(new sc(\"tokenChanged\"))),Cc(e,\"refreshToken\",t.refreshToken),t.accessToken}))},t.xc=function(t){if(!(t=t.users)||!t.length)throw new Kr(\"internal-error\");gc(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?q(t,function(t){return new ac(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}(t),n=0;n<e.length;n++)Ec(this,e[n]);Cc(this,\"isAnonymous\",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length))},t.yc=function(t){return xr(\"firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead.\"),this.gb(t)},t.gb=function(t){var e=this,n=null;return Pc(this,t.f(this.c,this.uid).then(function(t){return kc(e,t),n=Nc(e,t,\"reauthenticate\"),e.i=null,e.reload()}).then(function(){return n}),!0)},t.pc=function(t){return xr(\"firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead.\"),this.eb(t)},t.eb=function(t){var e=this,n=null;return Pc(this,Oc(this,t.providerId).then(function(){return e.F()}).then(function(n){return t.b(e.c,n)}).then(function(t){return n=Nc(e,t,\"link\"),Ac(e,t)}).then(function(){return n}))},t.qc=function(t,e){var n=this;return Pc(this,Oc(this,\"phone\").then(function(){return $u(fc(n),t,e,E(n.eb,n))}))},t.zc=function(t,e){var n=this;return Pc(this,kt().then(function(){return $u(fc(n),t,e,E(n.gb,n))}),!0)},t.rb=function(t){var e=this;return Pc(this,this.F().then(function(n){return e.c.rb(n,t)}).then(function(t){return kc(e,t),e.reload()}))},t.Pc=function(t){var e=this;return Pc(this,this.F().then(function(n){return t.b(e.c,n)}).then(function(t){return kc(e,t),e.reload()}))},t.sb=function(t){var e=this;return Pc(this,this.F().then(function(n){return e.c.sb(n,t)}).then(function(t){return kc(e,t),e.reload()}))},t.tb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return wc(this);var e=this;return Pc(this,this.F().then(function(n){return e.c.tb(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return kc(e,t),Cc(e,\"displayName\",t.displayName||null),Cc(e,\"photoURL\",t.photoUrl||null),F(e.providerData,function(t){\"password\"===t.providerId&&(Pr(t,\"displayName\",e.displayName),Pr(t,\"photoURL\",e.photoURL))}),vc(e)}).then(bc))},t.Nc=function(t){var e=this;return Pc(this,Ic(this).then(function(n){return V(_c(e),t)?function(t,e,n){return ds(t,Ha,{idToken:e,deleteProvider:n})}(e.c,n,[t]).then(function(t){var n={};return F(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),F(_c(e),function(t){n[t]||Sc(e,t)}),n[io.PROVIDER_ID]||Pr(e,\"phoneNumber\",null),vc(e)}):vc(e).then(function(){throw new Kr(\"no-such-provider\")})}))},t.delete=function(){var t=this;return Pc(this,this.F().then(function(e){return ds(t.c,za,{idToken:e})}).then(function(){t.dispatchEvent(new sc(\"userDeleted\"))})).then(function(){for(var e=0;e<t.G.length;e++)t.G[e].cancel(\"app-deleted\");cc(t,null),hc(t,null),t.G=[],t.D=!0,pc(t),Pr(t,\"refreshToken\",null),t.a&&t.a.unsubscribe(t)})},t.xb=function(t,e){return!!(\"linkViaPopup\"==t&&(this.g||null)==e&&this.f||\"reauthViaPopup\"==t&&(this.g||null)==e&&this.f||\"linkViaRedirect\"==t&&(this.aa||null)==e||\"reauthViaRedirect\"==t&&(this.aa||null)==e)},t.ha=function(t,e,n,r){\"linkViaPopup\"!=t&&\"reauthViaPopup\"!=t||r!=(this.g||null)||(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.b&&(this.b.cancel(),this.b=null),delete this.f,delete this.v)},t.xa=function(t,e){return\"linkViaPopup\"==t&&e==(this.g||null)?E(this.Bb,this):\"reauthViaPopup\"==t&&e==(this.g||null)?E(this.Cb,this):\"linkViaRedirect\"==t&&(this.aa||null)==e?E(this.Bb,this):\"reauthViaRedirect\"==t&&(this.aa||null)==e?E(this.Cb,this):null},t.rc=function(t){var e=this;return Dc(this,\"linkViaPopup\",t,function(){return Oc(e,t.providerId).then(function(){return vc(e)})},!1)},t.Ac=function(t){return Dc(this,\"reauthViaPopup\",t,function(){return kt()},!0)},t.sc=function(t){var e=this;return xc(this,\"linkViaRedirect\",t,function(){return Oc(e,t.providerId)},!1)},t.Bc=function(t){return xc(this,\"reauthViaRedirect\",t,function(){return kt()},!0)},t.Bb=function(t,e,n){var r=this;this.b&&(this.b.cancel(),this.b=null);var i=null;return Pc(this,this.F().then(function(i){return La(r.c,{requestUri:t,postBody:n,sessionId:e,idToken:i})}).then(function(t){return i=Nc(r,t,\"link\"),Ac(r,t)}).then(function(){return i}))},t.Cb=function(t,e,n){var r=this;this.b&&(this.b.cancel(),this.b=null);var i=null;return Pc(this,kt().then(function(){return xi(Fa(r.c,{requestUri:t,sessionId:e,postBody:n}),r.uid)}).then(function(t){return i=Nc(r,t,\"reauthenticate\"),kc(r,t),r.i=null,r.reload()}).then(function(){return i}),!0)},t.jb=function(t){var e=this,n=null;return Pc(this,this.F().then(function(e){return n=e,void 0===t||st(t)?{}:si(new Jr(t))}).then(function(t){return e.c.jb(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.l,appName:this.o,authDomain:this.u,stsTokenManager:this.h.w(),redirectEventId:this.aa||null};return this.metadata&&ft(t,this.metadata.w()),F(this.providerData,function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))}),t};var Lc={name:\"redirectUser\",B:\"session\"};function Fc(t){return hu(t.b,Lc,t.a)}function qc(t){this.a=t,this.b=uu(),this.c=null,this.f=function(t){var e=Bc(\"local\"),n=Bc(\"session\"),r=Bc(\"none\");return function(t,e,n){var r=lu(e,n),i=cu(t,e.B);return t.get(e,n).then(function(o){var s=null;try{s=Er(a.localStorage.getItem(r))}catch(u){}if(s&&!o)return a.localStorage.removeItem(r),t.set(e,s,n);s&&o&&\"localStorage\"!=i.type&&a.localStorage.removeItem(r)})}(t.b,e,t.a).then(function(){return t.b.get(n,t.a)}).then(function(i){return i?n:t.b.get(r,t.a).then(function(n){return n?r:t.b.get(e,t.a).then(function(n){return n?e:t.b.get(Vc,t.a).then(function(t){return t?Bc(t):e})})})}).then(function(e){return t.c=e,Uc(t,e.B)}).s(function(){t.c||(t.c=e)})}(this),this.b.addListener(Bc(\"local\"),this.a,E(this.g,this))}function Uc(t,e){var n,r=[];for(n in au)au[n]!==e&&r.push(hu(t.b,Bc(au[n]),t.a));return r.push(hu(t.b,Vc,t.a)),function(t){return new wt(function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)Nt(t[s],S(o,s),a);else e(i)})}(r)}qc.prototype.g=function(){var t=this,e=Bc(\"local\");Qc(this,function(){return kt().then(function(){return t.c&&\"local\"!=t.c.B?t.b.get(e,t.a):null}).then(function(n){if(n)return Uc(t,\"local\").then(function(){t.c=e})})})};var Vc={name:\"persistence\",B:\"session\"};function Bc(t){return{name:\"authUser\",B:t}}function Wc(t,e){return Qc(t,function(){return t.b.set(t.c,e.w(),t.a)})}function zc(t){return Qc(t,function(){return hu(t.b,t.c,t.a)})}function Hc(t,e){return Qc(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),Mc(t||{})})})}function Qc(t,e){return t.f=t.f.then(e,e),t.f}function Kc(t){if(this.l=!1,Pr(this,\"settings\",new Ju),Pr(this,\"app\",t),!tl(this).options||!tl(this).options.apiKey)throw new Kr(\"invalid-api-key\");t=C.a.SDK_VERSION?fr(C.a.SDK_VERSION):null,this.c=new va(tl(this).options&&tl(this).options.apiKey,yi(di),t),this.N=[],this.o=[],this.I=[],this.Sb=C.a.INTERNAL.createSubscribe(E(this.mc,this)),this.O=void 0,this.Tb=C.a.INTERNAL.createSubscribe(E(this.nc,this)),Zc(this,null),this.h=new qc(tl(this).options.apiKey+\":\"+tl(this).name),this.A=new jc(tl(this).options.apiKey+\":\"+tl(this).name),this.V=il(this,function(t){var e=tl(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Lc,t.a).then(function(t){return t&&e&&(t.authDomain=e),Mc(t||{})})}(t.A,tl(t).options.authDomain).then(function(e){return(t.D=e)&&(e.ba=t.A),Fc(t.A)});return il(t,e)}(t).then(function(){return Hc(t.h,e)}).then(function(e){return e?(e.ba=t.A,t.D&&(t.D.aa||null)==(e.aa||null)?e:e.reload().then(function(){return Wc(t.h,e).then(function(){return e})}).s(function(n){return\"auth/network-request-failed\"==n.code?e:zc(t.h)})):null}).then(function(e){Zc(t,e||null)});return il(t,n)}(this)),this.i=il(this,function(t){return t.V.then(function(){return t.fa()}).s(function(){}).then(function(){if(!t.l)return t.ka()}).s(function(){}).then(function(){if(!t.l){t.X=!0;var e=t.h;e.b.addListener(Bc(\"local\"),e.a,t.ka)}})}(this)),this.X=!1,this.ka=E(this.Kc,this),this.Ha=E(this.Z,this),this.ra=E(this.$b,this),this.sa=E(this.jc,this),this.ta=E(this.kc,this),function(t){var e=tl(t).options.authDomain,n=tl(t).options.apiKey;e&&vr()&&(t.Rb=t.V.then(function(){if(!t.l){if(t.a=Hu(e,n,tl(t).name),t.a.subscribe(t),el(t)&&mc(el(t)),t.D){mc(t.D);var r=t.D;r.pa(t.ea()),cc(r,t),lc(r=t.D,t.G),hc(r,t),t.D=null}return t.a}}))}(this),this.INTERNAL={},this.INTERNAL.delete=E(this.delete,this),this.INTERNAL.logFramework=E(this.tc,this),this.u=0,je.call(this),function(t){Object.defineProperty(t,\"lc\",{get:function(){return this.ea()},set:function(t){this.pa(t)},enumerable:!1}),t.W=null}(this),this.G=[]}function Gc(t){fe.call(this,\"languageCodeChanged\"),this.g=t}function Yc(t){fe.call(this,\"frameworkChanged\"),this.c=t}function Xc(t){return t.Rb||Ot(new Kr(\"auth-domain-config-required\"))}function Jc(t,e){var n={};return n.apiKey=tl(t).options.apiKey,n.authDomain=tl(t).options.authDomain,n.appName=tl(t).name,t.V.then(function(){return function(t,e,n,r){var i=new uc(t,e);return n&&(i.ba=n),r&&lc(i,r),i.reload().then(function(){return i})}(n,e,t.A,t.ya())}).then(function(e){return el(t)&&e.uid==el(t).uid?(Tc(el(t),e),t.Z(e)):(Zc(t,e),mc(e),t.Z(e))}).then(function(){rl(t)})}function Zc(t,e){el(t)&&(function(t,e){W(t.N,function(t){return t==e})}(el(t),t.Ha),ke(el(t),\"tokenChanged\",t.ra),ke(el(t),\"userDeleted\",t.sa),ke(el(t),\"userInvalidated\",t.ta),pc(el(t))),e&&(e.N.push(t.Ha),Ce(e,\"tokenChanged\",t.ra),Ce(e,\"userDeleted\",t.sa),Ce(e,\"userInvalidated\",t.ta),0<t.u&&dc(e)),Pr(t,\"currentUser\",e),e&&(e.pa(t.ea()),cc(e,t),lc(e,t.G),hc(e,t))}function $c(t,e){var n=null,r=null;return il(t,e.then(function(e){return n=ao(e),r=wi(e),Jc(t,e)}).then(function(){return jr({user:el(t),credential:n,additionalUserInfo:r,operationType:\"signIn\"})}))}function tl(t){return t.app}function el(t){return t.currentUser}function nl(t){return el(t)&&el(t)._lat||null}function rl(t){if(t.X){for(var e=0;e<t.o.length;e++)t.o[e]&&t.o[e](nl(t));if(t.O!==t.getUid()&&t.I.length)for(t.O=t.getUid(),e=0;e<t.I.length;e++)t.I[e]&&t.I[e](nl(t))}}function il(t,e){return t.N.push(e),e.ia(function(){B(t.N,e)}),e}function ol(){}function al(){this.a={},this.b=1e12}qc.prototype.mb=function(t){var e=null,n=this;return function(t){var e=new Kr(\"invalid-persistence-type\"),n=new Kr(\"unsupported-persistence-type\");t:{for(r in au)if(au[r]==t){var r=!0;break t}r=!1}if(!r||\"string\"!=typeof t)throw e;switch(ar()){case\"ReactNative\":if(\"session\"===t)throw n;break;case\"Node\":if(\"none\"!==t)throw n;break;default:if(!yr()&&\"none\"!==t)throw n}}(t),Qc(this,function(){return t!=n.c.B?n.b.get(n.c,n.a).then(function(r){return e=r,Uc(n,t)}).then(function(){if(n.c=Bc(t),e)return n.b.set(n.c,e,n.a)}):kt()})},I(Kc,je),I(Gc,fe),I(Yc,fe),(t=Kc.prototype).mb=function(t){return il(this,t=this.h.mb(t))},t.pa=function(t){this.W===t||this.l||(this.W=t,Sa(this.c,this.W),this.dispatchEvent(new Gc(this.ea())))},t.ea=function(){return this.W},t.Qc=function(){var t=a.navigator;this.pa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.tc=function(t){this.G.push(t),Ca(this.c,C.a.SDK_VERSION?fr(C.a.SDK_VERSION,this.G):null),this.dispatchEvent(new Yc(this.G))},t.ya=function(){return H(this.G)},t.toJSON=function(){return{apiKey:tl(this).options.apiKey,authDomain:tl(this).options.authDomain,appName:tl(this).name,currentUser:el(this)&&el(this).w()}},t.xb=function(t,e){switch(t){case\"unknown\":case\"signInViaRedirect\":return!0;case\"signInViaPopup\":return this.g==e&&!!this.f;default:return!1}},t.ha=function(t,e,n,r){\"signInViaPopup\"==t&&this.g==r&&(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.b&&(this.b.cancel(),this.b=null),delete this.f,delete this.v)},t.xa=function(t,e){return\"signInViaRedirect\"==t||\"signInViaPopup\"==t&&this.g==e&&this.f?E(this.Zb,this):null},t.Zb=function(t,e,n){var r=this;t={requestUri:t,postBody:n,sessionId:e},this.b&&(this.b.cancel(),this.b=null);var i=null,o=null,a=ja(r.c,t).then(function(t){return i=ao(t),o=wi(t),t});return il(this,t=r.V.then(function(){return a}).then(function(t){return Jc(r,t)}).then(function(){return jr({user:el(r),credential:i,additionalUserInfo:o,operationType:\"signIn\"})}))},t.Ic=function(t){if(!vr())return Ot(new Kr(\"operation-not-supported-in-this-environment\"));var e=this,n=bi(t.providerId),r=Sr(),i=null;(!br()||ir())&&tl(this).options.authDomain&&t.isOAuthProvider&&(i=Os(tl(this).options.authDomain,tl(this).options.apiKey,tl(this).name,\"signInViaPopup\",t,null,r,C.a.SDK_VERSION||null));var o=$n(i,n&&n.Ba,n&&n.Aa);return il(this,n=Xc(this).then(function(e){return Bu(e,o,\"signInViaPopup\",t,r,!!i)}).then(function(){return new wt(function(t,n){e.ha(\"signInViaPopup\",null,new Kr(\"cancelled-popup-request\"),e.g),e.f=t,e.v=n,e.g=r,e.b=e.a.Ea(e,\"signInViaPopup\",o,r)})}).then(function(t){return o&&Zn(o),t?jr(t):null}).s(function(t){throw o&&Zn(o),t}))},t.Jc=function(t){if(!vr())return Ot(new Kr(\"operation-not-supported-in-this-environment\"));var e=this;return il(this,Xc(this).then(function(){return Qc(t=e.h,function(){return t.b.set(Vc,t.c.B,t.a)});var t}).then(function(){return e.a.Ca(\"signInViaRedirect\",t)}))},t.fa=function(){if(!vr())return Ot(new Kr(\"operation-not-supported-in-this-environment\"));var t=this;return il(this,Xc(this).then(function(){return t.a.fa()}).then(function(t){return t?jr(t):null}))},t.Oc=function(t){if(!t)return Ot(new Kr(\"null-user\"));var e=this,n={};n.apiKey=tl(this).options.apiKey,n.authDomain=tl(this).options.authDomain,n.appName=tl(this).name;var r=function(t,e,n,r){e=e||{apiKey:t.l,authDomain:t.u,appName:t.o};var i=t.h,o={};return o[ga]=i.b,o.refreshToken=i.a,o.expiresIn=(i.c-T())/1e3,e=new uc(e,o),n&&(e.ba=n),r&&lc(e,r),Tc(e,t),e}(t,n,e.A,e.ya());return il(this,this.i.then(function(){if(tl(e).options.apiKey!=t.l)return r.reload()}).then(function(){return el(e)&&t.uid==el(e).uid?(Tc(el(e),t),e.Z(t)):(Zc(e,r),mc(r),e.Z(r))}).then(function(){rl(e)}))},t.pb=function(){var t=this;return il(this,this.i.then(function(){return el(t)?(Zc(t,null),zc(t.h).then(function(){rl(t)})):kt()}))},t.Kc=function(){var t=this;return Hc(this.h,tl(this).options.authDomain).then(function(e){if(!t.l){var n;if(n=el(t)&&e){n=el(t).uid;var r=e.uid;n=null!=n&&\"\"!==n&&null!=r&&\"\"!==r&&n==r}if(n)return Tc(el(t),e),el(t).F();(el(t)||e)&&(Zc(t,e),e&&(mc(e),e.ba=t.A),t.a&&t.a.subscribe(t),rl(t))}})},t.Z=function(t){return Wc(this.h,t)},t.$b=function(){rl(this),this.Z(el(this))},t.jc=function(){this.pb()},t.kc=function(){this.pb()},t.mc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(el(e))})},t.nc=function(t){var e=this;!function(t,e){t.I.push(e),il(t,t.i.then(function(){!t.l&&V(t.I,e)&&t.O!==t.getUid()&&(t.O=t.getUid(),e(nl(t)))}))}(this,function(){t.next(el(e))})},t.vc=function(t,e,n){var r=this;return this.X&&Promise.resolve().then(function(){v(t)?t(el(r)):v(t.next)&&t.next(el(r))}),this.Sb(t,e,n)},t.uc=function(t,e,n){var r=this;return this.X&&Promise.resolve().then(function(){r.O=r.getUid(),v(t)?t(el(r)):v(t.next)&&t.next(el(r))}),this.Tb(t,e,n)},t.ac=function(t){var e=this;return il(this,this.i.then(function(){return el(e)?el(e).F(t).then(function(t){return{accessToken:t}}):null}))},t.Ec=function(t){var e=this;return this.i.then(function(){return $c(e,ds(e.c,us,{token:t}))}).then(function(t){var n=t.user;return Cc(n,\"isAnonymous\",!1),e.Z(n),t})},t.Fc=function(t,e){var n=this;return this.i.then(function(){return $c(n,ds(n.c,cs,{email:t,password:e}))})},t.Vb=function(t,e){var n=this;return this.i.then(function(){return $c(n,ds(n.c,Ba,{email:t,password:e}))})},t.Nb=function(t){var e=this;return this.i.then(function(){return $c(e,t.la(e.c))})},t.nb=function(t){return xr(\"firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead.\"),this.Nb(t)},t.ob=function(){var t=this;return this.i.then(function(){var e=el(t);if(e&&e.isAnonymous){var n=jr({providerId:null,isNewUser:!1});return jr({user:e,credential:null,additionalUserInfo:n,operationType:\"signIn\"})}return $c(t,t.c.ob()).then(function(e){var n=e.user;return Cc(n,\"isAnonymous\",!0),t.Z(n),e})})},t.getUid=function(){return el(this)&&el(this).uid||null},t.Ub=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&el(this)&&dc(el(this))},t.Cc=function(t){var e=this;F(this.o,function(n){n==t&&e.u--}),0>this.u&&(this.u=0),0==this.u&&el(this)&&pc(el(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.o.push(t),il(this,this.i.then(function(){e.l||V(e.o,t)&&t(nl(e))}))},t.removeAuthTokenListener=function(t){W(this.o,function(e){return e==t})},t.delete=function(){this.l=!0;for(var t=0;t<this.N.length;t++)this.N[t].cancel(\"app-deleted\");return this.N=[],this.h&&(t=this.h).b.removeListener(Bc(\"local\"),t.a,this.ka),this.a&&(this.a.unsubscribe(this),this.a.Ya()),Promise.resolve()},t.Yb=function(t){return il(this,function(t,e){return ds(t,Wa,{identifier:e,continueUri:mr()?Yn():\"http://localhost\"}).then(function(t){return t.signinMethods||[]})}(this.c,t))},t.oc=function(t){return!!to(t)},t.lb=function(t,e){var n=this;return il(this,kt().then(function(){var t=new Jr(e);if(!t.c)throw new Kr(\"argument-error\",ti+\" must be true when sending sign in link to email\");return si(t)}).then(function(e){return n.c.lb(t,e)}).then(function(){}))},t.Rc=function(t){return this.Ka(t).then(function(t){return t.data.email})},t.Za=function(t,e){return il(this,this.c.Za(t,e).then(function(){}))},t.Ka=function(t){return il(this,this.c.Ka(t).then(function(t){return new Fr(t)}))},t.Wa=function(t){return il(this,this.c.Wa(t).then(function(){}))},t.kb=function(t,e){var n=this;return il(this,kt().then(function(){return void 0===e||st(e)?{}:si(new Jr(e))}).then(function(e){return n.c.kb(t,e)}).then(function(){}))},t.Hc=function(t,e){return il(this,$u(this,t,e,E(this.nb,this)))},t.Gc=function(t,e){var n=this;return il(this,kt().then(function(){var r=$i(t,e||Yn());return n.nb(r)}))},ol.prototype.render=function(){},ol.prototype.reset=function(){},ol.prototype.getResponse=function(){},ol.prototype.execute=function(){};var sl=null;function ul(t,e){return(e=cl(e))&&t.a[e]||null}function cl(t){return(t=void 0===t?1e12:t)?t.toString():null}function ll(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h=\"invisible\"!==this.c.size,this.f=qn(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():Ce(this.f,\"click\",this.i)}function hl(t){if(t.g)throw Error(\"reCAPTCHA mock was already deleted!\")}function fl(){}al.prototype.render=function(t,e){return this.a[this.b.toString()]=new ll(t,e),this.b++},al.prototype.reset=function(t){var e=ul(this,t);t=cl(t),e&&t&&(e.delete(),delete this.a[t])},al.prototype.getResponse=function(t){return(t=ul(this,t))?t.getResponse():null},al.prototype.execute=function(t){(t=ul(this,t))&&t.execute()},ll.prototype.getResponse=function(){return hl(this),this.b},ll.prototype.execute=function(){hl(this);var t=this;this.a||(this.a=setTimeout(function(){t.b=function(){for(var t=50,e=[];0<t;)e.push(\"1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\".charAt(Math.floor(62*Math.random()))),t--;return e.join(\"\")}();var e=t.c.callback,n=t.c[\"expired-callback\"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout(function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()},6e4)},500))},ll.prototype.delete=function(){hl(this),this.g=!0,clearTimeout(this.a),this.a=null,ke(this.f,\"click\",this.i)},fl.prototype.g=function(){return sl||(sl=new al),kt(sl)},fl.prototype.c=function(){};var dl=null;function pl(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a=\"__rcb\"+Math.floor(1e6*Math.random()).toString()}var yl=new wn(Sn,\"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}\"),vl=new Ir(3e4,6e4);pl.prototype.g=function(t){var e=this;return new wt(function(n,r){var i=setTimeout(function(){r(new Kr(\"network-request-failed\"))},vl.get());!a.grecaptcha||t!==e.f&&!e.b?(a[e.a]=function(){if(a.grecaptcha){e.f=t;var o=a.grecaptcha.render;a.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(a.grecaptcha)}else clearTimeout(i),r(new Kr(\"internal-error\"));delete a[e.a]},kt(ca(In(yl,{onload:e.a,hl:t||\"\"}))).s(function(){clearTimeout(i),r(new Kr(\"internal-error\",\"Unable to load external reCAPTCHA dependencies!\"))})):(clearTimeout(i),n(a.grecaptcha))})},pl.prototype.c=function(){this.b--};var ml=null;function gl(t,e,n,r,i,o,s){if(Pr(this,\"type\",\"recaptcha\"),this.c=this.f=null,this.D=!1,this.l=e,this.g=null,s?(dl||(dl=new fl),s=dl):(ml||(ml=new pl),s=ml),this.o=s,this.a=n||{theme:\"light\",type:\"image\"},this.h=[],this.a[_l])throw new Kr(\"argument-error\",\"sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.\");if(this.i=\"invisible\"===this.a[El],!a.document)throw new Kr(\"operation-not-supported-in-this-environment\",\"RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.\");if(!qn(e)||!this.i&&qn(e).hasChildNodes())throw new Kr(\"argument-error\",\"reCAPTCHA container is either not found or already contains inner elements!\");this.u=new va(t,o||null,i||null),this.v=r||function(){return null};var u=this;this.m=[];var c=this.a[bl];this.a[bl]=function(t){if(Sl(u,t),\"function\"==typeof c)c(t);else if(\"string\"==typeof c){var e=pr(c,a);\"function\"==typeof e&&e(t)}};var l=this.a[wl];this.a[wl]=function(){if(Sl(u,null),\"function\"==typeof l)l();else if(\"string\"==typeof l){var t=pr(l,a);\"function\"==typeof t&&t()}}}var bl=\"callback\",wl=\"expired-callback\",_l=\"sitekey\",El=\"size\";function Sl(t,e){for(var n=0;n<t.m.length;n++)try{t.m[n](e)}catch(r){}}function Cl(t,e){return t.h.push(e),e.ia(function(){B(t.h,e)}),e}function Tl(t){if(t.D)throw new Kr(\"internal-error\",\"RecaptchaVerifier instance has been destroyed.\")}function Il(t,e,n){var r=!1;try{this.b=n||C.a.app()}catch(a){throw new Kr(\"argument-error\",\"No firebase.app.App instance is currently initialized.\")}if(!this.b.options||!this.b.options.apiKey)throw new Kr(\"invalid-api-key\");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().ya()}catch(a){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(a){}o=C.a.SDK_VERSION?fr(C.a.SDK_VERSION,o):null,gl.call(this,n,t,e,function(){try{var t=i.b.auth().ea()}catch(e){t=null}return t},o,yi(di),r)}function kl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new Kr(\"internal-error\",\"Argument validator encountered a required argument after an optional argument.\");i++}if(o=e.length,n.length<i||o<n.length)r=\"Expected \"+(i==o?1==i?\"1 argument\":i+\" arguments\":i+\"-\"+o+\" arguments\")+\" but got \"+n.length+\".\";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Ol.length)throw new Kr(\"internal-error\",\"Argument validator received an unsupported number of arguments.\");n=Ol[i],r=(r?\"\":n+\" argument \")+(e.name?'\"'+e.name+'\" ':\"\")+\"must be \"+e.K+\".\";break t}r=null}}if(r)throw new Kr(\"argument-error\",t+\" failed: \"+r)}(t=gl.prototype).za=function(){var t=this;return this.f?this.f:this.f=Cl(this,kt().then(function(){if(mr()&&!or())return nr();throw new Kr(\"operation-not-supported-in-this-environment\",\"RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.\")}).then(function(){return t.o.g(t.v())}).then(function(e){return t.g=e,ds(t.u,$a,{})}).then(function(e){t.a[_l]=e.recaptchaSiteKey}).s(function(e){throw t.f=null,e}))},t.render=function(){Tl(this);var t=this;return Cl(this,this.za().then(function(){if(null===t.c){var e=t.l;if(!t.i){var n=qn(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!bn&&a&&(a.name||a.type)){if(o=[\"<\",o],a.name&&o.push(' name=\"',pt(a.name),'\"'),a.type){o.push(' type=\"',pt(a.type),'\"');var u={};ft(u,a),delete u.type,a=u}o.push(\">\"),o=o.join(\"\")}return o=i.createElement(o),a&&(s(a)?o.className=a:p(a)?o.className=a.join(\" \"):Un(o,a)),2<r.length&&function(t,e,n){function r(n){n&&e.appendChild(s(n)?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];!y(o)||m(o)&&0<o.nodeType?r(o):F(Bn(o)?H(o):o,r)}}(i,o,r),o}(\"DIV\"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c}))},t.verify=function(){Tl(this);var t=this;return Cl(this,this.render().then(function(e){return new wt(function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){W(t.m,function(t){return t==e})}(t,i),n(e))};t.m.push(i),t.i&&t.g.execute(t.c)}})}))},t.reset=function(){Tl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Tl(this),this.D=!0,this.o.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel(\"RecaptchaVerifier instance has been destroyed.\");if(!this.i){t=qn(this.l);for(var e;e=t.firstChild;)t.removeChild(e)}},I(Il,gl);var Ol=\"First Second Third Fourth Fifth Sixth Seventh Eighth Ninth\".split(\" \");function Nl(t,e){return{name:t||\"\",K:\"a valid string\",optional:!!e,M:s}}function Al(t,e){return{name:t||\"\",K:\"a boolean\",optional:!!e,M:u}}function Dl(t,e){return{name:t||\"\",K:\"a valid object\",optional:!!e,M:m}}function xl(t,e){return{name:t||\"\",K:\"a function\",optional:!!e,M:v}}function Rl(t,e){return{name:t||\"\",K:\"null\",optional:!!e,M:d}}function Pl(t){return{name:t?t+\"Credential\":\"credential\",K:t?\"a valid \"+t+\" credential\":\"a valid credential\",optional:!1,M:function(e){return!!e&&!(!e.la||t&&e.providerId!==t)}}}function Ml(){return{name:\"applicationVerifier\",K:\"an implementation of firebase.auth.ApplicationVerifier\",optional:!1,M:function(t){return!!(t&&s(t.type)&&v(t.verify))}}}function jl(t,e,n,r){return{name:n||\"\",K:t.K+\" or \"+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function Ll(t,e){for(var n in e){var r=e[n].name;t[r]=Ul(r,t[n],e[n].j)}}function Fl(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:S(function(t){return this[t]},n),set:S(function(t,e,n,r){kl(t,[n],[r],!0),this[e]=r},r,n,e[n].vb),enumerable:!0})}}function ql(t,e,n,r){t[e]=Ul(e,n,r)}function Ul(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return kl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split(\".\"))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Ll(Kc.prototype,{Wa:{name:\"applyActionCode\",j:[Nl(\"code\")]},Ka:{name:\"checkActionCode\",j:[Nl(\"code\")]},Za:{name:\"confirmPasswordReset\",j:[Nl(\"code\"),Nl(\"newPassword\")]},Vb:{name:\"createUserWithEmailAndPassword\",j:[Nl(\"email\"),Nl(\"password\")]},Yb:{name:\"fetchSignInMethodsForEmail\",j:[Nl(\"email\")]},fa:{name:\"getRedirectResult\",j:[]},oc:{name:\"isSignInWithEmailLink\",j:[Nl(\"emailLink\")]},uc:{name:\"onAuthStateChanged\",j:[jl(Dl(),xl(),\"nextOrObserver\"),xl(\"opt_error\",!0),xl(\"opt_completed\",!0)]},vc:{name:\"onIdTokenChanged\",j:[jl(Dl(),xl(),\"nextOrObserver\"),xl(\"opt_error\",!0),xl(\"opt_completed\",!0)]},kb:{name:\"sendPasswordResetEmail\",j:[Nl(\"email\"),jl(Dl(\"opt_actionCodeSettings\",!0),Rl(null,!0),\"opt_actionCodeSettings\",!0)]},lb:{name:\"sendSignInLinkToEmail\",j:[Nl(\"email\"),Dl(\"actionCodeSettings\")]},mb:{name:\"setPersistence\",j:[Nl(\"persistence\")]},nb:{name:\"signInAndRetrieveDataWithCredential\",j:[Pl()]},ob:{name:\"signInAnonymously\",j:[]},Nb:{name:\"signInWithCredential\",j:[Pl()]},Ec:{name:\"signInWithCustomToken\",j:[Nl(\"token\")]},Fc:{name:\"signInWithEmailAndPassword\",j:[Nl(\"email\"),Nl(\"password\")]},Gc:{name:\"signInWithEmailLink\",j:[Nl(\"email\"),Nl(\"emailLink\",!0)]},Hc:{name:\"signInWithPhoneNumber\",j:[Nl(\"phoneNumber\"),Ml()]},Ic:{name:\"signInWithPopup\",j:[{name:\"authProvider\",K:\"a valid Auth provider\",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty(\"isOAuthProvider\"))}}]},Jc:{name:\"signInWithRedirect\",j:[{name:\"authProvider\",K:\"a valid Auth provider\",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty(\"isOAuthProvider\"))}}]},Oc:{name:\"updateCurrentUser\",j:[jl({name:\"user\",K:\"an instance of Firebase User\",optional:!1,M:function(t){return!!(t&&t instanceof uc)}},Rl(),\"user\")]},pb:{name:\"signOut\",j:[]},toJSON:{name:\"toJSON\",j:[Nl(null,!0)]},Qc:{name:\"useDeviceLanguage\",j:[]},Rc:{name:\"verifyPasswordResetCode\",j:[Nl(\"code\")]}}),Fl(Kc.prototype,{lc:{name:\"languageCode\",vb:jl(Nl(),Rl(),\"languageCode\")}}),(Kc.Persistence=au).LOCAL=\"local\",Kc.Persistence.SESSION=\"session\",Kc.Persistence.NONE=\"none\",Ll(uc.prototype,{delete:{name:\"delete\",j:[]},bc:{name:\"getIdTokenResult\",j:[Al(\"opt_forceRefresh\",!0)]},F:{name:\"getIdToken\",j:[Al(\"opt_forceRefresh\",!0)]},pc:{name:\"linkAndRetrieveDataWithCredential\",j:[Pl()]},eb:{name:\"linkWithCredential\",j:[Pl()]},qc:{name:\"linkWithPhoneNumber\",j:[Nl(\"phoneNumber\"),Ml()]},rc:{name:\"linkWithPopup\",j:[{name:\"authProvider\",K:\"a valid Auth provider\",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty(\"isOAuthProvider\"))}}]},sc:{name:\"linkWithRedirect\",j:[{name:\"authProvider\",K:\"a valid Auth provider\",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty(\"isOAuthProvider\"))}}]},yc:{name:\"reauthenticateAndRetrieveDataWithCredential\",j:[Pl()]},gb:{name:\"reauthenticateWithCredential\",j:[Pl()]},zc:{name:\"reauthenticateWithPhoneNumber\",j:[Nl(\"phoneNumber\"),Ml()]},Ac:{name:\"reauthenticateWithPopup\",j:[{name:\"authProvider\",K:\"a valid Auth provider\",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty(\"isOAuthProvider\"))}}]},Bc:{name:\"reauthenticateWithRedirect\",j:[{name:\"authProvider\",K:\"a valid Auth provider\",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty(\"isOAuthProvider\"))}}]},reload:{name:\"reload\",j:[]},jb:{name:\"sendEmailVerification\",j:[jl(Dl(\"opt_actionCodeSettings\",!0),Rl(null,!0),\"opt_actionCodeSettings\",!0)]},toJSON:{name:\"toJSON\",j:[Nl(null,!0)]},Nc:{name:\"unlink\",j:[Nl(\"provider\")]},rb:{name:\"updateEmail\",j:[Nl(\"email\")]},sb:{name:\"updatePassword\",j:[Nl(\"password\")]},Pc:{name:\"updatePhoneNumber\",j:[Pl(\"phone\")]},tb:{name:\"updateProfile\",j:[Dl(\"profile\")]}}),Ll(al.prototype,{execute:{name:\"execute\"},render:{name:\"render\"},reset:{name:\"reset\"},getResponse:{name:\"getResponse\"}}),Ll(ol.prototype,{execute:{name:\"execute\"},render:{name:\"render\"},reset:{name:\"reset\"},getResponse:{name:\"getResponse\"}}),Ll(wt.prototype,{ia:{name:\"finally\"},s:{name:\"catch\"},then:{name:\"then\"}}),Fl(Ju.prototype,{appVerificationDisabled:{name:\"appVerificationDisabledForTesting\",vb:Al(\"appVerificationDisabledForTesting\")}}),Ll(Zu.prototype,{confirm:{name:\"confirm\",j:[Nl(\"verificationCode\")]}}),ql(Di,\"fromJSON\",function(t){t=s(t)?JSON.parse(t):t;for(var e,n=[Fi,Ji,no,Mi],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[jl(Nl(),Dl(),\"json\")]),ql(Zi,\"credential\",function(t,e){return new Xi(t,e)},[Nl(\"email\"),Nl(\"password\")]),Ll(Xi.prototype,{w:{name:\"toJSON\",j:[Nl(null,!0)]}}),Ll(Bi.prototype,{ua:{name:\"addScope\",j:[Nl(\"scope\")]},Da:{name:\"setCustomParameters\",j:[Dl(\"customOAuthParameters\")]}}),ql(Bi,\"credential\",Wi,[jl(Nl(),Dl(),\"token\")]),ql(Zi,\"credentialWithLink\",$i,[Nl(\"email\"),Nl(\"emailLink\")]),Ll(zi.prototype,{ua:{name:\"addScope\",j:[Nl(\"scope\")]},Da:{name:\"setCustomParameters\",j:[Dl(\"customOAuthParameters\")]}}),ql(zi,\"credential\",Hi,[jl(Nl(),Dl(),\"token\")]),Ll(Qi.prototype,{ua:{name:\"addScope\",j:[Nl(\"scope\")]},Da:{name:\"setCustomParameters\",j:[Dl(\"customOAuthParameters\")]}}),ql(Qi,\"credential\",Ki,[jl(Nl(),jl(Dl(),Rl()),\"idToken\"),jl(Nl(),Rl(),\"accessToken\",!0)]),Ll(Gi.prototype,{Da:{name:\"setCustomParameters\",j:[Dl(\"customOAuthParameters\")]}}),ql(Gi,\"credential\",Yi,[jl(Nl(),Dl(),\"token\"),Nl(\"secret\",!0)]),Ll(Vi.prototype,{ua:{name:\"addScope\",j:[Nl(\"scope\")]},credential:{name:\"credential\",j:[jl(Nl(),jl(Dl(),Rl()),\"optionsOrIdToken\"),jl(Nl(),Rl(),\"accessToken\",!0)]},Da:{name:\"setCustomParameters\",j:[Dl(\"customOAuthParameters\")]}}),Ll(ji.prototype,{w:{name:\"toJSON\",j:[Nl(null,!0)]}}),Ll(Ri.prototype,{w:{name:\"toJSON\",j:[Nl(null,!0)]}}),ql(io,\"credential\",oo,[Nl(\"verificationId\"),Nl(\"verificationCode\")]),Ll(io.prototype,{Ua:{name:\"verifyPhoneNumber\",j:[Nl(\"phoneNumber\"),Ml()]}}),Ll(eo.prototype,{w:{name:\"toJSON\",j:[Nl(null,!0)]}}),Ll(Kr.prototype,{toJSON:{name:\"toJSON\",j:[Nl(null,!0)]}}),Ll(yo.prototype,{toJSON:{name:\"toJSON\",j:[Nl(null,!0)]}}),Ll(po.prototype,{toJSON:{name:\"toJSON\",j:[Nl(null,!0)]}}),Ll(Il.prototype,{clear:{name:\"clear\",j:[]},render:{name:\"render\",j:[]},verify:{name:\"verify\",j:[]}}),function(){if(void 0===C.a||!C.a.INTERNAL||!C.a.INTERNAL.registerService)throw Error(\"Cannot find the firebase namespace; be sure to include firebase-app.js before this library.\");var t={Auth:Kc,AuthCredential:Di,Error:Kr};ql(t,\"EmailAuthProvider\",Zi,[]),ql(t,\"FacebookAuthProvider\",Bi,[]),ql(t,\"GithubAuthProvider\",zi,[]),ql(t,\"GoogleAuthProvider\",Qi,[]),ql(t,\"TwitterAuthProvider\",Gi,[]),ql(t,\"OAuthProvider\",Vi,[Nl(\"providerId\")]),ql(t,\"SAMLAuthProvider\",Ui,[Nl(\"providerId\")]),ql(t,\"PhoneAuthProvider\",io,[{name:\"auth\",K:\"an instance of Firebase Auth\",optional:!0,M:function(t){return!!(t&&t instanceof Kc)}}]),ql(t,\"RecaptchaVerifier\",Il,[jl(Nl(),{name:\"\",K:\"an HTML element\",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},\"recaptchaContainer\"),Dl(\"recaptchaParameters\",!0),{name:\"app\",K:\"an instance of Firebase App\",optional:!0,M:function(t){return!!(t&&t instanceof C.a.app.App)}}]),C.a.INTERNAL.registerService(\"auth\",function(t,e){return e({INTERNAL:{getUid:E((t=new Kc(t)).getUid,t),getToken:E(t.ac,t),addAuthTokenListener:E(t.Ub,t),removeAuthTokenListener:E(t.Cc,t)}}),t},t,function(t,e){if(\"create\"===t)try{e.auth()}catch(n){}}),C.a.INTERNAL.extendNamespace({User:uc})}()}).apply(\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{});var T=function(){return function(){}}(),I=n(\"fvl4\"),k=(n(\"6Joi\"),function(){function t(){}var e;return e=t,t.enablePersistence=function(t){return{ngModule:e,providers:[{provide:I.b,useValue:!0},{provide:I.d,useValue:t}]}},t}());function O(t){return null==t}function N(t){return\"function\"==typeof t.set}function A(t,e){return N(e)?e:t.ref(e)}function D(t,e){if(\"string\"==typeof t)return e.stringCase();if(N(t))return e.firebaseCase();if(\"function\"==typeof t.exportVal)return e.snapshotCase();throw new Error(\"Expects a string, snapshot, or reference. Got: \"+typeof t)}var x,R=n(\"6blF\"),P=n(\"67Y/\"),M=n(\"h9Dq\"),j=new(n(\"CS9Q\").a)(M.a),L=n(\"FFOo\"),F=n(\"G5J1\"),q=n(\"F/XL\");x||(x={});var U=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue=\"N\"===t}return t.prototype.observe=function(t){switch(this.kind){case\"N\":return t.next&&t.next(this.value);case\"E\":return t.error&&t.error(this.error);case\"C\":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case\"N\":return t&&t(this.value);case\"E\":return e&&e(this.error);case\"C\":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&\"function\"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){var t;switch(this.kind){case\"N\":return Object(q.a)(this.value);case\"E\":return t=this.error,new R.a(function(e){return e.error(t)});case\"C\":return Object(F.b)()}throw new Error(\"unexpected notification kind value\")},t.createNext=function(e){return void 0!==e?new t(\"N\",e):t.undefinedValueNotification},t.createError=function(e){return new t(\"E\",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t(\"C\"),t.undefinedValueNotification=new t(\"N\",void 0),t}(),V=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new B(t,this.delay,this.scheduler))},t}(),B=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.delay=n,i.scheduler=r,i.queue=[],i.active=!1,i.errored=!1,i}return a.d(e,t),e.dispatch=function(t){for(var e=t.source,n=e.queue,r=t.scheduler,i=t.destination;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){var o=Math.max(0,n[0].time-r.now());this.schedule(t,o)}else this.unsubscribe(),e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.destination.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(!0!==this.errored){var e=this.scheduler,n=new W(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(U.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.scheduleNotification(U.createComplete()),this.unsubscribe()},e}(L.a),W=function(){return function(t,e){this.time=t,this.notification=e}}(),z=n(\"S1nX\");function H(t,e,n){return void 0===n&&(n=\"on\"),new R.a(function(r){var i=t[n](e,function(t,e){r.next({snapshot:t,prevKey:e}),\"once\"==n&&r.complete()},r.error.bind(r));return\"on\"==n?{unsubscribe:function(){t.off(e,i)}}:{unsubscribe:function(){}}}).pipe(Object(P.a)(function(t){var n=t.snapshot,r=t.prevKey,i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),function(t,e){void 0===e&&(e=j);var n=0 instanceof Date&&!isNaN(0)?0-e.now():Math.abs(0);return function(t){return t.lift(new V(n,e))}}(),Object(z.a)())}var Q=n(\"p0ib\"),K=n(\"15JJ\"),G=n(\"dC0D\"),Y=n(\"ad02\");function X(t,e){for(var n=t.length,r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function J(t,e){var n=e.payload,r=e.prevKey,i=e.key,o=X(t,i),a=function(t,e){if(O(e))return 0;var n=X(t,e);return-1===n?t.length:n+1}(t,r);switch(e.type){case\"value\":if(e.payload&&e.payload.exists()){var s=null;e.payload.forEach(function(e){var n={payload:e,type:\"value\",prevKey:s,key:e.key};return s=e.key,t=t.concat([n]),!1})}return t;case\"child_added\":if(o>-1){var u=t[o-1];(u&&u.key||null)!=r&&(t=t.filter(function(t){return t.payload.key!==n.key})).splice(a,0,e)}else{if(null==r)return[e].concat(t);(t=t.slice()).splice(a,0,e)}return t;case\"child_removed\":return t.filter(function(t){return t.payload.key!==n.key});case\"child_changed\":return t.map(function(t){return t.payload.key===i?e:t});case\"child_moved\":if(o>-1){var c=t.splice(o,1)[0];return(t=t.slice()).splice(a,0,c),t}return t;default:return t}}function Z(t){return(O(t)||0===t.length)&&(t=[\"child_added\",\"child_removed\",\"child_changed\",\"child_moved\"]),t}function $(t,e){return function(t,e){return H(t,\"value\",\"once\").pipe(Object(K.a)(function(n){var r=[Object(q.a)(n)];return e.forEach(function(e){return r.push(H(t,e))}),Q.a.apply(void 0,r).pipe(Object(G.a)(J,[]))}),Object(Y.a)())}(t,e=Z(e))}function tt(t,e){var n=(e=Z(e)).map(function(e){return H(t,e)});return Q.a.apply(void 0,n)}var et=n(\"MGBS\"),nt=n(\"zotm\"),rt=function(){function t(t,e){this.observables=t,this.project=e}return t.prototype.call=function(t,e){return e.subscribe(new it(t,this.observables,this.project))},t}(),it=function(t){function e(e,n,r){var i=t.call(this,e)||this;i.observables=n,i.project=r,i.toRespond=[];var o=n.length;i.values=new Array(o);for(var a=0;a<o;a++)i.toRespond.push(a);for(a=0;a<o;a++){var s=n[a];i.add(Object(nt.a)(i,s,s,a))}return i}return a.d(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values[n]=e;var o=this.toRespond;if(o.length>0){var a=o.indexOf(n);-1!==a&&o.splice(a,1)}},e.prototype.notifyComplete=function(){},e.prototype._next=function(t){if(0===this.toRespond.length){var e=[t].concat(this.values);this.project?this._tryProject(e):this.destination.next(e)}},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)},e}(et.a),ot=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new at(t,this.predicate))},t}(),at=function(t){function e(e,n){var r=t.call(this,e)||this;return r.predicate=n,r.skipping=!0,r.index=0,r}return a.d(e,t),e.prototype._next=function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)},e.prototype.tryCallPredicate=function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(n){this.destination.error(n)}},e}(L.a);function st(t,e){return function(n,r){return D(n,{stringCase:function(){return t.child(n)[e](r)},firebaseCase:function(){return n[e](r)},snapshotCase:function(){return n.ref[e](r)}})}}function ut(t){return function(){return H(t,\"value\")}}var ct=function(){function t(t,e,n,r,i){this.scheduler=new _.a(i,r),this.database=i.runOutsideAngular(function(){return Object(w.e)(t,e).database(n||void 0)})}return t.prototype.list=function(t,e){var n=A(this.database,t),r=n;return e&&(r=e(n)),function(t,e){return{query:t,update:st(t.ref,\"update\"),set:st(t.ref,\"set\"),push:function(e){return t.ref.push(e)},remove:(n=t.ref,function(t){return t?D(t,{stringCase:function(){return n.child(t).remove()},firebaseCase:function(){return t.remove()},snapshotCase:function(){return t.ref.remove()}}):n.remove()}),snapshotChanges:function(n){var r=$(t,n);return e.scheduler.keepUnstableUntilFirst(e.scheduler.runOutsideAngular(r))},stateChanges:function(n){var r=tt(t,n);return e.scheduler.keepUnstableUntilFirst(e.scheduler.runOutsideAngular(r))},auditTrail:function(n){var r=function(t,e){return function(t,e){return function(t){return H(t,\"value\").pipe(Object(P.a)(function(t){var e;return t.payload.forEach(function(t){return e=t.key,!1}),{data:t,lastKeyToLoad:e}}))}(t).pipe(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){var n;return\"function\"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new rt(t,n))}}(e),Object(P.a)(function(t){var e=t[1],n=t[0].lastKeyToLoad,r=e.map(function(t){return t.key});return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(n=function(t){return-1===t.loadedKeys.indexOf(t.lastKeyToLoad)},function(t){return t.lift(new ot(n))}),Object(P.a)(function(t){return t.actions}));var n}(t,tt(t,e).pipe(Object(G.a)(function(t,e){return t.concat([e])},[])))}(t,n);return e.scheduler.keepUnstableUntilFirst(e.scheduler.runOutsideAngular(r))},valueChanges:function(n){var r=$(t,n);return e.scheduler.keepUnstableUntilFirst(e.scheduler.runOutsideAngular(r)).pipe(Object(P.a)(function(t){return t.map(function(t){return t.payload.val()})}))}};var n}(r,this)},t.prototype.object=function(t){var e,n,r=A(this.database,t);return n=this,{query:e=r,snapshotChanges:function(){var t=ut(e)();return n.scheduler.keepUnstableUntilFirst(n.scheduler.runOutsideAngular(t))},update:function(t){return e.ref.update(t)},set:function(t){return e.ref.set(t)},remove:function(){return e.ref.remove()},valueChanges:function(){var t=ut(e)();return n.scheduler.keepUnstableUntilFirst(n.scheduler.runOutsideAngular(t)).pipe(Object(P.a)(function(t){return t.payload.exists()?t.payload.val():null}))}}},t.prototype.createPushId=function(){return this.database.ref().push().key},t}(),lt=(n(\"NSPt\"),function(){return function(){}}()),ht=function(){return function(){}}(),ft=r.mb(i,[l],function(t){return r.vb([r.wb(512,r.j,r.bb,[[8,[h.a,g]],[3,r.j],r.x]),r.wb(5120,r.u,r.kb,[[3,r.u]]),r.wb(4608,p.k,p.j,[r.u,[2,p.q]]),r.wb(5120,r.c,r.hb,[]),r.wb(5120,r.s,r.ib,[]),r.wb(5120,r.t,r.jb,[]),r.wb(4608,b.b,b.k,[p.c]),r.wb(6144,r.G,null,[b.b]),r.wb(4608,b.e,b.g,[]),r.wb(5120,b.c,function(t,e,n,r,i,o,a,s){return[new b.i(t,e,n),new b.n(r),new b.m(i,o,a,s)]},[p.c,r.z,r.B,p.c,p.c,b.e,r.cb,[2,b.f]]),r.wb(4608,b.d,b.d,[b.c,r.z]),r.wb(135680,b.l,b.l,[p.c]),r.wb(4608,b.j,b.j,[b.d,b.l,r.c]),r.wb(6144,r.E,null,[b.j]),r.wb(6144,b.o,null,[b.l]),r.wb(4608,r.M,r.M,[r.z]),r.wb(4608,o.a,o.a,[r.z,r.g]),r.wb(4608,o.Cb,o.Cb,[o.a,r.j,r.q,p.c]),r.wb(4608,o.Fb,o.Fb,[o.a,r.j,r.q,p.c]),r.wb(5120,d.a,d.A,[d.m]),r.wb(4608,d.e,d.e,[]),r.wb(6144,d.h,null,[d.e]),r.wb(135680,d.q,d.q,[d.m,r.w,r.i,r.q,d.h]),r.wb(4608,d.g,d.g,[]),r.wb(5120,d.E,d.w,[d.m,p.n,d.i]),r.wb(5120,d.j,d.D,[d.B]),r.wb(5120,r.b,function(t){return[t]},[d.j]),r.wb(5120,w.b,w.e,[w.d,[2,w.c]]),r.wb(4608,E.a,E.a,[w.d,[2,w.c],r.B,r.z]),r.wb(4608,I.a,I.a,[w.d,[2,w.c],[2,I.b],[2,I.c],r.B,r.z,[2,I.d]]),r.wb(4608,ct,ct,[w.d,[2,w.c],[2,_.b],r.B,r.z]),r.wb(4608,c,c,[]),r.wb(4608,u,u,[]),r.wb(1073742336,p.b,p.b,[]),r.wb(1024,r.l,b.p,[]),r.wb(1024,r.y,function(){return[d.v()]},[]),r.wb(512,d.B,d.B,[r.q]),r.wb(256,o.Ib,void 0,[]),r.wb(1024,r.d,function(t,e,n,r){return[b.q(t),d.C(e),o.Jb(n,r)]},[[2,r.y],d.B,o.Ib,p.c]),r.wb(512,r.e,r.e,[[2,r.d]]),r.wb(131584,r.g,r.g,[r.z,r.cb,r.q,r.l,r.j,r.e]),r.wb(1073742336,r.f,r.f,[r.g]),r.wb(1073742336,b.a,b.a,[[3,b.a]]),r.wb(1073742336,o.Ab,o.Ab,[]),r.wb(1024,d.u,d.y,[[3,d.m]]),r.wb(512,d.s,d.c,[]),r.wb(512,d.b,d.b,[]),r.wb(256,d.i,{},[]),r.wb(1024,p.g,d.x,[p.m,[2,p.a],d.i]),r.wb(512,p.f,p.f,[p.g]),r.wb(512,r.i,r.i,[]),r.wb(512,r.w,r.J,[r.i,[2,r.K]]),r.wb(1024,d.k,function(){return[[{path:\"\",redirectTo:\"home\",pathMatch:\"full\"},{path:\"home\",loadChildren:\"./home/home.module#HomePageModule\"},{path:\"play\",loadChildren:\"./play/play.module#PlayPageModule\"}]]},[]),r.wb(512,d.l,o.Bb,[]),r.wb(1024,d.m,d.z,[r.g,d.s,d.b,p.f,r.q,r.w,r.i,d.k,d.i,[2,d.r],[2,d.l]]),r.wb(1073742336,d.o,d.o,[[2,d.u],[2,d.m]]),r.wb(1073742336,ht,ht,[]),r.wb(1073742336,w.a,w.a,[]),r.wb(1073742336,T,T,[]),r.wb(1073742336,k,k,[]),r.wb(1073742336,lt,lt,[]),r.wb(1073742336,i,i,[]),r.wb(256,r.ab,!0,[]),r.wb(256,w.d,null,[]),r.wb(256,w.c,void 0,[])])});Object(r.T)(),b.h().bootstrapModuleFactory(ft).catch(function(t){return console.log(t)})},zVF4:function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(\"+7AZ\"),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:\"${JSCORE_VERSION}\"},o=function(t,e){if(!t)throw a(e)},a=function(t){return new Error(\"Firebase Database (\"+i.SDK_VERSION+\") INTERNAL ASSERT FAILED: \"+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+\"+/=\"},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+\"-_.\"},HAS_NATIVE_SUPPORT:\"function\"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error(\"encodeByteArray takes an array as a parameter\");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&s)<<2|c>>6,h=63&c;u||(h=64,a||(l=64)),r.push(n[o>>2],n[(3&o)<<4|s>>4],n[l],n[h])}return r.join(\"\")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join(\"\")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();r.push(o<<2|a>>4),64!==s&&(r.push(a<<4&240|s>>2),64!==u&&r.push(s<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},c=function(t){try{return u.decodeString(t,!0)}catch(e){console.error(\"base64Decode failed: \",e)}return null};function l(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=l(t[n],e[n]));return t}var h=function(){function t(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),\"function\"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function f(){return\"undefined\"!=typeof navigator&&\"string\"==typeof navigator.userAgent?navigator.userAgent:\"\"}var d=\"FirebaseError\",p=function(t){function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name=d,Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,y.prototype.create),i}return r.__extends(e,t),e}(Error),y=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+\"/\"+t,o=this.errors[t],a=o?function(t,e){return t.replace(v,function(t,n){var r=e[n];return null!=r?r.toString():\"<\"+n+\"?>\"})}(o,r):\"Error\",s=new p(i,this.serviceName+\": \"+a+\" (\"+i+\").\"),u=0,c=Object.keys(r);u<c.length;u++){var l=c[u];\"_\"!==l.slice(-1)&&(l in s&&console.warn('Overwriting FirebaseError base field \"'+l+'\" can cause unexpected behavior.'),s[l]=r[l])}return s},t}(),v=/\\{\\$([^}]+)}/g;function m(t){return JSON.parse(t)}var g=function(t){var e={},n={},r={},i=\"\";try{var o=t.split(\".\");e=m(c(o[0])||\"\"),n=m(c(o[1])||\"\"),i=o[2],r=n.d||{},delete n.d}catch(a){}return{header:e,claims:n,data:r,signature:i}},b=function(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])},w=function(t,e){return b(e,function(e,n){t[e]=n}),t},_=function(t,e,n){for(var r in t)if(e.call(n,t[r],r,t))return r},E=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if(\"string\"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,a=this.chain_[0],s=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^s&(u^c),o=1518500249):(i=s^u^c,o=1859775393):r<60?(i=s&u|c&(s|u),o=2400959708):(i=s^u^c,o=3395469782);var h=(a<<5|a>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(s<<30|s>>>2),s=a,a=h}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if(\"string\"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}(),S=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error(\"Missing Observer.\");void 0===(r=function(t,e){if(\"object\"!=typeof t||null===t)return!1;for(var n=0,r=[\"next\",\"error\",\"complete\"];n<r.length;n++){var i=r[n];if(i in t&&\"function\"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=C),void 0===r.error&&(r.error=C),void 0===r.complete&&(r.complete=C);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){\"undefined\"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function C(){}function T(t,e,n){var r=\"\";switch(e){case 1:r=n?\"first\":\"First\";break;case 2:r=n?\"second\":\"Second\";break;case 3:r=n?\"third\":\"Third\";break;case 4:r=n?\"fourth\":\"Fourth\";break;default:throw new Error(\"errorPrefix called with argumentNumber > 4.  Need to update it?\")}return t+\" failed: \"+r+\" argument \"}e.CONSTANTS=i,e.Deferred=h,e.ErrorFactory=y,e.FirebaseError=p,e.Sha1=E,e.assert=o,e.assertionError=a,e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){t.apply(void 0,n)}).catch(function(t){e&&e(t)})}},e.base64=u,e.base64Decode=c,e.base64Encode=function(t){var e=s(t);return u.encodeByteArray(e,!0)},e.clone=function(t){return w({},t)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var n=new S(t,e);return n.subscribe.bind(n)},e.decode=g,e.deepCopy=function(t){return l(void 0,t)},e.deepExtend=l,e.errorPrefix=T,e.every=function(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&!e(n,t[n]))return!1;return!0},e.extend=w,e.findKey=_,e.findValue=function(t,e,n){var r=_(t,e,n);return r&&t[r]},e.forEach=b,e.getAnyKey=function(t){for(var e in t)return e},e.getCount=function(t){var e=0;for(var n in t)e++;return e},e.getUA=f,e.getValues=function(t){var e=[],n=0;for(var r in t)e[n++]=t[r];return e},e.isAdmin=function(t){var e=g(t).claims;return\"object\"==typeof e&&!0===e.admin},e.isBrowser=function(){return\"object\"==typeof self&&self.self===self},e.isEmpty=function(t){for(var e in t)return!1;return!0},e.isMobileCordova=function(){return\"undefined\"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())},e.isNode=function(){try{return\"[object process]\"===Object.prototype.toString.call(global.process)}catch(t){return!1}},e.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},e.isNonNullObject=function(t){return\"object\"==typeof t&&null!==t},e.isReactNative=function(){return\"object\"==typeof navigator&&\"ReactNative\"===navigator.product},e.isValidFormat=function(t){var e=g(t).claims;return!!e&&\"object\"==typeof e&&e.hasOwnProperty(\"iat\")},e.isValidTimestamp=function(t){var e=g(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return\"object\"==typeof e&&(e.hasOwnProperty(\"nbf\")?r=e.nbf:e.hasOwnProperty(\"iat\")&&(r=e.iat),i=e.hasOwnProperty(\"exp\")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},e.issuedAtTime=function(t){var e=g(t).claims;return\"object\"==typeof e&&e.hasOwnProperty(\"iat\")?e.iat:null},e.jsonEval=m,e.map=function(t,e,n){var r={};for(var i in t)r[i]=e.call(n,t[i],i,t);return r},e.querystring=function(t){var e=[];return b(t,function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+\"=\"+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+\"=\"+encodeURIComponent(n))}),e.length?\"&\"+e.join(\"&\"):\"\"},e.querystringDecode=function(t){var e={};return t.replace(/^\\?/,\"\").split(\"&\").forEach(function(t){if(t){var n=t.split(\"=\");e[n[0]]=n[1]}}),e},e.safeGet=function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;o(++r<t.length,\"Surrogate pair missing trail surrogate.\"),i=65536+(a<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},e.stringify=function(t){return JSON.stringify(t)},e.validateArgCount=function(t,e,n,r){var i;if(r<e?i=\"at least \"+e:r>n&&(i=0===n?\"none\":\"no more than \"+n),i)throw new Error(t+\" failed: Was called with \"+r+(1===r?\" argument.\":\" arguments.\")+\" Expects \"+i+\".\")},e.validateCallback=function(t,e,n,r){if((!r||n)&&\"function\"!=typeof n)throw new Error(T(t,e,r)+\"must be a valid function.\")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&(\"object\"!=typeof n||null===n))throw new Error(T(t,e,r)+\"must be a valid context object.\")},e.validateNamespace=function(t,e,n,r){if((!r||n)&&\"string\"!=typeof n)throw new Error(T(t,e,r)+\"must be a valid firebase namespace.\")}},zotm:function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return a});var r=n(\"rPjj\"),i=n(\"Fxb1\"),o=n(\"6blF\");function a(t,e,n,a,s){if(void 0===s&&(s=new r.a(t,n,a)),!s.closed)return e instanceof o.a?e.subscribe(s):Object(i.a)(e)(s)}}},[[0,2]]]);","extractedComments":[]}